import{b as ga,u as J,c as ne,j as e}from"./vendor-query-BtlmzfbD.js";import{r as x}from"./vendor-router-CyR0tpch.js";import{u as ha,e as I,g as he,p as ja}from"./index-D5WmqZkX.js";import{C as $,c as Y}from"./Card-CVFC4agM.js";import{B as b}from"./Button-C8xCGhNf.js";import{I as c}from"./Input-DPOK3q6H.js";import{S as g}from"./Select-DLsgzIyk.js";import{M as Z}from"./Modal-it_GQaMG.js";import{B as je}from"./Badge-CLufSCSl.js";import{P as _a,e as ba,$ as ya,X as va,U as Ae,a7 as fa,i as Na,m as be,a0 as le,w as Ca,O as Oe,K as wa,a8 as Be,G as Re,p as oe,a9 as Ue,g as ie,t as M,F as z,aa as B,ab as Ie,ac as W,ad as $e,l as _e,Z as Sa,ae as Da,af as Fa,ag as Ea}from"./vendor-icons-BMeEPn6p.js";import"./vendor-react-Cgg2GOmP.js";import"./vendor-axios-B9ygI19o.js";const Ta=[{value:"",label:"Todos los estados"},{value:"active",label:"Activo"},{value:"inactive",label:"Inactivo"},{value:"on_leave",label:"En licencia"},{value:"terminated",label:"Terminado"}],ze=[{value:"",label:"Todos los departamentos"},{value:"engineering",label:"Ingeniería"},{value:"hr",label:"Recursos Humanos"},{value:"finance",label:"Finanzas"},{value:"sales",label:"Ventas"},{value:"marketing",label:"Marketing"},{value:"operations",label:"Operaciones"},{value:"legal",label:"Legal"}],Ve=[{value:"active",label:"Activo"},{value:"inactive",label:"Inactivo"},{value:"on_leave",label:"En licencia"},{value:"terminated",label:"Terminado"},{value:"suspended",label:"Suspendido"}],ye=[{value:"full_time",label:"Tiempo Completo"},{value:"part_time",label:"Medio Tiempo"},{value:"contractor",label:"Contratista"},{value:"intern",label:"Pasante"}],ve=[{value:"indefinite",label:"Termino Indefinido"},{value:"fixed_term",label:"Termino Fijo"},{value:"work_or_labor",label:"Obra o Labor"},{value:"apprentice",label:"Aprendizaje"}],Qe=[{value:"CC",label:"Cedula de Ciudadania"},{value:"CE",label:"Cedula de Extranjeria"},{value:"PA",label:"Pasaporte"},{value:"TI",label:"Tarjeta de Identidad"},{value:"NIT",label:"NIT"}],T=o=>{if(!o||o===0)return"cero pesos";const h=["","uno","dos","tres","cuatro","cinco","seis","siete","ocho","nueve"],j=["diez","once","doce","trece","catorce","quince","dieciseis","diecisiete","dieciocho","diecinueve"],y=["","","veinte","treinta","cuarenta","cincuenta","sesenta","setenta","ochenta","noventa"],v=["","ciento","doscientos","trescientos","cuatrocientos","quinientos","seiscientos","setecientos","ochocientos","novecientos"],p=Math.floor(parseFloat(o));if(p===0)return"cero pesos";const _=i=>i===0?"":i<10?h[i]:i<20?j[i-10]:i<30?i===20?"veinte":"veinti"+h[i-20]:i<100?y[Math.floor(i/10)]+(i%10>0?" y "+h[i%10]:""):i===100?"cien":i<1e3?v[Math.floor(i/100)]+(i%100>0?" "+_(i%100):""):i.toString(),t=[];let a=p;if(a>=1e6){const i=Math.floor(a/1e6);t.push(i===1?"un millon":_(i)+" millones"),a%=1e6}if(a>=1e3){const i=Math.floor(a/1e3);t.push(i===1?"mil":_(i)+" mil"),a%=1e3}return a>0&&t.push(_(a)),t.join(" ").trim()+" pesos"},Ge=(o,h)=>{if(!o||!h)return null;const j=new Date(o),y=new Date(h);if(y<=j)return null;const v=(y.getFullYear()-j.getFullYear())*12+(y.getMonth()-j.getMonth()),p=Math.ceil((y-j)/(1e3*60*60*24));return v>=12&&v%12===0?{value:v/12,unit:"years"}:v>=1?{value:v,unit:"months"}:p>=7&&p%7===0?{value:p/7,unit:"weeks"}:{value:p,unit:"days"}},ka={indefinite:"Termino Indefinido",fixed_term:"Termino Fijo",work_or_labor:"Obra o Labor",apprentice:"Aprendizaje"},Ke=[{value:"days",label:"Dias"},{value:"weeks",label:"Semanas"},{value:"months",label:"Meses"},{value:"years",label:"Anos"}],qa={days:"dias",weeks:"semanas",months:"meses",years:"anos"},X={active:"Activo",inactive:"Inactivo",on_leave:"En licencia",terminated:"Terminado",suspended:"Suspendido"},R={active:"bg-green-100 text-green-700",inactive:"bg-gray-100 text-gray-700",on_leave:"bg-yellow-100 text-yellow-700",terminated:"bg-red-100 text-red-700",suspended:"bg-orange-100 text-orange-700"},La={full_time:"Tiempo Completo",part_time:"Medio Tiempo",contractor:"Contratista",intern:"Pasante"};function Ma({employee:o,employees:h,contractTemplates:j=[],departmentOptions:y=[],onSubmit:v,onCancel:p,loading:_,error:t}){const[a,i]=x.useState({first_name:"",last_name:"",employee_number:"",job_title:"",department:"",employment_status:"active",employment_type:"full_time",hire_date:"",termination_date:"",cost_center:"",date_of_birth:"",emergency_contact_name:"",emergency_contact_phone:"",supervisor_id:"",contract_type:"indefinite",contract_template_id:"",contract_start_date:"",contract_end_date:"",contract_duration_value:"",contract_duration_unit:"months",trial_period_days:"60",salary:"",food_allowance:"",transport_allowance:"",payment_frequency:"monthly",work_city:"",identification_type:"CC",identification_number:"",place_of_birth:"",nationality:"Colombiana",address:"",phone:"",personal_email:""}),[w,d]=x.useState("basico");x.useEffect(()=>{o&&i({first_name:o.first_name||"",last_name:o.last_name||"",employee_number:o.employee_number||"",job_title:o.job_title||"",department:o.department||"",employment_status:o.employment_status||"active",employment_type:o.employment_type||"full_time",hire_date:o.hire_date?o.hire_date.split("T")[0]:"",termination_date:o.termination_date?o.termination_date.split("T")[0]:"",cost_center:o.cost_center||"",date_of_birth:o.date_of_birth?o.date_of_birth.split("T")[0]:"",emergency_contact_name:o.emergency_contact_name||"",emergency_contact_phone:o.emergency_contact_phone||"",supervisor_id:o.supervisor_id||"",contract_type:o.contract_type||"indefinite",contract_template_id:o.contract_template_id||"",contract_start_date:o.contract_start_date?o.contract_start_date.split("T")[0]:"",contract_end_date:o.contract_end_date?o.contract_end_date.split("T")[0]:"",contract_duration_value:o.contract_duration_value||"",contract_duration_unit:o.contract_duration_unit||"months",trial_period_days:o.trial_period_days||"60",salary:o.salary||"",food_allowance:o.food_allowance||"",transport_allowance:o.transport_allowance||"",payment_frequency:o.payment_frequency||"monthly",work_city:o.work_city||"",identification_type:o.identification_type||"CC",identification_number:o.identification_number||"",place_of_birth:o.place_of_birth||"",nationality:o.nationality||"Colombiana",address:o.address||"",phone:o.phone||"",personal_email:o.personal_email||""})},[o]),x.useEffect(()=>{const l=Ge(a.contract_start_date,a.contract_end_date);l&&i(N=>({...N,contract_duration_value:l.value.toString(),contract_duration_unit:l.unit}))},[a.contract_start_date,a.contract_end_date]);const P=l=>{l.preventDefault();const N={...a};Object.keys(N).forEach(f=>{N[f]===""&&(N[f]=null)}),v(N)},q=[{value:"",label:"Junta Directiva"},...h.filter(l=>l.id!==o?.id).map(l=>({value:l.id,label:`${l.full_name} - ${l.job_title||"Sin cargo"}`}))],U=[{id:"basico",label:"Datos Básicos",icon:ie},{id:"laboral",label:"Laboral",icon:oe},{id:"contrato",label:"Contrato",icon:z},{id:"compensacion",label:"Compensación",icon:B},{id:"personal",label:"Personal",icon:W}];return e.jsxs("form",{onSubmit:P,className:"space-y-6",children:[t&&e.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-700",children:[e.jsx(_e,{className:"w-5 h-5 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:t})]}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-4",children:U.map(l=>e.jsxs("button",{type:"button",onClick:()=>d(l.id),className:`py-2 px-1 border-b-2 font-medium text-sm flex items-center gap-2 ${w===l.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(l.icon,{className:"w-4 h-4"}),l.label]},l.id))})}),w==="basico"&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(c,{label:"Nombre *",value:a.first_name,onChange:l=>i({...a,first_name:l.target.value}),placeholder:"Nombre del empleado",required:!0}),e.jsx(c,{label:"Apellido *",value:a.last_name,onChange:l=>i({...a,last_name:l.target.value}),placeholder:"Apellido del empleado",required:!0})]})}),w==="laboral"&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(c,{label:"Numero de Empleado",value:a.employee_number,onChange:l=>i({...a,employee_number:l.target.value}),placeholder:"EMP-001"}),e.jsx(c,{label:"Cargo",value:a.job_title,onChange:l=>i({...a,job_title:l.target.value}),placeholder:"Ej: Desarrollador Senior"}),e.jsx(g,{label:"Departamento",options:y,value:a.department,onChange:l=>i({...a,department:l.target.value})}),e.jsx(c,{label:"Centro de Costo",value:a.cost_center,onChange:l=>i({...a,cost_center:l.target.value}),placeholder:"Ej: CC-100"}),e.jsx(g,{label:"Estado Laboral",options:Ve,value:a.employment_status,onChange:l=>i({...a,employment_status:l.target.value})}),e.jsx(g,{label:"Tipo de Empleo",options:ye,value:a.employment_type,onChange:l=>i({...a,employment_type:l.target.value})}),e.jsx("div",{children:e.jsx(g,{label:"Jefe Inmediato",options:q,value:a.supervisor_id,onChange:l=>i({...a,supervisor_id:l.target.value})})}),e.jsx(c,{label:"Fecha de Contratacion",type:"date",value:a.hire_date,onChange:l=>i({...a,hire_date:l.target.value})})]})}),w==="contrato"&&e.jsxs("div",{className:"space-y-4",children:[a.contract_type==="indefinite"&&e.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg text-sm text-blue-700",children:[e.jsx("strong",{children:"Contrato a Término Indefinido:"})," No requiere fecha de finalización ni duración específica."]}),a.contract_type==="fixed_term"&&e.jsxs("div",{className:"p-3 bg-amber-50 border border-amber-200 rounded-lg text-sm text-amber-700",children:[e.jsx("strong",{children:"Contrato a Término Fijo:"})," Requiere fecha de finalización y duración del contrato."]}),a.contract_type==="work_or_labor"&&e.jsxs("div",{className:"p-3 bg-purple-50 border border-purple-200 rounded-lg text-sm text-purple-700",children:[e.jsx("strong",{children:"Contrato por Obra o Labor:"})," Vinculado a la duración de una obra o labor específica."]}),a.contract_type==="apprentice"&&e.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg text-sm text-green-700",children:[e.jsx("strong",{children:"Contrato de Aprendizaje:"})," Para practicantes y aprendices en formación."]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(g,{label:"Tipo de Contrato",options:j.length>0?j:ve,value:j.length>0?a.contract_template_id:a.contract_type,onChange:l=>{if(j.length>0)i({...a,contract_template_id:l.target.value});else{const N=l.target.value,f={contract_type:N};N==="indefinite"&&(f.contract_end_date="",f.contract_duration_value="",f.contract_duration_unit="months"),i({...a,...f})}}}),e.jsx(c,{label:"Dias de Periodo de Prueba",type:"number",value:a.trial_period_days,onChange:l=>i({...a,trial_period_days:l.target.value}),placeholder:a.contract_type==="apprentice"?"0":"60"}),e.jsx(c,{label:"Fecha de Inicio del Contrato",type:"date",value:a.contract_start_date,onChange:l=>i({...a,contract_start_date:l.target.value}),required:!0}),a.contract_type!=="indefinite"&&e.jsx(c,{label:"Fecha de Fin del Contrato",type:"date",value:a.contract_end_date,onChange:l=>i({...a,contract_end_date:l.target.value}),min:a.contract_start_date,required:a.contract_type==="fixed_term"}),a.contract_type!=="indefinite"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Duración del Contrato"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(c,{type:"number",value:a.contract_duration_value,onChange:l=>i({...a,contract_duration_value:l.target.value}),placeholder:"12",className:"flex-1"}),e.jsx(g,{options:Ke,value:a.contract_duration_unit,onChange:l=>i({...a,contract_duration_unit:l.target.value}),className:"w-32"})]})]}),a.employment_status==="terminated"&&e.jsx(c,{label:"Fecha de Terminacion",type:"date",value:a.termination_date,onChange:l=>i({...a,termination_date:l.target.value})})]})]}),w==="compensacion"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(c,{label:"Salario Mensual",type:"number",value:a.salary,onChange:l=>i({...a,salary:l.target.value}),placeholder:"2500000"}),a.salary&&e.jsx("p",{className:"text-xs text-gray-500 mt-1 italic",children:T(a.salary)})]}),e.jsxs("div",{children:[e.jsx(c,{label:"Auxilio de Alimentacion",type:"number",value:a.food_allowance,onChange:l=>i({...a,food_allowance:l.target.value}),placeholder:"0"}),a.food_allowance>0&&e.jsx("p",{className:"text-xs text-gray-500 mt-1 italic",children:T(a.food_allowance)})]}),e.jsxs("div",{children:[e.jsx(c,{label:"Auxilio de Transporte",type:"number",value:a.transport_allowance,onChange:l=>i({...a,transport_allowance:l.target.value}),placeholder:"140606"}),a.transport_allowance>0&&e.jsx("p",{className:"text-xs text-gray-500 mt-1 italic",children:T(a.transport_allowance)})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(g,{label:"Periodicidad de Pago",options:[{value:"weekly",label:"Semanal"},{value:"biweekly",label:"Quincenal"},{value:"monthly",label:"Mensual"}],value:a.payment_frequency,onChange:l=>i({...a,payment_frequency:l.target.value})}),e.jsx(c,{label:"Ciudad de Labores",value:a.work_city,onChange:l=>i({...a,work_city:l.target.value}),placeholder:"Ej: Bogotá D.C."})]}),(a.salary||a.food_allowance||a.transport_allowance)&&e.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[e.jsxs("p",{className:"text-sm text-green-700",children:[e.jsx("span",{className:"font-medium",children:"Compensacion Total: "}),"$",((parseFloat(a.salary)||0)+(parseFloat(a.food_allowance)||0)+(parseFloat(a.transport_allowance)||0)).toLocaleString("es-CO")]}),e.jsx("p",{className:"text-xs text-green-600 mt-1 italic",children:T((parseFloat(a.salary)||0)+(parseFloat(a.food_allowance)||0)+(parseFloat(a.transport_allowance)||0))})]})]}),w==="personal"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Identificacion"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(g,{label:"Tipo de Documento",options:Qe,value:a.identification_type,onChange:l=>i({...a,identification_type:l.target.value})}),e.jsx(c,{label:"Numero de Documento",value:a.identification_number,onChange:l=>i({...a,identification_number:l.target.value}),placeholder:"1234567890"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Datos Personales"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(c,{label:"Fecha de Nacimiento",type:"date",value:a.date_of_birth,onChange:l=>i({...a,date_of_birth:l.target.value})}),e.jsx(c,{label:"Lugar de Nacimiento",value:a.place_of_birth,onChange:l=>i({...a,place_of_birth:l.target.value}),placeholder:"Bogota, Colombia"}),e.jsx(c,{label:"Nacionalidad",value:a.nationality,onChange:l=>i({...a,nationality:l.target.value}),placeholder:"Colombiana"}),e.jsx(c,{label:"Telefono",value:a.phone,onChange:l=>i({...a,phone:l.target.value}),placeholder:"+57 300 123 4567"}),e.jsx(c,{label:"Correo Personal",type:"email",value:a.personal_email,onChange:l=>i({...a,personal_email:l.target.value}),placeholder:"correo@personal.com"}),e.jsx("div",{className:"md:col-span-2",children:e.jsx(c,{label:"Direccion",value:a.address,onChange:l=>i({...a,address:l.target.value}),placeholder:"Calle 123 # 45-67, Bogota"})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Contacto de Emergencia"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(c,{label:"Nombre del Contacto",value:a.emergency_contact_name,onChange:l=>i({...a,emergency_contact_name:l.target.value}),placeholder:"Nombre completo"}),e.jsx(c,{label:"Telefono del Contacto",value:a.emergency_contact_phone,onChange:l=>i({...a,emergency_contact_phone:l.target.value}),placeholder:"+57 300 123 4567"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200",children:[e.jsx(b,{type:"button",variant:"secondary",onClick:p,children:"Cancelar"}),e.jsxs(b,{type:"submit",loading:_,children:[e.jsx(Sa,{className:"w-4 h-4"}),"Guardar Cambios"]})]})]})}function Pa({employees:o=[],contractTemplates:h=[],departmentOptions:j=[],onSubmit:y,onCancel:v,loading:p,error:_}){const[t,a]=x.useState({first_name:"",last_name:"",personal_email:"",identification_type:"CC",identification_number:"",employee_number:"",job_title:"",department:"",employment_status:"active",employment_type:"full_time",hire_date:new Date().toISOString().split("T")[0],supervisor_id:"",cost_center:"",contract_type:"indefinite",contract_template_id:"",contract_start_date:new Date().toISOString().split("T")[0],contract_end_date:"",contract_duration_value:"",contract_duration_unit:"months",trial_period_days:"60",salary:"",food_allowance:"",transport_allowance:"",payment_frequency:"monthly",work_city:"",date_of_birth:"",place_of_birth:"",nationality:"Colombiana",address:"",phone:"",emergency_contact_name:"",emergency_contact_phone:""}),[i,w]=x.useState("basico"),[d,P]=x.useState({});x.useEffect(()=>{const s=Ge(t.contract_start_date,t.contract_end_date);s&&a(S=>({...S,contract_duration_value:s.value.toString(),contract_duration_unit:s.unit}))},[t.contract_start_date,t.contract_end_date]);const q=()=>{const s={};return t.first_name.trim()||(s.first_name="Nombre es requerido"),t.last_name.trim()||(s.last_name="Apellido es requerido"),t.personal_email.trim()||(s.personal_email="Correo es requerido"),t.identification_number.trim()||(s.identification_number="Número de documento es requerido"),t.job_title.trim()||(s.job_title="Cargo es requerido"),t.department||(s.department="Departamento es requerido"),t.hire_date||(s.hire_date="Fecha de contratación es requerida"),P(s),Object.keys(s).length===0},U=s=>{if(s.preventDefault(),!q()){d.first_name||d.last_name||d.personal_email||d.identification_number?w("basico"):(d.job_title||d.department||d.supervisor_id||d.hire_date)&&w("laboral");return}const S={...t};Object.keys(S).forEach(D=>{S[D]===""&&(S[D]=null)}),y(S)},l=[{value:"",label:"Junta Directiva"},...o.map(s=>({value:s.id,label:`${s.full_name} - ${s.job_title||"Sin cargo"}`}))],N=[{id:"basico",label:"Datos Básicos",icon:ie,required:!0},{id:"laboral",label:"Laboral",icon:oe,required:!0},{id:"contrato",label:"Contrato",icon:z},{id:"compensacion",label:"Compensación",icon:B},{id:"personal",label:"Personal",icon:W}],f=s=>s==="basico"?d.first_name||d.last_name||d.personal_email||d.identification_number:s==="laboral"?d.job_title||d.department||d.hire_date:!1;return e.jsxs("form",{onSubmit:U,className:"space-y-6",children:[_&&e.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-700",children:[e.jsx(_e,{className:"w-5 h-5 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:_})]}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-2 overflow-x-auto",children:N.map(s=>e.jsxs("button",{type:"button",onClick:()=>w(s.id),className:`py-2 px-3 border-b-2 font-medium text-sm flex items-center gap-2 whitespace-nowrap ${i===s.id?"border-primary-500 text-primary-600":f(s.id)?"border-red-300 text-red-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(s.icon,{className:"w-4 h-4"}),s.label,s.required&&e.jsx("span",{className:"text-red-500",children:"*"}),f(s.id)&&e.jsx(_e,{className:"w-3 h-3 text-red-500"})]},s.id))})}),i==="basico"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-700",children:[e.jsx("strong",{children:"Información requerida:"})," Estos datos son necesarios para crear la cuenta del empleado."]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(c,{label:"Nombre *",value:t.first_name,onChange:s=>a({...t,first_name:s.target.value}),placeholder:"Nombre",error:d.first_name}),d.first_name&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:d.first_name})]}),e.jsxs("div",{children:[e.jsx(c,{label:"Apellido *",value:t.last_name,onChange:s=>a({...t,last_name:s.target.value}),placeholder:"Apellido",error:d.last_name}),d.last_name&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:d.last_name})]}),e.jsxs("div",{children:[e.jsx(c,{label:"Correo Personal *",type:"email",value:t.personal_email,onChange:s=>a({...t,personal_email:s.target.value}),placeholder:"correo@personal.com",error:d.personal_email}),d.personal_email&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:d.personal_email}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Se usará para crear la cuenta de usuario"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx(g,{label:"Tipo Doc *",options:Qe,value:t.identification_type,onChange:s=>a({...t,identification_type:s.target.value})}),e.jsxs("div",{className:"col-span-2",children:[e.jsx(c,{label:"Número de Documento *",value:t.identification_number,onChange:s=>a({...t,identification_number:s.target.value}),placeholder:"1234567890",error:d.identification_number}),d.identification_number&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:d.identification_number}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Será la contraseña inicial"})]})]})]})]}),i==="laboral"&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(c,{label:"Número de Empleado",value:t.employee_number,onChange:s=>a({...t,employee_number:s.target.value}),placeholder:"EMP-001 (auto si vacío)"}),e.jsxs("div",{children:[e.jsx(c,{label:"Cargo *",value:t.job_title,onChange:s=>a({...t,job_title:s.target.value}),placeholder:"Ej: Desarrollador Senior",error:d.job_title}),d.job_title&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:d.job_title})]}),e.jsxs("div",{children:[e.jsx(g,{label:"Departamento *",options:[{value:"",label:"Seleccionar departamento *"},...j.slice(1)],value:t.department,onChange:s=>a({...t,department:s.target.value})}),d.department&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:d.department})]}),e.jsx(c,{label:"Centro de Costo",value:t.cost_center,onChange:s=>a({...t,cost_center:s.target.value}),placeholder:"Ej: CC-100"}),e.jsx(g,{label:"Estado Laboral",options:Ve,value:t.employment_status,onChange:s=>a({...t,employment_status:s.target.value})}),e.jsx(g,{label:"Tipo de Empleo",options:ye,value:t.employment_type,onChange:s=>a({...t,employment_type:s.target.value})}),e.jsx("div",{children:e.jsx(g,{label:"Jefe Inmediato",options:l,value:t.supervisor_id,onChange:s=>a({...t,supervisor_id:s.target.value})})}),e.jsxs("div",{children:[e.jsx(c,{label:"Fecha de Contratación *",type:"date",value:t.hire_date,onChange:s=>a({...t,hire_date:s.target.value}),error:d.hire_date}),d.hire_date&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:d.hire_date})]})]})}),i==="contrato"&&e.jsxs("div",{className:"space-y-4",children:[t.contract_type==="indefinite"&&e.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg text-sm text-blue-700",children:[e.jsx("strong",{children:"Contrato a Término Indefinido:"})," No requiere fecha de finalización ni duración específica."]}),t.contract_type==="fixed_term"&&e.jsxs("div",{className:"p-3 bg-amber-50 border border-amber-200 rounded-lg text-sm text-amber-700",children:[e.jsx("strong",{children:"Contrato a Término Fijo:"})," Requiere fecha de finalización y duración del contrato."]}),t.contract_type==="work_or_labor"&&e.jsxs("div",{className:"p-3 bg-purple-50 border border-purple-200 rounded-lg text-sm text-purple-700",children:[e.jsx("strong",{children:"Contrato por Obra o Labor:"})," Vinculado a la duración de una obra o labor específica."]}),t.contract_type==="apprentice"&&e.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg text-sm text-green-700",children:[e.jsx("strong",{children:"Contrato de Aprendizaje:"})," Para practicantes y aprendices en formación."]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(g,{label:"Tipo de Contrato",options:h.length>0?[{value:"",label:"Seleccionar template"},...h]:ve,value:h.length>0?t.contract_template_id:t.contract_type,onChange:s=>{if(h.length>0)a({...t,contract_template_id:s.target.value});else{const S=s.target.value,D={contract_type:S};S==="indefinite"&&(D.contract_end_date="",D.contract_duration_value="",D.contract_duration_unit="months"),a({...t,...D})}}}),e.jsx(c,{label:"Días de Periodo de Prueba",type:"number",value:t.trial_period_days,onChange:s=>a({...t,trial_period_days:s.target.value}),placeholder:t.contract_type==="apprentice"?"0":"60"}),e.jsx(c,{label:"Fecha de Inicio del Contrato",type:"date",value:t.contract_start_date,onChange:s=>a({...t,contract_start_date:s.target.value}),required:!0}),t.contract_type!=="indefinite"&&e.jsx(c,{label:"Fecha de Fin del Contrato",type:"date",value:t.contract_end_date,onChange:s=>a({...t,contract_end_date:s.target.value}),min:t.contract_start_date,required:t.contract_type==="fixed_term"}),t.contract_type!=="indefinite"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Duración del Contrato"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(c,{type:"number",value:t.contract_duration_value,onChange:s=>a({...t,contract_duration_value:s.target.value}),placeholder:"12",className:"flex-1"}),e.jsx(g,{options:Ke,value:t.contract_duration_unit,onChange:s=>a({...t,contract_duration_unit:s.target.value}),className:"w-32"})]})]})]})]}),i==="compensacion"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(c,{label:"Salario Mensual",type:"number",value:t.salary,onChange:s=>a({...t,salary:s.target.value}),placeholder:"2500000"}),t.salary&&e.jsx("p",{className:"text-xs text-gray-500 mt-1 italic",children:T(t.salary)})]}),e.jsxs("div",{children:[e.jsx(c,{label:"Auxilio de Alimentación",type:"number",value:t.food_allowance,onChange:s=>a({...t,food_allowance:s.target.value}),placeholder:"0"}),t.food_allowance>0&&e.jsx("p",{className:"text-xs text-gray-500 mt-1 italic",children:T(t.food_allowance)})]}),e.jsxs("div",{children:[e.jsx(c,{label:"Auxilio de Transporte",type:"number",value:t.transport_allowance,onChange:s=>a({...t,transport_allowance:s.target.value}),placeholder:"140606"}),t.transport_allowance>0&&e.jsx("p",{className:"text-xs text-gray-500 mt-1 italic",children:T(t.transport_allowance)})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(g,{label:"Periodicidad de Pago",options:[{value:"weekly",label:"Semanal"},{value:"biweekly",label:"Quincenal"},{value:"monthly",label:"Mensual"}],value:t.payment_frequency,onChange:s=>a({...t,payment_frequency:s.target.value})}),e.jsx(c,{label:"Ciudad de Labores",value:t.work_city,onChange:s=>a({...t,work_city:s.target.value}),placeholder:"Ej: Bogotá D.C."})]}),(t.salary||t.food_allowance||t.transport_allowance)&&e.jsx("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-green-700",children:[e.jsx("span",{className:"font-medium",children:"Compensación Total: "}),"$",((parseFloat(t.salary)||0)+(parseFloat(t.food_allowance)||0)+(parseFloat(t.transport_allowance)||0)).toLocaleString("es-CO")]})})]}),i==="personal"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Datos Personales"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(c,{label:"Fecha de Nacimiento",type:"date",value:t.date_of_birth,onChange:s=>a({...t,date_of_birth:s.target.value})}),e.jsx(c,{label:"Lugar de Nacimiento",value:t.place_of_birth,onChange:s=>a({...t,place_of_birth:s.target.value}),placeholder:"Bogotá, Colombia"}),e.jsx(c,{label:"Nacionalidad",value:t.nationality,onChange:s=>a({...t,nationality:s.target.value}),placeholder:"Colombiana"}),e.jsx(c,{label:"Teléfono",value:t.phone,onChange:s=>a({...t,phone:s.target.value}),placeholder:"+57 300 123 4567"}),e.jsx("div",{className:"md:col-span-2",children:e.jsx(c,{label:"Dirección",value:t.address,onChange:s=>a({...t,address:s.target.value}),placeholder:"Calle 123 # 45-67, Bogotá"})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Contacto de Emergencia"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(c,{label:"Nombre del Contacto",value:t.emergency_contact_name,onChange:s=>a({...t,emergency_contact_name:s.target.value}),placeholder:"Nombre completo"}),e.jsx(c,{label:"Teléfono del Contacto",value:t.emergency_contact_phone,onChange:s=>a({...t,emergency_contact_phone:s.target.value}),placeholder:"+57 300 123 4567"})]})]})]}),e.jsxs("div",{className:"flex justify-between items-center gap-3 pt-4 border-t border-gray-200",children:[e.jsxs("p",{className:"text-xs text-gray-500",children:["Los campos marcados con ",e.jsx("span",{className:"text-red-500",children:"*"})," son obligatorios"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(b,{type:"button",variant:"secondary",onClick:v,children:"Cancelar"}),e.jsxs(b,{type:"submit",loading:p,children:[e.jsx(Be,{className:"w-4 h-4"}),"Crear Empleado"]})]})]})]})}function Aa({employee:o,onView:h}){return e.jsx($,{className:"hover:shadow-md transition-shadow",children:e.jsxs(Y,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsxs("span",{className:"text-primary-700 font-semibold text-lg",children:[o.first_name?.[0],o.last_name?.[0]]})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 truncate",children:o.full_name}),e.jsx("p",{className:"text-sm text-gray-500",children:o.employee_number})]}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${R[o.employment_status]||R.active}`,children:X[o.employment_status]||o.employment_status})]}),e.jsxs("div",{className:"mt-3 space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(oe,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"truncate",children:o.job_title||"Sin cargo"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(Ue,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"truncate",children:o.department||"Sin departamento"})]}),o.email&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(Re,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"truncate",children:o.email})]})]})]})]}),e.jsx("div",{className:"flex justify-end mt-4 pt-3 border-t border-gray-100",children:e.jsxs(b,{variant:"ghost",size:"sm",onClick:()=>h(o),children:[e.jsx(be,{className:"w-4 h-4"}),"Ver Detalle"]})})]})})}function Oa({employees:o,onView:h,sortColumn:j,sortDirection:y,onSort:v}){const p=({column:t})=>j!==t?e.jsx(Da,{className:"w-3 h-3 text-gray-400"}):y==="asc"?e.jsx(Fa,{className:"w-3 h-3 text-primary-600"}):e.jsx(Ea,{className:"w-3 h-3 text-primary-600"}),_=({column:t,children:a,align:i="left"})=>e.jsx("th",{onClick:()=>v(t),className:`px-4 py-3 text-${i} text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 select-none`,children:e.jsxs("div",{className:`flex items-center gap-1 ${i==="right"?"justify-end":i==="center"?"justify-center":""}`,children:[a,e.jsx(p,{column:t})]})});return e.jsx($,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200 bg-gray-50",children:[e.jsx(_,{column:"full_name",children:"Empleado"}),e.jsx(_,{column:"job_title",children:"Cargo"}),e.jsx(_,{column:"department",children:"Departamento"}),e.jsx(_,{column:"employment_status",children:"Estado"}),e.jsx(_,{column:"hire_date",children:"Fecha Ingreso"}),e.jsx(_,{column:"available_vacation_days",align:"center",children:"Vacaciones"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:o.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-primary-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsxs("span",{className:"text-primary-700 font-medium",children:[t.first_name?.[0],t.last_name?.[0]]})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:t.full_name}),e.jsx("p",{className:"text-sm text-gray-500",children:t.email})]})]})}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-600",children:t.job_title||"-"}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-600",children:t.department||"-"}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${R[t.employment_status]||R.active}`,children:X[t.employment_status]||t.employment_status})}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-600",children:t.hire_date?new Date(t.hire_date).toLocaleDateString("es-CO"):"-"}),e.jsx("td",{className:"px-4 py-4 text-center",children:e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[t.available_vacation_days??0," días"]})}),e.jsx("td",{className:"px-4 py-4 text-right",children:e.jsx(b,{variant:"ghost",size:"sm",onClick:()=>h(t),children:e.jsx(be,{className:"w-4 h-4"})})})]},t.id))})]})})})}function Za(){const{isHR:o,isAdmin:h}=ha(),j=o||h,[y,v]=x.useState(""),[p,_]=x.useState(""),[t,a]=x.useState(""),[i,w]=x.useState(""),[d,P]=x.useState(""),[q,U]=x.useState(!1),[l,N]=x.useState("table"),[f,s]=x.useState(1),[S,D]=x.useState(!1),[fe,ee]=x.useState(!1),[He,ae]=x.useState(!1),[Je,V]=x.useState(!1),[Ne,ce]=x.useState(!1),[L,te]=x.useState(null),[C,se]=x.useState(null),[Ze,Q]=x.useState(""),[Ye,de]=x.useState(""),[k,We]=x.useState("full_name"),[A,Ce]=x.useState("asc"),G=ga(),we=ze,{data:Se,isLoading:De,isError:Xe}=J({queryKey:["employees",{q:y,status:p,department:t,page:f,sortColumn:k,sortDirection:A}],queryFn:()=>I.list({q:y||void 0,status:p||void 0,department:t||void 0,sort_by:k,sort_direction:A,page:f,per_page:20})}),{data:ea,isLoading:Fe}=J({queryKey:["employee",C?.id],queryFn:()=>I.get(C.id),enabled:!!C?.id&&(S||fe)}),Ee=ne({mutationFn:({id:r,data:m})=>I.update(r,m),onSuccess:()=>{G.invalidateQueries(["employees"]),G.invalidateQueries(["employee",C?.id]),ee(!1),Q("")},onError:r=>{Q(r.response?.data?.error||"Error al actualizar el empleado")}}),Te=ne({mutationFn:r=>I.create(r),onSuccess:r=>{G.invalidateQueries(["employees"]),ae(!1),de("");const m=r.data?.data;m&&(se(m),D(!0))},onError:r=>{de(r.response?.data?.error||r.response?.data?.errors?.join(", ")||"Error al crear el empleado")}}),ke=ne({mutationFn:r=>I.createAccount(r),onSuccess:r=>{G.invalidateQueries(["employees"]),G.invalidateQueries(["employee",C?.id]),alert(r.data.message||"Cuenta creada exitosamente. La contraseña inicial es el número de cédula.")},onError:r=>{alert(r.response?.data?.error||"Error al crear la cuenta")}}),me=ne({mutationFn:({employeeId:r,templateId:m})=>I.generateDocument(r,m),onSuccess:r=>{V(!1),alert(r.data.message||"Documento generado exitosamente. Puede descargarlo desde la sección de documentos.")},onError:r=>{const m=r.response?.data;m?.missing_variables?(V(!1),Q(`Faltan datos requeridos para generar el documento:
${m.missing_variables}`),ee(!0)):alert(m?.error||"Error al generar el documento")}}),{data:aa}=J({queryKey:["templates",{category:"contract"}],queryFn:()=>ja.list({category:"contract"})}),xe=aa?.data?.data||[],{data:ta}=J({queryKey:["employee-documents",C?.id],queryFn:()=>he.list({employee_id:C.id,category:"contract,employee_contract,employee"}),enabled:!!C?.id&&S}),K=ta?.data?.data||[],sa=K.length>0,ra=K[0],{data:na}=J({queryKey:["contract-detail",L?.id],queryFn:()=>he.get(L.id),enabled:!!L?.id&&Ne}),u=na?.data?.data||L,qe=xe.map(r=>({value:r.id,label:r.name})),pe=Se?.data?.data||[],ue=Se?.data?.meta||{},n=ea?.data?.data||C,O=pe.filter(r=>!(i&&r.contract_type!==i||d&&r.employment_type!==d)).sort((r,m)=>{let E,F;switch(k){case"full_name":E=(r.full_name||"").toLowerCase(),F=(m.full_name||"").toLowerCase();break;case"job_title":E=(r.job_title||"").toLowerCase(),F=(m.job_title||"").toLowerCase();break;case"department":E=(r.department||"").toLowerCase(),F=(m.department||"").toLowerCase();break;case"employment_status":E=X[r.employment_status]||r.employment_status||"",F=X[m.employment_status]||m.employment_status||"";break;case"hire_date":E=r.hire_date?new Date(r.hire_date).getTime():0,F=m.hire_date?new Date(m.hire_date).getTime():0;break;case"available_vacation_days":E=r.available_vacation_days??0,F=m.available_vacation_days??0;break;default:E=(r.full_name||"").toLowerCase(),F=(m.full_name||"").toLowerCase()}return E<F?A==="asc"?-1:1:E>F?A==="asc"?1:-1:0}),la=r=>{k===r?Ce(m=>m==="asc"?"desc":"asc"):(We(r),Ce("asc"))},ia=()=>{v(""),_(""),a(""),w(""),P(""),s(1)},ge=y||p||t||i||d,Le=r=>{se(r),D(!0)},oa=()=>{D(!1),ee(!0),Q("")},Me=()=>{ee(!1),se(null),Q("")},ca=r=>{Ee.mutate({id:C.id,data:r})},da=r=>{confirm(`¿Crear cuenta de usuario para este empleado?

La contraseña inicial será el número de cédula y deberá cambiarla en el primer inicio de sesión.`)&&ke.mutate(r)},Pe=()=>{V(!0)},ma=r=>{te(r),ce(!0)},xa=async r=>{try{const m=await he.download(r),E=new Blob([m.data],{type:"application/pdf"}),F=window.URL.createObjectURL(E),H=document.createElement("a");H.href=F,H.download=`contrato-${C?.full_name||"documento"}.pdf`,document.body.appendChild(H),H.click(),document.body.removeChild(H),window.URL.revokeObjectURL(F)}catch(m){console.error("Error downloading contract:",m)}},pa=r=>{C&&me.mutate({employeeId:C.id,templateId:r})},ua=r=>{r.preventDefault(),s(1)},re=Math.ceil((ue.total||0)/(ue.per_page||20));return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Empleados"}),e.jsx("p",{className:"text-gray-500",children:"Directorio de empleados de la organización"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[j&&e.jsxs(b,{onClick:()=>{de(""),ae(!0)},children:[e.jsx(_a,{className:"w-4 h-4"}),"Agregar Empleado"]}),e.jsxs("div",{className:"flex items-center gap-1 border-l pl-3 ml-2",children:[e.jsx(b,{variant:l==="table"?"primary":"secondary",size:"sm",onClick:()=>N("table"),children:"Tabla"}),e.jsx(b,{variant:l==="grid"?"primary":"secondary",size:"sm",onClick:()=>N("grid"),children:"Tarjetas"})]})]})]}),e.jsx($,{children:e.jsx(Y,{className:"py-4",children:e.jsxs("form",{onSubmit:ua,className:"space-y-3",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsx("div",{className:"flex-1 min-w-[200px]",children:e.jsxs("div",{className:"relative",children:[e.jsx(ba,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar por nombre o número...",value:y,onChange:r=>v(r.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]})}),e.jsxs("button",{type:"button",onClick:()=>U(!q),className:`px-3 py-2 text-sm rounded-lg flex items-center gap-2 transition-colors ${q||ge?"bg-primary-100 text-primary-700 hover:bg-primary-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[e.jsx(ya,{className:"w-4 h-4"}),"Filtros",ge&&e.jsx("span",{className:"bg-primary-600 text-white text-xs px-1.5 py-0.5 rounded-full",children:[p,t,i,d].filter(Boolean).length})]}),ge&&e.jsxs("button",{type:"button",onClick:ia,className:"px-3 py-2 text-sm text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg flex items-center gap-1",children:[e.jsx(va,{className:"w-4 h-4"}),"Limpiar"]})]}),q&&e.jsxs("div",{className:"flex flex-wrap items-center gap-3 pt-3 border-t border-gray-100",children:[e.jsx(g,{options:Ta,value:p,onChange:r=>{_(r.target.value),s(1)},className:"w-44"}),e.jsx(g,{options:ze,value:t,onChange:r=>{a(r.target.value),s(1)},className:"w-48"}),e.jsx(g,{options:[{value:"",label:"Tipo de contrato"},...ve],value:i,onChange:r=>{w(r.target.value),s(1)},className:"w-44"}),e.jsx(g,{options:[{value:"",label:"Tipo de empleo"},...ye],value:d,onChange:r=>{P(r.target.value),s(1)},className:"w-44"})]}),!De&&pe.length>0&&e.jsx("div",{className:"text-sm text-gray-500 flex items-center justify-between",children:e.jsxs("span",{children:["Mostrando ",e.jsx("strong",{children:O.length})," de ",e.jsx("strong",{children:ue.total||pe.length})," empleados",k&&e.jsxs("span",{className:"ml-2 text-gray-400",children:["· Ordenado por ",k==="full_name"?"nombre":k==="job_title"?"cargo":k==="department"?"departamento":k==="employment_status"?"estado":"fecha ingreso"," (",A==="asc"?"A-Z":"Z-A",")"]})]})})]})})}),De?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[1,2,3,4,5,6].map(r=>e.jsx($,{className:"animate-pulse",children:e.jsx(Y,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/3"})]})]})})},r))}):Xe?e.jsx($,{children:e.jsxs(Y,{className:"py-12 text-center",children:[e.jsx(Ae,{className:"w-16 h-16 mx-auto text-red-300 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Error al cargar empleados"}),e.jsx("p",{className:"text-gray-500",children:"No se pudo obtener la lista de empleados. Intenta de nuevo."})]})}):O.length>0?e.jsxs(e.Fragment,{children:[l==="grid"?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:O.map(r=>e.jsx(Aa,{employee:r,onView:Le},r.id))}):e.jsx(Oa,{employees:O,onView:Le,sortColumn:k,sortDirection:A,onSort:la}),re>1&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-gray-500",children:["Página ",f," de ",re]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(b,{variant:"secondary",size:"sm",onClick:()=>s(r=>Math.max(1,r-1)),disabled:f===1,children:[e.jsx(fa,{className:"w-4 h-4"}),"Anterior"]}),e.jsxs(b,{variant:"secondary",size:"sm",onClick:()=>s(r=>Math.min(re,r+1)),disabled:f===re,children:["Siguiente",e.jsx(Na,{className:"w-4 h-4"})]})]})]})]}):e.jsx($,{children:e.jsxs(Y,{className:"py-12 text-center",children:[e.jsx(Ae,{className:"w-16 h-16 mx-auto text-gray-300 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No se encontraron empleados"}),e.jsx("p",{className:"text-gray-500",children:y||p||t?"Intenta ajustar los filtros de búsqueda":"No hay empleados registrados en el sistema"})]})}),e.jsx(Z,{isOpen:S,onClose:()=>{D(!1),se(null)},title:"Detalle del Empleado",size:"lg",children:Fe?e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-full"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-5 bg-gray-200 rounded w-48"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-32"})]})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:[1,2,3,4].map(r=>e.jsx("div",{className:"h-12 bg-gray-100 rounded"},r))})]}):n&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center",children:e.jsxs("span",{className:"text-primary-700 font-semibold text-2xl",children:[n.first_name?.[0],n.last_name?.[0]]})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:n.full_name}),e.jsx("p",{className:"text-gray-500",children:n.employee_number}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${R[n.employment_status]||R.active}`,children:X[n.employment_status]||n.employment_status}),n.employment_type&&e.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-600",children:La[n.employment_type]||n.employment_type})]})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:j&&e.jsxs(e.Fragment,{children:[sa?e.jsxs(b,{variant:"secondary",size:"sm",onClick:()=>ma(ra),children:[e.jsx(be,{className:"w-4 h-4"}),"Ver Contrato"]}):e.jsxs(b,{variant:"secondary",size:"sm",onClick:Pe,children:[e.jsx(le,{className:"w-4 h-4"}),"Generar Contrato"]}),e.jsxs(b,{variant:"secondary",size:"sm",onClick:oa,children:[e.jsx(Ca,{className:"w-4 h-4"}),"Editar"]})]})})]}),j&&e.jsx("div",{className:`p-4 rounded-lg ${n.has_account?"bg-green-50 border border-green-200":"bg-amber-50 border border-amber-200"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-3",children:n.has_account?e.jsxs(e.Fragment,{children:[e.jsx(Oe,{className:"w-5 h-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-800",children:"Cuenta de usuario activa"}),e.jsx("p",{className:"text-xs text-green-600",children:n.user_email})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(wa,{className:"w-5 h-5 text-amber-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-amber-800",children:"Sin cuenta de usuario"}),e.jsx("p",{className:"text-xs text-amber-600",children:n.personal_email?`Se creara con: ${n.personal_email}`:"Agregue correo personal para crear cuenta"})]})]})}),!n.has_account&&n.personal_email&&n.identification_number&&e.jsxs(b,{size:"sm",onClick:()=>da(n.id),loading:ke.isPending,children:[e.jsx(Be,{className:"w-4 h-4"}),"Crear Cuenta"]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(Re,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Correo electronico"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:n.email||"-"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(oe,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Cargo"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:n.job_title||"-"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(Ue,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Departamento"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:n.department||"-"})]})]}),n.supervisor&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(ie,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Supervisor"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:n.supervisor.name}),e.jsx("p",{className:"text-xs text-gray-500",children:n.supervisor.job_title})]})]}),n.vacation_balance_days!==null&&n.vacation_balance_days!==void 0&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-blue-50 rounded-lg",children:[e.jsx(M,{className:"w-5 h-5 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-blue-600",children:"Dias de vacaciones disponibles"}),e.jsxs("p",{className:"text-sm font-medium text-blue-900",children:[n.vacation_balance_days," dias"]})]})]})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center gap-2",children:[e.jsx(z,{className:"w-4 h-4"}),"Informacion de Contrato"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(z,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Tipo de Contrato"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:n.contract_template_name||ka[n.contract_type]||n.contract_type||"-"})]})]}),n.hire_date&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(M,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Fecha de Contratacion"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:new Date(n.hire_date).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"})})]})]}),n.contract_start_date&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(M,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Inicio del Contrato"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:new Date(n.contract_start_date).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"})})]})]}),n.contract_end_date&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(M,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Fin del Contrato"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:new Date(n.contract_end_date).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"})})]})]}),n.contract_duration_value&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(M,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Duracion del Contrato"}),e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[n.contract_duration_value," ",qa[n.contract_duration_unit]||n.contract_duration_unit]})]})]}),n.trial_period_days&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(M,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Periodo de Prueba"}),e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[n.trial_period_days," dias"]})]})]})]})]}),(n.salary||n.food_allowance||n.transport_allowance)&&e.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center gap-2",children:[e.jsx(B,{className:"w-4 h-4"}),"Compensacion"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.salary&&e.jsxs("div",{className:"p-3 bg-green-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(B,{className:"w-5 h-5 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-green-600",children:"Salario Mensual"}),e.jsxs("p",{className:"text-sm font-medium text-green-900",children:["$",parseFloat(n.salary).toLocaleString("es-CO")]})]})]}),e.jsx("p",{className:"text-xs text-green-600 mt-1 italic ml-8",children:T(n.salary)})]}),n.food_allowance>0&&e.jsxs("div",{className:"p-3 bg-green-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(B,{className:"w-5 h-5 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-green-600",children:"Auxilio Alimentacion"}),e.jsxs("p",{className:"text-sm font-medium text-green-900",children:["$",parseFloat(n.food_allowance).toLocaleString("es-CO")]})]})]}),e.jsx("p",{className:"text-xs text-green-600 mt-1 italic ml-8",children:T(n.food_allowance)})]}),n.transport_allowance>0&&e.jsxs("div",{className:"p-3 bg-green-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(B,{className:"w-5 h-5 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-green-600",children:"Auxilio Transporte"}),e.jsxs("p",{className:"text-sm font-medium text-green-900",children:["$",parseFloat(n.transport_allowance).toLocaleString("es-CO")]})]})]}),e.jsx("p",{className:"text-xs text-green-600 mt-1 italic ml-8",children:T(n.transport_allowance)})]})]}),e.jsxs("div",{className:"mt-3 p-3 bg-green-100 rounded-lg",children:[e.jsxs("p",{className:"text-sm text-green-800",children:[e.jsx("span",{className:"font-medium",children:"Compensacion Total: "}),"$",((parseFloat(n.salary)||0)+(parseFloat(n.food_allowance)||0)+(parseFloat(n.transport_allowance)||0)).toLocaleString("es-CO")]}),e.jsx("p",{className:"text-xs text-green-700 mt-1 italic",children:T((parseFloat(n.salary)||0)+(parseFloat(n.food_allowance)||0)+(parseFloat(n.transport_allowance)||0))})]})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center gap-2",children:[e.jsx(Ie,{className:"w-4 h-4"}),"Informacion Personal"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.identification_number&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(Ie,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Documento de Identidad"}),e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[n.identification_type||"CC",": ",n.identification_number]})]})]}),n.date_of_birth&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(M,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Fecha de Nacimiento"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:new Date(n.date_of_birth).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"})})]})]}),n.place_of_birth&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(W,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Lugar de Nacimiento"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:n.place_of_birth})]})]}),n.nationality&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(W,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Nacionalidad"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:n.nationality})]})]}),n.phone&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx($e,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Telefono"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:n.phone})]})]}),n.address&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg md:col-span-2",children:[e.jsx(W,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Direccion"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:n.address})]})]})]})]}),(n.emergency_contact_name||n.emergency_contact_phone)&&e.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Contacto de Emergencia"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.emergency_contact_name&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-orange-50 rounded-lg",children:[e.jsx(ie,{className:"w-5 h-5 text-orange-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-orange-600",children:"Nombre"}),e.jsx("p",{className:"text-sm font-medium text-orange-900",children:n.emergency_contact_name})]})]}),n.emergency_contact_phone&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-orange-50 rounded-lg",children:[e.jsx($e,{className:"w-5 h-5 text-orange-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-orange-600",children:"Telefono"}),e.jsx("p",{className:"text-sm font-medium text-orange-900",children:n.emergency_contact_phone})]})]})]})]}),(n.is_supervisor||n.is_hr_staff||n.is_hr_manager)&&e.jsxs("div",{className:"flex flex-wrap gap-2 pt-2 border-t border-gray-200",children:[n.is_supervisor&&e.jsx(je,{variant:"info",children:"Supervisor"}),n.is_hr_staff&&e.jsx(je,{variant:"info",children:"Staff HR"}),n.is_hr_manager&&e.jsx(je,{variant:"success",children:"Gerente HR"})]})]})}),e.jsx(Z,{isOpen:fe,onClose:Me,title:`Editar Empleado: ${C?.full_name||""}`,size:"lg",children:Fe?e.jsx("div",{className:"animate-pulse space-y-4",children:[1,2,3,4].map(r=>e.jsx("div",{className:"h-12 bg-gray-200 rounded"},r))}):n&&e.jsx(Ma,{employee:n,employees:O,contractTemplates:qe,departmentOptions:we,onSubmit:ca,onCancel:Me,loading:Ee.isPending,error:Ze})}),e.jsx(Z,{isOpen:Je,onClose:()=>V(!1),title:"Seleccionar Template de Contrato",size:"md",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Seleccione el template que desea usar para generar el contrato de ",e.jsx("strong",{children:n?.full_name})]}),xe.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(z,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"No hay templates de contrato disponibles"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:'Cree un template con categoría "contract" desde Admin → Templates'})]}):e.jsx("div",{className:"space-y-2",children:xe.map(r=>e.jsx("button",{onClick:()=>pa(r.id),disabled:me.isPending,className:"w-full p-4 text-left border border-gray-200 rounded-lg hover:bg-gray-50 hover:border-primary-300 transition-colors disabled:opacity-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:r.name}),r.description&&e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:r.description})]}),e.jsx(le,{className:"w-5 h-5 text-gray-400"})]})},r.id))}),me.isPending&&e.jsxs("div",{className:"flex items-center justify-center gap-2 p-4 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-primary-600 border-t-transparent"}),e.jsx("span",{className:"text-sm text-primary-700",children:"Generando documento..."})]}),e.jsx("div",{className:"flex justify-end pt-4 border-t",children:e.jsx(b,{variant:"secondary",onClick:()=>V(!1),children:"Cancelar"})})]})}),e.jsx(Z,{isOpen:Ne,onClose:()=>{ce(!1),te(null)},title:"Detalle del Contrato",size:"lg",children:L&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:u.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Generado el ",new Date(u.created_at).toLocaleDateString("es-CO",{day:"numeric",month:"long",year:"numeric"})]})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${u.status==="completed"?"bg-green-100 text-green-700":u.status==="pending_signatures"?"bg-yellow-100 text-yellow-700":u.status==="draft"?"bg-gray-100 text-gray-700":"bg-red-100 text-red-700"}`,children:u.status==="completed"?"Completado":u.status==="pending_signatures"?"Pendiente de Firmas":u.status==="draft"?"Borrador":u.status})]}),u.pending_signatures_count!==void 0&&e.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-blue-800",children:"Progreso de Firmas"}),e.jsxs("span",{className:"text-sm text-blue-600",children:[u.completed_signatures_count||0," de ",u.total_required_signatures||0," firmas"]})]}),e.jsx("div",{className:"w-full bg-blue-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all",style:{width:`${u.total_required_signatures?(u.completed_signatures_count||0)/u.total_required_signatures*100:0}%`}})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Empleado"}),e.jsx("p",{className:"font-medium text-gray-900",children:u.employee_name||n?.full_name})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Template"}),e.jsx("p",{className:"font-medium text-gray-900",children:u.template_name||"N/A"})]})]}),u.signatures&&u.signatures.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Firmas Requeridas"}),e.jsx("div",{className:"space-y-2",children:u.signatures.map((r,m)=>e.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border ${r.status==="signed"?"border-green-200 bg-green-50":"border-yellow-200 bg-yellow-50"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[r.status==="signed"?e.jsx(Oe,{className:"w-5 h-5 text-green-500"}):e.jsx("div",{className:"w-5 h-5 border-2 border-yellow-400 rounded-full flex items-center justify-center",children:e.jsx("div",{className:"w-2 h-2 bg-yellow-400 rounded-full"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:r.signatory_label}),e.jsx("p",{className:"text-sm text-gray-600",children:r.status==="signed"?e.jsxs(e.Fragment,{children:["Firmado por ",e.jsx("strong",{children:r.signed_by_name})," el ",new Date(r.signed_at).toLocaleDateString("es-CO")]}):e.jsxs(e.Fragment,{children:["Pendiente de firma por: ",e.jsx("strong",{children:r.user_name||"Sin asignar"})]})})]})]}),e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${r.status==="signed"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:r.status==="signed"?"Firmado":"Pendiente"})]},m))})]}),K.length>1&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:["Historial de Documentos (",K.length,")"]}),e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:K.map(r=>e.jsxs("button",{onClick:()=>te(r),className:`w-full flex items-center justify-between p-2 rounded-lg text-left transition-colors ${r.id===L.id?"bg-primary-50 border border-primary-200":"hover:bg-gray-50 border border-transparent"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-900",children:r.name})]}),e.jsx("span",{className:"text-xs text-gray-500",children:new Date(r.created_at).toLocaleDateString("es-CO")})]},r.id))})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[e.jsxs(b,{variant:"secondary",onClick:()=>Pe(),children:[e.jsx(le,{className:"w-4 h-4"}),"Generar Nuevo Contrato"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{variant:"secondary",onClick:()=>{ce(!1),te(null)},children:"Cerrar"}),e.jsxs(b,{onClick:()=>xa(L.id),children:[e.jsx(le,{className:"w-4 h-4"}),"Descargar PDF"]})]})]})]})}),e.jsx(Z,{isOpen:He,onClose:()=>ae(!1),title:"Agregar Nuevo Empleado",size:"lg",children:e.jsx(Pa,{employees:O,contractTemplates:qe,departmentOptions:we,onSubmit:r=>Te.mutate(r),onCancel:()=>ae(!1),loading:Te.isPending,error:Ye})})]})}export{Za as default};
