import{b as pe,u as xe,c as te,j as e}from"./vendor-query-BtlmzfbD.js";import{d as ke,a as Pe,r}from"./vendor-router-CyR0tpch.js";import{t as H,j as Me,h as Ee}from"./index-CcQ4VEwy.js";import{C as re,a as ne,b as ie,c as le}from"./Card-CVFC4agM.js";import{B as _}from"./Button-C8xCGhNf.js";import"./Input-DPOK3q6H.js";import{B as ce}from"./Badge-CLufSCSl.js";import{au as Fe,O as De,F as me,av as ye,al as Ae,aw as Te,Z as he,m as Ne,P as oe,aq as de,Y as fe,U as je,d as ze,Q as ve,ax as qe,X as we,l as Se}from"./vendor-icons-BMeEPn6p.js";import"./vendor-react-Cgg2GOmP.js";import"./vendor-axios-B9ygI19o.js";const ue=612,ge=792;function Ie({templateId:c,hasFile:v,signatories:b,selectedId:o,onSelect:R,onUpdatePosition:A,onUpdateSize:C,scale:x=.6,numPages:m=1,customPageHeight:T,customPageWidth:U}){const N=U||ue,k=T||ge,h=k,u=r.useRef(null),P=r.useRef(null),[F,w]=r.useState(null),[S,X]=r.useState({x:0,y:0}),[M,z]=r.useState(null),[g,q]=r.useState({x:0,y:0,width:0,height:0}),[y,L]=r.useState(null),[I,$]=r.useState(!1),[l,B]=r.useState(1);r.useEffect(()=>{if(!c||!v){L(null);return}let t=!0,s=null;return $(!0),H.preview(c).then(d=>{if(!t)return;const j=new Blob([d.data],{type:"application/pdf"});s=URL.createObjectURL(j),L(s),$(!1)}).catch(d=>{t&&(console.error("Error loading PDF preview:",d),$(!1))}),()=>{t=!1,s&&URL.revokeObjectURL(s)}},[c,v]);const Q=r.useCallback(t=>{const s=t.target.scrollTop,d=h*x,j=Math.floor(s/d)+1;B(Math.min(j,m))},[x,m,h]),G=(t,s)=>{t.preventDefault(),t.stopPropagation();const d=u.current.getBoundingClientRect(),j=(t.clientX-d.left)/x,a=(t.clientY-d.top)/x;X({x:j-(s.x_position||350),y:a-(s.y_position||700)}),w(s.id),R(s.id)},O=r.useCallback(t=>{if(!u.current)return;const s=u.current.getBoundingClientRect();if(M&&C){const E=(t.clientX-s.left)/x,se=(t.clientY-s.top)/x,ee=E-g.x,ae=se-g.y,_e=Math.max(50,Math.min(400,g.width+ee)),Ce=Math.max(25,Math.min(200,g.height+ae));C(M,Math.round(_e),Math.round(Ce));return}if(!F)return;const d=b.find(E=>E.id===F);if(!d)return;const j=h*m,a=(t.clientX-s.left)/x,n=(t.clientY-s.top)/x,p=Math.max(0,Math.min(N-(d.width||200),a-S.x)),f=Math.max(0,Math.min(j-(d.height||80),n-S.y));A(F,Math.round(p),Math.round(f))},[F,S,M,g,x,b,A,C,m,h]),V=()=>{w(null),z(null)},W=(t,s)=>{t.preventDefault(),t.stopPropagation();const d=u.current.getBoundingClientRect(),j=(t.clientX-d.left)/x,a=(t.clientY-d.top)/x;q({x:j,y:a,width:s.width||200,height:s.height||80}),z(s.id),R(s.id)},J=t=>{const s={employee:{bg:"rgba(59, 130, 246, 0.3)",border:"#3b82f6",text:"#1d4ed8"},supervisor:{bg:"rgba(147, 51, 234, 0.3)",border:"#9333ea",text:"#7c3aed"},hr:{bg:"rgba(34, 197, 94, 0.3)",border:"#22c55e",text:"#16a34a"},hr_manager:{bg:"rgba(16, 185, 129, 0.3)",border:"#10b981",text:"#059669"},legal:{bg:"rgba(249, 115, 22, 0.3)",border:"#f97316",text:"#ea580c"},general_manager:{bg:"rgba(239, 68, 68, 0.3)",border:"#ef4444",text:"#dc2626"},legal_representative:{bg:"rgba(245, 158, 11, 0.3)",border:"#f59e0b",text:"#d97706"},accountant:{bg:"rgba(6, 182, 212, 0.3)",border:"#06b6d4",text:"#0891b2"},admin:{bg:"rgba(107, 114, 128, 0.3)",border:"#6b7280",text:"#4b5563"}};return s[t]||s.admin},Z=t=>Math.floor(t/h)+1,D=N*x,Y=h*x,K=Y*m,i=t=>{if(P.current){const s=Y*(t-1);P.current.scrollTo({top:s,behavior:"smooth"})}};return e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center justify-end mb-2 gap-3",children:[v&&y&&e.jsxs("a",{href:y,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 px-2 py-1 text-xs bg-blue-50 text-blue-600 rounded hover:bg-blue-100 transition-colors",children:[e.jsx(Ne,{className:"w-3 h-3"}),"Ver PDF"]}),I&&e.jsx("span",{className:"text-xs text-gray-400 animate-pulse",children:"Cargando PDF..."}),!I&&v&&!y&&e.jsx("span",{className:"text-xs text-red-400",children:"Error al cargar PDF"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-xs text-gray-500",children:["PÃ¡gina ",l," de ",m]}),m>1&&e.jsx("div",{className:"flex gap-1",children:[...Array(m)].map((t,s)=>e.jsx("button",{onClick:()=>i(s+1),className:`w-5 h-5 text-[10px] rounded ${l===s+1?"bg-primary-500 text-white":"bg-gray-200 text-gray-600 hover:bg-gray-300"}`,children:s+1},s))})]})]}),e.jsx("div",{ref:P,className:"mx-auto border-2 border-gray-300 rounded-lg shadow-lg overflow-auto bg-gray-100",style:{width:D+24,maxHeight:650,padding:10},onScroll:Q,children:e.jsx("div",{style:{width:D,height:K,margin:"0 auto"},children:e.jsxs("div",{ref:u,className:"relative origin-top-left",style:{width:N,height:h*m,transform:`scale(${x})`,transformOrigin:"top left"},onMouseMove:O,onMouseUp:V,onMouseLeave:V,children:[y&&v&&e.jsx("iframe",{src:`${y}#toolbar=0&navpanes=0&scrollbar=0`,className:"absolute inset-0 pointer-events-none",style:{width:N,height:h*m,border:"none"},title:"PDF Preview"}),[...Array(m)].map((t,s)=>e.jsxs("div",{className:`border border-gray-300 ${y?"bg-transparent":"bg-white"}`,style:{width:N,height:h,position:"absolute",top:s*h,left:0,boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"},children:[e.jsxs("div",{className:"absolute top-2 right-2 bg-gray-100/80 text-gray-500 text-xs px-2 py-1 rounded",children:["PÃ¡gina ",s+1]}),!y&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute inset-4 border border-dashed border-gray-200 pointer-events-none opacity-50"}),e.jsx("div",{className:"absolute left-1/2 top-4 bottom-4 w-px bg-gray-100 pointer-events-none"}),e.jsx("div",{className:"absolute top-1/2 left-4 right-4 h-px bg-gray-100 pointer-events-none"})]})]},s)),!v&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white z-10",children:e.jsxs("div",{className:"text-center text-gray-400 p-4",children:[e.jsx(me,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"Sube un archivo Word para ver el preview"})]})}),m>1&&[...Array(m-1)].map((t,s)=>e.jsx("div",{className:"absolute left-0 right-0 border-t-2 border-dashed border-gray-400 pointer-events-none",style:{top:h*(s+1)},children:e.jsxs("span",{className:"absolute left-2 -top-4 bg-gray-200 px-2 py-0.5 text-xs text-gray-500 rounded",children:["PÃ¡gina ",s+2]})},s)),e.jsxs("div",{className:"absolute inset-0",style:{pointerEvents:"none"},children:[b.map(t=>{const s=J(t.effective_code||t.role||t.signatory_type_code),d=o===t.id,j=F===t.id,a=t.width||200,n=t.height||80,p=t.date_position||"right",f=t.y_position||700,E=Math.floor(f/h)+1;let se={},ee={};switch(p){case"right":se={width:"75%",height:"100%",left:0,top:0},ee={width:"25%",height:"100%",right:0,top:0};break;case"below":se={width:"100%",height:"80%",left:0,top:0},ee={width:"100%",height:"20%",left:0,bottom:0};break;case"above":se={width:"100%",height:"80%",left:0,bottom:0},ee={width:"100%",height:"20%",left:0,top:0};break;case"none":default:se={width:"100%",height:"100%",left:0,top:0},ee=null;break}return e.jsxs("div",{className:"absolute cursor-move transition-all duration-100",style:{left:t.x_position||350,top:f,width:a,height:n,backgroundColor:"transparent",border:`2px dashed ${s.border}`,borderRadius:4,boxShadow:d?`0 0 0 3px ${s.border}40, 0 4px 12px rgba(0,0,0,0.15)`:j?"0 8px 20px rgba(0,0,0,0.2)":"0 2px 4px rgba(0,0,0,0.1)",zIndex:j?100:d?50:10,pointerEvents:"auto",opacity:j?.9:1},onMouseDown:ae=>G(ae,t),children:[e.jsxs("div",{className:"absolute flex flex-col items-center justify-center",style:{...se,backgroundColor:s.bg,borderRadius:2},children:[e.jsx(ve,{style:{width:16,height:16,color:s.text,opacity:.6}}),e.jsx("span",{className:"font-medium text-center truncate w-full px-1",style:{fontSize:10,color:s.text},children:t.label||t.role_label}),t.required&&e.jsx("span",{style:{fontSize:8,color:"#ef4444",fontWeight:"bold"},children:"*Req"})]}),ee&&e.jsx("div",{className:"absolute flex items-center justify-center",style:{...ee,backgroundColor:"rgba(100, 100, 100, 0.15)",borderRadius:2},children:e.jsx("span",{style:{fontSize:8,color:"#666",opacity:.8},children:p==="right"?"ðŸ“…":"Fecha"})}),m>1&&e.jsx("div",{className:"absolute -left-2 -top-2 w-5 h-5 rounded-full flex items-center justify-center text-white text-[10px] font-bold",style:{backgroundColor:s.border},children:E}),d&&e.jsx("div",{className:"absolute -top-3 -right-3 rounded-full p-1",style:{backgroundColor:s.border},children:e.jsx(qe,{className:"w-4 h-4 text-white"})}),d&&e.jsx("div",{className:"absolute -bottom-2 -right-2 w-5 h-5 rounded-full bg-white border-2 cursor-se-resize hover:scale-110 transition-transform flex items-center justify-center",style:{borderColor:s.border},onMouseDown:ae=>W(ae,t),children:e.jsx("svg",{width:"8",height:"8",viewBox:"0 0 8 8",fill:"none",children:e.jsx("path",{d:"M7 1L1 7M7 4L4 7M7 7L7 7",stroke:s.border,strokeWidth:"1.5",strokeLinecap:"round"})})})]},t.id)}),b.length===0&&v&&!I&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:e.jsxs("div",{className:"bg-white/90 backdrop-blur-sm rounded-lg p-4 text-center shadow-lg",children:[e.jsx(ve,{className:"w-8 h-8 mx-auto mb-2 text-gray-400"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Agrega firmantes para posicionarlos aquÃ­"})]})})]})]})})}),b.length>0&&e.jsx("div",{className:"mt-3 flex flex-wrap gap-2 justify-center",children:b.map(t=>{const s=J(t.effective_code||t.role||t.signatory_type_code),d=Z(t.y_position||700);return e.jsxs("button",{className:`flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-xs font-medium transition-all ${o===t.id?"ring-2 ring-offset-1":"hover:opacity-80"}`,style:{backgroundColor:s.bg,color:s.text,ringColor:s.border},onClick:()=>{if(R(t.id),P.current){const j=(t.y_position||700)*x-100;P.current.scrollTo({top:j,behavior:"smooth"})}},children:[e.jsx("div",{className:"w-2.5 h-2.5 rounded-full",style:{backgroundColor:s.border}}),t.label||t.role_label,m>1&&e.jsxs("span",{className:"ml-1 opacity-70",children:["(p.",d,")"]})]},t.id)})}),e.jsxs("p",{className:"text-xs text-gray-400 text-center mt-2",children:["Coordenadas PDF: ",N," x ",k," pts por pÃ¡gina | Usa scroll para documentos largos"]})]})}const be=[{value:"right",label:"Derecha",desc:"Fecha a la derecha (firma usa 75% ancho)"},{value:"below",label:"Abajo",desc:"Fecha debajo (firma usa 100% ancho)"},{value:"above",label:"Arriba",desc:"Fecha arriba (firma usa 100% ancho)"},{value:"none",label:"Sin fecha",desc:"Sin fecha (firma usa 100% del espacio)"}];function Re({isOpen:c,onClose:v,templateId:b,signatory:o,numPages:R=1,onSuccess:A,pdfWidth:C=ue,pdfHeight:x=ge,totalSignatories:m=1}){const T=pe(),[U,N]=r.useState(o?.label||""),[k,h]=r.useState(o?.required??!0),[u,P]=r.useState(o?.position??0),[F,w]=r.useState(o?.x_position||350),[S,X]=r.useState(1),[M,z]=r.useState(700),[g,q]=r.useState(o?.width||200),[y,L]=r.useState(o?.height||80),[I,$]=r.useState(o?.date_position||"right"),[l,B]=r.useState(o?.show_label??!0),[Q,G]=r.useState(o?.show_signer_name??!1),[O,V]=r.useState(""),W=C,J=x;r.useEffect(()=>{if(o&&c){N(o.label||""),h(o.required??!0),P(o.position??0),w(o.x_position||350),q(o.width||200),L(o.height||80),$(o.date_position||"right"),B(o.show_label??!0),G(o.show_signer_name??!1);const i=o.y_position||700,t=Math.floor(i/x)+1,s=i%x;X(Math.min(t,R)),z(s)}},[o,c,R,x]);const Z=(S-1)*x+M,D=te({mutationFn:i=>H.updateSignatory(b,o?.id,i),onSuccess:()=>{T.invalidateQueries(["template",b]),A?.(),v()},onError:i=>{V(i.response?.data?.error||"Error al actualizar firmante")}}),Y=i=>{i.preventDefault(),D.mutate({label:U,required:k,position:u,x_position:F,y_position:Z,width:g,height:y,date_position:I,show_label:l,show_signer_name:Q})},K=[{label:"Arriba Izq",x:50,y:100},{label:"Arriba Der",x:350,y:100},{label:"Centro",x:200,y:400},{label:"Abajo Izq",x:50,y:700},{label:"Abajo Der",x:350,y:700}];return!c||!o?null:e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-2",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b shrink-0",children:[e.jsx("h3",{className:"font-semibold",children:"Editar Firmante"}),e.jsx("button",{onClick:v,className:"p-1 hover:bg-gray-100 rounded",children:e.jsx(we,{className:"w-4 h-4"})})]}),e.jsxs("form",{onSubmit:Y,className:"flex flex-col flex-1 overflow-hidden",children:[e.jsxs("div",{className:"flex-1 overflow-y-auto px-4 py-3 space-y-3",children:[O&&e.jsxs("div",{className:"p-2 bg-red-50 border border-red-200 rounded flex items-center gap-2 text-red-700 text-sm",children:[e.jsx(Se,{className:"w-4 h-4 shrink-0"}),e.jsx("span",{children:O})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-0.5",children:"Tipo"}),e.jsx("p",{className:"px-2 py-1 bg-gray-50 rounded text-sm truncate",children:o.role_label})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-0.5",children:"Etiqueta"}),e.jsx("input",{type:"text",value:U,onChange:i=>N(i.target.value),placeholder:"Ej: Firma del Empleado",className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-0.5",children:"Orden de firma"}),e.jsx("input",{type:"number",value:u,onChange:i=>P(Math.max(0,parseInt(i.target.value,10)||0)),min:"0",max:m,className:"w-full px-2 py-1 border border-gray-300 rounded text-sm text-center"})]})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:k,onChange:i=>h(i.target.checked),className:"w-3.5 h-3.5 text-primary-600 rounded"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Firma requerida"})]}),e.jsxs("div",{className:"border-t pt-2",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 mb-2",children:"UbicaciÃ³n"}),e.jsxs("div",{className:"flex gap-2 items-center mb-2",children:[e.jsx("span",{className:"text-xs text-gray-500 shrink-0",children:"PÃ¡g:"}),e.jsx("div",{className:"flex gap-0.5",children:[...Array(Math.min(R,10))].map((i,t)=>e.jsx("button",{type:"button",onClick:()=>X(t+1),className:`w-6 h-6 text-xs rounded font-medium ${S===t+1?"bg-primary-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:t+1},t))}),e.jsx("span",{className:"text-xs text-gray-400 mx-1",children:"|"}),K.slice(0,3).map(i=>e.jsx("button",{type:"button",onClick:()=>{w(i.x),z(i.y)},className:"px-1.5 py-0.5 text-xs bg-gray-100 text-gray-600 rounded hover:bg-gray-200",children:i.label},i.label))]}),e.jsxs("div",{className:"grid grid-cols-4 gap-1.5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-400",children:"X"}),e.jsx("input",{type:"number",value:F,onChange:i=>{const t=parseInt(i.target.value,10);isNaN(t)||w(Math.max(0,Math.min(W-g,t)))},className:"w-full px-1.5 py-1 border border-gray-300 rounded text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-400",children:"Y"}),e.jsx("input",{type:"number",value:M,onChange:i=>{const t=parseInt(i.target.value,10);isNaN(t)||z(Math.max(0,Math.min(J-y,t)))},className:"w-full px-1.5 py-1 border border-gray-300 rounded text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-400",children:"Ancho"}),e.jsx("input",{type:"number",value:g,onChange:i=>{const t=parseInt(i.target.value,10);isNaN(t)||q(Math.max(20,Math.min(400,t)))},className:"w-full px-1.5 py-1 border border-gray-300 rounded text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-400",children:"Alto"}),e.jsx("input",{type:"number",value:y,onChange:i=>{const t=parseInt(i.target.value,10);isNaN(t)||L(Math.max(15,Math.min(200,t)))},className:"w-full px-1.5 py-1 border border-gray-300 rounded text-sm"})]})]}),e.jsxs("div",{className:"flex gap-1 mt-2",children:[e.jsx("span",{className:"text-xs text-gray-400 shrink-0 py-0.5",children:"TamaÃ±o:"}),[{label:"S",w:120,h:45},{label:"M",w:160,h:60},{label:"L",w:200,h:80}].map(i=>e.jsx("button",{type:"button",onClick:()=>{q(i.w),L(i.h)},className:`px-2 py-0.5 text-xs rounded ${g===i.w&&y===i.h?"bg-primary-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:i.label},i.label))]})]}),e.jsxs("div",{className:"border-t pt-2",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 mb-1.5",children:"PosiciÃ³n de fecha"}),e.jsx("div",{className:"grid grid-cols-4 gap-1",children:be.map(i=>e.jsx("button",{type:"button",onClick:()=>$(i.value),className:`px-2 py-1 text-xs rounded border ${I===i.value?"border-primary-500 bg-primary-50 text-primary-700":"border-gray-200 hover:border-gray-300 text-gray-600"}`,children:i.label},i.value))})]}),e.jsxs("div",{className:"border-t pt-2",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 mb-1.5",children:"Mostrar"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:l,onChange:i=>B(i.target.checked),className:"w-3.5 h-3.5 text-primary-600 rounded"}),e.jsx("span",{className:"text-xs text-gray-700",children:"Etiqueta"})]}),e.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:Q,onChange:i=>G(i.target.checked),className:"w-3.5 h-3.5 text-primary-600 rounded"}),e.jsx("span",{className:"text-xs text-gray-700",children:"Nombre firmante"})]})]})]}),e.jsxs("div",{className:"p-1.5 bg-gray-50 rounded text-xs text-gray-500",children:["PÃ¡g ",S," â€¢ (",F,", ",M,") â€¢ ",g,"Ã—",y," â€¢ Fecha: ",I]})]}),e.jsxs("div",{className:"flex justify-end gap-2 px-4 py-2 border-t shrink-0",children:[e.jsx(_,{type:"button",variant:"secondary",onClick:v,children:"Cancelar"}),e.jsxs(_,{type:"submit",loading:D.isPending,children:[e.jsx(he,{className:"w-4 h-4"}),"Guardar"]})]})]})]})})}function Le({isOpen:c,onClose:v,templateId:b,onSuccess:o,pdfWidth:R=ue,pdfHeight:A=ge,totalPages:C=1,existingSignatories:x=0}){const m=pe(),[T,U]=r.useState(""),[N,k]=r.useState(""),[h,u]=r.useState(!0),[P,F]=r.useState(x),[w,S]=r.useState(1),[X,M]=r.useState(350),[z,g]=r.useState(700),[q,y]=r.useState(200),[L,I]=r.useState(80),[$,l]=r.useState("right"),[B,Q]=r.useState(!0),[G,O]=r.useState(!1),[V,W]=r.useState(""),{data:J,isLoading:Z}=xe({queryKey:["signatory-types",{active:"true"}],queryFn:()=>Me.list({active:"true"}),enabled:c}),D=J?.data?.data||[],Y=te({mutationFn:t=>H.createSignatory(b,t),onSuccess:()=>{m.invalidateQueries(["template",b]),m.invalidateQueries(["template-signatories",b]),o(),K()},onError:t=>{W(t.response?.data?.error||"Error al agregar firmante")}}),K=()=>{U(""),k(""),u(!0),F(x),S(1),M(350),g(700),y(200),I(80),l("right"),Q(!0),O(!1),W(""),v()},i=()=>{if(!T){W("Seleccione un tipo de firmante");return}const t=D.find(d=>d.code===T),s={signatory_type_code:T,label:N||t?.name||"Firma",required:h,position:P,page_number:w,x_position:X,y_position:z,width:q,height:L,date_position:$,show_label:B,show_signer_name:G};console.log("Creating signatory with data:",s),Y.mutate(s)};return c?e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-2",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-2xl max-h-[85vh] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b flex-shrink-0",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Agregar Firmante"}),e.jsx("button",{onClick:K,className:"p-1 hover:bg-gray-100 rounded",children:e.jsx(we,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto px-4 py-3",children:[V&&e.jsxs("div",{className:"p-2 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-700 mb-3",children:[e.jsx(Se,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:V})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Firmante"}),Z?e.jsx("div",{className:"py-1 text-gray-500 text-sm",children:"Cargando..."}):D.length===0?e.jsx("div",{className:"py-1 text-amber-600 text-sm",children:"No hay tipos configurados"}):e.jsxs("select",{value:T,onChange:t=>{U(t.target.value);const s=D.find(d=>d.code===t.target.value);!N&&s&&k(s.name)},className:"w-full px-2 py-1.5 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"Seleccionar tipo..."}),D.map(t=>e.jsx("option",{value:t.code,children:t.name},t.code))]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Etiqueta"}),e.jsx("input",{type:"text",value:N,onChange:t=>k(t.target.value),placeholder:"Ej: Firma del Empleado",className:"w-full px-2 py-1.5 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Orden de firma"}),e.jsx("input",{type:"number",value:P,onChange:t=>F(Math.max(0,parseInt(t.target.value,10)||0)),min:"0",className:"w-full px-2 py-1.5 border border-gray-300 rounded-lg text-sm text-center focus:outline-none focus:ring-2 focus:ring-primary-500"}),e.jsx("p",{className:"text-xs text-gray-400 mt-0.5",children:"0 = firma primero"})]})]}),e.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:h,onChange:t=>u(t.target.checked),className:"w-4 h-4 text-primary-600 rounded focus:ring-primary-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Requerida"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:B,onChange:t=>Q(t.target.checked),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Mostrar etiqueta"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:G,onChange:t=>O(t.target.checked),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Mostrar nombre"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"PosiciÃ³n de fecha"}),e.jsx("div",{className:"grid grid-cols-4 gap-1",children:be.map(t=>e.jsx("button",{type:"button",onClick:()=>l(t.value),className:`px-2 py-1.5 text-xs rounded-lg border-2 transition-all ${$===t.value?"border-primary-500 bg-primary-50 text-primary-700 font-medium":"border-gray-200 hover:border-gray-300 text-gray-600"}`,children:t.label},t.value))})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"PÃ¡gina:"}),e.jsx("input",{type:"number",value:w,onChange:t=>S(Math.max(1,Math.min(C,Number(t.target.value)))),className:"w-16 px-2 py-1 border border-gray-300 rounded-lg text-sm text-center",min:"1",max:C}),e.jsxs("span",{className:"text-xs text-gray-500",children:["de ",C]}),C>1&&e.jsxs("div",{className:"flex gap-1 ml-auto",children:[e.jsx("button",{type:"button",onClick:()=>S(1),className:`px-2 py-1 text-xs rounded ${w===1?"bg-primary-100 text-primary-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"1ra"}),e.jsx("button",{type:"button",onClick:()=>S(C),className:`px-2 py-1 text-xs rounded ${w===C?"bg-primary-100 text-primary-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Ãšlt"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"X (horizontal)"}),e.jsx("input",{type:"number",value:X,onChange:t=>M(Number(t.target.value)),className:"w-full px-2 py-1.5 border border-gray-300 rounded-lg text-sm",min:"0",max:"600"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Y (vertical)"}),e.jsx("input",{type:"number",value:z,onChange:t=>g(Number(t.target.value)),className:"w-full px-2 py-1.5 border border-gray-300 rounded-lg text-sm",min:"0",max:A})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Ancho"}),e.jsx("input",{type:"number",value:q,onChange:t=>y(Number(t.target.value)),className:"w-full px-2 py-1.5 border border-gray-300 rounded-lg text-sm",min:"50",max:"300"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Alto"}),e.jsx("input",{type:"number",value:L,onChange:t=>I(Number(t.target.value)),className:"w-full px-2 py-1.5 border border-gray-300 rounded-lg text-sm",min:"30",max:"150"})]})]}),e.jsxs("p",{className:"text-xs text-gray-400",children:["PDF: ",R," x ",A," pts"]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 px-4 py-3 border-t bg-gray-50 flex-shrink-0",children:[e.jsx(_,{type:"button",variant:"secondary",onClick:K,children:"Cancelar"}),e.jsxs(_,{type:"button",onClick:i,loading:Y.isPending,disabled:!T||D.length===0,children:[e.jsx(oe,{className:"w-4 h-4"}),"Agregar"]})]})]})}):null}function Ve(){const{id:c}=ke(),v=Pe(),b=pe(),o=r.useRef(null),[R,A]=r.useState(!1),[C,x]=r.useState(null),[m,T]=r.useState({}),[U,N]=r.useState(!1),[k,h]=r.useState(null),[u,P]=r.useState([]),[F,w]=r.useState(!1),[S,X]=r.useState(1),[M,z]=r.useState(.7),[g,q]=r.useState(792),[y,L]=r.useState(612),{data:I,isLoading:$}=xe({queryKey:["template",c],queryFn:()=>H.get(c)}),l=I?.data?.data,B=JSON.stringify(l?.signatories||[]);r.useEffect(()=>{const a=l?.signatories||[];P(a),w(!1)},[B]),r.useEffect(()=>{l&&(l.preview_scale&&z(l.preview_scale),l.pdf_height?q(l.pdf_height):l.preview_page_height&&q(l.preview_page_height),l.pdf_width&&L(l.pdf_width),l.pdf_page_count&&X(l.pdf_page_count))},[l?.id]);const Q=r.useCallback((a,n,p)=>{P(f=>f.map(E=>E.id===a?{...E,x_position:n,y_position:p}:E)),w(!0)},[]),G=r.useCallback((a,n,p)=>{P(f=>f.map(E=>E.id===a?{...E,width:n,height:p}:E)),w(!0)},[]),O=te({mutationFn:async()=>{await H.update(c,{template:{preview_scale:M,preview_page_height:g}});const a=u.map(n=>({id:n.id,x_position:n.x_position,y_position:n.y_position,width:n.width,height:n.height}));for(const n of a)await H.updateSignatory(c,n.id,n)},onSuccess:()=>{b.invalidateQueries(["template",c]),w(!1)}}),{data:V}=xe({queryKey:["variable-mappings-grouped"],queryFn:()=>Ee.grouped()}),W=te({mutationFn:a=>H.upload(c,a),onSuccess:()=>{b.invalidateQueries(["template",c])}}),J=te({mutationFn:a=>H.update(c,{template:a}),onSuccess:()=>{b.invalidateQueries(["template",c])}}),Z=te({mutationFn:()=>H.activate(c),onSuccess:()=>{b.invalidateQueries(["template",c])}}),D=te({mutationFn:a=>H.deleteSignatory(c,a),onSuccess:()=>{b.invalidateQueries(["template",c])}}),Y=te({mutationFn:()=>H.reassignMappings(c),onSuccess:()=>{b.invalidateQueries(["template",c]),T({})}}),K=a=>{const n=a.target.files?.[0];if(n){if(!n.name.endsWith(".docx")){alert("Solo se permiten archivos Word (.docx)");return}W.mutate(n)}},i=async()=>{N(!0);try{const a={...l.variable_mappings,...m};await J.mutateAsync({variable_mappings:a})}finally{N(!1)}};if($)return e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500"})});if(!l)return e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-gray-500",children:"Template no encontrado"}),e.jsx(_,{variant:"secondary",onClick:()=>v("/admin/templates"),className:"mt-4",children:"Volver a Templates"})]});const t={...l.variable_mappings,...m},s=l.available_mappings||{},d=V?.data?.data||{},j={employee:"Empleado",organization:"Organizacion",system:"Sistema",request:"Solicitud",custom:"Personalizado"};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(_,{variant:"ghost",onClick:()=>v("/admin/templates"),children:e.jsx(Fe,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:l.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(ce,{variant:"secondary",children:l.category_label}),e.jsx(ce,{status:l.status==="active"?"approved":l.status==="draft"?"pending":"rejected",children:l.status==="active"?"Activo":l.status==="draft"?"Borrador":"Archivado"})]})]}),l.status==="draft"&&l.file_name&&e.jsxs(_,{onClick:()=>Z.mutate(),loading:Z.isPending,children:[e.jsx(De,{className:"w-4 h-4"}),"Activar Template"]})]}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"xl:col-span-3 space-y-6",children:[e.jsxs(re,{children:[e.jsx(ne,{children:e.jsxs(ie,{className:"flex items-center gap-2",children:[e.jsx(me,{className:"w-5 h-5"}),"Archivo del Template"]})}),e.jsxs(le,{children:[l.file_name?e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(me,{className:"w-8 h-8 text-primary-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:l.file_name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[(l.file_size/1024).toFixed(1)," KB"]})]})]}),e.jsxs(_,{variant:"secondary",onClick:()=>o.current?.click(),loading:W.isPending,children:[e.jsx(ye,{className:"w-4 h-4"}),"Reemplazar"]})]}):e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center cursor-pointer hover:border-primary-500 transition-colors",onClick:()=>o.current?.click(),children:[e.jsx(ye,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 mb-2",children:"Haz clic para subir un archivo Word (.docx)"}),e.jsxs("p",{className:"text-sm text-gray-400",children:["El archivo debe contener variables en formato ","{{Variable}}"]})]}),e.jsx("input",{ref:o,type:"file",accept:".docx",onChange:K,className:"hidden"})]})]}),l.variables?.length>0&&e.jsxs(re,{children:[e.jsx(ne,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(ie,{className:"flex items-center gap-2",children:[e.jsx(Ae,{className:"w-5 h-5"}),"Variables Detectadas (",l.variables.length,")"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(_,{size:"sm",variant:"secondary",onClick:()=>Y.mutate(),loading:Y.isPending,title:"Reasignar automaticamente desde variables del sistema",children:[e.jsx(Te,{className:"w-4 h-4"}),"Auto-asignar"]}),e.jsxs(_,{size:"sm",onClick:i,loading:U,disabled:Object.keys(m).length===0,children:[e.jsx(he,{className:"w-4 h-4"}),"Guardar Mapeo"]})]})]})}),e.jsx(le,{children:e.jsx("div",{className:"space-y-3",children:l.variables.map(a=>e.jsxs("div",{className:"flex items-center gap-4 p-3 bg-gray-50 rounded-lg",children:[e.jsx("code",{className:"px-2 py-1 bg-white border rounded text-sm flex-shrink-0",children:`{{${a}}}`}),e.jsx("span",{className:"text-gray-400",children:"="}),e.jsxs("select",{value:t[a]||"",onChange:n=>T({...m,[a]:n.target.value}),className:"flex-1 px-3 py-1.5 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"-- Seleccionar mapeo --"}),Object.keys(d).length>0?Object.entries(d).map(([n,p])=>e.jsx("optgroup",{label:j[n]||n,children:p.map((f,E)=>e.jsx("option",{value:f.key,children:f.name},f.id||`${n}-${E}`))},n)):e.jsxs(e.Fragment,{children:[e.jsx("optgroup",{label:"Empleado",children:Object.entries(s).filter(([,n])=>n.startsWith("employee.")).map(([n,p],f)=>e.jsx("option",{value:p,children:n},`employee-${f}-${p}`))}),e.jsx("optgroup",{label:"Organizacion",children:Object.entries(s).filter(([,n])=>n.startsWith("organization.")).map(([n,p],f)=>e.jsx("option",{value:p,children:n},`organization-${f}-${p}`))}),e.jsx("optgroup",{label:"Sistema",children:Object.entries(s).filter(([,n])=>n.startsWith("system.")).map(([n,p],f)=>e.jsx("option",{value:p,children:n},`system-${f}-${p}`))}),e.jsx("optgroup",{label:"Solicitud",children:Object.entries(s).filter(([,n])=>n.startsWith("request.")).map(([n,p],f)=>e.jsx("option",{value:p,children:n},`request-${f}-${p}`))})]})]})]},a))})})]}),e.jsxs(re,{children:[e.jsx(ne,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(ie,{className:"flex items-center gap-2",children:[e.jsx(Ne,{className:"w-5 h-5"}),"Vista Previa de Firmas"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[(F||M!==(l?.preview_scale||.7)||g!==(l?.preview_page_height||842))&&e.jsxs(_,{size:"sm",onClick:()=>O.mutate(),loading:O.isPending,children:[e.jsx(he,{className:"w-4 h-4"}),"Guardar Cambios"]}),e.jsxs(_,{size:"sm",variant:"secondary",onClick:()=>A(!0),children:[e.jsx(oe,{className:"w-4 h-4"}),"Agregar Firmante"]})]})]})}),e.jsxs(le,{children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 mb-4",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Arrastra los campos de firma para posicionarlos."}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Escala:"}),e.jsx("input",{type:"number",min:"0.3",max:"2",step:"0.05",value:M,onChange:a=>z(parseFloat(a.target.value)||.7),className:"w-16 px-2 py-1 text-xs border rounded text-center"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Alto pÃ¡gina:"}),e.jsx("input",{type:"number",min:"500",max:"1500",step:"10",value:g,onChange:a=>q(parseInt(a.target.value)||842),className:"w-20 px-2 py-1 text-xs border rounded text-center"}),e.jsx("span",{className:"text-xs text-gray-400",children:"pts"})]})]})]}),e.jsx(Ie,{templateId:c,hasFile:!!l.file_name,signatories:u,selectedId:k,onSelect:a=>h(a),onUpdatePosition:Q,onUpdateSize:G,scale:M,numPages:S,customPageHeight:g,customPageWidth:y}),k&&e.jsx("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg border",children:(()=>{const a=u.find(n=>n.id===k);return a?e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:a.label||a.role_label}),e.jsxs("p",{className:"text-xs text-gray-500",children:["PosiciÃ³n: X=",a.x_position||350,", Y=",a.y_position||700]}),e.jsxs("p",{className:"text-xs text-gray-400",children:["TamaÃ±o: ",a.width||200," x ",a.height||80," px | Fecha: ",be.find(n=>n.value===(a.date_position||"right"))?.label||"Derecha"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(_,{size:"sm",variant:"secondary",onClick:()=>x(a),children:[e.jsx(de,{className:"w-4 h-4"}),"Editar"]}),e.jsx(_,{size:"sm",variant:"danger",onClick:()=>{confirm("Â¿Eliminar este firmante?")&&(D.mutate(a.id),h(null))},children:e.jsx(fe,{className:"w-4 h-4"})})]})]}):null})()})]})]})]}),e.jsxs("div",{className:"xl:col-span-1 space-y-6",children:[e.jsxs(re,{children:[e.jsx(ne,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(ie,{className:"flex items-center gap-2",children:[e.jsx(je,{className:"w-5 h-5"}),"Firmantes (",u.length,")"]}),e.jsx(_,{size:"sm",onClick:()=>A(!0),children:e.jsx(oe,{className:"w-4 h-4"})})]})}),e.jsxs(le,{children:[u.length>0&&e.jsx("div",{className:"mb-3 p-2 bg-blue-50 rounded-lg border border-blue-100",children:e.jsxs("p",{className:"text-xs text-blue-700",children:[e.jsx("strong",{children:"Orden de firma:"})," El nÃºmero indica en quÃ© secuencia deben firmar. Haz clic en ",e.jsx(de,{className:"w-3 h-3 inline"})," para cambiar el orden."]})}),u.length>0?e.jsx("div",{className:"space-y-2",children:[...u].sort((a,n)=>(a.position||0)-(n.position||0)).map(a=>e.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg cursor-pointer transition-colors ${k===a.id?"bg-primary-50 ring-2 ring-primary-500":"bg-gray-50 hover:bg-gray-100"}`,onClick:()=>h(a.id),children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"w-6 h-6 bg-primary-100 text-primary-700 rounded-full flex items-center justify-center text-xs font-bold",children:(a.position??0)===0?1:a.position}),e.jsx("span",{className:"text-[10px] text-gray-400",children:"orden"})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-sm truncate",children:a.label}),e.jsx("p",{className:"text-xs text-gray-500",children:a.role_label}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["(",a.x_position||350,", ",a.y_position||700,")"]})]}),a.required&&e.jsx(ce,{variant:"secondary",className:"text-xs",children:"Req"}),e.jsx("button",{onClick:n=>{n.stopPropagation(),x(a)},className:"p-1 hover:bg-blue-100 rounded text-blue-500",title:"Editar",children:e.jsx(de,{className:"w-4 h-4"})}),e.jsx("button",{onClick:n=>{n.stopPropagation(),confirm("Â¿Eliminar este firmante?")&&(D.mutate(a.id),k===a.id&&h(null))},className:"p-1 hover:bg-red-100 rounded text-red-500",children:e.jsx(fe,{className:"w-4 h-4"})})]},a.id))}):e.jsxs("div",{className:"text-center py-4",children:[e.jsx(je,{className:"w-8 h-8 text-gray-300 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-500",children:"No hay firmantes configurados"}),e.jsxs(_,{size:"sm",variant:"secondary",className:"mt-2",onClick:()=>A(!0),children:[e.jsx(oe,{className:"w-4 h-4"}),"Agregar Firmante"]})]})]})]}),e.jsxs(re,{children:[e.jsx(ne,{children:e.jsxs(ie,{className:"flex items-center gap-2",children:[e.jsx(ze,{className:"w-5 h-5"}),"Informacion"]})}),e.jsxs(le,{className:"space-y-3 text-sm",children:[l.company_name&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"CompaÃ±Ã­a"}),e.jsx("span",{className:"font-medium",children:l.company_name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Version"}),e.jsx("span",{className:"font-medium",children:l.version})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Creado"}),e.jsx("span",{className:"font-medium",children:new Date(l.created_at).toLocaleDateString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Actualizado"}),e.jsx("span",{className:"font-medium",children:new Date(l.updated_at).toLocaleDateString()})]})]})]})]})]}),e.jsx(Le,{isOpen:R,onClose:()=>A(!1),templateId:c,pdfWidth:y,pdfHeight:g,totalPages:S,existingSignatories:u.length,onSuccess:()=>{}}),e.jsx(Re,{isOpen:!!C,onClose:()=>x(null),templateId:c,signatory:C,numPages:S,pdfWidth:y,pdfHeight:g,totalSignatories:u.length,onSuccess:()=>{}})]})}export{Ve as default};
