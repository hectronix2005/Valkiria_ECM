import{a as N,j as e}from"./vendor-query-2ZprUnmA.js";import{h as y}from"./index-BQIwnqAF.js";import{C as x,a as m,b as p,c as o}from"./Card-DbNYCSnq.js";import{a5 as f,m as v,U as g,r as w,ai as C,aa as h,aj as _,p as j,Q as b,a8 as A,u as k,A as D,F,T as u}from"./vendor-icons-BeDautqo.js";import"./vendor-router-CyR0tpch.js";import"./vendor-react-Cgg2GOmP.js";import"./vendor-axios-B9ygI19o.js";function i({title:r,value:n,subtitle:t,icon:l,color:s="blue",trend:a}){const c={blue:"bg-blue-50 text-blue-600 border-blue-100",green:"bg-green-50 text-green-600 border-green-100",yellow:"bg-yellow-50 text-yellow-600 border-yellow-100",red:"bg-red-50 text-red-600 border-red-100",purple:"bg-purple-50 text-purple-600 border-purple-100",orange:"bg-orange-50 text-orange-600 border-orange-100"},d={blue:"text-blue-500",green:"text-green-500",yellow:"text-yellow-500",red:"text-red-500",purple:"text-purple-500",orange:"text-orange-500"};return e.jsx(x,{className:`border ${c[s]}`,children:e.jsx(o,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:r}),e.jsx("p",{className:"text-3xl font-bold mt-1",children:n}),t&&e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:t}),a&&e.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[e.jsx(u,{className:"w-3 h-3 text-green-500"}),e.jsx("span",{className:"text-xs text-green-600",children:a})]})]}),e.jsx("div",{className:`p-3 rounded-xl ${c[s]}`,children:e.jsx(l,{className:`w-6 h-6 ${d[s]}`})})]})})})}function T({data:r}){if(!r||Object.keys(r).length===0)return e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No hay datos de departamentos"});const n=Object.values(r).reduce((s,a)=>s+a,0),t=["bg-blue-500","bg-green-500","bg-purple-500","bg-orange-500","bg-pink-500","bg-cyan-500","bg-yellow-500","bg-red-500"],l={engineering:"Ingenieria",hr:"Recursos Humanos",finance:"Finanzas",sales:"Ventas",marketing:"Marketing",operations:"Operaciones",legal:"Legal"};return e.jsx("div",{className:"space-y-3",children:Object.entries(r).map(([s,a],c)=>{const d=n>0?a/n*100:0;return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:l[s]||s}),e.jsxs("span",{className:"font-medium",children:[a," (",d.toFixed(0),"%)"]})]}),e.jsx("div",{className:"h-2 bg-gray-100 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${t[c%t.length]} rounded-full transition-all`,style:{width:`${d}%`}})})]},s)})})}function H(){const{data:r,isLoading:n,error:t}=N({queryKey:["hr-dashboard"],queryFn:async()=>(await y.getStats()).data.data});if(n)return e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx(f,{className:"w-8 h-8 animate-spin text-primary-600"})});if(t)return e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] text-red-600",children:[e.jsx(v,{className:"w-12 h-12 mb-4"}),e.jsx("p",{className:"text-lg font-medium",children:"Error al cargar el dashboard"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:t.message})]});const{employees:l,vacation_requests:s,certification_requests:a}=r||{};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard HR"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Resumen de recursos humanos"})]}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(g,{className:"w-5 h-5"}),"Empleados"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(i,{title:"Total Empleados",value:l?.total||0,icon:g,color:"blue"}),e.jsx(i,{title:"Activos",value:l?.active||0,subtitle:l?.total?`${(l.active/l.total*100).toFixed(0)}% del total`:null,icon:w,color:"green"}),e.jsx(i,{title:"En Licencia",value:l?.on_leave||0,icon:C,color:"yellow"}),e.jsx(i,{title:"Departamentos",value:Object.keys(l?.by_department||{}).length,icon:h,color:"purple"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(x,{children:[e.jsx(m,{children:e.jsxs(p,{className:"flex items-center gap-2",children:[e.jsx(_,{className:"w-5 h-5 text-green-600"}),"Solicitudes de Vacaciones"]})}),e.jsx(o,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-yellow-50 rounded-lg border border-yellow-100",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{className:"w-5 h-5 text-yellow-600"}),e.jsx("span",{className:"text-sm text-yellow-700",children:"Pendientes"})]}),e.jsx("p",{className:"text-2xl font-bold text-yellow-800 mt-2",children:s?.pending||0})]}),e.jsxs("div",{className:"p-4 bg-green-50 rounded-lg border border-green-100",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"text-sm text-green-700",children:"Aprobadas (Año)"})]}),e.jsx("p",{className:"text-2xl font-bold text-green-800 mt-2",children:s?.approved_this_year||0})]}),e.jsxs("div",{className:"p-4 bg-red-50 rounded-lg border border-red-100",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{className:"w-5 h-5 text-red-600"}),e.jsx("span",{className:"text-sm text-red-700",children:"Rechazadas (Año)"})]}),e.jsx("p",{className:"text-2xl font-bold text-red-800 mt-2",children:s?.rejected_this_year||0})]}),e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-100",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{className:"w-5 h-5 text-blue-600"}),e.jsx("span",{className:"text-sm text-blue-700",children:"De vacaciones hoy"})]}),e.jsx("p",{className:"text-2xl font-bold text-blue-800 mt-2",children:s?.employees_on_vacation_today||0})]})]})})]}),e.jsxs(x,{children:[e.jsx(m,{children:e.jsxs(p,{className:"flex items-center gap-2",children:[e.jsx(D,{className:"w-5 h-5 text-purple-600"}),"Certificaciones Laborales"]})}),e.jsx(o,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-yellow-50 rounded-lg border border-yellow-100",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{className:"w-5 h-5 text-yellow-600"}),e.jsx("span",{className:"text-sm text-yellow-700",children:"Pendientes"})]}),e.jsx("p",{className:"text-2xl font-bold text-yellow-800 mt-2",children:a?.pending||0})]}),e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-100",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F,{className:"w-5 h-5 text-blue-600"}),e.jsx("span",{className:"text-sm text-blue-700",children:"Procesando"})]}),e.jsx("p",{className:"text-2xl font-bold text-blue-800 mt-2",children:a?.processing||0})]}),e.jsxs("div",{className:"p-4 bg-green-50 rounded-lg border border-green-100",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"text-sm text-green-700",children:"Completadas (Año)"})]}),e.jsx("p",{className:"text-2xl font-bold text-green-800 mt-2",children:a?.completed_this_year||0})]}),e.jsxs("div",{className:"p-4 bg-purple-50 rounded-lg border border-purple-100",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{className:"w-5 h-5 text-purple-600"}),e.jsx("span",{className:"text-sm text-purple-700",children:"Tiempo promedio"})]}),e.jsx("p",{className:"text-2xl font-bold text-purple-800 mt-2",children:a?.average_processing_days?`${a.average_processing_days.toFixed(1)} dias`:"N/A"})]})]})})]})]}),e.jsxs(x,{children:[e.jsx(m,{children:e.jsxs(p,{className:"flex items-center gap-2",children:[e.jsx(h,{className:"w-5 h-5 text-gray-600"}),"Distribucion por Departamento"]})}),e.jsx(o,{children:e.jsx(T,{data:l?.by_department})})]})]})}export{H as default};
