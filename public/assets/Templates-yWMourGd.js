import{b as G,u as O,c as R,j as e}from"./vendor-query-BtlmzfbD.js";import{a as le,r,L as z}from"./vendor-router-CyR0tpch.js";import{t as j}from"./index-DZVyN1mk.js";import{C as W,c as Y}from"./Card-CVFC4agM.js";import{B as T}from"./Button-Cc42oWsS.js";import{I as J}from"./Input-DPOK3q6H.js";import{s as ie,U as V,P as I,B as ne,e as oe,F as Q,m as ce,ar as Z,d as de,I as ue,as as me,at as xe,W as ge,X as K,l as H,D as he}from"./vendor-icons-YtD_Ipmm.js";import"./vendor-react-Cgg2GOmP.js";import"./vendor-axios-B9ygI19o.js";const X={draft:{label:"Borrador",color:"bg-gray-100 text-gray-700"},active:{label:"Activo",color:"bg-green-100 text-green-700"},archived:{label:"Archivado",color:"bg-yellow-100 text-yellow-700"}},ee=[{value:"",label:"Seleccionar tipo..."},{value:"employment",label:"Certificado de Empleo"},{value:"salary",label:"Certificado de Salario"},{value:"position",label:"Certificado de Cargo"},{value:"full",label:"Certificado Completo"},{value:"custom",label:"Certificado Personalizado"}];function pe({isOpen:x,onClose:g,onSuccess:l}){const h=G(),[u,k]=r.useState(""),[v,S]=r.useState(""),[p,f]=r.useState("hr"),[y,N]=r.useState("laboral"),[i,n]=r.useState("other"),[m,d]=r.useState(""),[_,C]=r.useState(""),{data:b}=O({queryKey:["template-categories"],queryFn:()=>j.getCategories()}),E=R({mutationFn:s=>j.create({template:s}),onSuccess:s=>{h.invalidateQueries(["templates"]),l(s.data.data),w()},onError:s=>{C(s.response?.data?.error||"Error al crear template")}}),w=()=>{k(""),S(""),f("hr"),N("laboral"),n("other"),d(""),C(""),g()},M=s=>{if(s.preventDefault(),!u.trim()){C("El nombre es requerido");return}const o={name:u,description:v,module_type:p,main_category:y,category:i};i==="certification"&&m&&(o.certification_type=m),E.mutate(o)},U=b?.data?.modules||[],L=b?.data?.main_categories||[],D=b?.data?.category_to_module||{},q=b?.data?.grouped||{},A=q[y]||[],P=s=>{f(s);const o=Object.entries(D).find(([F,B])=>B===s);if(o){N(o[0]);const F=q[o[0]]||[];F.length>0&&n(F[0].value)}},t=s=>{N(s),D[s]&&f(D[s]);const o=q[s]||[];o.length>0&&n(o[0].value)};return x?e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Nuevo Template"}),e.jsx("button",{onClick:w,className:"p-1 hover:bg-gray-100 rounded",children:e.jsx(K,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:M,className:"p-4 space-y-4",children:[_&&e.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-700",children:[e.jsx(H,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:_})]}),e.jsx(J,{label:"Nombre del Template",value:u,onChange:s=>k(s.target.value),placeholder:"Ej: Certificacion Laboral Estandar",required:!0}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Módulo"}),e.jsx("select",{value:p,onChange:s=>P(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:U.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Define a qué módulo del sistema pertenece este template"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Categoría"}),e.jsx("select",{value:y,onChange:s=>t(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:L.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subcategoría"}),e.jsx("select",{value:i,onChange:s=>n(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:A.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]})]}),i==="certification"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Certificación"}),e.jsx("select",{value:m,onChange:s=>d(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:ee.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Solo los tipos de certificación con template aparecerán en el selector de solicitudes"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripcion (opcional)"}),e.jsx("textarea",{value:v,onChange:s=>S(s.target.value),placeholder:"Descripcion del proposito del template...",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(T,{type:"button",variant:"secondary",onClick:w,children:"Cancelar"}),e.jsxs(T,{type:"submit",loading:E.isPending,children:[e.jsx(I,{className:"w-4 h-4"}),"Crear Template"]})]})]})]})}):null}function fe({isOpen:x,onClose:g,template:l}){const h=G(),[u,k]=r.useState(""),[v,S]=r.useState(""),[p,f]=r.useState("hr"),[y,N]=r.useState("laboral"),[i,n]=r.useState(""),[m,d]=r.useState(""),[_,C]=r.useState(""),{data:b}=O({queryKey:["template-categories"],queryFn:()=>j.getCategories()}),E=R({mutationFn:t=>j.update(l?.id,{template:t}),onSuccess:()=>{h.invalidateQueries(["templates"]),g()},onError:t=>{C(t.response?.data?.error||"Error al actualizar template")}}),w=b?.data?.modules||[],M=b?.data?.grouped||{},U=b?.data?.main_categories||[],L=b?.data?.category_to_module||{},D=M[y]||[];r.useEffect(()=>{x&&l&&(k(l.name||""),S(l.description||""),f(l.module_type||"hr"),N(l.main_category||"laboral"),n(l.category||"other"),d(l.certification_type||""),C(""))},[x,l?.id]);const q=t=>{f(t);const s=Object.entries(L).find(([o,F])=>F===t);if(s){N(s[0]);const o=M[s[0]]||[];o.length>0&&n(o[0].value)}},A=t=>{N(t),L[t]&&f(L[t]);const s=M[t]||[];s.length>0&&!s.find(o=>o.value===i)&&n(s[0].value)},P=t=>{if(t.preventDefault(),!u.trim()){C("El nombre es requerido");return}const s={name:u,description:v,module_type:p,main_category:y,category:i};i==="certification"&&(s.certification_type=m||null),E.mutate(s)};return!x||!l?null:e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Editar Template"}),e.jsx("button",{onClick:g,className:"p-1 hover:bg-gray-100 rounded",children:e.jsx(K,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:P,className:"p-4 space-y-4",children:[_&&e.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-700",children:[e.jsx(H,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:_})]}),e.jsx(J,{label:"Nombre del Template",value:u,onChange:t=>k(t.target.value),placeholder:"Ej: Certificacion Laboral Estandar",required:!0}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Módulo"}),e.jsx("select",{value:p,onChange:t=>q(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:w.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Define a qué módulo del sistema pertenece este template"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Categoría"}),e.jsx("select",{value:y,onChange:t=>A(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:U.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subcategoría"}),e.jsx("select",{value:i,onChange:t=>n(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:D.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))})]})]}),i==="certification"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Certificación"}),e.jsx("select",{value:m,onChange:t=>d(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:ee.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Solo los tipos de certificación con template aparecerán en el selector de solicitudes"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripcion (opcional)"}),e.jsx("textarea",{value:v,onChange:t=>S(t.target.value),placeholder:"Descripcion del proposito del template...",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(T,{type:"button",variant:"secondary",onClick:g,children:"Cancelar"}),e.jsxs(T,{type:"submit",loading:E.isPending,children:[e.jsx(Z,{className:"w-4 h-4"}),"Guardar Cambios"]})]})]})]})})}function ye({isOpen:x,onClose:g,template:l}){const[h,u]=r.useState(null),[k,v]=r.useState(!1),[S,p]=r.useState("");r.useEffect(()=>(x&&l?.file_name&&f(),()=>{h&&URL.revokeObjectURL(h)}),[x,l?.id]);const f=async()=>{v(!0),p("");try{const i=await j.preview(l.id),n=new Blob([i.data],{type:"application/pdf"}),m=URL.createObjectURL(n);u(m)}catch(i){p(i.response?.data?.error||"Error al cargar la previsualización")}finally{v(!1)}},y=()=>{h&&(URL.revokeObjectURL(h),u(null)),p(""),g()},N=async()=>{try{const i=await j.download(l.id),n=new Blob([i.data],{type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"}),m=URL.createObjectURL(n),d=document.createElement("a");d.href=m,d.download=l.file_name||`${l.name}.docx`,document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(m)}catch{alert("Error al descargar el archivo")}};return x?e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-5xl h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Previsualización"}),e.jsx("p",{className:"text-sm text-gray-500",children:l?.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(T,{variant:"secondary",size:"sm",onClick:N,children:[e.jsx(he,{className:"w-4 h-4"}),"Descargar Word"]}),e.jsx("button",{onClick:y,className:"p-1 hover:bg-gray-100 rounded",children:e.jsx(K,{className:"w-5 h-5"})})]})]}),e.jsx("div",{className:"flex-1 overflow-hidden p-4",children:k?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Generando previsualización..."})]})}):S?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx(H,{className:"w-12 h-12 text-red-400 mx-auto mb-4"}),e.jsx("p",{className:"text-red-600",children:S}),e.jsx(T,{variant:"secondary",className:"mt-4",onClick:f,children:"Reintentar"})]})}):h?e.jsx("iframe",{src:h,className:"w-full h-full rounded-lg border",title:"Preview"}):e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("p",{className:"text-gray-500",children:"No hay archivo para previsualizar"})})})]})}):null}const be={laboral:"bg-blue-100 text-blue-700",comercial:"bg-purple-100 text-purple-700",administrativo:"bg-amber-100 text-amber-700"},je={hr:"bg-emerald-100 text-emerald-700",legal:"bg-indigo-100 text-indigo-700",admin:"bg-slate-100 text-slate-700"},$=[{id:"legal",label:"Gestión Legal",mainCategory:"comercial",icon:"Building2",color:"indigo",description:"Templates para contratos y documentos legales"},{id:"hr",label:"Recursos Humanos",mainCategory:"laboral",icon:"Users",color:"emerald",description:"Templates para documentos de RRHH"}];function Me({module:x="legal"}){const g=G(),l=le(),[h,u]=r.useState(!1),[k,v]=r.useState(!1),[S,p]=r.useState(!1),[f,y]=r.useState(null),[N,i]=r.useState(null),[n,m]=r.useState(""),[d,_]=r.useState(""),[C,b]=r.useState(""),E=x,w=$.find(a=>a.id===E)||$[0],{data:M,isLoading:U}=O({queryKey:["templates",{q:n,status:d,main_category:w.mainCategory,category:C}],queryFn:()=>j.list({q:n||void 0,status:d||void 0,main_category:w.mainCategory,category:C||void 0})}),{data:L}=O({queryKey:["template-categories"],queryFn:()=>j.getCategories()}),D=R({mutationFn:a=>j.activate(a),onSuccess:()=>g.invalidateQueries(["templates"])}),q=R({mutationFn:a=>j.archive(a),onSuccess:()=>g.invalidateQueries(["templates"])}),A=R({mutationFn:a=>j.duplicate(a),onSuccess:()=>g.invalidateQueries(["templates"])}),P=R({mutationFn:a=>j.delete(a),onSuccess:()=>g.invalidateQueries(["templates"])}),t=(a,c)=>{switch(a){case"preview":i(c),p(!0);break;case"edit":y(c),v(!0);break;case"activate":D.mutate(c.id);break;case"archive":q.mutate(c.id);break;case"duplicate":A.mutate(c.id);break;case"delete":confirm("¿Esta seguro de eliminar este template?")&&P.mutate(c.id);break}},s=M?.data?.data||[],F=(L?.data?.grouped||{})[w.mainCategory]||[],B=M?.data?.meta||{},ae=a=>{l(`/admin/templates/${a}`)};return r.useEffect(()=>{b(""),m(""),_("")},[x]),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["Templates - ",w.label]}),e.jsx("p",{className:"text-gray-500",children:w.description})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[E==="legal"&&e.jsx(z,{to:"/legal/contracts",children:e.jsxs(T,{variant:"secondary",children:[e.jsx(ie,{className:"w-4 h-4"}),"Contratos"]})}),e.jsx(z,{to:"/admin/signatory-types",children:e.jsxs(T,{variant:"secondary",children:[e.jsx(V,{className:"w-4 h-4"}),"Tipos de Firmantes"]})}),e.jsxs(T,{onClick:()=>u(!0),children:[e.jsx(I,{className:"w-4 h-4"}),"Nuevo Template"]})]})]}),e.jsx("div",{className:"flex gap-4",children:$.map(a=>{const c=E===a.id,se=a.color==="indigo"?c?"border-indigo-500 bg-indigo-50":"border-transparent hover:border-gray-300 hover:bg-gray-50":c?"border-emerald-500 bg-emerald-50":"border-transparent hover:border-gray-300 hover:bg-gray-50",te=a.color==="indigo"?c?"bg-indigo-100 text-indigo-600":"bg-gray-100 text-gray-500":c?"bg-emerald-100 text-emerald-600":"bg-gray-100 text-gray-500",re=a.color==="indigo"?c?"text-indigo-900":"text-gray-700":c?"text-emerald-900":"text-gray-700";return e.jsx("button",{onClick:()=>ae(a.id),className:`flex-1 p-4 border-2 rounded-xl transition-all ${se}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${te}`,children:a.id==="legal"?e.jsx(ne,{className:"w-5 h-5"}):e.jsx(V,{className:"w-5 h-5"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:`font-semibold ${re}`,children:a.label}),e.jsx("p",{className:"text-xs text-gray-500",children:a.description})]})]})},a.id)})}),e.jsx(W,{children:e.jsx(Y,{className:"p-4",children:e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsx("div",{className:"flex-1 min-w-[200px]",children:e.jsxs("div",{className:"relative",children:[e.jsx(oe,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar templates...",value:n,onChange:a=>m(a.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"})]})}),e.jsxs("select",{value:d,onChange:a=>_(a.target.value),className:"px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"Todos los estados"}),e.jsx("option",{value:"draft",children:"Borrador"}),e.jsx("option",{value:"active",children:"Activo"}),e.jsx("option",{value:"archived",children:"Archivado"})]}),e.jsxs("select",{value:C,onChange:a=>b(a.target.value),className:"px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"Todas las subcategorías"}),F.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))]})]})})}),e.jsx(W,{children:e.jsx(Y,{className:"p-0",children:U?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500"})}):s.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(Q,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay templates"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Crea tu primer template para comenzar a generar documentos"}),e.jsxs(T,{onClick:()=>u(!0),children:[e.jsx(I,{className:"w-4 h-4"}),"Crear Template"]})]}):e.jsxs("table",{className:"w-full table-fixed",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"w-[30%] px-3 py-2.5 text-left text-xs font-medium text-gray-500 uppercase",children:"Template"}),e.jsx("th",{className:"w-[12%] px-3 py-2.5 text-left text-xs font-medium text-gray-500 uppercase",children:"Módulo"}),e.jsx("th",{className:"w-[15%] px-3 py-2.5 text-left text-xs font-medium text-gray-500 uppercase",children:"Categoría"}),e.jsx("th",{className:"w-[6%] px-3 py-2.5 text-center text-xs font-medium text-gray-500 uppercase",children:"Vars"}),e.jsx("th",{className:"w-[6%] px-3 py-2.5 text-center text-xs font-medium text-gray-500 uppercase",children:"Firm."}),e.jsx("th",{className:"w-[10%] px-3 py-2.5 text-left text-xs font-medium text-gray-500 uppercase",children:"Estado"}),e.jsx("th",{className:"w-[21%] px-3 py-2.5 text-right text-xs font-medium text-gray-500 uppercase",children:"Acciones"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:s.map(a=>{const c=X[a.status]||X.draft;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-3 py-3",children:e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx("div",{className:"p-1.5 bg-primary-50 rounded flex-shrink-0",children:a.file_name?e.jsx(Q,{className:"w-4 h-4 text-primary-600"}):e.jsx(Q,{className:"w-4 h-4 text-gray-400"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900 text-sm truncate",title:a.name,children:a.name}),a.file_name&&e.jsx("p",{className:"text-xs text-gray-400 truncate",title:a.file_name,children:a.file_name})]})]})}),e.jsx("td",{className:"px-3 py-3",children:e.jsx("span",{className:`inline-flex px-1.5 py-0.5 rounded text-xs font-medium ${je[a.module_type]||"bg-gray-100 text-gray-700"}`,children:a.module_type_label})}),e.jsx("td",{className:"px-3 py-3",children:e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsx("span",{className:`inline-flex px-1.5 py-0.5 rounded text-xs font-medium w-fit ${be[a.main_category]||"bg-gray-100 text-gray-700"}`,children:a.main_category_label}),e.jsx("span",{className:"text-xs text-gray-500",children:a.category_label})]})}),e.jsx("td",{className:"px-3 py-3 text-center",children:e.jsx("span",{className:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-gray-100 text-xs font-medium text-gray-700",children:a.variables?.length||0})}),e.jsx("td",{className:"px-3 py-3 text-center",children:e.jsx("span",{className:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-gray-100 text-xs font-medium text-gray-700",children:a.signatories_count||0})}),e.jsx("td",{className:"px-3 py-3",children:e.jsx("span",{className:`inline-flex px-2 py-0.5 rounded-full text-xs font-medium ${c.color}`,children:c.label})}),e.jsx("td",{className:"px-3 py-3",children:e.jsxs("div",{className:"flex items-center justify-end gap-0.5",children:[a.file_name&&e.jsx("button",{onClick:()=>t("preview",a),title:"Previsualizar",className:"p-1.5 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded",children:e.jsx(ce,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>t("edit",a),title:"Editar",className:"p-1.5 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded",children:e.jsx(Z,{className:"w-4 h-4"})}),e.jsx(z,{to:`/admin/templates/${a.id}`,children:e.jsx("button",{title:"Configurar",className:"p-1.5 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded",children:e.jsx(de,{className:"w-4 h-4"})})}),a.status==="draft"&&a.file_name&&e.jsx("button",{onClick:()=>t("activate",a),title:"Activar",className:"p-1.5 text-green-600 hover:text-green-700 hover:bg-green-50 rounded",children:e.jsx(ue,{className:"w-4 h-4"})}),a.status==="active"&&e.jsx("button",{onClick:()=>t("archive",a),title:"Archivar",className:"p-1.5 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded",children:e.jsx(me,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>t("duplicate",a),title:"Duplicar",className:"p-1.5 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded",children:e.jsx(xe,{className:"w-4 h-4"})}),a.status==="draft"&&e.jsx("button",{onClick:()=>t("delete",a),title:"Eliminar",className:"p-1.5 text-red-500 hover:text-red-700 hover:bg-red-50 rounded",children:e.jsx(ge,{className:"w-4 h-4"})})]})})]},a.id)})})]})})}),B.total>0&&e.jsxs("div",{className:"text-sm text-gray-500 text-center",children:["Mostrando ",s.length," de ",B.total," templates"]}),e.jsx(pe,{isOpen:h,onClose:()=>u(!1),onSuccess:a=>{window.location.href=`/admin/templates/${a.id}`}}),e.jsx(fe,{isOpen:k,onClose:()=>{v(!1),y(null)},template:f}),e.jsx(ye,{isOpen:S,onClose:()=>{p(!1),i(null)},template:N})]})}export{Me as default};
