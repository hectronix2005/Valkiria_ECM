import{u as S,a as q,b as z,j as e}from"./vendor-query-2ZprUnmA.js";import{r as o}from"./vendor-router-CyR0tpch.js";import{k as u}from"./index-SgKmwrDJ.js";import{ax as p,m as T,_ as I,Q as A,az as P,B as g,U as h,F as b,S as y}from"./vendor-icons-7sl6YsZj.js";import"./vendor-react-Cgg2GOmP.js";import"./vendor-axios-B9ygI19o.js";const D=[{value:"monthly",label:"Acumulación Mensual"},{value:"yearly",label:"Acumulación Anual"}],E=[{value:"pdf",label:"PDF"},{value:"docx",label:"Word (DOCX)"},{value:"xlsx",label:"Excel (XLSX)"},{value:"pptx",label:"PowerPoint (PPTX)"},{value:"jpg",label:"Imagen JPG"},{value:"png",label:"Imagen PNG"},{value:"gif",label:"Imagen GIF"},{value:"txt",label:"Texto (TXT)"},{value:"csv",label:"CSV"}];function X(){const _=S(),[i,v]=o.useState("organization"),[t,l]=o.useState(null),[j,d]=o.useState(!1),{data:N,isLoading:f,error:x}=q({queryKey:["settings"],queryFn:()=>u.get(),onSuccess:a=>{const s=a.data.data;l({name:s.organization?.name||"",legal_name:s.organization?.legal_name||"",tax_id:s.organization?.tax_id||"",address:s.organization?.address||"",city:s.organization?.city||"",country:s.organization?.country||"Colombia",phone:s.organization?.phone||"",email:s.organization?.email||"",website:s.organization?.website||"",vacation_days_per_year:s.hr?.vacation_days_per_year||15,vacation_accrual_policy:s.hr?.vacation_accrual_policy||"monthly",max_vacation_carryover:s.hr?.max_vacation_carryover||15,probation_period_months:s.hr?.probation_period_months||2,allowed_file_types:s.documents?.allowed_file_types||["pdf","docx","xlsx"],max_file_size_mb:s.documents?.max_file_size_mb||25,document_retention_years:s.documents?.document_retention_years||10,session_timeout_minutes:s.security?.session_timeout_minutes||480,password_min_length:s.security?.password_min_length||8,password_require_uppercase:s.security?.password_require_uppercase??!0,password_require_number:s.security?.password_require_number??!0,password_require_special:s.security?.password_require_special??!1,max_login_attempts:s.security?.max_login_attempts||5})}}),n=z({mutationFn:a=>u.update(a),onSuccess:()=>{_.invalidateQueries(["settings"]),d(!0),setTimeout(()=>d(!1),3e3)}}),r=(a,s)=>{l(m=>({...m,[a]:s}))},C=a=>{l(s=>({...s,allowed_file_types:s.allowed_file_types.includes(a)?s.allowed_file_types.filter(m=>m!==a):[...s.allowed_file_types,a]}))},w=()=>{n.mutate(t)},k=[{id:"organization",label:"Organización",icon:g},{id:"hr",label:"Recursos Humanos",icon:h},{id:"documents",label:"Documentos",icon:b},{id:"security",label:"Seguridad",icon:y}];if(f)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(p,{className:"w-8 h-8 animate-spin text-primary-600"})});if(x)return e.jsxs("div",{className:"bg-danger-50 border border-danger-200 rounded-lg p-4 flex items-center gap-3",children:[e.jsx(T,{className:"w-5 h-5 text-danger-600"}),e.jsxs("span",{className:"text-danger-700",children:["Error al cargar configuración: ",x.message]})]});if(!t)return null;const c=N?.data?.data;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Configuración"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Administra la configuración del sistema"})]}),e.jsxs("button",{onClick:w,disabled:n.isLoading,className:"btn-primary flex items-center gap-2",children:[n.isLoading?e.jsx(p,{className:"w-4 h-4 animate-spin"}):e.jsx(I,{className:"w-4 h-4"}),"Guardar Cambios"]})]}),j&&e.jsxs("div",{className:"bg-success-50 border border-success-200 rounded-lg p-4 flex items-center gap-3",children:[e.jsx(A,{className:"w-5 h-5 text-success-600"}),e.jsx("span",{className:"text-success-700",children:"Configuración guardada correctamente"})]}),e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 flex items-center gap-4",children:[e.jsx(P,{className:"w-5 h-5 text-gray-500"}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:c?.system?.app_name})," ","•"," ",e.jsxs("span",{children:["v",c?.system?.version]})," ","•"," ",e.jsx("span",{className:"capitalize",children:c?.system?.environment})]})]}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex gap-4",children:k.map(a=>e.jsxs("button",{onClick:()=>v(a.id),className:`flex items-center gap-2 px-4 py-3 border-b-2 font-medium text-sm transition-colors ${i===a.id?"border-primary-600 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(a.icon,{className:"w-4 h-4"}),a.label]},a.id))})}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[i==="organization"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(g,{className:"w-5 h-5"}),"Información de la Organización"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre de la Empresa"}),e.jsx("input",{type:"text",value:t.name,onChange:a=>r("name",a.target.value),className:"input",placeholder:"Mi Empresa S.A.S."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Razón Social"}),e.jsx("input",{type:"text",value:t.legal_name,onChange:a=>r("legal_name",a.target.value),className:"input",placeholder:"Mi Empresa S.A.S."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"NIT"}),e.jsx("input",{type:"text",value:t.tax_id,onChange:a=>r("tax_id",a.target.value),className:"input",placeholder:"900.123.456-7"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Teléfono"}),e.jsx("input",{type:"text",value:t.phone,onChange:a=>r("phone",a.target.value),className:"input",placeholder:"+57 601 234 5678"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Corporativo"}),e.jsx("input",{type:"email",value:t.email,onChange:a=>r("email",a.target.value),className:"input",placeholder:"contacto@empresa.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sitio Web"}),e.jsx("input",{type:"url",value:t.website,onChange:a=>r("website",a.target.value),className:"input",placeholder:"https://www.empresa.com"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Dirección"}),e.jsx("input",{type:"text",value:t.address,onChange:a=>r("address",a.target.value),className:"input",placeholder:"Calle 100 # 10-20, Oficina 501"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ciudad"}),e.jsx("input",{type:"text",value:t.city,onChange:a=>r("city",a.target.value),className:"input",placeholder:"Bogotá D.C."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"País"}),e.jsx("input",{type:"text",value:t.country,onChange:a=>r("country",a.target.value),className:"input",placeholder:"Colombia"})]})]})]}),i==="hr"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(h,{className:"w-5 h-5"}),"Configuración de Recursos Humanos"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Días de Vacaciones por Año"}),e.jsx("input",{type:"number",value:t.vacation_days_per_year,onChange:a=>r("vacation_days_per_year",parseInt(a.target.value)),className:"input",min:"1",max:"30"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Según el CST Art. 186, mínimo 15 días hábiles"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Política de Acumulación"}),e.jsx("select",{value:t.vacation_accrual_policy,onChange:a=>r("vacation_accrual_policy",a.target.value),className:"input",children:D.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Máximo Días Acumulables"}),e.jsx("input",{type:"number",value:t.max_vacation_carryover,onChange:a=>r("max_vacation_carryover",parseInt(a.target.value)),className:"input",min:"0",max:"60"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Días que se pueden trasladar al siguiente año"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Período de Prueba (meses)"}),e.jsx("input",{type:"number",value:t.probation_period_months,onChange:a=>r("probation_period_months",parseInt(a.target.value)),className:"input",min:"0",max:"6"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Según el CST, máximo 2 meses"})]})]})]}),i==="documents"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(b,{className:"w-5 h-5"}),"Configuración de Documentos"]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Tipos de Archivo Permitidos"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:E.map(a=>e.jsxs("button",{onClick:()=>C(a.value),className:`px-3 py-1.5 rounded-full text-sm font-medium transition-colors ${t.allowed_file_types.includes(a.value)?"bg-primary-100 text-primary-700 border border-primary-300":"bg-gray-100 text-gray-600 border border-gray-200 hover:bg-gray-200"}`,children:[".",a.value]},a.value))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tamaño Máximo de Archivo (MB)"}),e.jsx("input",{type:"number",value:t.max_file_size_mb,onChange:a=>r("max_file_size_mb",parseInt(a.target.value)),className:"input",min:"1",max:"100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Retención de Documentos (años)"}),e.jsx("input",{type:"number",value:t.document_retention_years,onChange:a=>r("document_retention_years",parseInt(a.target.value)),className:"input",min:"1",max:"50"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Tiempo mínimo de conservación de documentos"})]})]})]})]}),i==="security"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(y,{className:"w-5 h-5"}),"Configuración de Seguridad"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tiempo de Sesión (minutos)"}),e.jsx("input",{type:"number",value:t.session_timeout_minutes,onChange:a=>r("session_timeout_minutes",parseInt(a.target.value)),className:"input",min:"15",max:"1440"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Tiempo de inactividad antes de cerrar sesión"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Intentos Máximos de Login"}),e.jsx("input",{type:"number",value:t.max_login_attempts,onChange:a=>r("max_login_attempts",parseInt(a.target.value)),className:"input",min:"3",max:"10"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Bloqueo temporal después de estos intentos fallidos"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Longitud Mínima de Contraseña"}),e.jsx("input",{type:"number",value:t.password_min_length,onChange:a=>r("password_min_length",parseInt(a.target.value)),className:"input",min:"6",max:"20"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Requisitos de Contraseña"}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.password_require_uppercase,onChange:a=>r("password_require_uppercase",a.target.checked),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Requiere mayúsculas"})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.password_require_number,onChange:a=>r("password_require_number",a.target.checked),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Requiere números"})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.password_require_special,onChange:a=>r("password_require_special",a.target.checked),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Requiere caracteres especiales"})]})]})]})]})]})]})}export{X as default};
