import{j as e}from"./vendor-query-BtlmzfbD.js";import{r as o,a as z,u as T}from"./vendor-router-CyR0tpch.js";import{u as q}from"./index-C7prixjq.js";import{B}from"./Button-C8xCGhNf.js";import{I as U}from"./Input-DPOK3q6H.js";import{l as G,E as Y,m as k,U as g,n as A,o as R,p as J,q as K,S as $,T as F}from"./vendor-icons-BMeEPn6p.js";import"./vendor-react-Cgg2GOmP.js";import"./vendor-axios-B9ygI19o.js";const x=[{email:"admin@valkyria.com",password:"Admin123",role:"Admin",color:"bg-red-100 text-red-700",description:"Carlos - Acceso total al sistema",category:"admin"},{email:"hectorneira2005@hotmail.com",password:"Admin123",role:"Admin",color:"bg-red-100 text-red-700",description:"Hector Neira - Admin principal",category:"admin"},{email:"hr.manager@valkyria.com",password:"HrManager123",role:"Gerente RRHH",color:"bg-purple-100 text-purple-700",description:"María García - Gestiona empleados",category:"hr"},{email:"hr.staff@valkyria.com",password:"HrStaff123",role:"Staff RRHH",color:"bg-indigo-100 text-indigo-700",description:"Monica Beltran - Operaciones RRHH",category:"hr"},{email:"legal@valkyria.com",password:"Admin123",role:"Legal",color:"bg-amber-100 text-amber-700",description:"Nathalia Mendoza - Contratos y legal",category:"legal"},{email:"supervisor@valkyria.com",password:"Supervisor123",role:"Supervisor",color:"bg-blue-100 text-blue-700",description:"Roberto Martínez - Aprueba solicitudes",category:"supervisor"},{email:"employee1@valkyria.com",password:"Employee123",role:"Empleado",color:"bg-green-100 text-green-700",description:"Juan Pérez - Software Developer",category:"employee"},{email:"employee2@valkyria.com",password:"Employee123",role:"Empleado",color:"bg-green-100 text-green-700",description:"Laura Sánchez - QA Engineer",category:"employee"},{email:"employee3@valkyria.com",password:"Employee123",role:"Empleado",color:"bg-green-100 text-green-700",description:"Pedro Ramírez - DevOps Engineer",category:"employee"},{email:"paulacarrillo1007@gmail.com",password:"Employee123",role:"Empleado",color:"bg-green-100 text-green-700",description:"Paula Carrillo - Empleada",category:"employee"},{email:"hector.prueba@valkyria.com",password:"Employee123",role:"Empleado",color:"bg-green-100 text-green-700",description:"Empleado Prueba H",category:"employee"},{email:"empleado.prueba@valkyria.com",password:"Employee123",role:"Empleado",color:"bg-green-100 text-green-700",description:"Empleado Prueba N",category:"employee"},{email:"viewer@valkyria.com",password:"Viewer123",role:"Viewer",color:"bg-gray-100 text-gray-700",description:"Visitante Externo - Solo lectura",category:"viewer"}],C="valkyria_login_history",w=()=>{try{const s=localStorage.getItem(C);return s?JSON.parse(s):{}}catch{return{}}},Q=s=>{try{localStorage.setItem(C,JSON.stringify(s))}catch{}},W=s=>{const a=w(),i=Date.now();a[s]||(a[s]={count:0,lastUsed:0}),a[s].count+=1,a[s].lastUsed=i,Q(a)},X={admin:$,hr:K,legal:J,supervisor:g,employee:g,viewer:k};function Z({user:s,usageData:a,onSelect:i,isRecent:m,isMostUsed:n}){return X[s.category]||g,e.jsxs("button",{onClick:()=>i(s),className:`
        relative flex flex-col p-2.5 rounded-lg transition-all text-left w-full
        ${m?"bg-white/25 hover:bg-white/35 ring-2 ring-white/30":"bg-white/10 hover:bg-white/20"}
      `,children:[e.jsxs("div",{className:"absolute -top-1 -right-1 flex gap-1",children:[n&&e.jsx("span",{className:"flex items-center gap-0.5 px-1.5 py-0.5 bg-yellow-400 text-yellow-900 rounded text-[10px] font-bold",children:e.jsx(A,{className:"w-2.5 h-2.5"})}),m&&!n&&e.jsx("span",{className:"flex items-center gap-0.5 px-1.5 py-0.5 bg-blue-400 text-blue-900 rounded text-[10px] font-bold",children:e.jsx(R,{className:"w-2.5 h-2.5"})})]}),e.jsx("span",{className:`inline-flex self-start px-2 py-0.5 rounded text-[10px] font-semibold ${s.color}`,children:s.role}),e.jsx("span",{className:"text-xs text-white font-medium mt-1 truncate",title:s.email,children:(s.email.length>20,s.email.split("@")[0])}),e.jsx("span",{className:"text-[10px] text-primary-200 mt-0.5 line-clamp-1",children:s.description}),a&&a.count>0&&e.jsxs("div",{className:"flex items-center gap-1 mt-1.5 text-[9px] text-primary-300",children:[e.jsx(F,{className:"w-2.5 h-2.5"}),e.jsxs("span",{children:[a.count,"x"]})]})]})}function ce(){const[s,a]=o.useState(""),[i,m]=o.useState(""),[n,H]=o.useState(!1),[b,h]=o.useState(""),[M,j]=o.useState(!1),[v,N]=o.useState({}),[u,L]=o.useState(!1),{login:O}=q(),E=z(),I=T().state?.from?.pathname||"/";o.useEffect(()=>{N(w())},[]);const c=o.useMemo(()=>{const t=Date.now(),r=3600*1e3,d=24*r;return[...x].map(p=>{const l=v[p.email]||{count:0,lastUsed:0},y=t-l.lastUsed;let f=l.count*10;return l.lastUsed>0&&(y<r?f+=1e3:y<d&&(f+=500)),{...p,usage:l,score:f,isRecent:l.lastUsed>0&&y<d,isMostUsed:!1}}).sort((p,l)=>l.score-p.score)},[v]),S=o.useMemo(()=>{if(c.length===0)return c;const t=Math.max(...c.map(r=>r.usage.count));return t===0?c:c.map((r,d)=>({...r,isMostUsed:r.usage.count===t&&t>0&&d===0}))},[c]),P=u?S:S.slice(0,8),D=t=>{a(t.email),m(t.password),h("")},V=async t=>{t.preventDefault(),h(""),j(!0);try{W(s),N(w()),(await O(s,i)).must_change_password?E("/change-password",{replace:!0}):E(I,{replace:!0})}catch(r){h(r.response?.data?.error||"Error al iniciar sesión")}finally{j(!1)}},_=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1";return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary-600 to-primary-800 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-36 h-36 mx-auto mb-4 rounded-full overflow-hidden shadow-2xl",children:e.jsx("img",{src:"/Valkiria.png",alt:"Valkyria",className:"w-full h-full object-cover scale-[1.15]"})}),e.jsx("h1",{className:"text-3xl font-bold text-white",children:"VALKYRIA ECM"}),e.jsx("p",{className:"text-primary-200 mt-2",children:"Protegemos lo que importa"})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 text-center mb-6",children:"Iniciar Sesión"}),b&&e.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-700",children:[e.jsx(G,{className:"w-5 h-5 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:b})]}),e.jsxs("form",{onSubmit:V,className:"space-y-4",children:[e.jsx(U,{label:"Correo Electrónico",type:"email",value:s,onChange:t=>a(t.target.value),placeholder:"tu@email.com",required:!0,autoFocus:!0}),e.jsxs("div",{className:"relative",children:[e.jsx(U,{label:"Contraseña",type:n?"text":"password",value:i,onChange:t=>m(t.target.value),placeholder:"••••••••",required:!0}),e.jsx("button",{type:"button",onClick:()=>H(!n),className:"absolute right-3 top-[34px] text-gray-400 hover:text-gray-600 transition-colors",children:n?e.jsx(Y,{className:"w-5 h-5"}):e.jsx(k,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",className:"rounded border-gray-300"}),e.jsx("span",{className:"text-gray-600",children:"Recordarme"})]}),e.jsx("a",{href:"#",className:"text-primary-600 hover:text-primary-700",children:"¿Olvidaste tu contraseña?"})]}),e.jsx(B,{type:"submit",loading:M,className:"w-full",children:"Iniciar Sesión"})]})]}),_&&e.jsxs("div",{className:"mt-6 bg-white/10 backdrop-blur rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{className:"w-4 h-4 text-primary-200"}),e.jsxs("span",{className:"text-sm font-medium text-primary-100",children:["Usuarios (",x.length,")"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-primary-300",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(A,{className:"w-3 h-3 text-yellow-400"})," Favorito"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(R,{className:"w-3 h-3 text-blue-400"})," Reciente"]})]})]}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:P.map(t=>e.jsx(Z,{user:t,usageData:t.usage,onSelect:D,isRecent:t.isRecent,isMostUsed:t.isMostUsed},t.email))}),x.length>8&&e.jsx("button",{onClick:()=>L(!u),className:"w-full mt-3 py-2 text-xs text-primary-200 hover:text-white transition-colors",children:u?"Mostrar menos":`Ver todos (${x.length-8} más)`}),e.jsx("p",{className:"text-[10px] text-primary-300 mt-2 text-center",children:"Ordenados por frecuencia de uso"})]}),e.jsx("p",{className:"text-center text-primary-200 text-sm mt-6",children:"© 2025 VALKYRIA ECM. Todos los derechos reservados."})]})})}export{ce as default};
