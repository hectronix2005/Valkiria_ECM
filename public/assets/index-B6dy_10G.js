(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))c(u);new MutationObserver(u=>{for(const h of u)if(h.type==="childList")for(const x of h.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&c(x)}).observe(document,{childList:!0,subtree:!0});function i(u){const h={};return u.integrity&&(h.integrity=u.integrity),u.referrerPolicy&&(h.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?h.credentials="include":u.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function c(u){if(u.ep)return;u.ep=!0;const h=i(u);fetch(u.href,h)}})();function F0(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Cu={exports:{}},Gr={};var Tf;function uv(){if(Tf)return Gr;Tf=1;var s=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function i(c,u,h){var x=null;if(h!==void 0&&(x=""+h),u.key!==void 0&&(x=""+u.key),"key"in u){h={};for(var m in u)m!=="key"&&(h[m]=u[m])}else h=u;return u=h.ref,{$$typeof:s,type:c,key:x,ref:u!==void 0?u:null,props:h}}return Gr.Fragment=r,Gr.jsx=i,Gr.jsxs=i,Gr}var Mf;function mv(){return Mf||(Mf=1,Cu.exports=uv()),Cu.exports}var e=mv(),Su={exports:{}},Ue={};var kf;function hv(){if(kf)return Ue;kf=1;var s=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),c=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),h=Symbol.for("react.consumer"),x=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),E=Symbol.iterator;function S(M){return M===null||typeof M!="object"?null:(M=E&&M[E]||M["@@iterator"],typeof M=="function"?M:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,j={};function _(M,V,ae){this.props=M,this.context=V,this.refs=j,this.updater=ae||w}_.prototype.isReactComponent={},_.prototype.setState=function(M,V){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,V,"setState")},_.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function N(){}N.prototype=_.prototype;function z(M,V,ae){this.props=M,this.context=V,this.refs=j,this.updater=ae||w}var k=z.prototype=new N;k.constructor=z,C(k,_.prototype),k.isPureReactComponent=!0;var U=Array.isArray;function A(){}var T={H:null,A:null,T:null,S:null},O=Object.prototype.hasOwnProperty;function ee(M,V,ae){var W=ae.ref;return{$$typeof:s,type:M,key:V,ref:W!==void 0?W:null,props:ae}}function B(M,V){return ee(M.type,V,M.props)}function ye(M){return typeof M=="object"&&M!==null&&M.$$typeof===s}function F(M){var V={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(ae){return V[ae]})}var te=/\/+/g;function je(M,V){return typeof M=="object"&&M!==null&&M.key!=null?F(""+M.key):V.toString(36)}function xe(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(A,A):(M.status="pending",M.then(function(V){M.status==="pending"&&(M.status="fulfilled",M.value=V)},function(V){M.status==="pending"&&(M.status="rejected",M.reason=V)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function $(M,V,ae,W,R){var X=typeof M;(X==="undefined"||X==="boolean")&&(M=null);var ge=!1;if(M===null)ge=!0;else switch(X){case"bigint":case"string":case"number":ge=!0;break;case"object":switch(M.$$typeof){case s:case r:ge=!0;break;case f:return ge=M._init,$(ge(M._payload),V,ae,W,R)}}if(ge)return R=R(M),ge=W===""?"."+je(M,0):W,U(R)?(ae="",ge!=null&&(ae=ge.replace(te,"$&/")+"/"),$(R,V,ae,"",function(_e){return _e})):R!=null&&(ye(R)&&(R=B(R,ae+(R.key==null||M&&M.key===R.key?"":(""+R.key).replace(te,"$&/")+"/")+ge)),V.push(R)),1;ge=0;var Q=W===""?".":W+":";if(U(M))for(var ie=0;ie<M.length;ie++)W=M[ie],X=Q+je(W,ie),ge+=$(W,V,ae,X,R);else if(ie=S(M),typeof ie=="function")for(M=ie.call(M),ie=0;!(W=M.next()).done;)W=W.value,X=Q+je(W,ie++),ge+=$(W,V,ae,X,R);else if(X==="object"){if(typeof M.then=="function")return $(xe(M),V,ae,W,R);throw V=String(M),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.")}return ge}function pe(M,V,ae){if(M==null)return M;var W=[],R=0;return $(M,W,"","",function(X){return V.call(ae,X,R++)}),W}function G(M){if(M._status===-1){var V=M._result;V=V(),V.then(function(ae){(M._status===0||M._status===-1)&&(M._status=1,M._result=ae)},function(ae){(M._status===0||M._status===-1)&&(M._status=2,M._result=ae)}),M._status===-1&&(M._status=0,M._result=V)}if(M._status===1)return M._result.default;throw M._result}var Y=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var V=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(V))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},me={map:pe,forEach:function(M,V,ae){pe(M,function(){V.apply(this,arguments)},ae)},count:function(M){var V=0;return pe(M,function(){V++}),V},toArray:function(M){return pe(M,function(V){return V})||[]},only:function(M){if(!ye(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return Ue.Activity=v,Ue.Children=me,Ue.Component=_,Ue.Fragment=i,Ue.Profiler=u,Ue.PureComponent=z,Ue.StrictMode=c,Ue.Suspense=p,Ue.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=T,Ue.__COMPILER_RUNTIME={__proto__:null,c:function(M){return T.H.useMemoCache(M)}},Ue.cache=function(M){return function(){return M.apply(null,arguments)}},Ue.cacheSignal=function(){return null},Ue.cloneElement=function(M,V,ae){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var W=C({},M.props),R=M.key;if(V!=null)for(X in V.key!==void 0&&(R=""+V.key),V)!O.call(V,X)||X==="key"||X==="__self"||X==="__source"||X==="ref"&&V.ref===void 0||(W[X]=V[X]);var X=arguments.length-2;if(X===1)W.children=ae;else if(1<X){for(var ge=Array(X),Q=0;Q<X;Q++)ge[Q]=arguments[Q+2];W.children=ge}return ee(M.type,R,W)},Ue.createContext=function(M){return M={$$typeof:x,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:h,_context:M},M},Ue.createElement=function(M,V,ae){var W,R={},X=null;if(V!=null)for(W in V.key!==void 0&&(X=""+V.key),V)O.call(V,W)&&W!=="key"&&W!=="__self"&&W!=="__source"&&(R[W]=V[W]);var ge=arguments.length-2;if(ge===1)R.children=ae;else if(1<ge){for(var Q=Array(ge),ie=0;ie<ge;ie++)Q[ie]=arguments[ie+2];R.children=Q}if(M&&M.defaultProps)for(W in ge=M.defaultProps,ge)R[W]===void 0&&(R[W]=ge[W]);return ee(M,X,R)},Ue.createRef=function(){return{current:null}},Ue.forwardRef=function(M){return{$$typeof:m,render:M}},Ue.isValidElement=ye,Ue.lazy=function(M){return{$$typeof:f,_payload:{_status:-1,_result:M},_init:G}},Ue.memo=function(M,V){return{$$typeof:g,type:M,compare:V===void 0?null:V}},Ue.startTransition=function(M){var V=T.T,ae={};T.T=ae;try{var W=M(),R=T.S;R!==null&&R(ae,W),typeof W=="object"&&W!==null&&typeof W.then=="function"&&W.then(A,Y)}catch(X){Y(X)}finally{V!==null&&ae.types!==null&&(V.types=ae.types),T.T=V}},Ue.unstable_useCacheRefresh=function(){return T.H.useCacheRefresh()},Ue.use=function(M){return T.H.use(M)},Ue.useActionState=function(M,V,ae){return T.H.useActionState(M,V,ae)},Ue.useCallback=function(M,V){return T.H.useCallback(M,V)},Ue.useContext=function(M){return T.H.useContext(M)},Ue.useDebugValue=function(){},Ue.useDeferredValue=function(M,V){return T.H.useDeferredValue(M,V)},Ue.useEffect=function(M,V){return T.H.useEffect(M,V)},Ue.useEffectEvent=function(M){return T.H.useEffectEvent(M)},Ue.useId=function(){return T.H.useId()},Ue.useImperativeHandle=function(M,V,ae){return T.H.useImperativeHandle(M,V,ae)},Ue.useInsertionEffect=function(M,V){return T.H.useInsertionEffect(M,V)},Ue.useLayoutEffect=function(M,V){return T.H.useLayoutEffect(M,V)},Ue.useMemo=function(M,V){return T.H.useMemo(M,V)},Ue.useOptimistic=function(M,V){return T.H.useOptimistic(M,V)},Ue.useReducer=function(M,V,ae){return T.H.useReducer(M,V,ae)},Ue.useRef=function(M){return T.H.useRef(M)},Ue.useState=function(M){return T.H.useState(M)},Ue.useSyncExternalStore=function(M,V,ae){return T.H.useSyncExternalStore(M,V,ae)},Ue.useTransition=function(){return T.H.useTransition()},Ue.version="19.2.3",Ue}var Af;function nm(){return Af||(Af=1,Su.exports=hv()),Su.exports}var b=nm();const xv=F0(b);var Eu={exports:{}},Pr={},Du={exports:{}},Tu={};var Rf;function pv(){return Rf||(Rf=1,(function(s){function r($,pe){var G=$.length;$.push(pe);e:for(;0<G;){var Y=G-1>>>1,me=$[Y];if(0<u(me,pe))$[Y]=pe,$[G]=me,G=Y;else break e}}function i($){return $.length===0?null:$[0]}function c($){if($.length===0)return null;var pe=$[0],G=$.pop();if(G!==pe){$[0]=G;e:for(var Y=0,me=$.length,M=me>>>1;Y<M;){var V=2*(Y+1)-1,ae=$[V],W=V+1,R=$[W];if(0>u(ae,G))W<me&&0>u(R,ae)?($[Y]=R,$[W]=G,Y=W):($[Y]=ae,$[V]=G,Y=V);else if(W<me&&0>u(R,G))$[Y]=R,$[W]=G,Y=W;else break e}}return pe}function u($,pe){var G=$.sortIndex-pe.sortIndex;return G!==0?G:$.id-pe.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var h=performance;s.unstable_now=function(){return h.now()}}else{var x=Date,m=x.now();s.unstable_now=function(){return x.now()-m}}var p=[],g=[],f=1,v=null,E=3,S=!1,w=!1,C=!1,j=!1,_=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;function k($){for(var pe=i(g);pe!==null;){if(pe.callback===null)c(g);else if(pe.startTime<=$)c(g),pe.sortIndex=pe.expirationTime,r(p,pe);else break;pe=i(g)}}function U($){if(C=!1,k($),!w)if(i(p)!==null)w=!0,A||(A=!0,F());else{var pe=i(g);pe!==null&&xe(U,pe.startTime-$)}}var A=!1,T=-1,O=5,ee=-1;function B(){return j?!0:!(s.unstable_now()-ee<O)}function ye(){if(j=!1,A){var $=s.unstable_now();ee=$;var pe=!0;try{e:{w=!1,C&&(C=!1,N(T),T=-1),S=!0;var G=E;try{t:{for(k($),v=i(p);v!==null&&!(v.expirationTime>$&&B());){var Y=v.callback;if(typeof Y=="function"){v.callback=null,E=v.priorityLevel;var me=Y(v.expirationTime<=$);if($=s.unstable_now(),typeof me=="function"){v.callback=me,k($),pe=!0;break t}v===i(p)&&c(p),k($)}else c(p);v=i(p)}if(v!==null)pe=!0;else{var M=i(g);M!==null&&xe(U,M.startTime-$),pe=!1}}break e}finally{v=null,E=G,S=!1}pe=void 0}}finally{pe?F():A=!1}}}var F;if(typeof z=="function")F=function(){z(ye)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,je=te.port2;te.port1.onmessage=ye,F=function(){je.postMessage(null)}}else F=function(){_(ye,0)};function xe($,pe){T=_(function(){$(s.unstable_now())},pe)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function($){$.callback=null},s.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<$?Math.floor(1e3/$):5},s.unstable_getCurrentPriorityLevel=function(){return E},s.unstable_next=function($){switch(E){case 1:case 2:case 3:var pe=3;break;default:pe=E}var G=E;E=pe;try{return $()}finally{E=G}},s.unstable_requestPaint=function(){j=!0},s.unstable_runWithPriority=function($,pe){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var G=E;E=$;try{return pe()}finally{E=G}},s.unstable_scheduleCallback=function($,pe,G){var Y=s.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?Y+G:Y):G=Y,$){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=G+me,$={id:f++,callback:pe,priorityLevel:$,startTime:G,expirationTime:me,sortIndex:-1},G>Y?($.sortIndex=G,r(g,$),i(p)===null&&$===i(g)&&(C?(N(T),T=-1):C=!0,xe(U,G-Y))):($.sortIndex=me,r(p,$),w||S||(w=!0,A||(A=!0,F()))),$},s.unstable_shouldYield=B,s.unstable_wrapCallback=function($){var pe=E;return function(){var G=E;E=pe;try{return $.apply(this,arguments)}finally{E=G}}}})(Tu)),Tu}var Of;function fv(){return Of||(Of=1,Du.exports=pv()),Du.exports}var Mu={exports:{}},aa={};var zf;function gv(){if(zf)return aa;zf=1;var s=nm();function r(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)g+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var c={d:{f:i,r:function(){throw Error(r(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},u=Symbol.for("react.portal");function h(p,g,f){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:v==null?null:""+v,children:p,containerInfo:g,implementation:f}}var x=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return aa.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=c,aa.createPortal=function(p,g){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(r(299));return h(p,g,null,f)},aa.flushSync=function(p){var g=x.T,f=c.p;try{if(x.T=null,c.p=2,p)return p()}finally{x.T=g,c.p=f,c.d.f()}},aa.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,c.d.C(p,g))},aa.prefetchDNS=function(p){typeof p=="string"&&c.d.D(p)},aa.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var f=g.as,v=m(f,g.crossOrigin),E=typeof g.integrity=="string"?g.integrity:void 0,S=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;f==="style"?c.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:v,integrity:E,fetchPriority:S}):f==="script"&&c.d.X(p,{crossOrigin:v,integrity:E,fetchPriority:S,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},aa.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var f=m(g.as,g.crossOrigin);c.d.M(p,{crossOrigin:f,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&c.d.M(p)},aa.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var f=g.as,v=m(f,g.crossOrigin);c.d.L(p,f,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},aa.preloadModule=function(p,g){if(typeof p=="string")if(g){var f=m(g.as,g.crossOrigin);c.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:f,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else c.d.m(p)},aa.requestFormReset=function(p){c.d.r(p)},aa.unstable_batchedUpdates=function(p,g){return p(g)},aa.useFormState=function(p,g,f){return x.H.useFormState(p,g,f)},aa.useFormStatus=function(){return x.H.useHostTransitionStatus()},aa.version="19.2.3",aa}var Lf;function yv(){if(Lf)return Mu.exports;Lf=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(r){console.error(r)}}return s(),Mu.exports=gv(),Mu.exports}var qf;function bv(){if(qf)return Pr;qf=1;var s=fv(),r=nm(),i=yv();function c(t){var a="https://react.dev/errors/"+t;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+t+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function h(t){var a=t,l=t;if(t.alternate)for(;a.return;)a=a.return;else{t=a;do a=t,(a.flags&4098)!==0&&(l=a.return),t=a.return;while(t)}return a.tag===3?l:null}function x(t){if(t.tag===13){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function m(t){if(t.tag===31){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function p(t){if(h(t)!==t)throw Error(c(188))}function g(t){var a=t.alternate;if(!a){if(a=h(t),a===null)throw Error(c(188));return a!==t?null:t}for(var l=t,n=a;;){var o=l.return;if(o===null)break;var d=o.alternate;if(d===null){if(n=o.return,n!==null){l=n;continue}break}if(o.child===d.child){for(d=o.child;d;){if(d===l)return p(o),t;if(d===n)return p(o),a;d=d.sibling}throw Error(c(188))}if(l.return!==n.return)l=o,n=d;else{for(var y=!1,D=o.child;D;){if(D===l){y=!0,l=o,n=d;break}if(D===n){y=!0,n=o,l=d;break}D=D.sibling}if(!y){for(D=d.child;D;){if(D===l){y=!0,l=d,n=o;break}if(D===n){y=!0,n=d,l=o;break}D=D.sibling}if(!y)throw Error(c(189))}}if(l.alternate!==n)throw Error(c(190))}if(l.tag!==3)throw Error(c(188));return l.stateNode.current===l?t:a}function f(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t;for(t=t.child;t!==null;){if(a=f(t),a!==null)return a;t=t.sibling}return null}var v=Object.assign,E=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),N=Symbol.for("react.consumer"),z=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),O=Symbol.for("react.lazy"),ee=Symbol.for("react.activity"),B=Symbol.for("react.memo_cache_sentinel"),ye=Symbol.iterator;function F(t){return t===null||typeof t!="object"?null:(t=ye&&t[ye]||t["@@iterator"],typeof t=="function"?t:null)}var te=Symbol.for("react.client.reference");function je(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===te?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case C:return"Fragment";case _:return"Profiler";case j:return"StrictMode";case U:return"Suspense";case A:return"SuspenseList";case ee:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case w:return"Portal";case z:return t.displayName||"Context";case N:return(t._context.displayName||"Context")+".Consumer";case k:var a=t.render;return t=t.displayName,t||(t=a.displayName||a.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case T:return a=t.displayName||null,a!==null?a:je(t.type)||"Memo";case O:a=t._payload,t=t._init;try{return je(t(a))}catch{}}return null}var xe=Array.isArray,$=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pe=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G={pending:!1,data:null,method:null,action:null},Y=[],me=-1;function M(t){return{current:t}}function V(t){0>me||(t.current=Y[me],Y[me]=null,me--)}function ae(t,a){me++,Y[me]=t.current,t.current=a}var W=M(null),R=M(null),X=M(null),ge=M(null);function Q(t,a){switch(ae(X,a),ae(R,t),ae(W,null),a.nodeType){case 9:case 11:t=(t=a.documentElement)&&(t=t.namespaceURI)?Jp(t):0;break;default:if(t=a.tagName,a=a.namespaceURI)a=Jp(a),t=Ip(a,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}V(W),ae(W,t)}function ie(){V(W),V(R),V(X)}function _e(t){t.memoizedState!==null&&ae(ge,t);var a=W.current,l=Ip(a,t.type);a!==l&&(ae(R,t),ae(W,l))}function ze(t){R.current===t&&(V(W),V(R)),ge.current===t&&(V(ge),Br._currentValue=G)}var $e,ne;function Te(t){if($e===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);$e=a&&a[1]||"",ne=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+$e+t+ne}var tt=!1;function lt(t,a){if(!t||tt)return"";tt=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(a){var he=function(){throw Error()};if(Object.defineProperty(he.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(he,[])}catch(re){var I=re}Reflect.construct(t,[],he)}else{try{he.call()}catch(re){I=re}t.call(he.prototype)}}else{try{throw Error()}catch(re){I=re}(he=t())&&typeof he.catch=="function"&&he.catch(function(){})}}catch(re){if(re&&I&&typeof re.stack=="string")return[re.stack,I.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var o=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");o&&o.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=n.DetermineComponentFrameRoot(),y=d[0],D=d[1];if(y&&D){var q=y.split(`
`),J=D.split(`
`);for(o=n=0;n<q.length&&!q[n].includes("DetermineComponentFrameRoot");)n++;for(;o<J.length&&!J[o].includes("DetermineComponentFrameRoot");)o++;if(n===q.length||o===J.length)for(n=q.length-1,o=J.length-1;1<=n&&0<=o&&q[n]!==J[o];)o--;for(;1<=n&&0<=o;n--,o--)if(q[n]!==J[o]){if(n!==1||o!==1)do if(n--,o--,0>o||q[n]!==J[o]){var ce=`
`+q[n].replace(" at new "," at ");return t.displayName&&ce.includes("<anonymous>")&&(ce=ce.replace("<anonymous>",t.displayName)),ce}while(1<=n&&0<=o);break}}}finally{tt=!1,Error.prepareStackTrace=l}return(l=t?t.displayName||t.name:"")?Te(l):""}function Et(t,a){switch(t.tag){case 26:case 27:case 5:return Te(t.type);case 16:return Te("Lazy");case 13:return t.child!==a&&a!==null?Te("Suspense Fallback"):Te("Suspense");case 19:return Te("SuspenseList");case 0:case 15:return lt(t.type,!1);case 11:return lt(t.type.render,!1);case 1:return lt(t.type,!0);case 31:return Te("Activity");default:return""}}function os(t){try{var a="",l=null;do a+=Et(t,l),l=t,t=t.return;while(t);return a}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}var ia=Object.prototype.hasOwnProperty,Ft=s.unstable_scheduleCallback,bs=s.unstable_cancelCallback,Ja=s.unstable_shouldYield,xt=s.unstable_requestPaint,_t=s.unstable_now,ds=s.unstable_getCurrentPriorityLevel,va=s.unstable_ImmediatePriority,be=s.unstable_UserBlockingPriority,ta=s.unstable_NormalPriority,vs=s.unstable_LowPriority,Ia=s.unstable_IdlePriority,oe=s.log,se=s.unstable_setDisableYieldValue,Ee=null,Ae=null;function ct(t){if(typeof oe=="function"&&se(t),Ae&&typeof Ae.setStrictMode=="function")try{Ae.setStrictMode(Ee,t)}catch{}}var Ht=Math.clz32?Math.clz32:mo,fi=Math.log,uo=Math.LN2;function mo(t){return t>>>=0,t===0?32:31-(fi(t)/uo|0)|0}var Kl=256,Zl=262144,js=4194304;function fe(t){var a=t&42;if(a!==0)return a;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Je(t,a,l){var n=t.pendingLanes;if(n===0)return 0;var o=0,d=t.suspendedLanes,y=t.pingedLanes;t=t.warmLanes;var D=n&134217727;return D!==0?(n=D&~d,n!==0?o=fe(n):(y&=D,y!==0?o=fe(y):l||(l=D&~t,l!==0&&(o=fe(l))))):(D=n&~d,D!==0?o=fe(D):y!==0?o=fe(y):l||(l=n&~t,l!==0&&(o=fe(l)))),o===0?0:a!==0&&a!==o&&(a&d)===0&&(d=o&-o,l=a&-a,d>=l||d===32&&(l&4194048)!==0)?a:o}function Kt(t,a){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&a)===0}function ca(t,a){switch(t){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vs(){var t=js;return js<<=1,(js&62914560)===0&&(js=4194304),t}function ho(t){for(var a=[],l=0;31>l;l++)a.push(t);return a}function tr(t,a){t.pendingLanes|=a,a!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Wg(t,a,l,n,o,d){var y=t.pendingLanes;t.pendingLanes=l,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=l,t.entangledLanes&=l,t.errorRecoveryDisabledLanes&=l,t.shellSuspendCounter=0;var D=t.entanglements,q=t.expirationTimes,J=t.hiddenUpdates;for(l=y&~l;0<l;){var ce=31-Ht(l),he=1<<ce;D[ce]=0,q[ce]=-1;var I=J[ce];if(I!==null)for(J[ce]=null,ce=0;ce<I.length;ce++){var re=I[ce];re!==null&&(re.lane&=-536870913)}l&=~he}n!==0&&Rm(t,n,0),d!==0&&o===0&&t.tag!==0&&(t.suspendedLanes|=d&~(y&~a))}function Rm(t,a,l){t.pendingLanes|=a,t.suspendedLanes&=~a;var n=31-Ht(a);t.entangledLanes|=a,t.entanglements[n]=t.entanglements[n]|1073741824|l&261930}function Om(t,a){var l=t.entangledLanes|=a;for(t=t.entanglements;l;){var n=31-Ht(l),o=1<<n;o&a|t[n]&a&&(t[n]|=a),l&=~o}}function zm(t,a){var l=a&-a;return l=(l&42)!==0?1:xo(l),(l&(t.suspendedLanes|a))!==0?0:l}function xo(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function po(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Lm(){var t=pe.p;return t!==0?t:(t=window.event,t===void 0?32:Nf(t.type))}function qm(t,a){var l=pe.p;try{return pe.p=t,a()}finally{pe.p=l}}var Qs=Math.random().toString(36).slice(2),Zt="__reactFiber$"+Qs,oa="__reactProps$"+Qs,Jl="__reactContainer$"+Qs,fo="__reactEvents$"+Qs,ey="__reactListeners$"+Qs,ty="__reactHandles$"+Qs,Um="__reactResources$"+Qs,ar="__reactMarker$"+Qs;function go(t){delete t[Zt],delete t[oa],delete t[fo],delete t[ey],delete t[ty]}function Il(t){var a=t[Zt];if(a)return a;for(var l=t.parentNode;l;){if(a=l[Jl]||l[Zt]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(t=nf(t);t!==null;){if(l=t[Zt])return l;t=nf(t)}return a}t=l,l=t.parentNode}return null}function Wl(t){if(t=t[Zt]||t[Jl]){var a=t.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return t}return null}function sr(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t.stateNode;throw Error(c(33))}function en(t){var a=t[Um];return a||(a=t[Um]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Gt(t){t[ar]=!0}var Fm=new Set,Hm={};function gl(t,a){tn(t,a),tn(t+"Capture",a)}function tn(t,a){for(Hm[t]=a,t=0;t<a.length;t++)Fm.add(a[t])}var ay=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Bm={},$m={};function sy(t){return ia.call($m,t)?!0:ia.call(Bm,t)?!1:ay.test(t)?$m[t]=!0:(Bm[t]=!0,!1)}function gi(t,a,l){if(sy(a))if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":t.removeAttribute(a);return;case"boolean":var n=a.toLowerCase().slice(0,5);if(n!=="data-"&&n!=="aria-"){t.removeAttribute(a);return}}t.setAttribute(a,""+l)}}function yi(t,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttribute(a,""+l)}}function Ns(t,a,l,n){if(n===null)t.removeAttribute(l);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(l);return}t.setAttributeNS(a,l,""+n)}}function Oa(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Vm(t){var a=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function ly(t,a,l){var n=Object.getOwnPropertyDescriptor(t.constructor.prototype,a);if(!t.hasOwnProperty(a)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,d=n.set;return Object.defineProperty(t,a,{configurable:!0,get:function(){return o.call(this)},set:function(y){l=""+y,d.call(this,y)}}),Object.defineProperty(t,a,{enumerable:n.enumerable}),{getValue:function(){return l},setValue:function(y){l=""+y},stopTracking:function(){t._valueTracker=null,delete t[a]}}}}function yo(t){if(!t._valueTracker){var a=Vm(t)?"checked":"value";t._valueTracker=ly(t,a,""+t[a])}}function Qm(t){if(!t)return!1;var a=t._valueTracker;if(!a)return!0;var l=a.getValue(),n="";return t&&(n=Vm(t)?t.checked?"true":"false":t.value),t=n,t!==l?(a.setValue(t),!0):!1}function bi(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var ny=/[\n"\\]/g;function za(t){return t.replace(ny,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function bo(t,a,l,n,o,d,y,D){t.name="",y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?t.type=y:t.removeAttribute("type"),a!=null?y==="number"?(a===0&&t.value===""||t.value!=a)&&(t.value=""+Oa(a)):t.value!==""+Oa(a)&&(t.value=""+Oa(a)):y!=="submit"&&y!=="reset"||t.removeAttribute("value"),a!=null?vo(t,y,Oa(a)):l!=null?vo(t,y,Oa(l)):n!=null&&t.removeAttribute("value"),o==null&&d!=null&&(t.defaultChecked=!!d),o!=null&&(t.checked=o&&typeof o!="function"&&typeof o!="symbol"),D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?t.name=""+Oa(D):t.removeAttribute("name")}function Gm(t,a,l,n,o,d,y,D){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),a!=null||l!=null){if(!(d!=="submit"&&d!=="reset"||a!=null)){yo(t);return}l=l!=null?""+Oa(l):"",a=a!=null?""+Oa(a):l,D||a===t.value||(t.value=a),t.defaultValue=a}n=n??o,n=typeof n!="function"&&typeof n!="symbol"&&!!n,t.checked=D?t.checked:!!n,t.defaultChecked=!!n,y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(t.name=y),yo(t)}function vo(t,a,l){a==="number"&&bi(t.ownerDocument)===t||t.defaultValue===""+l||(t.defaultValue=""+l)}function an(t,a,l,n){if(t=t.options,a){a={};for(var o=0;o<l.length;o++)a["$"+l[o]]=!0;for(l=0;l<t.length;l++)o=a.hasOwnProperty("$"+t[l].value),t[l].selected!==o&&(t[l].selected=o),o&&n&&(t[l].defaultSelected=!0)}else{for(l=""+Oa(l),a=null,o=0;o<t.length;o++){if(t[o].value===l){t[o].selected=!0,n&&(t[o].defaultSelected=!0);return}a!==null||t[o].disabled||(a=t[o])}a!==null&&(a.selected=!0)}}function Pm(t,a,l){if(a!=null&&(a=""+Oa(a),a!==t.value&&(t.value=a),l==null)){t.defaultValue!==a&&(t.defaultValue=a);return}t.defaultValue=l!=null?""+Oa(l):""}function Ym(t,a,l,n){if(a==null){if(n!=null){if(l!=null)throw Error(c(92));if(xe(n)){if(1<n.length)throw Error(c(93));n=n[0]}l=n}l==null&&(l=""),a=l}l=Oa(a),t.defaultValue=l,n=t.textContent,n===l&&n!==""&&n!==null&&(t.value=n),yo(t)}function sn(t,a){if(a){var l=t.firstChild;if(l&&l===t.lastChild&&l.nodeType===3){l.nodeValue=a;return}}t.textContent=a}var ry=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Xm(t,a,l){var n=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?n?t.setProperty(a,""):a==="float"?t.cssFloat="":t[a]="":n?t.setProperty(a,l):typeof l!="number"||l===0||ry.has(a)?a==="float"?t.cssFloat=l:t[a]=(""+l).trim():t[a]=l+"px"}function Km(t,a,l){if(a!=null&&typeof a!="object")throw Error(c(62));if(t=t.style,l!=null){for(var n in l)!l.hasOwnProperty(n)||a!=null&&a.hasOwnProperty(n)||(n.indexOf("--")===0?t.setProperty(n,""):n==="float"?t.cssFloat="":t[n]="");for(var o in a)n=a[o],a.hasOwnProperty(o)&&l[o]!==n&&Xm(t,o,n)}else for(var d in a)a.hasOwnProperty(d)&&Xm(t,d,a[d])}function jo(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var iy=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),cy=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function vi(t){return cy.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function _s(){}var No=null;function _o(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ln=null,nn=null;function Zm(t){var a=Wl(t);if(a&&(t=a.stateNode)){var l=t[oa]||null;e:switch(t=a.stateNode,a.type){case"input":if(bo(t,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=t;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+za(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var n=l[a];if(n!==t&&n.form===t.form){var o=n[oa]||null;if(!o)throw Error(c(90));bo(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(a=0;a<l.length;a++)n=l[a],n.form===t.form&&Qm(n)}break e;case"textarea":Pm(t,l.value,l.defaultValue);break e;case"select":a=l.value,a!=null&&an(t,!!l.multiple,a,!1)}}}var wo=!1;function Jm(t,a,l){if(wo)return t(a,l);wo=!0;try{var n=t(a);return n}finally{if(wo=!1,(ln!==null||nn!==null)&&(ic(),ln&&(a=ln,t=nn,nn=ln=null,Zm(a),t)))for(a=0;a<t.length;a++)Zm(t[a])}}function lr(t,a){var l=t.stateNode;if(l===null)return null;var n=l[oa]||null;if(n===null)return null;l=n[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(l&&typeof l!="function")throw Error(c(231,a,typeof l));return l}var ws=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Co=!1;if(ws)try{var nr={};Object.defineProperty(nr,"passive",{get:function(){Co=!0}}),window.addEventListener("test",nr,nr),window.removeEventListener("test",nr,nr)}catch{Co=!1}var Gs=null,So=null,ji=null;function Im(){if(ji)return ji;var t,a=So,l=a.length,n,o="value"in Gs?Gs.value:Gs.textContent,d=o.length;for(t=0;t<l&&a[t]===o[t];t++);var y=l-t;for(n=1;n<=y&&a[l-n]===o[d-n];n++);return ji=o.slice(t,1<n?1-n:void 0)}function Ni(t){var a=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&a===13&&(t=13)):t=a,t===10&&(t=13),32<=t||t===13?t:0}function _i(){return!0}function Wm(){return!1}function da(t){function a(l,n,o,d,y){this._reactName=l,this._targetInst=o,this.type=n,this.nativeEvent=d,this.target=y,this.currentTarget=null;for(var D in t)t.hasOwnProperty(D)&&(l=t[D],this[D]=l?l(d):d[D]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?_i:Wm,this.isPropagationStopped=Wm,this}return v(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=_i)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=_i)},persist:function(){},isPersistent:_i}),a}var yl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wi=da(yl),rr=v({},yl,{view:0,detail:0}),oy=da(rr),Eo,Do,ir,Ci=v({},rr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mo,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ir&&(ir&&t.type==="mousemove"?(Eo=t.screenX-ir.screenX,Do=t.screenY-ir.screenY):Do=Eo=0,ir=t),Eo)},movementY:function(t){return"movementY"in t?t.movementY:Do}}),eh=da(Ci),dy=v({},Ci,{dataTransfer:0}),uy=da(dy),my=v({},rr,{relatedTarget:0}),To=da(my),hy=v({},yl,{animationName:0,elapsedTime:0,pseudoElement:0}),xy=da(hy),py=v({},yl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),fy=da(py),gy=v({},yl,{data:0}),th=da(gy),yy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},by={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jy(t){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(t):(t=vy[t])?!!a[t]:!1}function Mo(){return jy}var Ny=v({},rr,{key:function(t){if(t.key){var a=yy[t.key]||t.key;if(a!=="Unidentified")return a}return t.type==="keypress"?(t=Ni(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?by[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mo,charCode:function(t){return t.type==="keypress"?Ni(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ni(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),_y=da(Ny),wy=v({},Ci,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ah=da(wy),Cy=v({},rr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mo}),Sy=da(Cy),Ey=v({},yl,{propertyName:0,elapsedTime:0,pseudoElement:0}),Dy=da(Ey),Ty=v({},Ci,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),My=da(Ty),ky=v({},yl,{newState:0,oldState:0}),Ay=da(ky),Ry=[9,13,27,32],ko=ws&&"CompositionEvent"in window,cr=null;ws&&"documentMode"in document&&(cr=document.documentMode);var Oy=ws&&"TextEvent"in window&&!cr,sh=ws&&(!ko||cr&&8<cr&&11>=cr),lh=" ",nh=!1;function rh(t,a){switch(t){case"keyup":return Ry.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ih(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var rn=!1;function zy(t,a){switch(t){case"compositionend":return ih(a);case"keypress":return a.which!==32?null:(nh=!0,lh);case"textInput":return t=a.data,t===lh&&nh?null:t;default:return null}}function Ly(t,a){if(rn)return t==="compositionend"||!ko&&rh(t,a)?(t=Im(),ji=So=Gs=null,rn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return sh&&a.locale!=="ko"?null:a.data;default:return null}}var qy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ch(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a==="input"?!!qy[t.type]:a==="textarea"}function oh(t,a,l,n){ln?nn?nn.push(n):nn=[n]:ln=n,a=xc(a,"onChange"),0<a.length&&(l=new wi("onChange","change",null,l,n),t.push({event:l,listeners:a}))}var or=null,dr=null;function Uy(t){Gp(t,0)}function Si(t){var a=sr(t);if(Qm(a))return t}function dh(t,a){if(t==="change")return a}var uh=!1;if(ws){var Ao;if(ws){var Ro="oninput"in document;if(!Ro){var mh=document.createElement("div");mh.setAttribute("oninput","return;"),Ro=typeof mh.oninput=="function"}Ao=Ro}else Ao=!1;uh=Ao&&(!document.documentMode||9<document.documentMode)}function hh(){or&&(or.detachEvent("onpropertychange",xh),dr=or=null)}function xh(t){if(t.propertyName==="value"&&Si(dr)){var a=[];oh(a,dr,t,_o(t)),Jm(Uy,a)}}function Fy(t,a,l){t==="focusin"?(hh(),or=a,dr=l,or.attachEvent("onpropertychange",xh)):t==="focusout"&&hh()}function Hy(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Si(dr)}function By(t,a){if(t==="click")return Si(a)}function $y(t,a){if(t==="input"||t==="change")return Si(a)}function Vy(t,a){return t===a&&(t!==0||1/t===1/a)||t!==t&&a!==a}var ja=typeof Object.is=="function"?Object.is:Vy;function ur(t,a){if(ja(t,a))return!0;if(typeof t!="object"||t===null||typeof a!="object"||a===null)return!1;var l=Object.keys(t),n=Object.keys(a);if(l.length!==n.length)return!1;for(n=0;n<l.length;n++){var o=l[n];if(!ia.call(a,o)||!ja(t[o],a[o]))return!1}return!0}function ph(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function fh(t,a){var l=ph(t);t=0;for(var n;l;){if(l.nodeType===3){if(n=t+l.textContent.length,t<=a&&n>=a)return{node:l,offset:a-t};t=n}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=ph(l)}}function gh(t,a){return t&&a?t===a?!0:t&&t.nodeType===3?!1:a&&a.nodeType===3?gh(t,a.parentNode):"contains"in t?t.contains(a):t.compareDocumentPosition?!!(t.compareDocumentPosition(a)&16):!1:!1}function yh(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var a=bi(t.document);a instanceof t.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)t=a.contentWindow;else break;a=bi(t.document)}return a}function Oo(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a&&(a==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||a==="textarea"||t.contentEditable==="true")}var Qy=ws&&"documentMode"in document&&11>=document.documentMode,cn=null,zo=null,mr=null,Lo=!1;function bh(t,a,l){var n=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Lo||cn==null||cn!==bi(n)||(n=cn,"selectionStart"in n&&Oo(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),mr&&ur(mr,n)||(mr=n,n=xc(zo,"onSelect"),0<n.length&&(a=new wi("onSelect","select",null,a,l),t.push({event:a,listeners:n}),a.target=cn)))}function bl(t,a){var l={};return l[t.toLowerCase()]=a.toLowerCase(),l["Webkit"+t]="webkit"+a,l["Moz"+t]="moz"+a,l}var on={animationend:bl("Animation","AnimationEnd"),animationiteration:bl("Animation","AnimationIteration"),animationstart:bl("Animation","AnimationStart"),transitionrun:bl("Transition","TransitionRun"),transitionstart:bl("Transition","TransitionStart"),transitioncancel:bl("Transition","TransitionCancel"),transitionend:bl("Transition","TransitionEnd")},qo={},vh={};ws&&(vh=document.createElement("div").style,"AnimationEvent"in window||(delete on.animationend.animation,delete on.animationiteration.animation,delete on.animationstart.animation),"TransitionEvent"in window||delete on.transitionend.transition);function vl(t){if(qo[t])return qo[t];if(!on[t])return t;var a=on[t],l;for(l in a)if(a.hasOwnProperty(l)&&l in vh)return qo[t]=a[l];return t}var jh=vl("animationend"),Nh=vl("animationiteration"),_h=vl("animationstart"),Gy=vl("transitionrun"),Py=vl("transitionstart"),Yy=vl("transitioncancel"),wh=vl("transitionend"),Ch=new Map,Uo="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Uo.push("scrollEnd");function Wa(t,a){Ch.set(t,a),gl(a,[t])}var Ei=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},La=[],dn=0,Fo=0;function Di(){for(var t=dn,a=Fo=dn=0;a<t;){var l=La[a];La[a++]=null;var n=La[a];La[a++]=null;var o=La[a];La[a++]=null;var d=La[a];if(La[a++]=null,n!==null&&o!==null){var y=n.pending;y===null?o.next=o:(o.next=y.next,y.next=o),n.pending=o}d!==0&&Sh(l,o,d)}}function Ti(t,a,l,n){La[dn++]=t,La[dn++]=a,La[dn++]=l,La[dn++]=n,Fo|=n,t.lanes|=n,t=t.alternate,t!==null&&(t.lanes|=n)}function Ho(t,a,l,n){return Ti(t,a,l,n),Mi(t)}function jl(t,a){return Ti(t,null,null,a),Mi(t)}function Sh(t,a,l){t.lanes|=l;var n=t.alternate;n!==null&&(n.lanes|=l);for(var o=!1,d=t.return;d!==null;)d.childLanes|=l,n=d.alternate,n!==null&&(n.childLanes|=l),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(o=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,o&&a!==null&&(o=31-Ht(l),t=d.hiddenUpdates,n=t[o],n===null?t[o]=[a]:n.push(a),a.lane=l|536870912),d):null}function Mi(t){if(50<Or)throw Or=0,Kd=null,Error(c(185));for(var a=t.return;a!==null;)t=a,a=t.return;return t.tag===3?t.stateNode:null}var un={};function Xy(t,a,l,n){this.tag=t,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Na(t,a,l,n){return new Xy(t,a,l,n)}function Bo(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Cs(t,a){var l=t.alternate;return l===null?(l=Na(t.tag,a,t.key,t.mode),l.elementType=t.elementType,l.type=t.type,l.stateNode=t.stateNode,l.alternate=t,t.alternate=l):(l.pendingProps=a,l.type=t.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=t.flags&65011712,l.childLanes=t.childLanes,l.lanes=t.lanes,l.child=t.child,l.memoizedProps=t.memoizedProps,l.memoizedState=t.memoizedState,l.updateQueue=t.updateQueue,a=t.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=t.sibling,l.index=t.index,l.ref=t.ref,l.refCleanup=t.refCleanup,l}function Eh(t,a){t.flags&=65011714;var l=t.alternate;return l===null?(t.childLanes=0,t.lanes=a,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=l.childLanes,t.lanes=l.lanes,t.child=l.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=l.memoizedProps,t.memoizedState=l.memoizedState,t.updateQueue=l.updateQueue,t.type=l.type,a=l.dependencies,t.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),t}function ki(t,a,l,n,o,d){var y=0;if(n=t,typeof t=="function")Bo(t)&&(y=1);else if(typeof t=="string")y=Wb(t,l,W.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case ee:return t=Na(31,l,a,o),t.elementType=ee,t.lanes=d,t;case C:return Nl(l.children,o,d,a);case j:y=8,o|=24;break;case _:return t=Na(12,l,a,o|2),t.elementType=_,t.lanes=d,t;case U:return t=Na(13,l,a,o),t.elementType=U,t.lanes=d,t;case A:return t=Na(19,l,a,o),t.elementType=A,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case z:y=10;break e;case N:y=9;break e;case k:y=11;break e;case T:y=14;break e;case O:y=16,n=null;break e}y=29,l=Error(c(130,t===null?"null":typeof t,"")),n=null}return a=Na(y,l,a,o),a.elementType=t,a.type=n,a.lanes=d,a}function Nl(t,a,l,n){return t=Na(7,t,n,a),t.lanes=l,t}function $o(t,a,l){return t=Na(6,t,null,a),t.lanes=l,t}function Dh(t){var a=Na(18,null,null,0);return a.stateNode=t,a}function Vo(t,a,l){return a=Na(4,t.children!==null?t.children:[],t.key,a),a.lanes=l,a.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},a}var Th=new WeakMap;function qa(t,a){if(typeof t=="object"&&t!==null){var l=Th.get(t);return l!==void 0?l:(a={value:t,source:a,stack:os(a)},Th.set(t,a),a)}return{value:t,source:a,stack:os(a)}}var mn=[],hn=0,Ai=null,hr=0,Ua=[],Fa=0,Ps=null,us=1,ms="";function Ss(t,a){mn[hn++]=hr,mn[hn++]=Ai,Ai=t,hr=a}function Mh(t,a,l){Ua[Fa++]=us,Ua[Fa++]=ms,Ua[Fa++]=Ps,Ps=t;var n=us;t=ms;var o=32-Ht(n)-1;n&=~(1<<o),l+=1;var d=32-Ht(a)+o;if(30<d){var y=o-o%5;d=(n&(1<<y)-1).toString(32),n>>=y,o-=y,us=1<<32-Ht(a)+o|l<<o|n,ms=d+t}else us=1<<d|l<<o|n,ms=t}function Qo(t){t.return!==null&&(Ss(t,1),Mh(t,1,0))}function Go(t){for(;t===Ai;)Ai=mn[--hn],mn[hn]=null,hr=mn[--hn],mn[hn]=null;for(;t===Ps;)Ps=Ua[--Fa],Ua[Fa]=null,ms=Ua[--Fa],Ua[Fa]=null,us=Ua[--Fa],Ua[Fa]=null}function kh(t,a){Ua[Fa++]=us,Ua[Fa++]=ms,Ua[Fa++]=Ps,us=a.id,ms=a.overflow,Ps=t}var Jt=null,pt=null,Ze=!1,Ys=null,Ha=!1,Po=Error(c(519));function Xs(t){var a=Error(c(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw xr(qa(a,t)),Po}function Ah(t){var a=t.stateNode,l=t.type,n=t.memoizedProps;switch(a[Zt]=t,a[oa]=n,l){case"dialog":Pe("cancel",a),Pe("close",a);break;case"iframe":case"object":case"embed":Pe("load",a);break;case"video":case"audio":for(l=0;l<Lr.length;l++)Pe(Lr[l],a);break;case"source":Pe("error",a);break;case"img":case"image":case"link":Pe("error",a),Pe("load",a);break;case"details":Pe("toggle",a);break;case"input":Pe("invalid",a),Gm(a,n.value,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name,!0);break;case"select":Pe("invalid",a);break;case"textarea":Pe("invalid",a),Ym(a,n.value,n.defaultValue,n.children)}l=n.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||n.suppressHydrationWarning===!0||Kp(a.textContent,l)?(n.popover!=null&&(Pe("beforetoggle",a),Pe("toggle",a)),n.onScroll!=null&&Pe("scroll",a),n.onScrollEnd!=null&&Pe("scrollend",a),n.onClick!=null&&(a.onclick=_s),a=!0):a=!1,a||Xs(t,!0)}function Rh(t){for(Jt=t.return;Jt;)switch(Jt.tag){case 5:case 31:case 13:Ha=!1;return;case 27:case 3:Ha=!0;return;default:Jt=Jt.return}}function xn(t){if(t!==Jt)return!1;if(!Ze)return Rh(t),Ze=!0,!1;var a=t.tag,l;if((l=a!==3&&a!==27)&&((l=a===5)&&(l=t.type,l=!(l!=="form"&&l!=="button")||du(t.type,t.memoizedProps)),l=!l),l&&pt&&Xs(t),Rh(t),a===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(c(317));pt=lf(t)}else if(a===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(c(317));pt=lf(t)}else a===27?(a=pt,cl(t.type)?(t=pu,pu=null,pt=t):pt=a):pt=Jt?$a(t.stateNode.nextSibling):null;return!0}function _l(){pt=Jt=null,Ze=!1}function Yo(){var t=Ys;return t!==null&&(xa===null?xa=t:xa.push.apply(xa,t),Ys=null),t}function xr(t){Ys===null?Ys=[t]:Ys.push(t)}var Xo=M(null),wl=null,Es=null;function Ks(t,a,l){ae(Xo,a._currentValue),a._currentValue=l}function Ds(t){t._currentValue=Xo.current,V(Xo)}function Ko(t,a,l){for(;t!==null;){var n=t.alternate;if((t.childLanes&a)!==a?(t.childLanes|=a,n!==null&&(n.childLanes|=a)):n!==null&&(n.childLanes&a)!==a&&(n.childLanes|=a),t===l)break;t=t.return}}function Zo(t,a,l,n){var o=t.child;for(o!==null&&(o.return=t);o!==null;){var d=o.dependencies;if(d!==null){var y=o.child;d=d.firstContext;e:for(;d!==null;){var D=d;d=o;for(var q=0;q<a.length;q++)if(D.context===a[q]){d.lanes|=l,D=d.alternate,D!==null&&(D.lanes|=l),Ko(d.return,l,t),n||(y=null);break e}d=D.next}}else if(o.tag===18){if(y=o.return,y===null)throw Error(c(341));y.lanes|=l,d=y.alternate,d!==null&&(d.lanes|=l),Ko(y,l,t),y=null}else y=o.child;if(y!==null)y.return=o;else for(y=o;y!==null;){if(y===t){y=null;break}if(o=y.sibling,o!==null){o.return=y.return,y=o;break}y=y.return}o=y}}function pn(t,a,l,n){t=null;for(var o=a,d=!1;o!==null;){if(!d){if((o.flags&524288)!==0)d=!0;else if((o.flags&262144)!==0)break}if(o.tag===10){var y=o.alternate;if(y===null)throw Error(c(387));if(y=y.memoizedProps,y!==null){var D=o.type;ja(o.pendingProps.value,y.value)||(t!==null?t.push(D):t=[D])}}else if(o===ge.current){if(y=o.alternate,y===null)throw Error(c(387));y.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(t!==null?t.push(Br):t=[Br])}o=o.return}t!==null&&Zo(a,t,l,n),a.flags|=262144}function Ri(t){for(t=t.firstContext;t!==null;){if(!ja(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Cl(t){wl=t,Es=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function It(t){return Oh(wl,t)}function Oi(t,a){return wl===null&&Cl(t),Oh(t,a)}function Oh(t,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},Es===null){if(t===null)throw Error(c(308));Es=a,t.dependencies={lanes:0,firstContext:a},t.flags|=524288}else Es=Es.next=a;return l}var Ky=typeof AbortController<"u"?AbortController:function(){var t=[],a=this.signal={aborted:!1,addEventListener:function(l,n){t.push(n)}};this.abort=function(){a.aborted=!0,t.forEach(function(l){return l()})}},Zy=s.unstable_scheduleCallback,Jy=s.unstable_NormalPriority,Ot={$$typeof:z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Jo(){return{controller:new Ky,data:new Map,refCount:0}}function pr(t){t.refCount--,t.refCount===0&&Zy(Jy,function(){t.controller.abort()})}var fr=null,Io=0,fn=0,gn=null;function Iy(t,a){if(fr===null){var l=fr=[];Io=0,fn=tu(),gn={status:"pending",value:void 0,then:function(n){l.push(n)}}}return Io++,a.then(zh,zh),a}function zh(){if(--Io===0&&fr!==null){gn!==null&&(gn.status="fulfilled");var t=fr;fr=null,fn=0,gn=null;for(var a=0;a<t.length;a++)(0,t[a])()}}function Wy(t,a){var l=[],n={status:"pending",value:null,reason:null,then:function(o){l.push(o)}};return t.then(function(){n.status="fulfilled",n.value=a;for(var o=0;o<l.length;o++)(0,l[o])(a)},function(o){for(n.status="rejected",n.reason=o,o=0;o<l.length;o++)(0,l[o])(void 0)}),n}var Lh=$.S;$.S=function(t,a){bp=_t(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&Iy(t,a),Lh!==null&&Lh(t,a)};var Sl=M(null);function Wo(){var t=Sl.current;return t!==null?t:mt.pooledCache}function zi(t,a){a===null?ae(Sl,Sl.current):ae(Sl,a.pool)}function qh(){var t=Wo();return t===null?null:{parent:Ot._currentValue,pool:t}}var yn=Error(c(460)),ed=Error(c(474)),Li=Error(c(542)),qi={then:function(){}};function Uh(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Fh(t,a,l){switch(l=t[l],l===void 0?t.push(a):l!==a&&(a.then(_s,_s),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,Bh(t),t;default:if(typeof a.status=="string")a.then(_s,_s);else{if(t=mt,t!==null&&100<t.shellSuspendCounter)throw Error(c(482));t=a,t.status="pending",t.then(function(n){if(a.status==="pending"){var o=a;o.status="fulfilled",o.value=n}},function(n){if(a.status==="pending"){var o=a;o.status="rejected",o.reason=n}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,Bh(t),t}throw Dl=a,yn}}function El(t){try{var a=t._init;return a(t._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(Dl=l,yn):l}}var Dl=null;function Hh(){if(Dl===null)throw Error(c(459));var t=Dl;return Dl=null,t}function Bh(t){if(t===yn||t===Li)throw Error(c(483))}var bn=null,gr=0;function Ui(t){var a=gr;return gr+=1,bn===null&&(bn=[]),Fh(bn,t,a)}function yr(t,a){a=a.props.ref,t.ref=a!==void 0?a:null}function Fi(t,a){throw a.$$typeof===E?Error(c(525)):(t=Object.prototype.toString.call(a),Error(c(31,t==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":t)))}function $h(t){function a(P,H){if(t){var K=P.deletions;K===null?(P.deletions=[H],P.flags|=16):K.push(H)}}function l(P,H){if(!t)return null;for(;H!==null;)a(P,H),H=H.sibling;return null}function n(P){for(var H=new Map;P!==null;)P.key!==null?H.set(P.key,P):H.set(P.index,P),P=P.sibling;return H}function o(P,H){return P=Cs(P,H),P.index=0,P.sibling=null,P}function d(P,H,K){return P.index=K,t?(K=P.alternate,K!==null?(K=K.index,K<H?(P.flags|=67108866,H):K):(P.flags|=67108866,H)):(P.flags|=1048576,H)}function y(P){return t&&P.alternate===null&&(P.flags|=67108866),P}function D(P,H,K,de){return H===null||H.tag!==6?(H=$o(K,P.mode,de),H.return=P,H):(H=o(H,K),H.return=P,H)}function q(P,H,K,de){var Me=K.type;return Me===C?ce(P,H,K.props.children,de,K.key):H!==null&&(H.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===O&&El(Me)===H.type)?(H=o(H,K.props),yr(H,K),H.return=P,H):(H=ki(K.type,K.key,K.props,null,P.mode,de),yr(H,K),H.return=P,H)}function J(P,H,K,de){return H===null||H.tag!==4||H.stateNode.containerInfo!==K.containerInfo||H.stateNode.implementation!==K.implementation?(H=Vo(K,P.mode,de),H.return=P,H):(H=o(H,K.children||[]),H.return=P,H)}function ce(P,H,K,de,Me){return H===null||H.tag!==7?(H=Nl(K,P.mode,de,Me),H.return=P,H):(H=o(H,K),H.return=P,H)}function he(P,H,K){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return H=$o(""+H,P.mode,K),H.return=P,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case S:return K=ki(H.type,H.key,H.props,null,P.mode,K),yr(K,H),K.return=P,K;case w:return H=Vo(H,P.mode,K),H.return=P,H;case O:return H=El(H),he(P,H,K)}if(xe(H)||F(H))return H=Nl(H,P.mode,K,null),H.return=P,H;if(typeof H.then=="function")return he(P,Ui(H),K);if(H.$$typeof===z)return he(P,Oi(P,H),K);Fi(P,H)}return null}function I(P,H,K,de){var Me=H!==null?H.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return Me!==null?null:D(P,H,""+K,de);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case S:return K.key===Me?q(P,H,K,de):null;case w:return K.key===Me?J(P,H,K,de):null;case O:return K=El(K),I(P,H,K,de)}if(xe(K)||F(K))return Me!==null?null:ce(P,H,K,de,null);if(typeof K.then=="function")return I(P,H,Ui(K),de);if(K.$$typeof===z)return I(P,H,Oi(P,K),de);Fi(P,K)}return null}function re(P,H,K,de,Me){if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return P=P.get(K)||null,D(H,P,""+de,Me);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case S:return P=P.get(de.key===null?K:de.key)||null,q(H,P,de,Me);case w:return P=P.get(de.key===null?K:de.key)||null,J(H,P,de,Me);case O:return de=El(de),re(P,H,K,de,Me)}if(xe(de)||F(de))return P=P.get(K)||null,ce(H,P,de,Me,null);if(typeof de.then=="function")return re(P,H,K,Ui(de),Me);if(de.$$typeof===z)return re(P,H,K,Oi(H,de),Me);Fi(H,de)}return null}function Se(P,H,K,de){for(var Me=null,Ie=null,De=H,Ve=H=0,Xe=null;De!==null&&Ve<K.length;Ve++){De.index>Ve?(Xe=De,De=null):Xe=De.sibling;var We=I(P,De,K[Ve],de);if(We===null){De===null&&(De=Xe);break}t&&De&&We.alternate===null&&a(P,De),H=d(We,H,Ve),Ie===null?Me=We:Ie.sibling=We,Ie=We,De=Xe}if(Ve===K.length)return l(P,De),Ze&&Ss(P,Ve),Me;if(De===null){for(;Ve<K.length;Ve++)De=he(P,K[Ve],de),De!==null&&(H=d(De,H,Ve),Ie===null?Me=De:Ie.sibling=De,Ie=De);return Ze&&Ss(P,Ve),Me}for(De=n(De);Ve<K.length;Ve++)Xe=re(De,P,Ve,K[Ve],de),Xe!==null&&(t&&Xe.alternate!==null&&De.delete(Xe.key===null?Ve:Xe.key),H=d(Xe,H,Ve),Ie===null?Me=Xe:Ie.sibling=Xe,Ie=Xe);return t&&De.forEach(function(hl){return a(P,hl)}),Ze&&Ss(P,Ve),Me}function Re(P,H,K,de){if(K==null)throw Error(c(151));for(var Me=null,Ie=null,De=H,Ve=H=0,Xe=null,We=K.next();De!==null&&!We.done;Ve++,We=K.next()){De.index>Ve?(Xe=De,De=null):Xe=De.sibling;var hl=I(P,De,We.value,de);if(hl===null){De===null&&(De=Xe);break}t&&De&&hl.alternate===null&&a(P,De),H=d(hl,H,Ve),Ie===null?Me=hl:Ie.sibling=hl,Ie=hl,De=Xe}if(We.done)return l(P,De),Ze&&Ss(P,Ve),Me;if(De===null){for(;!We.done;Ve++,We=K.next())We=he(P,We.value,de),We!==null&&(H=d(We,H,Ve),Ie===null?Me=We:Ie.sibling=We,Ie=We);return Ze&&Ss(P,Ve),Me}for(De=n(De);!We.done;Ve++,We=K.next())We=re(De,P,Ve,We.value,de),We!==null&&(t&&We.alternate!==null&&De.delete(We.key===null?Ve:We.key),H=d(We,H,Ve),Ie===null?Me=We:Ie.sibling=We,Ie=We);return t&&De.forEach(function(dv){return a(P,dv)}),Ze&&Ss(P,Ve),Me}function ut(P,H,K,de){if(typeof K=="object"&&K!==null&&K.type===C&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case S:e:{for(var Me=K.key;H!==null;){if(H.key===Me){if(Me=K.type,Me===C){if(H.tag===7){l(P,H.sibling),de=o(H,K.props.children),de.return=P,P=de;break e}}else if(H.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===O&&El(Me)===H.type){l(P,H.sibling),de=o(H,K.props),yr(de,K),de.return=P,P=de;break e}l(P,H);break}else a(P,H);H=H.sibling}K.type===C?(de=Nl(K.props.children,P.mode,de,K.key),de.return=P,P=de):(de=ki(K.type,K.key,K.props,null,P.mode,de),yr(de,K),de.return=P,P=de)}return y(P);case w:e:{for(Me=K.key;H!==null;){if(H.key===Me)if(H.tag===4&&H.stateNode.containerInfo===K.containerInfo&&H.stateNode.implementation===K.implementation){l(P,H.sibling),de=o(H,K.children||[]),de.return=P,P=de;break e}else{l(P,H);break}else a(P,H);H=H.sibling}de=Vo(K,P.mode,de),de.return=P,P=de}return y(P);case O:return K=El(K),ut(P,H,K,de)}if(xe(K))return Se(P,H,K,de);if(F(K)){if(Me=F(K),typeof Me!="function")throw Error(c(150));return K=Me.call(K),Re(P,H,K,de)}if(typeof K.then=="function")return ut(P,H,Ui(K),de);if(K.$$typeof===z)return ut(P,H,Oi(P,K),de);Fi(P,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,H!==null&&H.tag===6?(l(P,H.sibling),de=o(H,K),de.return=P,P=de):(l(P,H),de=$o(K,P.mode,de),de.return=P,P=de),y(P)):l(P,H)}return function(P,H,K,de){try{gr=0;var Me=ut(P,H,K,de);return bn=null,Me}catch(De){if(De===yn||De===Li)throw De;var Ie=Na(29,De,null,P.mode);return Ie.lanes=de,Ie.return=P,Ie}finally{}}}var Tl=$h(!0),Vh=$h(!1),Zs=!1;function td(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ad(t,a){t=t.updateQueue,a.updateQueue===t&&(a.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Js(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Is(t,a,l){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,(at&2)!==0){var o=n.pending;return o===null?a.next=a:(a.next=o.next,o.next=a),n.pending=a,a=Mi(t),Sh(t,null,l),a}return Ti(t,n,a,l),Mi(t)}function br(t,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194048)!==0)){var n=a.lanes;n&=t.pendingLanes,l|=n,a.lanes=l,Om(t,l)}}function sd(t,a){var l=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,l===n)){var o=null,d=null;if(l=l.firstBaseUpdate,l!==null){do{var y={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};d===null?o=d=y:d=d.next=y,l=l.next}while(l!==null);d===null?o=d=a:d=d.next=a}else o=d=a;l={baseState:n.baseState,firstBaseUpdate:o,lastBaseUpdate:d,shared:n.shared,callbacks:n.callbacks},t.updateQueue=l;return}t=l.lastBaseUpdate,t===null?l.firstBaseUpdate=a:t.next=a,l.lastBaseUpdate=a}var ld=!1;function vr(){if(ld){var t=gn;if(t!==null)throw t}}function jr(t,a,l,n){ld=!1;var o=t.updateQueue;Zs=!1;var d=o.firstBaseUpdate,y=o.lastBaseUpdate,D=o.shared.pending;if(D!==null){o.shared.pending=null;var q=D,J=q.next;q.next=null,y===null?d=J:y.next=J,y=q;var ce=t.alternate;ce!==null&&(ce=ce.updateQueue,D=ce.lastBaseUpdate,D!==y&&(D===null?ce.firstBaseUpdate=J:D.next=J,ce.lastBaseUpdate=q))}if(d!==null){var he=o.baseState;y=0,ce=J=q=null,D=d;do{var I=D.lane&-536870913,re=I!==D.lane;if(re?(Ye&I)===I:(n&I)===I){I!==0&&I===fn&&(ld=!0),ce!==null&&(ce=ce.next={lane:0,tag:D.tag,payload:D.payload,callback:null,next:null});e:{var Se=t,Re=D;I=a;var ut=l;switch(Re.tag){case 1:if(Se=Re.payload,typeof Se=="function"){he=Se.call(ut,he,I);break e}he=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=Re.payload,I=typeof Se=="function"?Se.call(ut,he,I):Se,I==null)break e;he=v({},he,I);break e;case 2:Zs=!0}}I=D.callback,I!==null&&(t.flags|=64,re&&(t.flags|=8192),re=o.callbacks,re===null?o.callbacks=[I]:re.push(I))}else re={lane:I,tag:D.tag,payload:D.payload,callback:D.callback,next:null},ce===null?(J=ce=re,q=he):ce=ce.next=re,y|=I;if(D=D.next,D===null){if(D=o.shared.pending,D===null)break;re=D,D=re.next,re.next=null,o.lastBaseUpdate=re,o.shared.pending=null}}while(!0);ce===null&&(q=he),o.baseState=q,o.firstBaseUpdate=J,o.lastBaseUpdate=ce,d===null&&(o.shared.lanes=0),sl|=y,t.lanes=y,t.memoizedState=he}}function Qh(t,a){if(typeof t!="function")throw Error(c(191,t));t.call(a)}function Gh(t,a){var l=t.callbacks;if(l!==null)for(t.callbacks=null,t=0;t<l.length;t++)Qh(l[t],a)}var vn=M(null),Hi=M(0);function Ph(t,a){t=qs,ae(Hi,t),ae(vn,a),qs=t|a.baseLanes}function nd(){ae(Hi,qs),ae(vn,vn.current)}function rd(){qs=Hi.current,V(vn),V(Hi)}var _a=M(null),Ba=null;function Ws(t){var a=t.alternate;ae(Dt,Dt.current&1),ae(_a,t),Ba===null&&(a===null||vn.current!==null||a.memoizedState!==null)&&(Ba=t)}function id(t){ae(Dt,Dt.current),ae(_a,t),Ba===null&&(Ba=t)}function Yh(t){t.tag===22?(ae(Dt,Dt.current),ae(_a,t),Ba===null&&(Ba=t)):el()}function el(){ae(Dt,Dt.current),ae(_a,_a.current)}function wa(t){V(_a),Ba===t&&(Ba=null),V(Dt)}var Dt=M(0);function Bi(t){for(var a=t;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||hu(l)||xu(l)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Ts=0,Fe=null,ot=null,zt=null,$i=!1,jn=!1,Ml=!1,Vi=0,Nr=0,Nn=null,eb=0;function wt(){throw Error(c(321))}function cd(t,a){if(a===null)return!1;for(var l=0;l<a.length&&l<t.length;l++)if(!ja(t[l],a[l]))return!1;return!0}function od(t,a,l,n,o,d){return Ts=d,Fe=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,$.H=t===null||t.memoizedState===null?Mx:wd,Ml=!1,d=l(n,o),Ml=!1,jn&&(d=Kh(a,l,n,o)),Xh(t),d}function Xh(t){$.H=Cr;var a=ot!==null&&ot.next!==null;if(Ts=0,zt=ot=Fe=null,$i=!1,Nr=0,Nn=null,a)throw Error(c(300));t===null||Lt||(t=t.dependencies,t!==null&&Ri(t)&&(Lt=!0))}function Kh(t,a,l,n){Fe=t;var o=0;do{if(jn&&(Nn=null),Nr=0,jn=!1,25<=o)throw Error(c(301));if(o+=1,zt=ot=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}$.H=kx,d=a(l,n)}while(jn);return d}function tb(){var t=$.H,a=t.useState()[0];return a=typeof a.then=="function"?_r(a):a,t=t.useState()[0],(ot!==null?ot.memoizedState:null)!==t&&(Fe.flags|=1024),a}function dd(){var t=Vi!==0;return Vi=0,t}function ud(t,a,l){a.updateQueue=t.updateQueue,a.flags&=-2053,t.lanes&=~l}function md(t){if($i){for(t=t.memoizedState;t!==null;){var a=t.queue;a!==null&&(a.pending=null),t=t.next}$i=!1}Ts=0,zt=ot=Fe=null,jn=!1,Nr=Vi=0,Nn=null}function la(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zt===null?Fe.memoizedState=zt=t:zt=zt.next=t,zt}function Tt(){if(ot===null){var t=Fe.alternate;t=t!==null?t.memoizedState:null}else t=ot.next;var a=zt===null?Fe.memoizedState:zt.next;if(a!==null)zt=a,ot=t;else{if(t===null)throw Fe.alternate===null?Error(c(467)):Error(c(310));ot=t,t={memoizedState:ot.memoizedState,baseState:ot.baseState,baseQueue:ot.baseQueue,queue:ot.queue,next:null},zt===null?Fe.memoizedState=zt=t:zt=zt.next=t}return zt}function Qi(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function _r(t){var a=Nr;return Nr+=1,Nn===null&&(Nn=[]),t=Fh(Nn,t,a),a=Fe,(zt===null?a.memoizedState:zt.next)===null&&(a=a.alternate,$.H=a===null||a.memoizedState===null?Mx:wd),t}function Gi(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return _r(t);if(t.$$typeof===z)return It(t)}throw Error(c(438,String(t)))}function hd(t){var a=null,l=Fe.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var n=Fe.alternate;n!==null&&(n=n.updateQueue,n!==null&&(n=n.memoCache,n!=null&&(a={data:n.data.map(function(o){return o.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=Qi(),Fe.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(t),n=0;n<t;n++)l[n]=B;return a.index++,l}function Ms(t,a){return typeof a=="function"?a(t):a}function Pi(t){var a=Tt();return xd(a,ot,t)}function xd(t,a,l){var n=t.queue;if(n===null)throw Error(c(311));n.lastRenderedReducer=l;var o=t.baseQueue,d=n.pending;if(d!==null){if(o!==null){var y=o.next;o.next=d.next,d.next=y}a.baseQueue=o=d,n.pending=null}if(d=t.baseState,o===null)t.memoizedState=d;else{a=o.next;var D=y=null,q=null,J=a,ce=!1;do{var he=J.lane&-536870913;if(he!==J.lane?(Ye&he)===he:(Ts&he)===he){var I=J.revertLane;if(I===0)q!==null&&(q=q.next={lane:0,revertLane:0,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),he===fn&&(ce=!0);else if((Ts&I)===I){J=J.next,I===fn&&(ce=!0);continue}else he={lane:0,revertLane:J.revertLane,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},q===null?(D=q=he,y=d):q=q.next=he,Fe.lanes|=I,sl|=I;he=J.action,Ml&&l(d,he),d=J.hasEagerState?J.eagerState:l(d,he)}else I={lane:he,revertLane:J.revertLane,gesture:J.gesture,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},q===null?(D=q=I,y=d):q=q.next=I,Fe.lanes|=he,sl|=he;J=J.next}while(J!==null&&J!==a);if(q===null?y=d:q.next=D,!ja(d,t.memoizedState)&&(Lt=!0,ce&&(l=gn,l!==null)))throw l;t.memoizedState=d,t.baseState=y,t.baseQueue=q,n.lastRenderedState=d}return o===null&&(n.lanes=0),[t.memoizedState,n.dispatch]}function pd(t){var a=Tt(),l=a.queue;if(l===null)throw Error(c(311));l.lastRenderedReducer=t;var n=l.dispatch,o=l.pending,d=a.memoizedState;if(o!==null){l.pending=null;var y=o=o.next;do d=t(d,y.action),y=y.next;while(y!==o);ja(d,a.memoizedState)||(Lt=!0),a.memoizedState=d,a.baseQueue===null&&(a.baseState=d),l.lastRenderedState=d}return[d,n]}function Zh(t,a,l){var n=Fe,o=Tt(),d=Ze;if(d){if(l===void 0)throw Error(c(407));l=l()}else l=a();var y=!ja((ot||o).memoizedState,l);if(y&&(o.memoizedState=l,Lt=!0),o=o.queue,yd(Wh.bind(null,n,o,t),[t]),o.getSnapshot!==a||y||zt!==null&&zt.memoizedState.tag&1){if(n.flags|=2048,_n(9,{destroy:void 0},Ih.bind(null,n,o,l,a),null),mt===null)throw Error(c(349));d||(Ts&127)!==0||Jh(n,a,l)}return l}function Jh(t,a,l){t.flags|=16384,t={getSnapshot:a,value:l},a=Fe.updateQueue,a===null?(a=Qi(),Fe.updateQueue=a,a.stores=[t]):(l=a.stores,l===null?a.stores=[t]:l.push(t))}function Ih(t,a,l,n){a.value=l,a.getSnapshot=n,ex(a)&&tx(t)}function Wh(t,a,l){return l(function(){ex(a)&&tx(t)})}function ex(t){var a=t.getSnapshot;t=t.value;try{var l=a();return!ja(t,l)}catch{return!0}}function tx(t){var a=jl(t,2);a!==null&&pa(a,t,2)}function fd(t){var a=la();if(typeof t=="function"){var l=t;if(t=l(),Ml){ct(!0);try{l()}finally{ct(!1)}}}return a.memoizedState=a.baseState=t,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ms,lastRenderedState:t},a}function ax(t,a,l,n){return t.baseState=l,xd(t,ot,typeof n=="function"?n:Ms)}function ab(t,a,l,n,o){if(Ki(t))throw Error(c(485));if(t=a.action,t!==null){var d={payload:o,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(y){d.listeners.push(y)}};$.T!==null?l(!0):d.isTransition=!1,n(d),l=a.pending,l===null?(d.next=a.pending=d,sx(a,d)):(d.next=l.next,a.pending=l.next=d)}}function sx(t,a){var l=a.action,n=a.payload,o=t.state;if(a.isTransition){var d=$.T,y={};$.T=y;try{var D=l(o,n),q=$.S;q!==null&&q(y,D),lx(t,a,D)}catch(J){gd(t,a,J)}finally{d!==null&&y.types!==null&&(d.types=y.types),$.T=d}}else try{d=l(o,n),lx(t,a,d)}catch(J){gd(t,a,J)}}function lx(t,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(n){nx(t,a,n)},function(n){return gd(t,a,n)}):nx(t,a,l)}function nx(t,a,l){a.status="fulfilled",a.value=l,rx(a),t.state=l,a=t.pending,a!==null&&(l=a.next,l===a?t.pending=null:(l=l.next,a.next=l,sx(t,l)))}function gd(t,a,l){var n=t.pending;if(t.pending=null,n!==null){n=n.next;do a.status="rejected",a.reason=l,rx(a),a=a.next;while(a!==n)}t.action=null}function rx(t){t=t.listeners;for(var a=0;a<t.length;a++)(0,t[a])()}function ix(t,a){return a}function cx(t,a){if(Ze){var l=mt.formState;if(l!==null){e:{var n=Fe;if(Ze){if(pt){t:{for(var o=pt,d=Ha;o.nodeType!==8;){if(!d){o=null;break t}if(o=$a(o.nextSibling),o===null){o=null;break t}}d=o.data,o=d==="F!"||d==="F"?o:null}if(o){pt=$a(o.nextSibling),n=o.data==="F!";break e}}Xs(n)}n=!1}n&&(a=l[0])}}return l=la(),l.memoizedState=l.baseState=a,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ix,lastRenderedState:a},l.queue=n,l=Ex.bind(null,Fe,n),n.dispatch=l,n=fd(!1),d=_d.bind(null,Fe,!1,n.queue),n=la(),o={state:a,dispatch:null,action:t,pending:null},n.queue=o,l=ab.bind(null,Fe,o,d,l),o.dispatch=l,n.memoizedState=t,[a,l,!1]}function ox(t){var a=Tt();return dx(a,ot,t)}function dx(t,a,l){if(a=xd(t,a,ix)[0],t=Pi(Ms)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var n=_r(a)}catch(y){throw y===yn?Li:y}else n=a;a=Tt();var o=a.queue,d=o.dispatch;return l!==a.memoizedState&&(Fe.flags|=2048,_n(9,{destroy:void 0},sb.bind(null,o,l),null)),[n,d,t]}function sb(t,a){t.action=a}function ux(t){var a=Tt(),l=ot;if(l!==null)return dx(a,l,t);Tt(),a=a.memoizedState,l=Tt();var n=l.queue.dispatch;return l.memoizedState=t,[a,n,!1]}function _n(t,a,l,n){return t={tag:t,create:l,deps:n,inst:a,next:null},a=Fe.updateQueue,a===null&&(a=Qi(),Fe.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=t.next=t:(n=l.next,l.next=t,t.next=n,a.lastEffect=t),t}function mx(){return Tt().memoizedState}function Yi(t,a,l,n){var o=la();Fe.flags|=t,o.memoizedState=_n(1|a,{destroy:void 0},l,n===void 0?null:n)}function Xi(t,a,l,n){var o=Tt();n=n===void 0?null:n;var d=o.memoizedState.inst;ot!==null&&n!==null&&cd(n,ot.memoizedState.deps)?o.memoizedState=_n(a,d,l,n):(Fe.flags|=t,o.memoizedState=_n(1|a,d,l,n))}function hx(t,a){Yi(8390656,8,t,a)}function yd(t,a){Xi(2048,8,t,a)}function lb(t){Fe.flags|=4;var a=Fe.updateQueue;if(a===null)a=Qi(),Fe.updateQueue=a,a.events=[t];else{var l=a.events;l===null?a.events=[t]:l.push(t)}}function xx(t){var a=Tt().memoizedState;return lb({ref:a,nextImpl:t}),function(){if((at&2)!==0)throw Error(c(440));return a.impl.apply(void 0,arguments)}}function px(t,a){return Xi(4,2,t,a)}function fx(t,a){return Xi(4,4,t,a)}function gx(t,a){if(typeof a=="function"){t=t();var l=a(t);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return t=t(),a.current=t,function(){a.current=null}}function yx(t,a,l){l=l!=null?l.concat([t]):null,Xi(4,4,gx.bind(null,a,t),l)}function bd(){}function bx(t,a){var l=Tt();a=a===void 0?null:a;var n=l.memoizedState;return a!==null&&cd(a,n[1])?n[0]:(l.memoizedState=[t,a],t)}function vx(t,a){var l=Tt();a=a===void 0?null:a;var n=l.memoizedState;if(a!==null&&cd(a,n[1]))return n[0];if(n=t(),Ml){ct(!0);try{t()}finally{ct(!1)}}return l.memoizedState=[n,a],n}function vd(t,a,l){return l===void 0||(Ts&1073741824)!==0&&(Ye&261930)===0?t.memoizedState=a:(t.memoizedState=l,t=jp(),Fe.lanes|=t,sl|=t,l)}function jx(t,a,l,n){return ja(l,a)?l:vn.current!==null?(t=vd(t,l,n),ja(t,a)||(Lt=!0),t):(Ts&42)===0||(Ts&1073741824)!==0&&(Ye&261930)===0?(Lt=!0,t.memoizedState=l):(t=jp(),Fe.lanes|=t,sl|=t,a)}function Nx(t,a,l,n,o){var d=pe.p;pe.p=d!==0&&8>d?d:8;var y=$.T,D={};$.T=D,_d(t,!1,a,l);try{var q=o(),J=$.S;if(J!==null&&J(D,q),q!==null&&typeof q=="object"&&typeof q.then=="function"){var ce=Wy(q,n);wr(t,a,ce,Ea(t))}else wr(t,a,n,Ea(t))}catch(he){wr(t,a,{then:function(){},status:"rejected",reason:he},Ea())}finally{pe.p=d,y!==null&&D.types!==null&&(y.types=D.types),$.T=y}}function nb(){}function jd(t,a,l,n){if(t.tag!==5)throw Error(c(476));var o=_x(t).queue;Nx(t,o,a,G,l===null?nb:function(){return wx(t),l(n)})}function _x(t){var a=t.memoizedState;if(a!==null)return a;a={memoizedState:G,baseState:G,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ms,lastRenderedState:G},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ms,lastRenderedState:l},next:null},t.memoizedState=a,t=t.alternate,t!==null&&(t.memoizedState=a),a}function wx(t){var a=_x(t);a.next===null&&(a=t.alternate.memoizedState),wr(t,a.next.queue,{},Ea())}function Nd(){return It(Br)}function Cx(){return Tt().memoizedState}function Sx(){return Tt().memoizedState}function rb(t){for(var a=t.return;a!==null;){switch(a.tag){case 24:case 3:var l=Ea();t=Js(l);var n=Is(a,t,l);n!==null&&(pa(n,a,l),br(n,a,l)),a={cache:Jo()},t.payload=a;return}a=a.return}}function ib(t,a,l){var n=Ea();l={lane:n,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Ki(t)?Dx(a,l):(l=Ho(t,a,l,n),l!==null&&(pa(l,t,n),Tx(l,a,n)))}function Ex(t,a,l){var n=Ea();wr(t,a,l,n)}function wr(t,a,l,n){var o={lane:n,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Ki(t))Dx(a,o);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=a.lastRenderedReducer,d!==null))try{var y=a.lastRenderedState,D=d(y,l);if(o.hasEagerState=!0,o.eagerState=D,ja(D,y))return Ti(t,a,o,0),mt===null&&Di(),!1}catch{}finally{}if(l=Ho(t,a,o,n),l!==null)return pa(l,t,n),Tx(l,a,n),!0}return!1}function _d(t,a,l,n){if(n={lane:2,revertLane:tu(),gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Ki(t)){if(a)throw Error(c(479))}else a=Ho(t,l,n,2),a!==null&&pa(a,t,2)}function Ki(t){var a=t.alternate;return t===Fe||a!==null&&a===Fe}function Dx(t,a){jn=$i=!0;var l=t.pending;l===null?a.next=a:(a.next=l.next,l.next=a),t.pending=a}function Tx(t,a,l){if((l&4194048)!==0){var n=a.lanes;n&=t.pendingLanes,l|=n,a.lanes=l,Om(t,l)}}var Cr={readContext:It,use:Gi,useCallback:wt,useContext:wt,useEffect:wt,useImperativeHandle:wt,useLayoutEffect:wt,useInsertionEffect:wt,useMemo:wt,useReducer:wt,useRef:wt,useState:wt,useDebugValue:wt,useDeferredValue:wt,useTransition:wt,useSyncExternalStore:wt,useId:wt,useHostTransitionStatus:wt,useFormState:wt,useActionState:wt,useOptimistic:wt,useMemoCache:wt,useCacheRefresh:wt};Cr.useEffectEvent=wt;var Mx={readContext:It,use:Gi,useCallback:function(t,a){return la().memoizedState=[t,a===void 0?null:a],t},useContext:It,useEffect:hx,useImperativeHandle:function(t,a,l){l=l!=null?l.concat([t]):null,Yi(4194308,4,gx.bind(null,a,t),l)},useLayoutEffect:function(t,a){return Yi(4194308,4,t,a)},useInsertionEffect:function(t,a){Yi(4,2,t,a)},useMemo:function(t,a){var l=la();a=a===void 0?null:a;var n=t();if(Ml){ct(!0);try{t()}finally{ct(!1)}}return l.memoizedState=[n,a],n},useReducer:function(t,a,l){var n=la();if(l!==void 0){var o=l(a);if(Ml){ct(!0);try{l(a)}finally{ct(!1)}}}else o=a;return n.memoizedState=n.baseState=o,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:o},n.queue=t,t=t.dispatch=ib.bind(null,Fe,t),[n.memoizedState,t]},useRef:function(t){var a=la();return t={current:t},a.memoizedState=t},useState:function(t){t=fd(t);var a=t.queue,l=Ex.bind(null,Fe,a);return a.dispatch=l,[t.memoizedState,l]},useDebugValue:bd,useDeferredValue:function(t,a){var l=la();return vd(l,t,a)},useTransition:function(){var t=fd(!1);return t=Nx.bind(null,Fe,t.queue,!0,!1),la().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,a,l){var n=Fe,o=la();if(Ze){if(l===void 0)throw Error(c(407));l=l()}else{if(l=a(),mt===null)throw Error(c(349));(Ye&127)!==0||Jh(n,a,l)}o.memoizedState=l;var d={value:l,getSnapshot:a};return o.queue=d,hx(Wh.bind(null,n,d,t),[t]),n.flags|=2048,_n(9,{destroy:void 0},Ih.bind(null,n,d,l,a),null),l},useId:function(){var t=la(),a=mt.identifierPrefix;if(Ze){var l=ms,n=us;l=(n&~(1<<32-Ht(n)-1)).toString(32)+l,a="_"+a+"R_"+l,l=Vi++,0<l&&(a+="H"+l.toString(32)),a+="_"}else l=eb++,a="_"+a+"r_"+l.toString(32)+"_";return t.memoizedState=a},useHostTransitionStatus:Nd,useFormState:cx,useActionState:cx,useOptimistic:function(t){var a=la();a.memoizedState=a.baseState=t;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=_d.bind(null,Fe,!0,l),l.dispatch=a,[t,a]},useMemoCache:hd,useCacheRefresh:function(){return la().memoizedState=rb.bind(null,Fe)},useEffectEvent:function(t){var a=la(),l={impl:t};return a.memoizedState=l,function(){if((at&2)!==0)throw Error(c(440));return l.impl.apply(void 0,arguments)}}},wd={readContext:It,use:Gi,useCallback:bx,useContext:It,useEffect:yd,useImperativeHandle:yx,useInsertionEffect:px,useLayoutEffect:fx,useMemo:vx,useReducer:Pi,useRef:mx,useState:function(){return Pi(Ms)},useDebugValue:bd,useDeferredValue:function(t,a){var l=Tt();return jx(l,ot.memoizedState,t,a)},useTransition:function(){var t=Pi(Ms)[0],a=Tt().memoizedState;return[typeof t=="boolean"?t:_r(t),a]},useSyncExternalStore:Zh,useId:Cx,useHostTransitionStatus:Nd,useFormState:ox,useActionState:ox,useOptimistic:function(t,a){var l=Tt();return ax(l,ot,t,a)},useMemoCache:hd,useCacheRefresh:Sx};wd.useEffectEvent=xx;var kx={readContext:It,use:Gi,useCallback:bx,useContext:It,useEffect:yd,useImperativeHandle:yx,useInsertionEffect:px,useLayoutEffect:fx,useMemo:vx,useReducer:pd,useRef:mx,useState:function(){return pd(Ms)},useDebugValue:bd,useDeferredValue:function(t,a){var l=Tt();return ot===null?vd(l,t,a):jx(l,ot.memoizedState,t,a)},useTransition:function(){var t=pd(Ms)[0],a=Tt().memoizedState;return[typeof t=="boolean"?t:_r(t),a]},useSyncExternalStore:Zh,useId:Cx,useHostTransitionStatus:Nd,useFormState:ux,useActionState:ux,useOptimistic:function(t,a){var l=Tt();return ot!==null?ax(l,ot,t,a):(l.baseState=t,[t,l.queue.dispatch])},useMemoCache:hd,useCacheRefresh:Sx};kx.useEffectEvent=xx;function Cd(t,a,l,n){a=t.memoizedState,l=l(n,a),l=l==null?a:v({},a,l),t.memoizedState=l,t.lanes===0&&(t.updateQueue.baseState=l)}var Sd={enqueueSetState:function(t,a,l){t=t._reactInternals;var n=Ea(),o=Js(n);o.payload=a,l!=null&&(o.callback=l),a=Is(t,o,n),a!==null&&(pa(a,t,n),br(a,t,n))},enqueueReplaceState:function(t,a,l){t=t._reactInternals;var n=Ea(),o=Js(n);o.tag=1,o.payload=a,l!=null&&(o.callback=l),a=Is(t,o,n),a!==null&&(pa(a,t,n),br(a,t,n))},enqueueForceUpdate:function(t,a){t=t._reactInternals;var l=Ea(),n=Js(l);n.tag=2,a!=null&&(n.callback=a),a=Is(t,n,l),a!==null&&(pa(a,t,l),br(a,t,l))}};function Ax(t,a,l,n,o,d,y){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,d,y):a.prototype&&a.prototype.isPureReactComponent?!ur(l,n)||!ur(o,d):!0}function Rx(t,a,l,n){t=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,n),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,n),a.state!==t&&Sd.enqueueReplaceState(a,a.state,null)}function kl(t,a){var l=a;if("ref"in a){l={};for(var n in a)n!=="ref"&&(l[n]=a[n])}if(t=t.defaultProps){l===a&&(l=v({},l));for(var o in t)l[o]===void 0&&(l[o]=t[o])}return l}function Ox(t){Ei(t)}function zx(t){console.error(t)}function Lx(t){Ei(t)}function Zi(t,a){try{var l=t.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(n){setTimeout(function(){throw n})}}function qx(t,a,l){try{var n=t.onCaughtError;n(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(o){setTimeout(function(){throw o})}}function Ed(t,a,l){return l=Js(l),l.tag=3,l.payload={element:null},l.callback=function(){Zi(t,a)},l}function Ux(t){return t=Js(t),t.tag=3,t}function Fx(t,a,l,n){var o=l.type.getDerivedStateFromError;if(typeof o=="function"){var d=n.value;t.payload=function(){return o(d)},t.callback=function(){qx(a,l,n)}}var y=l.stateNode;y!==null&&typeof y.componentDidCatch=="function"&&(t.callback=function(){qx(a,l,n),typeof o!="function"&&(ll===null?ll=new Set([this]):ll.add(this));var D=n.stack;this.componentDidCatch(n.value,{componentStack:D!==null?D:""})})}function cb(t,a,l,n,o){if(l.flags|=32768,n!==null&&typeof n=="object"&&typeof n.then=="function"){if(a=l.alternate,a!==null&&pn(a,l,o,!0),l=_a.current,l!==null){switch(l.tag){case 31:case 13:return Ba===null?cc():l.alternate===null&&Ct===0&&(Ct=3),l.flags&=-257,l.flags|=65536,l.lanes=o,n===qi?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([n]):a.add(n),Id(t,n,o)),!1;case 22:return l.flags|=65536,n===qi?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([n])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([n]):l.add(n)),Id(t,n,o)),!1}throw Error(c(435,l.tag))}return Id(t,n,o),cc(),!1}if(Ze)return a=_a.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=o,n!==Po&&(t=Error(c(422),{cause:n}),xr(qa(t,l)))):(n!==Po&&(a=Error(c(423),{cause:n}),xr(qa(a,l))),t=t.current.alternate,t.flags|=65536,o&=-o,t.lanes|=o,n=qa(n,l),o=Ed(t.stateNode,n,o),sd(t,o),Ct!==4&&(Ct=2)),!1;var d=Error(c(520),{cause:n});if(d=qa(d,l),Rr===null?Rr=[d]:Rr.push(d),Ct!==4&&(Ct=2),a===null)return!0;n=qa(n,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,t=o&-o,l.lanes|=t,t=Ed(l.stateNode,n,t),sd(l,t),!1;case 1:if(a=l.type,d=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(ll===null||!ll.has(d))))return l.flags|=65536,o&=-o,l.lanes|=o,o=Ux(o),Fx(o,t,l,n),sd(l,o),!1}l=l.return}while(l!==null);return!1}var Dd=Error(c(461)),Lt=!1;function Wt(t,a,l,n){a.child=t===null?Vh(a,null,l,n):Tl(a,t.child,l,n)}function Hx(t,a,l,n,o){l=l.render;var d=a.ref;if("ref"in n){var y={};for(var D in n)D!=="ref"&&(y[D]=n[D])}else y=n;return Cl(a),n=od(t,a,l,y,d,o),D=dd(),t!==null&&!Lt?(ud(t,a,o),ks(t,a,o)):(Ze&&D&&Qo(a),a.flags|=1,Wt(t,a,n,o),a.child)}function Bx(t,a,l,n,o){if(t===null){var d=l.type;return typeof d=="function"&&!Bo(d)&&d.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=d,$x(t,a,d,n,o)):(t=ki(l.type,null,n,a,a.mode,o),t.ref=a.ref,t.return=a,a.child=t)}if(d=t.child,!Ld(t,o)){var y=d.memoizedProps;if(l=l.compare,l=l!==null?l:ur,l(y,n)&&t.ref===a.ref)return ks(t,a,o)}return a.flags|=1,t=Cs(d,n),t.ref=a.ref,t.return=a,a.child=t}function $x(t,a,l,n,o){if(t!==null){var d=t.memoizedProps;if(ur(d,n)&&t.ref===a.ref)if(Lt=!1,a.pendingProps=n=d,Ld(t,o))(t.flags&131072)!==0&&(Lt=!0);else return a.lanes=t.lanes,ks(t,a,o)}return Td(t,a,l,n,o)}function Vx(t,a,l,n){var o=n.children,d=t!==null?t.memoizedState:null;if(t===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.mode==="hidden"){if((a.flags&128)!==0){if(d=d!==null?d.baseLanes|l:l,t!==null){for(n=a.child=t.child,o=0;n!==null;)o=o|n.lanes|n.childLanes,n=n.sibling;n=o&~d}else n=0,a.child=null;return Qx(t,a,d,l,n)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},t!==null&&zi(a,d!==null?d.cachePool:null),d!==null?Ph(a,d):nd(),Yh(a);else return n=a.lanes=536870912,Qx(t,a,d!==null?d.baseLanes|l:l,l,n)}else d!==null?(zi(a,d.cachePool),Ph(a,d),el(),a.memoizedState=null):(t!==null&&zi(a,null),nd(),el());return Wt(t,a,o,l),a.child}function Sr(t,a){return t!==null&&t.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function Qx(t,a,l,n,o){var d=Wo();return d=d===null?null:{parent:Ot._currentValue,pool:d},a.memoizedState={baseLanes:l,cachePool:d},t!==null&&zi(a,null),nd(),Yh(a),t!==null&&pn(t,a,n,!0),a.childLanes=o,null}function Ji(t,a){return a=Wi({mode:a.mode,children:a.children},t.mode),a.ref=t.ref,t.child=a,a.return=t,a}function Gx(t,a,l){return Tl(a,t.child,null,l),t=Ji(a,a.pendingProps),t.flags|=2,wa(a),a.memoizedState=null,t}function ob(t,a,l){var n=a.pendingProps,o=(a.flags&128)!==0;if(a.flags&=-129,t===null){if(Ze){if(n.mode==="hidden")return t=Ji(a,n),a.lanes=536870912,Sr(null,t);if(id(a),(t=pt)?(t=sf(t,Ha),t=t!==null&&t.data==="&"?t:null,t!==null&&(a.memoizedState={dehydrated:t,treeContext:Ps!==null?{id:us,overflow:ms}:null,retryLane:536870912,hydrationErrors:null},l=Dh(t),l.return=a,a.child=l,Jt=a,pt=null)):t=null,t===null)throw Xs(a);return a.lanes=536870912,null}return Ji(a,n)}var d=t.memoizedState;if(d!==null){var y=d.dehydrated;if(id(a),o)if(a.flags&256)a.flags&=-257,a=Gx(t,a,l);else if(a.memoizedState!==null)a.child=t.child,a.flags|=128,a=null;else throw Error(c(558));else if(Lt||pn(t,a,l,!1),o=(l&t.childLanes)!==0,Lt||o){if(n=mt,n!==null&&(y=zm(n,l),y!==0&&y!==d.retryLane))throw d.retryLane=y,jl(t,y),pa(n,t,y),Dd;cc(),a=Gx(t,a,l)}else t=d.treeContext,pt=$a(y.nextSibling),Jt=a,Ze=!0,Ys=null,Ha=!1,t!==null&&kh(a,t),a=Ji(a,n),a.flags|=4096;return a}return t=Cs(t.child,{mode:n.mode,children:n.children}),t.ref=a.ref,a.child=t,t.return=a,t}function Ii(t,a){var l=a.ref;if(l===null)t!==null&&t.ref!==null&&(a.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(c(284));(t===null||t.ref!==l)&&(a.flags|=4194816)}}function Td(t,a,l,n,o){return Cl(a),l=od(t,a,l,n,void 0,o),n=dd(),t!==null&&!Lt?(ud(t,a,o),ks(t,a,o)):(Ze&&n&&Qo(a),a.flags|=1,Wt(t,a,l,o),a.child)}function Px(t,a,l,n,o,d){return Cl(a),a.updateQueue=null,l=Kh(a,n,l,o),Xh(t),n=dd(),t!==null&&!Lt?(ud(t,a,d),ks(t,a,d)):(Ze&&n&&Qo(a),a.flags|=1,Wt(t,a,l,d),a.child)}function Yx(t,a,l,n,o){if(Cl(a),a.stateNode===null){var d=un,y=l.contextType;typeof y=="object"&&y!==null&&(d=It(y)),d=new l(n,d),a.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Sd,a.stateNode=d,d._reactInternals=a,d=a.stateNode,d.props=n,d.state=a.memoizedState,d.refs={},td(a),y=l.contextType,d.context=typeof y=="object"&&y!==null?It(y):un,d.state=a.memoizedState,y=l.getDerivedStateFromProps,typeof y=="function"&&(Cd(a,l,y,n),d.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(y=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),y!==d.state&&Sd.enqueueReplaceState(d,d.state,null),jr(a,n,d,o),vr(),d.state=a.memoizedState),typeof d.componentDidMount=="function"&&(a.flags|=4194308),n=!0}else if(t===null){d=a.stateNode;var D=a.memoizedProps,q=kl(l,D);d.props=q;var J=d.context,ce=l.contextType;y=un,typeof ce=="object"&&ce!==null&&(y=It(ce));var he=l.getDerivedStateFromProps;ce=typeof he=="function"||typeof d.getSnapshotBeforeUpdate=="function",D=a.pendingProps!==D,ce||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(D||J!==y)&&Rx(a,d,n,y),Zs=!1;var I=a.memoizedState;d.state=I,jr(a,n,d,o),vr(),J=a.memoizedState,D||I!==J||Zs?(typeof he=="function"&&(Cd(a,l,he,n),J=a.memoizedState),(q=Zs||Ax(a,l,q,n,I,J,y))?(ce||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(a.flags|=4194308)):(typeof d.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=n,a.memoizedState=J),d.props=n,d.state=J,d.context=y,n=q):(typeof d.componentDidMount=="function"&&(a.flags|=4194308),n=!1)}else{d=a.stateNode,ad(t,a),y=a.memoizedProps,ce=kl(l,y),d.props=ce,he=a.pendingProps,I=d.context,J=l.contextType,q=un,typeof J=="object"&&J!==null&&(q=It(J)),D=l.getDerivedStateFromProps,(J=typeof D=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(y!==he||I!==q)&&Rx(a,d,n,q),Zs=!1,I=a.memoizedState,d.state=I,jr(a,n,d,o),vr();var re=a.memoizedState;y!==he||I!==re||Zs||t!==null&&t.dependencies!==null&&Ri(t.dependencies)?(typeof D=="function"&&(Cd(a,l,D,n),re=a.memoizedState),(ce=Zs||Ax(a,l,ce,n,I,re,q)||t!==null&&t.dependencies!==null&&Ri(t.dependencies))?(J||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(n,re,q),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(n,re,q)),typeof d.componentDidUpdate=="function"&&(a.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof d.componentDidUpdate!="function"||y===t.memoizedProps&&I===t.memoizedState||(a.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||y===t.memoizedProps&&I===t.memoizedState||(a.flags|=1024),a.memoizedProps=n,a.memoizedState=re),d.props=n,d.state=re,d.context=q,n=ce):(typeof d.componentDidUpdate!="function"||y===t.memoizedProps&&I===t.memoizedState||(a.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||y===t.memoizedProps&&I===t.memoizedState||(a.flags|=1024),n=!1)}return d=n,Ii(t,a),n=(a.flags&128)!==0,d||n?(d=a.stateNode,l=n&&typeof l.getDerivedStateFromError!="function"?null:d.render(),a.flags|=1,t!==null&&n?(a.child=Tl(a,t.child,null,o),a.child=Tl(a,null,l,o)):Wt(t,a,l,o),a.memoizedState=d.state,t=a.child):t=ks(t,a,o),t}function Xx(t,a,l,n){return _l(),a.flags|=256,Wt(t,a,l,n),a.child}var Md={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function kd(t){return{baseLanes:t,cachePool:qh()}}function Ad(t,a,l){return t=t!==null?t.childLanes&~l:0,a&&(t|=Sa),t}function Kx(t,a,l){var n=a.pendingProps,o=!1,d=(a.flags&128)!==0,y;if((y=d)||(y=t!==null&&t.memoizedState===null?!1:(Dt.current&2)!==0),y&&(o=!0,a.flags&=-129),y=(a.flags&32)!==0,a.flags&=-33,t===null){if(Ze){if(o?Ws(a):el(),(t=pt)?(t=sf(t,Ha),t=t!==null&&t.data!=="&"?t:null,t!==null&&(a.memoizedState={dehydrated:t,treeContext:Ps!==null?{id:us,overflow:ms}:null,retryLane:536870912,hydrationErrors:null},l=Dh(t),l.return=a,a.child=l,Jt=a,pt=null)):t=null,t===null)throw Xs(a);return xu(t)?a.lanes=32:a.lanes=536870912,null}var D=n.children;return n=n.fallback,o?(el(),o=a.mode,D=Wi({mode:"hidden",children:D},o),n=Nl(n,o,l,null),D.return=a,n.return=a,D.sibling=n,a.child=D,n=a.child,n.memoizedState=kd(l),n.childLanes=Ad(t,y,l),a.memoizedState=Md,Sr(null,n)):(Ws(a),Rd(a,D))}var q=t.memoizedState;if(q!==null&&(D=q.dehydrated,D!==null)){if(d)a.flags&256?(Ws(a),a.flags&=-257,a=Od(t,a,l)):a.memoizedState!==null?(el(),a.child=t.child,a.flags|=128,a=null):(el(),D=n.fallback,o=a.mode,n=Wi({mode:"visible",children:n.children},o),D=Nl(D,o,l,null),D.flags|=2,n.return=a,D.return=a,n.sibling=D,a.child=n,Tl(a,t.child,null,l),n=a.child,n.memoizedState=kd(l),n.childLanes=Ad(t,y,l),a.memoizedState=Md,a=Sr(null,n));else if(Ws(a),xu(D)){if(y=D.nextSibling&&D.nextSibling.dataset,y)var J=y.dgst;y=J,n=Error(c(419)),n.stack="",n.digest=y,xr({value:n,source:null,stack:null}),a=Od(t,a,l)}else if(Lt||pn(t,a,l,!1),y=(l&t.childLanes)!==0,Lt||y){if(y=mt,y!==null&&(n=zm(y,l),n!==0&&n!==q.retryLane))throw q.retryLane=n,jl(t,n),pa(y,t,n),Dd;hu(D)||cc(),a=Od(t,a,l)}else hu(D)?(a.flags|=192,a.child=t.child,a=null):(t=q.treeContext,pt=$a(D.nextSibling),Jt=a,Ze=!0,Ys=null,Ha=!1,t!==null&&kh(a,t),a=Rd(a,n.children),a.flags|=4096);return a}return o?(el(),D=n.fallback,o=a.mode,q=t.child,J=q.sibling,n=Cs(q,{mode:"hidden",children:n.children}),n.subtreeFlags=q.subtreeFlags&65011712,J!==null?D=Cs(J,D):(D=Nl(D,o,l,null),D.flags|=2),D.return=a,n.return=a,n.sibling=D,a.child=n,Sr(null,n),n=a.child,D=t.child.memoizedState,D===null?D=kd(l):(o=D.cachePool,o!==null?(q=Ot._currentValue,o=o.parent!==q?{parent:q,pool:q}:o):o=qh(),D={baseLanes:D.baseLanes|l,cachePool:o}),n.memoizedState=D,n.childLanes=Ad(t,y,l),a.memoizedState=Md,Sr(t.child,n)):(Ws(a),l=t.child,t=l.sibling,l=Cs(l,{mode:"visible",children:n.children}),l.return=a,l.sibling=null,t!==null&&(y=a.deletions,y===null?(a.deletions=[t],a.flags|=16):y.push(t)),a.child=l,a.memoizedState=null,l)}function Rd(t,a){return a=Wi({mode:"visible",children:a},t.mode),a.return=t,t.child=a}function Wi(t,a){return t=Na(22,t,null,a),t.lanes=0,t}function Od(t,a,l){return Tl(a,t.child,null,l),t=Rd(a,a.pendingProps.children),t.flags|=2,a.memoizedState=null,t}function Zx(t,a,l){t.lanes|=a;var n=t.alternate;n!==null&&(n.lanes|=a),Ko(t.return,a,l)}function zd(t,a,l,n,o,d){var y=t.memoizedState;y===null?t.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:n,tail:l,tailMode:o,treeForkCount:d}:(y.isBackwards=a,y.rendering=null,y.renderingStartTime=0,y.last=n,y.tail=l,y.tailMode=o,y.treeForkCount=d)}function Jx(t,a,l){var n=a.pendingProps,o=n.revealOrder,d=n.tail;n=n.children;var y=Dt.current,D=(y&2)!==0;if(D?(y=y&1|2,a.flags|=128):y&=1,ae(Dt,y),Wt(t,a,n,l),n=Ze?hr:0,!D&&t!==null&&(t.flags&128)!==0)e:for(t=a.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Zx(t,l,a);else if(t.tag===19)Zx(t,l,a);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===a)break e;for(;t.sibling===null;){if(t.return===null||t.return===a)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(o){case"forwards":for(l=a.child,o=null;l!==null;)t=l.alternate,t!==null&&Bi(t)===null&&(o=l),l=l.sibling;l=o,l===null?(o=a.child,a.child=null):(o=l.sibling,l.sibling=null),zd(a,!1,o,l,d,n);break;case"backwards":case"unstable_legacy-backwards":for(l=null,o=a.child,a.child=null;o!==null;){if(t=o.alternate,t!==null&&Bi(t)===null){a.child=o;break}t=o.sibling,o.sibling=l,l=o,o=t}zd(a,!0,l,null,d,n);break;case"together":zd(a,!1,null,null,void 0,n);break;default:a.memoizedState=null}return a.child}function ks(t,a,l){if(t!==null&&(a.dependencies=t.dependencies),sl|=a.lanes,(l&a.childLanes)===0)if(t!==null){if(pn(t,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(t!==null&&a.child!==t.child)throw Error(c(153));if(a.child!==null){for(t=a.child,l=Cs(t,t.pendingProps),a.child=l,l.return=a;t.sibling!==null;)t=t.sibling,l=l.sibling=Cs(t,t.pendingProps),l.return=a;l.sibling=null}return a.child}function Ld(t,a){return(t.lanes&a)!==0?!0:(t=t.dependencies,!!(t!==null&&Ri(t)))}function db(t,a,l){switch(a.tag){case 3:Q(a,a.stateNode.containerInfo),Ks(a,Ot,t.memoizedState.cache),_l();break;case 27:case 5:_e(a);break;case 4:Q(a,a.stateNode.containerInfo);break;case 10:Ks(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,id(a),null;break;case 13:var n=a.memoizedState;if(n!==null)return n.dehydrated!==null?(Ws(a),a.flags|=128,null):(l&a.child.childLanes)!==0?Kx(t,a,l):(Ws(a),t=ks(t,a,l),t!==null?t.sibling:null);Ws(a);break;case 19:var o=(t.flags&128)!==0;if(n=(l&a.childLanes)!==0,n||(pn(t,a,l,!1),n=(l&a.childLanes)!==0),o){if(n)return Jx(t,a,l);a.flags|=128}if(o=a.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),ae(Dt,Dt.current),n)break;return null;case 22:return a.lanes=0,Vx(t,a,l,a.pendingProps);case 24:Ks(a,Ot,t.memoizedState.cache)}return ks(t,a,l)}function Ix(t,a,l){if(t!==null)if(t.memoizedProps!==a.pendingProps)Lt=!0;else{if(!Ld(t,l)&&(a.flags&128)===0)return Lt=!1,db(t,a,l);Lt=(t.flags&131072)!==0}else Lt=!1,Ze&&(a.flags&1048576)!==0&&Mh(a,hr,a.index);switch(a.lanes=0,a.tag){case 16:e:{var n=a.pendingProps;if(t=El(a.elementType),a.type=t,typeof t=="function")Bo(t)?(n=kl(t,n),a.tag=1,a=Yx(null,a,t,n,l)):(a.tag=0,a=Td(null,a,t,n,l));else{if(t!=null){var o=t.$$typeof;if(o===k){a.tag=11,a=Hx(null,a,t,n,l);break e}else if(o===T){a.tag=14,a=Bx(null,a,t,n,l);break e}}throw a=je(t)||t,Error(c(306,a,""))}}return a;case 0:return Td(t,a,a.type,a.pendingProps,l);case 1:return n=a.type,o=kl(n,a.pendingProps),Yx(t,a,n,o,l);case 3:e:{if(Q(a,a.stateNode.containerInfo),t===null)throw Error(c(387));n=a.pendingProps;var d=a.memoizedState;o=d.element,ad(t,a),jr(a,n,null,l);var y=a.memoizedState;if(n=y.cache,Ks(a,Ot,n),n!==d.cache&&Zo(a,[Ot],l,!0),vr(),n=y.element,d.isDehydrated)if(d={element:n,isDehydrated:!1,cache:y.cache},a.updateQueue.baseState=d,a.memoizedState=d,a.flags&256){a=Xx(t,a,n,l);break e}else if(n!==o){o=qa(Error(c(424)),a),xr(o),a=Xx(t,a,n,l);break e}else{switch(t=a.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(pt=$a(t.firstChild),Jt=a,Ze=!0,Ys=null,Ha=!0,l=Vh(a,null,n,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(_l(),n===o){a=ks(t,a,l);break e}Wt(t,a,n,l)}a=a.child}return a;case 26:return Ii(t,a),t===null?(l=df(a.type,null,a.pendingProps,null))?a.memoizedState=l:Ze||(l=a.type,t=a.pendingProps,n=pc(X.current).createElement(l),n[Zt]=a,n[oa]=t,ea(n,l,t),Gt(n),a.stateNode=n):a.memoizedState=df(a.type,t.memoizedProps,a.pendingProps,t.memoizedState),null;case 27:return _e(a),t===null&&Ze&&(n=a.stateNode=rf(a.type,a.pendingProps,X.current),Jt=a,Ha=!0,o=pt,cl(a.type)?(pu=o,pt=$a(n.firstChild)):pt=o),Wt(t,a,a.pendingProps.children,l),Ii(t,a),t===null&&(a.flags|=4194304),a.child;case 5:return t===null&&Ze&&((o=n=pt)&&(n=Hb(n,a.type,a.pendingProps,Ha),n!==null?(a.stateNode=n,Jt=a,pt=$a(n.firstChild),Ha=!1,o=!0):o=!1),o||Xs(a)),_e(a),o=a.type,d=a.pendingProps,y=t!==null?t.memoizedProps:null,n=d.children,du(o,d)?n=null:y!==null&&du(o,y)&&(a.flags|=32),a.memoizedState!==null&&(o=od(t,a,tb,null,null,l),Br._currentValue=o),Ii(t,a),Wt(t,a,n,l),a.child;case 6:return t===null&&Ze&&((t=l=pt)&&(l=Bb(l,a.pendingProps,Ha),l!==null?(a.stateNode=l,Jt=a,pt=null,t=!0):t=!1),t||Xs(a)),null;case 13:return Kx(t,a,l);case 4:return Q(a,a.stateNode.containerInfo),n=a.pendingProps,t===null?a.child=Tl(a,null,n,l):Wt(t,a,n,l),a.child;case 11:return Hx(t,a,a.type,a.pendingProps,l);case 7:return Wt(t,a,a.pendingProps,l),a.child;case 8:return Wt(t,a,a.pendingProps.children,l),a.child;case 12:return Wt(t,a,a.pendingProps.children,l),a.child;case 10:return n=a.pendingProps,Ks(a,a.type,n.value),Wt(t,a,n.children,l),a.child;case 9:return o=a.type._context,n=a.pendingProps.children,Cl(a),o=It(o),n=n(o),a.flags|=1,Wt(t,a,n,l),a.child;case 14:return Bx(t,a,a.type,a.pendingProps,l);case 15:return $x(t,a,a.type,a.pendingProps,l);case 19:return Jx(t,a,l);case 31:return ob(t,a,l);case 22:return Vx(t,a,l,a.pendingProps);case 24:return Cl(a),n=It(Ot),t===null?(o=Wo(),o===null&&(o=mt,d=Jo(),o.pooledCache=d,d.refCount++,d!==null&&(o.pooledCacheLanes|=l),o=d),a.memoizedState={parent:n,cache:o},td(a),Ks(a,Ot,o)):((t.lanes&l)!==0&&(ad(t,a),jr(a,null,null,l),vr()),o=t.memoizedState,d=a.memoizedState,o.parent!==n?(o={parent:n,cache:n},a.memoizedState=o,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=o),Ks(a,Ot,n)):(n=d.cache,Ks(a,Ot,n),n!==o.cache&&Zo(a,[Ot],l,!0))),Wt(t,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(c(156,a.tag))}function As(t){t.flags|=4}function qd(t,a,l,n,o){if((a=(t.mode&32)!==0)&&(a=!1),a){if(t.flags|=16777216,(o&335544128)===o)if(t.stateNode.complete)t.flags|=8192;else if(Cp())t.flags|=8192;else throw Dl=qi,ed}else t.flags&=-16777217}function Wx(t,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!pf(a))if(Cp())t.flags|=8192;else throw Dl=qi,ed}function ec(t,a){a!==null&&(t.flags|=4),t.flags&16384&&(a=t.tag!==22?Vs():536870912,t.lanes|=a,En|=a)}function Er(t,a){if(!Ze)switch(t.tailMode){case"hidden":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?t.tail=null:l.sibling=null;break;case"collapsed":l=t.tail;for(var n=null;l!==null;)l.alternate!==null&&(n=l),l=l.sibling;n===null?a||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function ft(t){var a=t.alternate!==null&&t.alternate.child===t.child,l=0,n=0;if(a)for(var o=t.child;o!==null;)l|=o.lanes|o.childLanes,n|=o.subtreeFlags&65011712,n|=o.flags&65011712,o.return=t,o=o.sibling;else for(o=t.child;o!==null;)l|=o.lanes|o.childLanes,n|=o.subtreeFlags,n|=o.flags,o.return=t,o=o.sibling;return t.subtreeFlags|=n,t.childLanes=l,a}function ub(t,a,l){var n=a.pendingProps;switch(Go(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ft(a),null;case 1:return ft(a),null;case 3:return l=a.stateNode,n=null,t!==null&&(n=t.memoizedState.cache),a.memoizedState.cache!==n&&(a.flags|=2048),Ds(Ot),ie(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(t===null||t.child===null)&&(xn(a)?As(a):t===null||t.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Yo())),ft(a),null;case 26:var o=a.type,d=a.memoizedState;return t===null?(As(a),d!==null?(ft(a),Wx(a,d)):(ft(a),qd(a,o,null,n,l))):d?d!==t.memoizedState?(As(a),ft(a),Wx(a,d)):(ft(a),a.flags&=-16777217):(t=t.memoizedProps,t!==n&&As(a),ft(a),qd(a,o,t,n,l)),null;case 27:if(ze(a),l=X.current,o=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==n&&As(a);else{if(!n){if(a.stateNode===null)throw Error(c(166));return ft(a),null}t=W.current,xn(a)?Ah(a):(t=rf(o,n,l),a.stateNode=t,As(a))}return ft(a),null;case 5:if(ze(a),o=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==n&&As(a);else{if(!n){if(a.stateNode===null)throw Error(c(166));return ft(a),null}if(d=W.current,xn(a))Ah(a);else{var y=pc(X.current);switch(d){case 1:d=y.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:d=y.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":d=y.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":d=y.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":d=y.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof n.is=="string"?y.createElement("select",{is:n.is}):y.createElement("select"),n.multiple?d.multiple=!0:n.size&&(d.size=n.size);break;default:d=typeof n.is=="string"?y.createElement(o,{is:n.is}):y.createElement(o)}}d[Zt]=a,d[oa]=n;e:for(y=a.child;y!==null;){if(y.tag===5||y.tag===6)d.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===a)break e;for(;y.sibling===null;){if(y.return===null||y.return===a)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}a.stateNode=d;e:switch(ea(d,o,n),o){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&As(a)}}return ft(a),qd(a,a.type,t===null?null:t.memoizedProps,a.pendingProps,l),null;case 6:if(t&&a.stateNode!=null)t.memoizedProps!==n&&As(a);else{if(typeof n!="string"&&a.stateNode===null)throw Error(c(166));if(t=X.current,xn(a)){if(t=a.stateNode,l=a.memoizedProps,n=null,o=Jt,o!==null)switch(o.tag){case 27:case 5:n=o.memoizedProps}t[Zt]=a,t=!!(t.nodeValue===l||n!==null&&n.suppressHydrationWarning===!0||Kp(t.nodeValue,l)),t||Xs(a,!0)}else t=pc(t).createTextNode(n),t[Zt]=a,a.stateNode=t}return ft(a),null;case 31:if(l=a.memoizedState,t===null||t.memoizedState!==null){if(n=xn(a),l!==null){if(t===null){if(!n)throw Error(c(318));if(t=a.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(c(557));t[Zt]=a}else _l(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;ft(a),t=!1}else l=Yo(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=l),t=!0;if(!t)return a.flags&256?(wa(a),a):(wa(a),null);if((a.flags&128)!==0)throw Error(c(558))}return ft(a),null;case 13:if(n=a.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(o=xn(a),n!==null&&n.dehydrated!==null){if(t===null){if(!o)throw Error(c(318));if(o=a.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(c(317));o[Zt]=a}else _l(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;ft(a),o=!1}else o=Yo(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=o),o=!0;if(!o)return a.flags&256?(wa(a),a):(wa(a),null)}return wa(a),(a.flags&128)!==0?(a.lanes=l,a):(l=n!==null,t=t!==null&&t.memoizedState!==null,l&&(n=a.child,o=null,n.alternate!==null&&n.alternate.memoizedState!==null&&n.alternate.memoizedState.cachePool!==null&&(o=n.alternate.memoizedState.cachePool.pool),d=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(d=n.memoizedState.cachePool.pool),d!==o&&(n.flags|=2048)),l!==t&&l&&(a.child.flags|=8192),ec(a,a.updateQueue),ft(a),null);case 4:return ie(),t===null&&nu(a.stateNode.containerInfo),ft(a),null;case 10:return Ds(a.type),ft(a),null;case 19:if(V(Dt),n=a.memoizedState,n===null)return ft(a),null;if(o=(a.flags&128)!==0,d=n.rendering,d===null)if(o)Er(n,!1);else{if(Ct!==0||t!==null&&(t.flags&128)!==0)for(t=a.child;t!==null;){if(d=Bi(t),d!==null){for(a.flags|=128,Er(n,!1),t=d.updateQueue,a.updateQueue=t,ec(a,t),a.subtreeFlags=0,t=l,l=a.child;l!==null;)Eh(l,t),l=l.sibling;return ae(Dt,Dt.current&1|2),Ze&&Ss(a,n.treeForkCount),a.child}t=t.sibling}n.tail!==null&&_t()>nc&&(a.flags|=128,o=!0,Er(n,!1),a.lanes=4194304)}else{if(!o)if(t=Bi(d),t!==null){if(a.flags|=128,o=!0,t=t.updateQueue,a.updateQueue=t,ec(a,t),Er(n,!0),n.tail===null&&n.tailMode==="hidden"&&!d.alternate&&!Ze)return ft(a),null}else 2*_t()-n.renderingStartTime>nc&&l!==536870912&&(a.flags|=128,o=!0,Er(n,!1),a.lanes=4194304);n.isBackwards?(d.sibling=a.child,a.child=d):(t=n.last,t!==null?t.sibling=d:a.child=d,n.last=d)}return n.tail!==null?(t=n.tail,n.rendering=t,n.tail=t.sibling,n.renderingStartTime=_t(),t.sibling=null,l=Dt.current,ae(Dt,o?l&1|2:l&1),Ze&&Ss(a,n.treeForkCount),t):(ft(a),null);case 22:case 23:return wa(a),rd(),n=a.memoizedState!==null,t!==null?t.memoizedState!==null!==n&&(a.flags|=8192):n&&(a.flags|=8192),n?(l&536870912)!==0&&(a.flags&128)===0&&(ft(a),a.subtreeFlags&6&&(a.flags|=8192)):ft(a),l=a.updateQueue,l!==null&&ec(a,l.retryQueue),l=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),n=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(n=a.memoizedState.cachePool.pool),n!==l&&(a.flags|=2048),t!==null&&V(Sl),null;case 24:return l=null,t!==null&&(l=t.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),Ds(Ot),ft(a),null;case 25:return null;case 30:return null}throw Error(c(156,a.tag))}function mb(t,a){switch(Go(a),a.tag){case 1:return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 3:return Ds(Ot),ie(),t=a.flags,(t&65536)!==0&&(t&128)===0?(a.flags=t&-65537|128,a):null;case 26:case 27:case 5:return ze(a),null;case 31:if(a.memoizedState!==null){if(wa(a),a.alternate===null)throw Error(c(340));_l()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 13:if(wa(a),t=a.memoizedState,t!==null&&t.dehydrated!==null){if(a.alternate===null)throw Error(c(340));_l()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 19:return V(Dt),null;case 4:return ie(),null;case 10:return Ds(a.type),null;case 22:case 23:return wa(a),rd(),t!==null&&V(Sl),t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 24:return Ds(Ot),null;case 25:return null;default:return null}}function ep(t,a){switch(Go(a),a.tag){case 3:Ds(Ot),ie();break;case 26:case 27:case 5:ze(a);break;case 4:ie();break;case 31:a.memoizedState!==null&&wa(a);break;case 13:wa(a);break;case 19:V(Dt);break;case 10:Ds(a.type);break;case 22:case 23:wa(a),rd(),t!==null&&V(Sl);break;case 24:Ds(Ot)}}function Dr(t,a){try{var l=a.updateQueue,n=l!==null?l.lastEffect:null;if(n!==null){var o=n.next;l=o;do{if((l.tag&t)===t){n=void 0;var d=l.create,y=l.inst;n=d(),y.destroy=n}l=l.next}while(l!==o)}}catch(D){rt(a,a.return,D)}}function tl(t,a,l){try{var n=a.updateQueue,o=n!==null?n.lastEffect:null;if(o!==null){var d=o.next;n=d;do{if((n.tag&t)===t){var y=n.inst,D=y.destroy;if(D!==void 0){y.destroy=void 0,o=a;var q=l,J=D;try{J()}catch(ce){rt(o,q,ce)}}}n=n.next}while(n!==d)}}catch(ce){rt(a,a.return,ce)}}function tp(t){var a=t.updateQueue;if(a!==null){var l=t.stateNode;try{Gh(a,l)}catch(n){rt(t,t.return,n)}}}function ap(t,a,l){l.props=kl(t.type,t.memoizedProps),l.state=t.memoizedState;try{l.componentWillUnmount()}catch(n){rt(t,a,n)}}function Tr(t,a){try{var l=t.ref;if(l!==null){switch(t.tag){case 26:case 27:case 5:var n=t.stateNode;break;case 30:n=t.stateNode;break;default:n=t.stateNode}typeof l=="function"?t.refCleanup=l(n):l.current=n}}catch(o){rt(t,a,o)}}function hs(t,a){var l=t.ref,n=t.refCleanup;if(l!==null)if(typeof n=="function")try{n()}catch(o){rt(t,a,o)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(o){rt(t,a,o)}else l.current=null}function sp(t){var a=t.type,l=t.memoizedProps,n=t.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break e;case"img":l.src?n.src=l.src:l.srcSet&&(n.srcset=l.srcSet)}}catch(o){rt(t,t.return,o)}}function Ud(t,a,l){try{var n=t.stateNode;Ob(n,t.type,l,a),n[oa]=a}catch(o){rt(t,t.return,o)}}function lp(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&cl(t.type)||t.tag===4}function Fd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||lp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&cl(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Hd(t,a,l){var n=t.tag;if(n===5||n===6)t=t.stateNode,a?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(t,a):(a=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,a.appendChild(t),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=_s));else if(n!==4&&(n===27&&cl(t.type)&&(l=t.stateNode,a=null),t=t.child,t!==null))for(Hd(t,a,l),t=t.sibling;t!==null;)Hd(t,a,l),t=t.sibling}function tc(t,a,l){var n=t.tag;if(n===5||n===6)t=t.stateNode,a?l.insertBefore(t,a):l.appendChild(t);else if(n!==4&&(n===27&&cl(t.type)&&(l=t.stateNode),t=t.child,t!==null))for(tc(t,a,l),t=t.sibling;t!==null;)tc(t,a,l),t=t.sibling}function np(t){var a=t.stateNode,l=t.memoizedProps;try{for(var n=t.type,o=a.attributes;o.length;)a.removeAttributeNode(o[0]);ea(a,n,l),a[Zt]=t,a[oa]=l}catch(d){rt(t,t.return,d)}}var Rs=!1,qt=!1,Bd=!1,rp=typeof WeakSet=="function"?WeakSet:Set,Pt=null;function hb(t,a){if(t=t.containerInfo,cu=Nc,t=yh(t),Oo(t)){if("selectionStart"in t)var l={start:t.selectionStart,end:t.selectionEnd};else e:{l=(l=t.ownerDocument)&&l.defaultView||window;var n=l.getSelection&&l.getSelection();if(n&&n.rangeCount!==0){l=n.anchorNode;var o=n.anchorOffset,d=n.focusNode;n=n.focusOffset;try{l.nodeType,d.nodeType}catch{l=null;break e}var y=0,D=-1,q=-1,J=0,ce=0,he=t,I=null;t:for(;;){for(var re;he!==l||o!==0&&he.nodeType!==3||(D=y+o),he!==d||n!==0&&he.nodeType!==3||(q=y+n),he.nodeType===3&&(y+=he.nodeValue.length),(re=he.firstChild)!==null;)I=he,he=re;for(;;){if(he===t)break t;if(I===l&&++J===o&&(D=y),I===d&&++ce===n&&(q=y),(re=he.nextSibling)!==null)break;he=I,I=he.parentNode}he=re}l=D===-1||q===-1?null:{start:D,end:q}}else l=null}l=l||{start:0,end:0}}else l=null;for(ou={focusedElem:t,selectionRange:l},Nc=!1,Pt=a;Pt!==null;)if(a=Pt,t=a.child,(a.subtreeFlags&1028)!==0&&t!==null)t.return=a,Pt=t;else for(;Pt!==null;){switch(a=Pt,d=a.alternate,t=a.flags,a.tag){case 0:if((t&4)!==0&&(t=a.updateQueue,t=t!==null?t.events:null,t!==null))for(l=0;l<t.length;l++)o=t[l],o.ref.impl=o.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&d!==null){t=void 0,l=a,o=d.memoizedProps,d=d.memoizedState,n=l.stateNode;try{var Se=kl(l.type,o);t=n.getSnapshotBeforeUpdate(Se,d),n.__reactInternalSnapshotBeforeUpdate=t}catch(Re){rt(l,l.return,Re)}}break;case 3:if((t&1024)!==0){if(t=a.stateNode.containerInfo,l=t.nodeType,l===9)mu(t);else if(l===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":mu(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(c(163))}if(t=a.sibling,t!==null){t.return=a.return,Pt=t;break}Pt=a.return}}function ip(t,a,l){var n=l.flags;switch(l.tag){case 0:case 11:case 15:zs(t,l),n&4&&Dr(5,l);break;case 1:if(zs(t,l),n&4)if(t=l.stateNode,a===null)try{t.componentDidMount()}catch(y){rt(l,l.return,y)}else{var o=kl(l.type,a.memoizedProps);a=a.memoizedState;try{t.componentDidUpdate(o,a,t.__reactInternalSnapshotBeforeUpdate)}catch(y){rt(l,l.return,y)}}n&64&&tp(l),n&512&&Tr(l,l.return);break;case 3:if(zs(t,l),n&64&&(t=l.updateQueue,t!==null)){if(a=null,l.child!==null)switch(l.child.tag){case 27:case 5:a=l.child.stateNode;break;case 1:a=l.child.stateNode}try{Gh(t,a)}catch(y){rt(l,l.return,y)}}break;case 27:a===null&&n&4&&np(l);case 26:case 5:zs(t,l),a===null&&n&4&&sp(l),n&512&&Tr(l,l.return);break;case 12:zs(t,l);break;case 31:zs(t,l),n&4&&dp(t,l);break;case 13:zs(t,l),n&4&&up(t,l),n&64&&(t=l.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(l=Nb.bind(null,l),$b(t,l))));break;case 22:if(n=l.memoizedState!==null||Rs,!n){a=a!==null&&a.memoizedState!==null||qt,o=Rs;var d=qt;Rs=n,(qt=a)&&!d?Ls(t,l,(l.subtreeFlags&8772)!==0):zs(t,l),Rs=o,qt=d}break;case 30:break;default:zs(t,l)}}function cp(t){var a=t.alternate;a!==null&&(t.alternate=null,cp(a)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(a=t.stateNode,a!==null&&go(a)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var gt=null,ua=!1;function Os(t,a,l){for(l=l.child;l!==null;)op(t,a,l),l=l.sibling}function op(t,a,l){if(Ae&&typeof Ae.onCommitFiberUnmount=="function")try{Ae.onCommitFiberUnmount(Ee,l)}catch{}switch(l.tag){case 26:qt||hs(l,a),Os(t,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:qt||hs(l,a);var n=gt,o=ua;cl(l.type)&&(gt=l.stateNode,ua=!1),Os(t,a,l),Ur(l.stateNode),gt=n,ua=o;break;case 5:qt||hs(l,a);case 6:if(n=gt,o=ua,gt=null,Os(t,a,l),gt=n,ua=o,gt!==null)if(ua)try{(gt.nodeType===9?gt.body:gt.nodeName==="HTML"?gt.ownerDocument.body:gt).removeChild(l.stateNode)}catch(d){rt(l,a,d)}else try{gt.removeChild(l.stateNode)}catch(d){rt(l,a,d)}break;case 18:gt!==null&&(ua?(t=gt,tf(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,l.stateNode),zn(t)):tf(gt,l.stateNode));break;case 4:n=gt,o=ua,gt=l.stateNode.containerInfo,ua=!0,Os(t,a,l),gt=n,ua=o;break;case 0:case 11:case 14:case 15:tl(2,l,a),qt||tl(4,l,a),Os(t,a,l);break;case 1:qt||(hs(l,a),n=l.stateNode,typeof n.componentWillUnmount=="function"&&ap(l,a,n)),Os(t,a,l);break;case 21:Os(t,a,l);break;case 22:qt=(n=qt)||l.memoizedState!==null,Os(t,a,l),qt=n;break;default:Os(t,a,l)}}function dp(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{zn(t)}catch(l){rt(a,a.return,l)}}}function up(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{zn(t)}catch(l){rt(a,a.return,l)}}function xb(t){switch(t.tag){case 31:case 13:case 19:var a=t.stateNode;return a===null&&(a=t.stateNode=new rp),a;case 22:return t=t.stateNode,a=t._retryCache,a===null&&(a=t._retryCache=new rp),a;default:throw Error(c(435,t.tag))}}function ac(t,a){var l=xb(t);a.forEach(function(n){if(!l.has(n)){l.add(n);var o=_b.bind(null,t,n);n.then(o,o)}})}function ma(t,a){var l=a.deletions;if(l!==null)for(var n=0;n<l.length;n++){var o=l[n],d=t,y=a,D=y;e:for(;D!==null;){switch(D.tag){case 27:if(cl(D.type)){gt=D.stateNode,ua=!1;break e}break;case 5:gt=D.stateNode,ua=!1;break e;case 3:case 4:gt=D.stateNode.containerInfo,ua=!0;break e}D=D.return}if(gt===null)throw Error(c(160));op(d,y,o),gt=null,ua=!1,d=o.alternate,d!==null&&(d.return=null),o.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)mp(a,t),a=a.sibling}var es=null;function mp(t,a){var l=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:ma(a,t),ha(t),n&4&&(tl(3,t,t.return),Dr(3,t),tl(5,t,t.return));break;case 1:ma(a,t),ha(t),n&512&&(qt||l===null||hs(l,l.return)),n&64&&Rs&&(t=t.updateQueue,t!==null&&(n=t.callbacks,n!==null&&(l=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=l===null?n:l.concat(n))));break;case 26:var o=es;if(ma(a,t),ha(t),n&512&&(qt||l===null||hs(l,l.return)),n&4){var d=l!==null?l.memoizedState:null;if(n=t.memoizedState,l===null)if(n===null)if(t.stateNode===null){e:{n=t.type,l=t.memoizedProps,o=o.ownerDocument||o;t:switch(n){case"title":d=o.getElementsByTagName("title")[0],(!d||d[ar]||d[Zt]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=o.createElement(n),o.head.insertBefore(d,o.querySelector("head > title"))),ea(d,n,l),d[Zt]=t,Gt(d),n=d;break e;case"link":var y=hf("link","href",o).get(n+(l.href||""));if(y){for(var D=0;D<y.length;D++)if(d=y[D],d.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&d.getAttribute("rel")===(l.rel==null?null:l.rel)&&d.getAttribute("title")===(l.title==null?null:l.title)&&d.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){y.splice(D,1);break t}}d=o.createElement(n),ea(d,n,l),o.head.appendChild(d);break;case"meta":if(y=hf("meta","content",o).get(n+(l.content||""))){for(D=0;D<y.length;D++)if(d=y[D],d.getAttribute("content")===(l.content==null?null:""+l.content)&&d.getAttribute("name")===(l.name==null?null:l.name)&&d.getAttribute("property")===(l.property==null?null:l.property)&&d.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&d.getAttribute("charset")===(l.charSet==null?null:l.charSet)){y.splice(D,1);break t}}d=o.createElement(n),ea(d,n,l),o.head.appendChild(d);break;default:throw Error(c(468,n))}d[Zt]=t,Gt(d),n=d}t.stateNode=n}else xf(o,t.type,t.stateNode);else t.stateNode=mf(o,n,t.memoizedProps);else d!==n?(d===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):d.count--,n===null?xf(o,t.type,t.stateNode):mf(o,n,t.memoizedProps)):n===null&&t.stateNode!==null&&Ud(t,t.memoizedProps,l.memoizedProps)}break;case 27:ma(a,t),ha(t),n&512&&(qt||l===null||hs(l,l.return)),l!==null&&n&4&&Ud(t,t.memoizedProps,l.memoizedProps);break;case 5:if(ma(a,t),ha(t),n&512&&(qt||l===null||hs(l,l.return)),t.flags&32){o=t.stateNode;try{sn(o,"")}catch(Se){rt(t,t.return,Se)}}n&4&&t.stateNode!=null&&(o=t.memoizedProps,Ud(t,o,l!==null?l.memoizedProps:o)),n&1024&&(Bd=!0);break;case 6:if(ma(a,t),ha(t),n&4){if(t.stateNode===null)throw Error(c(162));n=t.memoizedProps,l=t.stateNode;try{l.nodeValue=n}catch(Se){rt(t,t.return,Se)}}break;case 3:if(yc=null,o=es,es=fc(a.containerInfo),ma(a,t),es=o,ha(t),n&4&&l!==null&&l.memoizedState.isDehydrated)try{zn(a.containerInfo)}catch(Se){rt(t,t.return,Se)}Bd&&(Bd=!1,hp(t));break;case 4:n=es,es=fc(t.stateNode.containerInfo),ma(a,t),ha(t),es=n;break;case 12:ma(a,t),ha(t);break;case 31:ma(a,t),ha(t),n&4&&(n=t.updateQueue,n!==null&&(t.updateQueue=null,ac(t,n)));break;case 13:ma(a,t),ha(t),t.child.flags&8192&&t.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(lc=_t()),n&4&&(n=t.updateQueue,n!==null&&(t.updateQueue=null,ac(t,n)));break;case 22:o=t.memoizedState!==null;var q=l!==null&&l.memoizedState!==null,J=Rs,ce=qt;if(Rs=J||o,qt=ce||q,ma(a,t),qt=ce,Rs=J,ha(t),n&8192)e:for(a=t.stateNode,a._visibility=o?a._visibility&-2:a._visibility|1,o&&(l===null||q||Rs||qt||Al(t)),l=null,a=t;;){if(a.tag===5||a.tag===26){if(l===null){q=l=a;try{if(d=q.stateNode,o)y=d.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none";else{D=q.stateNode;var he=q.memoizedProps.style,I=he!=null&&he.hasOwnProperty("display")?he.display:null;D.style.display=I==null||typeof I=="boolean"?"":(""+I).trim()}}catch(Se){rt(q,q.return,Se)}}}else if(a.tag===6){if(l===null){q=a;try{q.stateNode.nodeValue=o?"":q.memoizedProps}catch(Se){rt(q,q.return,Se)}}}else if(a.tag===18){if(l===null){q=a;try{var re=q.stateNode;o?af(re,!0):af(q.stateNode,!1)}catch(Se){rt(q,q.return,Se)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===t)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;a.sibling===null;){if(a.return===null||a.return===t)break e;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}n&4&&(n=t.updateQueue,n!==null&&(l=n.retryQueue,l!==null&&(n.retryQueue=null,ac(t,l))));break;case 19:ma(a,t),ha(t),n&4&&(n=t.updateQueue,n!==null&&(t.updateQueue=null,ac(t,n)));break;case 30:break;case 21:break;default:ma(a,t),ha(t)}}function ha(t){var a=t.flags;if(a&2){try{for(var l,n=t.return;n!==null;){if(lp(n)){l=n;break}n=n.return}if(l==null)throw Error(c(160));switch(l.tag){case 27:var o=l.stateNode,d=Fd(t);tc(t,d,o);break;case 5:var y=l.stateNode;l.flags&32&&(sn(y,""),l.flags&=-33);var D=Fd(t);tc(t,D,y);break;case 3:case 4:var q=l.stateNode.containerInfo,J=Fd(t);Hd(t,J,q);break;default:throw Error(c(161))}}catch(ce){rt(t,t.return,ce)}t.flags&=-3}a&4096&&(t.flags&=-4097)}function hp(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var a=t;hp(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),t=t.sibling}}function zs(t,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)ip(t,a.alternate,a),a=a.sibling}function Al(t){for(t=t.child;t!==null;){var a=t;switch(a.tag){case 0:case 11:case 14:case 15:tl(4,a,a.return),Al(a);break;case 1:hs(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&ap(a,a.return,l),Al(a);break;case 27:Ur(a.stateNode);case 26:case 5:hs(a,a.return),Al(a);break;case 22:a.memoizedState===null&&Al(a);break;case 30:Al(a);break;default:Al(a)}t=t.sibling}}function Ls(t,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var n=a.alternate,o=t,d=a,y=d.flags;switch(d.tag){case 0:case 11:case 15:Ls(o,d,l),Dr(4,d);break;case 1:if(Ls(o,d,l),n=d,o=n.stateNode,typeof o.componentDidMount=="function")try{o.componentDidMount()}catch(J){rt(n,n.return,J)}if(n=d,o=n.updateQueue,o!==null){var D=n.stateNode;try{var q=o.shared.hiddenCallbacks;if(q!==null)for(o.shared.hiddenCallbacks=null,o=0;o<q.length;o++)Qh(q[o],D)}catch(J){rt(n,n.return,J)}}l&&y&64&&tp(d),Tr(d,d.return);break;case 27:np(d);case 26:case 5:Ls(o,d,l),l&&n===null&&y&4&&sp(d),Tr(d,d.return);break;case 12:Ls(o,d,l);break;case 31:Ls(o,d,l),l&&y&4&&dp(o,d);break;case 13:Ls(o,d,l),l&&y&4&&up(o,d);break;case 22:d.memoizedState===null&&Ls(o,d,l),Tr(d,d.return);break;case 30:break;default:Ls(o,d,l)}a=a.sibling}}function $d(t,a){var l=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),t=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(t=a.memoizedState.cachePool.pool),t!==l&&(t!=null&&t.refCount++,l!=null&&pr(l))}function Vd(t,a){t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&pr(t))}function ts(t,a,l,n){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)xp(t,a,l,n),a=a.sibling}function xp(t,a,l,n){var o=a.flags;switch(a.tag){case 0:case 11:case 15:ts(t,a,l,n),o&2048&&Dr(9,a);break;case 1:ts(t,a,l,n);break;case 3:ts(t,a,l,n),o&2048&&(t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&pr(t)));break;case 12:if(o&2048){ts(t,a,l,n),t=a.stateNode;try{var d=a.memoizedProps,y=d.id,D=d.onPostCommit;typeof D=="function"&&D(y,a.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(q){rt(a,a.return,q)}}else ts(t,a,l,n);break;case 31:ts(t,a,l,n);break;case 13:ts(t,a,l,n);break;case 23:break;case 22:d=a.stateNode,y=a.alternate,a.memoizedState!==null?d._visibility&2?ts(t,a,l,n):Mr(t,a):d._visibility&2?ts(t,a,l,n):(d._visibility|=2,wn(t,a,l,n,(a.subtreeFlags&10256)!==0||!1)),o&2048&&$d(y,a);break;case 24:ts(t,a,l,n),o&2048&&Vd(a.alternate,a);break;default:ts(t,a,l,n)}}function wn(t,a,l,n,o){for(o=o&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var d=t,y=a,D=l,q=n,J=y.flags;switch(y.tag){case 0:case 11:case 15:wn(d,y,D,q,o),Dr(8,y);break;case 23:break;case 22:var ce=y.stateNode;y.memoizedState!==null?ce._visibility&2?wn(d,y,D,q,o):Mr(d,y):(ce._visibility|=2,wn(d,y,D,q,o)),o&&J&2048&&$d(y.alternate,y);break;case 24:wn(d,y,D,q,o),o&&J&2048&&Vd(y.alternate,y);break;default:wn(d,y,D,q,o)}a=a.sibling}}function Mr(t,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=t,n=a,o=n.flags;switch(n.tag){case 22:Mr(l,n),o&2048&&$d(n.alternate,n);break;case 24:Mr(l,n),o&2048&&Vd(n.alternate,n);break;default:Mr(l,n)}a=a.sibling}}var kr=8192;function Cn(t,a,l){if(t.subtreeFlags&kr)for(t=t.child;t!==null;)pp(t,a,l),t=t.sibling}function pp(t,a,l){switch(t.tag){case 26:Cn(t,a,l),t.flags&kr&&t.memoizedState!==null&&ev(l,es,t.memoizedState,t.memoizedProps);break;case 5:Cn(t,a,l);break;case 3:case 4:var n=es;es=fc(t.stateNode.containerInfo),Cn(t,a,l),es=n;break;case 22:t.memoizedState===null&&(n=t.alternate,n!==null&&n.memoizedState!==null?(n=kr,kr=16777216,Cn(t,a,l),kr=n):Cn(t,a,l));break;default:Cn(t,a,l)}}function fp(t){var a=t.alternate;if(a!==null&&(t=a.child,t!==null)){a.child=null;do a=t.sibling,t.sibling=null,t=a;while(t!==null)}}function Ar(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var n=a[l];Pt=n,yp(n,t)}fp(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)gp(t),t=t.sibling}function gp(t){switch(t.tag){case 0:case 11:case 15:Ar(t),t.flags&2048&&tl(9,t,t.return);break;case 3:Ar(t);break;case 12:Ar(t);break;case 22:var a=t.stateNode;t.memoizedState!==null&&a._visibility&2&&(t.return===null||t.return.tag!==13)?(a._visibility&=-3,sc(t)):Ar(t);break;default:Ar(t)}}function sc(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var n=a[l];Pt=n,yp(n,t)}fp(t)}for(t=t.child;t!==null;){switch(a=t,a.tag){case 0:case 11:case 15:tl(8,a,a.return),sc(a);break;case 22:l=a.stateNode,l._visibility&2&&(l._visibility&=-3,sc(a));break;default:sc(a)}t=t.sibling}}function yp(t,a){for(;Pt!==null;){var l=Pt;switch(l.tag){case 0:case 11:case 15:tl(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var n=l.memoizedState.cachePool.pool;n!=null&&n.refCount++}break;case 24:pr(l.memoizedState.cache)}if(n=l.child,n!==null)n.return=l,Pt=n;else e:for(l=t;Pt!==null;){n=Pt;var o=n.sibling,d=n.return;if(cp(n),n===l){Pt=null;break e}if(o!==null){o.return=d,Pt=o;break e}Pt=d}}}var pb={getCacheForType:function(t){var a=It(Ot),l=a.data.get(t);return l===void 0&&(l=t(),a.data.set(t,l)),l},cacheSignal:function(){return It(Ot).controller.signal}},fb=typeof WeakMap=="function"?WeakMap:Map,at=0,mt=null,Ge=null,Ye=0,nt=0,Ca=null,al=!1,Sn=!1,Qd=!1,qs=0,Ct=0,sl=0,Rl=0,Gd=0,Sa=0,En=0,Rr=null,xa=null,Pd=!1,lc=0,bp=0,nc=1/0,rc=null,ll=null,Bt=0,nl=null,Dn=null,Us=0,Yd=0,Xd=null,vp=null,Or=0,Kd=null;function Ea(){return(at&2)!==0&&Ye!==0?Ye&-Ye:$.T!==null?tu():Lm()}function jp(){if(Sa===0)if((Ye&536870912)===0||Ze){var t=Zl;Zl<<=1,(Zl&3932160)===0&&(Zl=262144),Sa=t}else Sa=536870912;return t=_a.current,t!==null&&(t.flags|=32),Sa}function pa(t,a,l){(t===mt&&(nt===2||nt===9)||t.cancelPendingCommit!==null)&&(Tn(t,0),rl(t,Ye,Sa,!1)),tr(t,l),((at&2)===0||t!==mt)&&(t===mt&&((at&2)===0&&(Rl|=l),Ct===4&&rl(t,Ye,Sa,!1)),xs(t))}function Np(t,a,l){if((at&6)!==0)throw Error(c(327));var n=!l&&(a&127)===0&&(a&t.expiredLanes)===0||Kt(t,a),o=n?bb(t,a):Jd(t,a,!0),d=n;do{if(o===0){Sn&&!n&&rl(t,a,0,!1);break}else{if(l=t.current.alternate,d&&!gb(l)){o=Jd(t,a,!1),d=!1;continue}if(o===2){if(d=a,t.errorRecoveryDisabledLanes&d)var y=0;else y=t.pendingLanes&-536870913,y=y!==0?y:y&536870912?536870912:0;if(y!==0){a=y;e:{var D=t;o=Rr;var q=D.current.memoizedState.isDehydrated;if(q&&(Tn(D,y).flags|=256),y=Jd(D,y,!1),y!==2){if(Qd&&!q){D.errorRecoveryDisabledLanes|=d,Rl|=d,o=4;break e}d=xa,xa=o,d!==null&&(xa===null?xa=d:xa.push.apply(xa,d))}o=y}if(d=!1,o!==2)continue}}if(o===1){Tn(t,0),rl(t,a,0,!0);break}e:{switch(n=t,d=o,d){case 0:case 1:throw Error(c(345));case 4:if((a&4194048)!==a)break;case 6:rl(n,a,Sa,!al);break e;case 2:xa=null;break;case 3:case 5:break;default:throw Error(c(329))}if((a&62914560)===a&&(o=lc+300-_t(),10<o)){if(rl(n,a,Sa,!al),Je(n,0,!0)!==0)break e;Us=a,n.timeoutHandle=Wp(_p.bind(null,n,l,xa,rc,Pd,a,Sa,Rl,En,al,d,"Throttled",-0,0),o);break e}_p(n,l,xa,rc,Pd,a,Sa,Rl,En,al,d,null,-0,0)}}break}while(!0);xs(t)}function _p(t,a,l,n,o,d,y,D,q,J,ce,he,I,re){if(t.timeoutHandle=-1,he=a.subtreeFlags,he&8192||(he&16785408)===16785408){he={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:_s},pp(a,d,he);var Se=(d&62914560)===d?lc-_t():(d&4194048)===d?bp-_t():0;if(Se=tv(he,Se),Se!==null){Us=d,t.cancelPendingCommit=Se(kp.bind(null,t,a,d,l,n,o,y,D,q,ce,he,null,I,re)),rl(t,d,y,!J);return}}kp(t,a,d,l,n,o,y,D,q)}function gb(t){for(var a=t;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var n=0;n<l.length;n++){var o=l[n],d=o.getSnapshot;o=o.value;try{if(!ja(d(),o))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function rl(t,a,l,n){a&=~Gd,a&=~Rl,t.suspendedLanes|=a,t.pingedLanes&=~a,n&&(t.warmLanes|=a),n=t.expirationTimes;for(var o=a;0<o;){var d=31-Ht(o),y=1<<d;n[d]=-1,o&=~y}l!==0&&Rm(t,l,a)}function ic(){return(at&6)===0?(zr(0),!1):!0}function Zd(){if(Ge!==null){if(nt===0)var t=Ge.return;else t=Ge,Es=wl=null,md(t),bn=null,gr=0,t=Ge;for(;t!==null;)ep(t.alternate,t),t=t.return;Ge=null}}function Tn(t,a){var l=t.timeoutHandle;l!==-1&&(t.timeoutHandle=-1,qb(l)),l=t.cancelPendingCommit,l!==null&&(t.cancelPendingCommit=null,l()),Us=0,Zd(),mt=t,Ge=l=Cs(t.current,null),Ye=a,nt=0,Ca=null,al=!1,Sn=Kt(t,a),Qd=!1,En=Sa=Gd=Rl=sl=Ct=0,xa=Rr=null,Pd=!1,(a&8)!==0&&(a|=a&32);var n=t.entangledLanes;if(n!==0)for(t=t.entanglements,n&=a;0<n;){var o=31-Ht(n),d=1<<o;a|=t[o],n&=~d}return qs=a,Di(),l}function wp(t,a){Fe=null,$.H=Cr,a===yn||a===Li?(a=Hh(),nt=3):a===ed?(a=Hh(),nt=4):nt=a===Dd?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Ca=a,Ge===null&&(Ct=1,Zi(t,qa(a,t.current)))}function Cp(){var t=_a.current;return t===null?!0:(Ye&4194048)===Ye?Ba===null:(Ye&62914560)===Ye||(Ye&536870912)!==0?t===Ba:!1}function Sp(){var t=$.H;return $.H=Cr,t===null?Cr:t}function Ep(){var t=$.A;return $.A=pb,t}function cc(){Ct=4,al||(Ye&4194048)!==Ye&&_a.current!==null||(Sn=!0),(sl&134217727)===0&&(Rl&134217727)===0||mt===null||rl(mt,Ye,Sa,!1)}function Jd(t,a,l){var n=at;at|=2;var o=Sp(),d=Ep();(mt!==t||Ye!==a)&&(rc=null,Tn(t,a)),a=!1;var y=Ct;e:do try{if(nt!==0&&Ge!==null){var D=Ge,q=Ca;switch(nt){case 8:Zd(),y=6;break e;case 3:case 2:case 9:case 6:_a.current===null&&(a=!0);var J=nt;if(nt=0,Ca=null,Mn(t,D,q,J),l&&Sn){y=0;break e}break;default:J=nt,nt=0,Ca=null,Mn(t,D,q,J)}}yb(),y=Ct;break}catch(ce){wp(t,ce)}while(!0);return a&&t.shellSuspendCounter++,Es=wl=null,at=n,$.H=o,$.A=d,Ge===null&&(mt=null,Ye=0,Di()),y}function yb(){for(;Ge!==null;)Dp(Ge)}function bb(t,a){var l=at;at|=2;var n=Sp(),o=Ep();mt!==t||Ye!==a?(rc=null,nc=_t()+500,Tn(t,a)):Sn=Kt(t,a);e:do try{if(nt!==0&&Ge!==null){a=Ge;var d=Ca;t:switch(nt){case 1:nt=0,Ca=null,Mn(t,a,d,1);break;case 2:case 9:if(Uh(d)){nt=0,Ca=null,Tp(a);break}a=function(){nt!==2&&nt!==9||mt!==t||(nt=7),xs(t)},d.then(a,a);break e;case 3:nt=7;break e;case 4:nt=5;break e;case 7:Uh(d)?(nt=0,Ca=null,Tp(a)):(nt=0,Ca=null,Mn(t,a,d,7));break;case 5:var y=null;switch(Ge.tag){case 26:y=Ge.memoizedState;case 5:case 27:var D=Ge;if(y?pf(y):D.stateNode.complete){nt=0,Ca=null;var q=D.sibling;if(q!==null)Ge=q;else{var J=D.return;J!==null?(Ge=J,oc(J)):Ge=null}break t}}nt=0,Ca=null,Mn(t,a,d,5);break;case 6:nt=0,Ca=null,Mn(t,a,d,6);break;case 8:Zd(),Ct=6;break e;default:throw Error(c(462))}}vb();break}catch(ce){wp(t,ce)}while(!0);return Es=wl=null,$.H=n,$.A=o,at=l,Ge!==null?0:(mt=null,Ye=0,Di(),Ct)}function vb(){for(;Ge!==null&&!Ja();)Dp(Ge)}function Dp(t){var a=Ix(t.alternate,t,qs);t.memoizedProps=t.pendingProps,a===null?oc(t):Ge=a}function Tp(t){var a=t,l=a.alternate;switch(a.tag){case 15:case 0:a=Px(l,a,a.pendingProps,a.type,void 0,Ye);break;case 11:a=Px(l,a,a.pendingProps,a.type.render,a.ref,Ye);break;case 5:md(a);default:ep(l,a),a=Ge=Eh(a,qs),a=Ix(l,a,qs)}t.memoizedProps=t.pendingProps,a===null?oc(t):Ge=a}function Mn(t,a,l,n){Es=wl=null,md(a),bn=null,gr=0;var o=a.return;try{if(cb(t,o,a,l,Ye)){Ct=1,Zi(t,qa(l,t.current)),Ge=null;return}}catch(d){if(o!==null)throw Ge=o,d;Ct=1,Zi(t,qa(l,t.current)),Ge=null;return}a.flags&32768?(Ze||n===1?t=!0:Sn||(Ye&536870912)!==0?t=!1:(al=t=!0,(n===2||n===9||n===3||n===6)&&(n=_a.current,n!==null&&n.tag===13&&(n.flags|=16384))),Mp(a,t)):oc(a)}function oc(t){var a=t;do{if((a.flags&32768)!==0){Mp(a,al);return}t=a.return;var l=ub(a.alternate,a,qs);if(l!==null){Ge=l;return}if(a=a.sibling,a!==null){Ge=a;return}Ge=a=t}while(a!==null);Ct===0&&(Ct=5)}function Mp(t,a){do{var l=mb(t.alternate,t);if(l!==null){l.flags&=32767,Ge=l;return}if(l=t.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(t=t.sibling,t!==null)){Ge=t;return}Ge=t=l}while(t!==null);Ct=6,Ge=null}function kp(t,a,l,n,o,d,y,D,q){t.cancelPendingCommit=null;do dc();while(Bt!==0);if((at&6)!==0)throw Error(c(327));if(a!==null){if(a===t.current)throw Error(c(177));if(d=a.lanes|a.childLanes,d|=Fo,Wg(t,l,d,y,D,q),t===mt&&(Ge=mt=null,Ye=0),Dn=a,nl=t,Us=l,Yd=d,Xd=o,vp=n,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,wb(ta,function(){return Lp(),null})):(t.callbackNode=null,t.callbackPriority=0),n=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||n){n=$.T,$.T=null,o=pe.p,pe.p=2,y=at,at|=4;try{hb(t,a,l)}finally{at=y,pe.p=o,$.T=n}}Bt=1,Ap(),Rp(),Op()}}function Ap(){if(Bt===1){Bt=0;var t=nl,a=Dn,l=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||l){l=$.T,$.T=null;var n=pe.p;pe.p=2;var o=at;at|=4;try{mp(a,t);var d=ou,y=yh(t.containerInfo),D=d.focusedElem,q=d.selectionRange;if(y!==D&&D&&D.ownerDocument&&gh(D.ownerDocument.documentElement,D)){if(q!==null&&Oo(D)){var J=q.start,ce=q.end;if(ce===void 0&&(ce=J),"selectionStart"in D)D.selectionStart=J,D.selectionEnd=Math.min(ce,D.value.length);else{var he=D.ownerDocument||document,I=he&&he.defaultView||window;if(I.getSelection){var re=I.getSelection(),Se=D.textContent.length,Re=Math.min(q.start,Se),ut=q.end===void 0?Re:Math.min(q.end,Se);!re.extend&&Re>ut&&(y=ut,ut=Re,Re=y);var P=fh(D,Re),H=fh(D,ut);if(P&&H&&(re.rangeCount!==1||re.anchorNode!==P.node||re.anchorOffset!==P.offset||re.focusNode!==H.node||re.focusOffset!==H.offset)){var K=he.createRange();K.setStart(P.node,P.offset),re.removeAllRanges(),Re>ut?(re.addRange(K),re.extend(H.node,H.offset)):(K.setEnd(H.node,H.offset),re.addRange(K))}}}}for(he=[],re=D;re=re.parentNode;)re.nodeType===1&&he.push({element:re,left:re.scrollLeft,top:re.scrollTop});for(typeof D.focus=="function"&&D.focus(),D=0;D<he.length;D++){var de=he[D];de.element.scrollLeft=de.left,de.element.scrollTop=de.top}}Nc=!!cu,ou=cu=null}finally{at=o,pe.p=n,$.T=l}}t.current=a,Bt=2}}function Rp(){if(Bt===2){Bt=0;var t=nl,a=Dn,l=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||l){l=$.T,$.T=null;var n=pe.p;pe.p=2;var o=at;at|=4;try{ip(t,a.alternate,a)}finally{at=o,pe.p=n,$.T=l}}Bt=3}}function Op(){if(Bt===4||Bt===3){Bt=0,xt();var t=nl,a=Dn,l=Us,n=vp;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Bt=5:(Bt=0,Dn=nl=null,zp(t,t.pendingLanes));var o=t.pendingLanes;if(o===0&&(ll=null),po(l),a=a.stateNode,Ae&&typeof Ae.onCommitFiberRoot=="function")try{Ae.onCommitFiberRoot(Ee,a,void 0,(a.current.flags&128)===128)}catch{}if(n!==null){a=$.T,o=pe.p,pe.p=2,$.T=null;try{for(var d=t.onRecoverableError,y=0;y<n.length;y++){var D=n[y];d(D.value,{componentStack:D.stack})}}finally{$.T=a,pe.p=o}}(Us&3)!==0&&dc(),xs(t),o=t.pendingLanes,(l&261930)!==0&&(o&42)!==0?t===Kd?Or++:(Or=0,Kd=t):Or=0,zr(0)}}function zp(t,a){(t.pooledCacheLanes&=a)===0&&(a=t.pooledCache,a!=null&&(t.pooledCache=null,pr(a)))}function dc(){return Ap(),Rp(),Op(),Lp()}function Lp(){if(Bt!==5)return!1;var t=nl,a=Yd;Yd=0;var l=po(Us),n=$.T,o=pe.p;try{pe.p=32>l?32:l,$.T=null,l=Xd,Xd=null;var d=nl,y=Us;if(Bt=0,Dn=nl=null,Us=0,(at&6)!==0)throw Error(c(331));var D=at;if(at|=4,gp(d.current),xp(d,d.current,y,l),at=D,zr(0,!1),Ae&&typeof Ae.onPostCommitFiberRoot=="function")try{Ae.onPostCommitFiberRoot(Ee,d)}catch{}return!0}finally{pe.p=o,$.T=n,zp(t,a)}}function qp(t,a,l){a=qa(l,a),a=Ed(t.stateNode,a,2),t=Is(t,a,2),t!==null&&(tr(t,2),xs(t))}function rt(t,a,l){if(t.tag===3)qp(t,t,l);else for(;a!==null;){if(a.tag===3){qp(a,t,l);break}else if(a.tag===1){var n=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(ll===null||!ll.has(n))){t=qa(l,t),l=Ux(2),n=Is(a,l,2),n!==null&&(Fx(l,n,a,t),tr(n,2),xs(n));break}}a=a.return}}function Id(t,a,l){var n=t.pingCache;if(n===null){n=t.pingCache=new fb;var o=new Set;n.set(a,o)}else o=n.get(a),o===void 0&&(o=new Set,n.set(a,o));o.has(l)||(Qd=!0,o.add(l),t=jb.bind(null,t,a,l),a.then(t,t))}function jb(t,a,l){var n=t.pingCache;n!==null&&n.delete(a),t.pingedLanes|=t.suspendedLanes&l,t.warmLanes&=~l,mt===t&&(Ye&l)===l&&(Ct===4||Ct===3&&(Ye&62914560)===Ye&&300>_t()-lc?(at&2)===0&&Tn(t,0):Gd|=l,En===Ye&&(En=0)),xs(t)}function Up(t,a){a===0&&(a=Vs()),t=jl(t,a),t!==null&&(tr(t,a),xs(t))}function Nb(t){var a=t.memoizedState,l=0;a!==null&&(l=a.retryLane),Up(t,l)}function _b(t,a){var l=0;switch(t.tag){case 31:case 13:var n=t.stateNode,o=t.memoizedState;o!==null&&(l=o.retryLane);break;case 19:n=t.stateNode;break;case 22:n=t.stateNode._retryCache;break;default:throw Error(c(314))}n!==null&&n.delete(a),Up(t,l)}function wb(t,a){return Ft(t,a)}var uc=null,kn=null,Wd=!1,mc=!1,eu=!1,il=0;function xs(t){t!==kn&&t.next===null&&(kn===null?uc=kn=t:kn=kn.next=t),mc=!0,Wd||(Wd=!0,Sb())}function zr(t,a){if(!eu&&mc){eu=!0;do for(var l=!1,n=uc;n!==null;){if(t!==0){var o=n.pendingLanes;if(o===0)var d=0;else{var y=n.suspendedLanes,D=n.pingedLanes;d=(1<<31-Ht(42|t)+1)-1,d&=o&~(y&~D),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(l=!0,$p(n,d))}else d=Ye,d=Je(n,n===mt?d:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),(d&3)===0||Kt(n,d)||(l=!0,$p(n,d));n=n.next}while(l);eu=!1}}function Cb(){Fp()}function Fp(){mc=Wd=!1;var t=0;il!==0&&Lb()&&(t=il);for(var a=_t(),l=null,n=uc;n!==null;){var o=n.next,d=Hp(n,a);d===0?(n.next=null,l===null?uc=o:l.next=o,o===null&&(kn=l)):(l=n,(t!==0||(d&3)!==0)&&(mc=!0)),n=o}Bt!==0&&Bt!==5||zr(t),il!==0&&(il=0)}function Hp(t,a){for(var l=t.suspendedLanes,n=t.pingedLanes,o=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var y=31-Ht(d),D=1<<y,q=o[y];q===-1?((D&l)===0||(D&n)!==0)&&(o[y]=ca(D,a)):q<=a&&(t.expiredLanes|=D),d&=~D}if(a=mt,l=Ye,l=Je(t,t===a?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),n=t.callbackNode,l===0||t===a&&(nt===2||nt===9)||t.cancelPendingCommit!==null)return n!==null&&n!==null&&bs(n),t.callbackNode=null,t.callbackPriority=0;if((l&3)===0||Kt(t,l)){if(a=l&-l,a===t.callbackPriority)return a;switch(n!==null&&bs(n),po(l)){case 2:case 8:l=be;break;case 32:l=ta;break;case 268435456:l=Ia;break;default:l=ta}return n=Bp.bind(null,t),l=Ft(l,n),t.callbackPriority=a,t.callbackNode=l,a}return n!==null&&n!==null&&bs(n),t.callbackPriority=2,t.callbackNode=null,2}function Bp(t,a){if(Bt!==0&&Bt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var l=t.callbackNode;if(dc()&&t.callbackNode!==l)return null;var n=Ye;return n=Je(t,t===mt?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),n===0?null:(Np(t,n,a),Hp(t,_t()),t.callbackNode!=null&&t.callbackNode===l?Bp.bind(null,t):null)}function $p(t,a){if(dc())return null;Np(t,a,!0)}function Sb(){Ub(function(){(at&6)!==0?Ft(va,Cb):Fp()})}function tu(){if(il===0){var t=fn;t===0&&(t=Kl,Kl<<=1,(Kl&261888)===0&&(Kl=256)),il=t}return il}function Vp(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:vi(""+t)}function Qp(t,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,t.id&&l.setAttribute("form",t.id),a.parentNode.insertBefore(l,a),t=new FormData(t),l.parentNode.removeChild(l),t}function Eb(t,a,l,n,o){if(a==="submit"&&l&&l.stateNode===o){var d=Vp((o[oa]||null).action),y=n.submitter;y&&(a=(a=y[oa]||null)?Vp(a.formAction):y.getAttribute("formAction"),a!==null&&(d=a,y=null));var D=new wi("action","action",null,n,o);t.push({event:D,listeners:[{instance:null,listener:function(){if(n.defaultPrevented){if(il!==0){var q=y?Qp(o,y):new FormData(o);jd(l,{pending:!0,data:q,method:o.method,action:d},null,q)}}else typeof d=="function"&&(D.preventDefault(),q=y?Qp(o,y):new FormData(o),jd(l,{pending:!0,data:q,method:o.method,action:d},d,q))},currentTarget:o}]})}}for(var au=0;au<Uo.length;au++){var su=Uo[au],Db=su.toLowerCase(),Tb=su[0].toUpperCase()+su.slice(1);Wa(Db,"on"+Tb)}Wa(jh,"onAnimationEnd"),Wa(Nh,"onAnimationIteration"),Wa(_h,"onAnimationStart"),Wa("dblclick","onDoubleClick"),Wa("focusin","onFocus"),Wa("focusout","onBlur"),Wa(Gy,"onTransitionRun"),Wa(Py,"onTransitionStart"),Wa(Yy,"onTransitionCancel"),Wa(wh,"onTransitionEnd"),tn("onMouseEnter",["mouseout","mouseover"]),tn("onMouseLeave",["mouseout","mouseover"]),tn("onPointerEnter",["pointerout","pointerover"]),tn("onPointerLeave",["pointerout","pointerover"]),gl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),gl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),gl("onBeforeInput",["compositionend","keypress","textInput","paste"]),gl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),gl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),gl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Lr));function Gp(t,a){a=(a&4)!==0;for(var l=0;l<t.length;l++){var n=t[l],o=n.event;n=n.listeners;e:{var d=void 0;if(a)for(var y=n.length-1;0<=y;y--){var D=n[y],q=D.instance,J=D.currentTarget;if(D=D.listener,q!==d&&o.isPropagationStopped())break e;d=D,o.currentTarget=J;try{d(o)}catch(ce){Ei(ce)}o.currentTarget=null,d=q}else for(y=0;y<n.length;y++){if(D=n[y],q=D.instance,J=D.currentTarget,D=D.listener,q!==d&&o.isPropagationStopped())break e;d=D,o.currentTarget=J;try{d(o)}catch(ce){Ei(ce)}o.currentTarget=null,d=q}}}}function Pe(t,a){var l=a[fo];l===void 0&&(l=a[fo]=new Set);var n=t+"__bubble";l.has(n)||(Pp(a,t,2,!1),l.add(n))}function lu(t,a,l){var n=0;a&&(n|=4),Pp(l,t,n,a)}var hc="_reactListening"+Math.random().toString(36).slice(2);function nu(t){if(!t[hc]){t[hc]=!0,Fm.forEach(function(l){l!=="selectionchange"&&(Mb.has(l)||lu(l,!1,t),lu(l,!0,t))});var a=t.nodeType===9?t:t.ownerDocument;a===null||a[hc]||(a[hc]=!0,lu("selectionchange",!1,a))}}function Pp(t,a,l,n){switch(Nf(a)){case 2:var o=lv;break;case 8:o=nv;break;default:o=vu}l=o.bind(null,a,l,t),o=void 0,!Co||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(o=!0),n?o!==void 0?t.addEventListener(a,l,{capture:!0,passive:o}):t.addEventListener(a,l,!0):o!==void 0?t.addEventListener(a,l,{passive:o}):t.addEventListener(a,l,!1)}function ru(t,a,l,n,o){var d=n;if((a&1)===0&&(a&2)===0&&n!==null)e:for(;;){if(n===null)return;var y=n.tag;if(y===3||y===4){var D=n.stateNode.containerInfo;if(D===o)break;if(y===4)for(y=n.return;y!==null;){var q=y.tag;if((q===3||q===4)&&y.stateNode.containerInfo===o)return;y=y.return}for(;D!==null;){if(y=Il(D),y===null)return;if(q=y.tag,q===5||q===6||q===26||q===27){n=d=y;continue e}D=D.parentNode}}n=n.return}Jm(function(){var J=d,ce=_o(l),he=[];e:{var I=Ch.get(t);if(I!==void 0){var re=wi,Se=t;switch(t){case"keypress":if(Ni(l)===0)break e;case"keydown":case"keyup":re=_y;break;case"focusin":Se="focus",re=To;break;case"focusout":Se="blur",re=To;break;case"beforeblur":case"afterblur":re=To;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":re=eh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":re=uy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":re=Sy;break;case jh:case Nh:case _h:re=xy;break;case wh:re=Dy;break;case"scroll":case"scrollend":re=oy;break;case"wheel":re=My;break;case"copy":case"cut":case"paste":re=fy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":re=ah;break;case"toggle":case"beforetoggle":re=Ay}var Re=(a&4)!==0,ut=!Re&&(t==="scroll"||t==="scrollend"),P=Re?I!==null?I+"Capture":null:I;Re=[];for(var H=J,K;H!==null;){var de=H;if(K=de.stateNode,de=de.tag,de!==5&&de!==26&&de!==27||K===null||P===null||(de=lr(H,P),de!=null&&Re.push(qr(H,de,K))),ut)break;H=H.return}0<Re.length&&(I=new re(I,Se,null,l,ce),he.push({event:I,listeners:Re}))}}if((a&7)===0){e:{if(I=t==="mouseover"||t==="pointerover",re=t==="mouseout"||t==="pointerout",I&&l!==No&&(Se=l.relatedTarget||l.fromElement)&&(Il(Se)||Se[Jl]))break e;if((re||I)&&(I=ce.window===ce?ce:(I=ce.ownerDocument)?I.defaultView||I.parentWindow:window,re?(Se=l.relatedTarget||l.toElement,re=J,Se=Se?Il(Se):null,Se!==null&&(ut=h(Se),Re=Se.tag,Se!==ut||Re!==5&&Re!==27&&Re!==6)&&(Se=null)):(re=null,Se=J),re!==Se)){if(Re=eh,de="onMouseLeave",P="onMouseEnter",H="mouse",(t==="pointerout"||t==="pointerover")&&(Re=ah,de="onPointerLeave",P="onPointerEnter",H="pointer"),ut=re==null?I:sr(re),K=Se==null?I:sr(Se),I=new Re(de,H+"leave",re,l,ce),I.target=ut,I.relatedTarget=K,de=null,Il(ce)===J&&(Re=new Re(P,H+"enter",Se,l,ce),Re.target=K,Re.relatedTarget=ut,de=Re),ut=de,re&&Se)t:{for(Re=kb,P=re,H=Se,K=0,de=P;de;de=Re(de))K++;de=0;for(var Me=H;Me;Me=Re(Me))de++;for(;0<K-de;)P=Re(P),K--;for(;0<de-K;)H=Re(H),de--;for(;K--;){if(P===H||H!==null&&P===H.alternate){Re=P;break t}P=Re(P),H=Re(H)}Re=null}else Re=null;re!==null&&Yp(he,I,re,Re,!1),Se!==null&&ut!==null&&Yp(he,ut,Se,Re,!0)}}e:{if(I=J?sr(J):window,re=I.nodeName&&I.nodeName.toLowerCase(),re==="select"||re==="input"&&I.type==="file")var Ie=dh;else if(ch(I))if(uh)Ie=$y;else{Ie=Hy;var De=Fy}else re=I.nodeName,!re||re.toLowerCase()!=="input"||I.type!=="checkbox"&&I.type!=="radio"?J&&jo(J.elementType)&&(Ie=dh):Ie=By;if(Ie&&(Ie=Ie(t,J))){oh(he,Ie,l,ce);break e}De&&De(t,I,J),t==="focusout"&&J&&I.type==="number"&&J.memoizedProps.value!=null&&vo(I,"number",I.value)}switch(De=J?sr(J):window,t){case"focusin":(ch(De)||De.contentEditable==="true")&&(cn=De,zo=J,mr=null);break;case"focusout":mr=zo=cn=null;break;case"mousedown":Lo=!0;break;case"contextmenu":case"mouseup":case"dragend":Lo=!1,bh(he,l,ce);break;case"selectionchange":if(Qy)break;case"keydown":case"keyup":bh(he,l,ce)}var Ve;if(ko)e:{switch(t){case"compositionstart":var Xe="onCompositionStart";break e;case"compositionend":Xe="onCompositionEnd";break e;case"compositionupdate":Xe="onCompositionUpdate";break e}Xe=void 0}else rn?rh(t,l)&&(Xe="onCompositionEnd"):t==="keydown"&&l.keyCode===229&&(Xe="onCompositionStart");Xe&&(sh&&l.locale!=="ko"&&(rn||Xe!=="onCompositionStart"?Xe==="onCompositionEnd"&&rn&&(Ve=Im()):(Gs=ce,So="value"in Gs?Gs.value:Gs.textContent,rn=!0)),De=xc(J,Xe),0<De.length&&(Xe=new th(Xe,t,null,l,ce),he.push({event:Xe,listeners:De}),Ve?Xe.data=Ve:(Ve=ih(l),Ve!==null&&(Xe.data=Ve)))),(Ve=Oy?zy(t,l):Ly(t,l))&&(Xe=xc(J,"onBeforeInput"),0<Xe.length&&(De=new th("onBeforeInput","beforeinput",null,l,ce),he.push({event:De,listeners:Xe}),De.data=Ve)),Eb(he,t,J,l,ce)}Gp(he,a)})}function qr(t,a,l){return{instance:t,listener:a,currentTarget:l}}function xc(t,a){for(var l=a+"Capture",n=[];t!==null;){var o=t,d=o.stateNode;if(o=o.tag,o!==5&&o!==26&&o!==27||d===null||(o=lr(t,l),o!=null&&n.unshift(qr(t,o,d)),o=lr(t,a),o!=null&&n.push(qr(t,o,d))),t.tag===3)return n;t=t.return}return[]}function kb(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Yp(t,a,l,n,o){for(var d=a._reactName,y=[];l!==null&&l!==n;){var D=l,q=D.alternate,J=D.stateNode;if(D=D.tag,q!==null&&q===n)break;D!==5&&D!==26&&D!==27||J===null||(q=J,o?(J=lr(l,d),J!=null&&y.unshift(qr(l,J,q))):o||(J=lr(l,d),J!=null&&y.push(qr(l,J,q)))),l=l.return}y.length!==0&&t.push({event:a,listeners:y})}var Ab=/\r\n?/g,Rb=/\u0000|\uFFFD/g;function Xp(t){return(typeof t=="string"?t:""+t).replace(Ab,`
`).replace(Rb,"")}function Kp(t,a){return a=Xp(a),Xp(t)===a}function dt(t,a,l,n,o,d){switch(l){case"children":typeof n=="string"?a==="body"||a==="textarea"&&n===""||sn(t,n):(typeof n=="number"||typeof n=="bigint")&&a!=="body"&&sn(t,""+n);break;case"className":yi(t,"class",n);break;case"tabIndex":yi(t,"tabindex",n);break;case"dir":case"role":case"viewBox":case"width":case"height":yi(t,l,n);break;case"style":Km(t,n,d);break;case"data":if(a!=="object"){yi(t,"data",n);break}case"src":case"href":if(n===""&&(a!=="a"||l!=="href")){t.removeAttribute(l);break}if(n==null||typeof n=="function"||typeof n=="symbol"||typeof n=="boolean"){t.removeAttribute(l);break}n=vi(""+n),t.setAttribute(l,n);break;case"action":case"formAction":if(typeof n=="function"){t.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(l==="formAction"?(a!=="input"&&dt(t,a,"name",o.name,o,null),dt(t,a,"formEncType",o.formEncType,o,null),dt(t,a,"formMethod",o.formMethod,o,null),dt(t,a,"formTarget",o.formTarget,o,null)):(dt(t,a,"encType",o.encType,o,null),dt(t,a,"method",o.method,o,null),dt(t,a,"target",o.target,o,null)));if(n==null||typeof n=="symbol"||typeof n=="boolean"){t.removeAttribute(l);break}n=vi(""+n),t.setAttribute(l,n);break;case"onClick":n!=null&&(t.onclick=_s);break;case"onScroll":n!=null&&Pe("scroll",t);break;case"onScrollEnd":n!=null&&Pe("scrollend",t);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(c(61));if(l=n.__html,l!=null){if(o.children!=null)throw Error(c(60));t.innerHTML=l}}break;case"multiple":t.multiple=n&&typeof n!="function"&&typeof n!="symbol";break;case"muted":t.muted=n&&typeof n!="function"&&typeof n!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(n==null||typeof n=="function"||typeof n=="boolean"||typeof n=="symbol"){t.removeAttribute("xlink:href");break}l=vi(""+n),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":n!=null&&typeof n!="function"&&typeof n!="symbol"?t.setAttribute(l,""+n):t.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":n&&typeof n!="function"&&typeof n!="symbol"?t.setAttribute(l,""):t.removeAttribute(l);break;case"capture":case"download":n===!0?t.setAttribute(l,""):n!==!1&&n!=null&&typeof n!="function"&&typeof n!="symbol"?t.setAttribute(l,n):t.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":n!=null&&typeof n!="function"&&typeof n!="symbol"&&!isNaN(n)&&1<=n?t.setAttribute(l,n):t.removeAttribute(l);break;case"rowSpan":case"start":n==null||typeof n=="function"||typeof n=="symbol"||isNaN(n)?t.removeAttribute(l):t.setAttribute(l,n);break;case"popover":Pe("beforetoggle",t),Pe("toggle",t),gi(t,"popover",n);break;case"xlinkActuate":Ns(t,"http://www.w3.org/1999/xlink","xlink:actuate",n);break;case"xlinkArcrole":Ns(t,"http://www.w3.org/1999/xlink","xlink:arcrole",n);break;case"xlinkRole":Ns(t,"http://www.w3.org/1999/xlink","xlink:role",n);break;case"xlinkShow":Ns(t,"http://www.w3.org/1999/xlink","xlink:show",n);break;case"xlinkTitle":Ns(t,"http://www.w3.org/1999/xlink","xlink:title",n);break;case"xlinkType":Ns(t,"http://www.w3.org/1999/xlink","xlink:type",n);break;case"xmlBase":Ns(t,"http://www.w3.org/XML/1998/namespace","xml:base",n);break;case"xmlLang":Ns(t,"http://www.w3.org/XML/1998/namespace","xml:lang",n);break;case"xmlSpace":Ns(t,"http://www.w3.org/XML/1998/namespace","xml:space",n);break;case"is":gi(t,"is",n);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=iy.get(l)||l,gi(t,l,n))}}function iu(t,a,l,n,o,d){switch(l){case"style":Km(t,n,d);break;case"dangerouslySetInnerHTML":if(n!=null){if(typeof n!="object"||!("__html"in n))throw Error(c(61));if(l=n.__html,l!=null){if(o.children!=null)throw Error(c(60));t.innerHTML=l}}break;case"children":typeof n=="string"?sn(t,n):(typeof n=="number"||typeof n=="bigint")&&sn(t,""+n);break;case"onScroll":n!=null&&Pe("scroll",t);break;case"onScrollEnd":n!=null&&Pe("scrollend",t);break;case"onClick":n!=null&&(t.onclick=_s);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Hm.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(o=l.endsWith("Capture"),a=l.slice(2,o?l.length-7:void 0),d=t[oa]||null,d=d!=null?d[l]:null,typeof d=="function"&&t.removeEventListener(a,d,o),typeof n=="function")){typeof d!="function"&&d!==null&&(l in t?t[l]=null:t.hasAttribute(l)&&t.removeAttribute(l)),t.addEventListener(a,n,o);break e}l in t?t[l]=n:n===!0?t.setAttribute(l,""):gi(t,l,n)}}}function ea(t,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Pe("error",t),Pe("load",t);var n=!1,o=!1,d;for(d in l)if(l.hasOwnProperty(d)){var y=l[d];if(y!=null)switch(d){case"src":n=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(c(137,a));default:dt(t,a,d,y,l,null)}}o&&dt(t,a,"srcSet",l.srcSet,l,null),n&&dt(t,a,"src",l.src,l,null);return;case"input":Pe("invalid",t);var D=d=y=o=null,q=null,J=null;for(n in l)if(l.hasOwnProperty(n)){var ce=l[n];if(ce!=null)switch(n){case"name":o=ce;break;case"type":y=ce;break;case"checked":q=ce;break;case"defaultChecked":J=ce;break;case"value":d=ce;break;case"defaultValue":D=ce;break;case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(c(137,a));break;default:dt(t,a,n,ce,l,null)}}Gm(t,d,D,q,J,y,o,!1);return;case"select":Pe("invalid",t),n=y=d=null;for(o in l)if(l.hasOwnProperty(o)&&(D=l[o],D!=null))switch(o){case"value":d=D;break;case"defaultValue":y=D;break;case"multiple":n=D;default:dt(t,a,o,D,l,null)}a=d,l=y,t.multiple=!!n,a!=null?an(t,!!n,a,!1):l!=null&&an(t,!!n,l,!0);return;case"textarea":Pe("invalid",t),d=o=n=null;for(y in l)if(l.hasOwnProperty(y)&&(D=l[y],D!=null))switch(y){case"value":n=D;break;case"defaultValue":o=D;break;case"children":d=D;break;case"dangerouslySetInnerHTML":if(D!=null)throw Error(c(91));break;default:dt(t,a,y,D,l,null)}Ym(t,n,o,d);return;case"option":for(q in l)if(l.hasOwnProperty(q)&&(n=l[q],n!=null))switch(q){case"selected":t.selected=n&&typeof n!="function"&&typeof n!="symbol";break;default:dt(t,a,q,n,l,null)}return;case"dialog":Pe("beforetoggle",t),Pe("toggle",t),Pe("cancel",t),Pe("close",t);break;case"iframe":case"object":Pe("load",t);break;case"video":case"audio":for(n=0;n<Lr.length;n++)Pe(Lr[n],t);break;case"image":Pe("error",t),Pe("load",t);break;case"details":Pe("toggle",t);break;case"embed":case"source":case"link":Pe("error",t),Pe("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in l)if(l.hasOwnProperty(J)&&(n=l[J],n!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(c(137,a));default:dt(t,a,J,n,l,null)}return;default:if(jo(a)){for(ce in l)l.hasOwnProperty(ce)&&(n=l[ce],n!==void 0&&iu(t,a,ce,n,l,void 0));return}}for(D in l)l.hasOwnProperty(D)&&(n=l[D],n!=null&&dt(t,a,D,n,l,null))}function Ob(t,a,l,n){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,d=null,y=null,D=null,q=null,J=null,ce=null;for(re in l){var he=l[re];if(l.hasOwnProperty(re)&&he!=null)switch(re){case"checked":break;case"value":break;case"defaultValue":q=he;default:n.hasOwnProperty(re)||dt(t,a,re,null,n,he)}}for(var I in n){var re=n[I];if(he=l[I],n.hasOwnProperty(I)&&(re!=null||he!=null))switch(I){case"type":d=re;break;case"name":o=re;break;case"checked":J=re;break;case"defaultChecked":ce=re;break;case"value":y=re;break;case"defaultValue":D=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(c(137,a));break;default:re!==he&&dt(t,a,I,re,n,he)}}bo(t,y,D,q,J,ce,d,o);return;case"select":re=y=D=I=null;for(d in l)if(q=l[d],l.hasOwnProperty(d)&&q!=null)switch(d){case"value":break;case"multiple":re=q;default:n.hasOwnProperty(d)||dt(t,a,d,null,n,q)}for(o in n)if(d=n[o],q=l[o],n.hasOwnProperty(o)&&(d!=null||q!=null))switch(o){case"value":I=d;break;case"defaultValue":D=d;break;case"multiple":y=d;default:d!==q&&dt(t,a,o,d,n,q)}a=D,l=y,n=re,I!=null?an(t,!!l,I,!1):!!n!=!!l&&(a!=null?an(t,!!l,a,!0):an(t,!!l,l?[]:"",!1));return;case"textarea":re=I=null;for(D in l)if(o=l[D],l.hasOwnProperty(D)&&o!=null&&!n.hasOwnProperty(D))switch(D){case"value":break;case"children":break;default:dt(t,a,D,null,n,o)}for(y in n)if(o=n[y],d=l[y],n.hasOwnProperty(y)&&(o!=null||d!=null))switch(y){case"value":I=o;break;case"defaultValue":re=o;break;case"children":break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(c(91));break;default:o!==d&&dt(t,a,y,o,n,d)}Pm(t,I,re);return;case"option":for(var Se in l)if(I=l[Se],l.hasOwnProperty(Se)&&I!=null&&!n.hasOwnProperty(Se))switch(Se){case"selected":t.selected=!1;break;default:dt(t,a,Se,null,n,I)}for(q in n)if(I=n[q],re=l[q],n.hasOwnProperty(q)&&I!==re&&(I!=null||re!=null))switch(q){case"selected":t.selected=I&&typeof I!="function"&&typeof I!="symbol";break;default:dt(t,a,q,I,n,re)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Re in l)I=l[Re],l.hasOwnProperty(Re)&&I!=null&&!n.hasOwnProperty(Re)&&dt(t,a,Re,null,n,I);for(J in n)if(I=n[J],re=l[J],n.hasOwnProperty(J)&&I!==re&&(I!=null||re!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(I!=null)throw Error(c(137,a));break;default:dt(t,a,J,I,n,re)}return;default:if(jo(a)){for(var ut in l)I=l[ut],l.hasOwnProperty(ut)&&I!==void 0&&!n.hasOwnProperty(ut)&&iu(t,a,ut,void 0,n,I);for(ce in n)I=n[ce],re=l[ce],!n.hasOwnProperty(ce)||I===re||I===void 0&&re===void 0||iu(t,a,ce,I,n,re);return}}for(var P in l)I=l[P],l.hasOwnProperty(P)&&I!=null&&!n.hasOwnProperty(P)&&dt(t,a,P,null,n,I);for(he in n)I=n[he],re=l[he],!n.hasOwnProperty(he)||I===re||I==null&&re==null||dt(t,a,he,I,n,re)}function Zp(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function zb(){if(typeof performance.getEntriesByType=="function"){for(var t=0,a=0,l=performance.getEntriesByType("resource"),n=0;n<l.length;n++){var o=l[n],d=o.transferSize,y=o.initiatorType,D=o.duration;if(d&&D&&Zp(y)){for(y=0,D=o.responseEnd,n+=1;n<l.length;n++){var q=l[n],J=q.startTime;if(J>D)break;var ce=q.transferSize,he=q.initiatorType;ce&&Zp(he)&&(q=q.responseEnd,y+=ce*(q<D?1:(D-J)/(q-J)))}if(--n,a+=8*(d+y)/(o.duration/1e3),t++,10<t)break}}if(0<t)return a/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var cu=null,ou=null;function pc(t){return t.nodeType===9?t:t.ownerDocument}function Jp(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ip(t,a){if(t===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&a==="foreignObject"?0:t}function du(t,a){return t==="textarea"||t==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var uu=null;function Lb(){var t=window.event;return t&&t.type==="popstate"?t===uu?!1:(uu=t,!0):(uu=null,!1)}var Wp=typeof setTimeout=="function"?setTimeout:void 0,qb=typeof clearTimeout=="function"?clearTimeout:void 0,ef=typeof Promise=="function"?Promise:void 0,Ub=typeof queueMicrotask=="function"?queueMicrotask:typeof ef<"u"?function(t){return ef.resolve(null).then(t).catch(Fb)}:Wp;function Fb(t){setTimeout(function(){throw t})}function cl(t){return t==="head"}function tf(t,a){var l=a,n=0;do{var o=l.nextSibling;if(t.removeChild(l),o&&o.nodeType===8)if(l=o.data,l==="/$"||l==="/&"){if(n===0){t.removeChild(o),zn(a);return}n--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")n++;else if(l==="html")Ur(t.ownerDocument.documentElement);else if(l==="head"){l=t.ownerDocument.head,Ur(l);for(var d=l.firstChild;d;){var y=d.nextSibling,D=d.nodeName;d[ar]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&d.rel.toLowerCase()==="stylesheet"||l.removeChild(d),d=y}}else l==="body"&&Ur(t.ownerDocument.body);l=o}while(l);zn(a)}function af(t,a){var l=t;t=0;do{var n=l.nextSibling;if(l.nodeType===1?a?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(a?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),n&&n.nodeType===8)if(l=n.data,l==="/$"){if(t===0)break;t--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||t++;l=n}while(l)}function mu(t){var a=t.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":mu(l),go(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}t.removeChild(l)}}function Hb(t,a,l,n){for(;t.nodeType===1;){var o=l;if(t.nodeName.toLowerCase()!==a.toLowerCase()){if(!n&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(n){if(!t[ar])switch(a){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==o.rel||t.getAttribute("href")!==(o.href==null||o.href===""?null:o.href)||t.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin)||t.getAttribute("title")!==(o.title==null?null:o.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(o.src==null?null:o.src)||t.getAttribute("type")!==(o.type==null?null:o.type)||t.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(a==="input"&&t.type==="hidden"){var d=o.name==null?null:""+o.name;if(o.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=$a(t.nextSibling),t===null)break}return null}function Bb(t,a,l){if(a==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!l||(t=$a(t.nextSibling),t===null))return null;return t}function sf(t,a){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=$a(t.nextSibling),t===null))return null;return t}function hu(t){return t.data==="$?"||t.data==="$~"}function xu(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function $b(t,a){var l=t.ownerDocument;if(t.data==="$~")t._reactRetry=a;else if(t.data!=="$?"||l.readyState!=="loading")a();else{var n=function(){a(),l.removeEventListener("DOMContentLoaded",n)};l.addEventListener("DOMContentLoaded",n),t._reactRetry=n}}function $a(t){for(;t!=null;t=t.nextSibling){var a=t.nodeType;if(a===1||a===3)break;if(a===8){if(a=t.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return t}var pu=null;function lf(t){t=t.nextSibling;for(var a=0;t;){if(t.nodeType===8){var l=t.data;if(l==="/$"||l==="/&"){if(a===0)return $a(t.nextSibling);a--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||a++}t=t.nextSibling}return null}function nf(t){t=t.previousSibling;for(var a=0;t;){if(t.nodeType===8){var l=t.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(a===0)return t;a--}else l!=="/$"&&l!=="/&"||a++}t=t.previousSibling}return null}function rf(t,a,l){switch(a=pc(l),t){case"html":if(t=a.documentElement,!t)throw Error(c(452));return t;case"head":if(t=a.head,!t)throw Error(c(453));return t;case"body":if(t=a.body,!t)throw Error(c(454));return t;default:throw Error(c(451))}}function Ur(t){for(var a=t.attributes;a.length;)t.removeAttributeNode(a[0]);go(t)}var Va=new Map,cf=new Set;function fc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Fs=pe.d;pe.d={f:Vb,r:Qb,D:Gb,C:Pb,L:Yb,m:Xb,X:Zb,S:Kb,M:Jb};function Vb(){var t=Fs.f(),a=ic();return t||a}function Qb(t){var a=Wl(t);a!==null&&a.tag===5&&a.type==="form"?wx(a):Fs.r(t)}var An=typeof document>"u"?null:document;function of(t,a,l){var n=An;if(n&&typeof a=="string"&&a){var o=za(a);o='link[rel="'+t+'"][href="'+o+'"]',typeof l=="string"&&(o+='[crossorigin="'+l+'"]'),cf.has(o)||(cf.add(o),t={rel:t,crossOrigin:l,href:a},n.querySelector(o)===null&&(a=n.createElement("link"),ea(a,"link",t),Gt(a),n.head.appendChild(a)))}}function Gb(t){Fs.D(t),of("dns-prefetch",t,null)}function Pb(t,a){Fs.C(t,a),of("preconnect",t,a)}function Yb(t,a,l){Fs.L(t,a,l);var n=An;if(n&&t&&a){var o='link[rel="preload"][as="'+za(a)+'"]';a==="image"&&l&&l.imageSrcSet?(o+='[imagesrcset="'+za(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(o+='[imagesizes="'+za(l.imageSizes)+'"]')):o+='[href="'+za(t)+'"]';var d=o;switch(a){case"style":d=Rn(t);break;case"script":d=On(t)}Va.has(d)||(t=v({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:t,as:a},l),Va.set(d,t),n.querySelector(o)!==null||a==="style"&&n.querySelector(Fr(d))||a==="script"&&n.querySelector(Hr(d))||(a=n.createElement("link"),ea(a,"link",t),Gt(a),n.head.appendChild(a)))}}function Xb(t,a){Fs.m(t,a);var l=An;if(l&&t){var n=a&&typeof a.as=="string"?a.as:"script",o='link[rel="modulepreload"][as="'+za(n)+'"][href="'+za(t)+'"]',d=o;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=On(t)}if(!Va.has(d)&&(t=v({rel:"modulepreload",href:t},a),Va.set(d,t),l.querySelector(o)===null)){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Hr(d)))return}n=l.createElement("link"),ea(n,"link",t),Gt(n),l.head.appendChild(n)}}}function Kb(t,a,l){Fs.S(t,a,l);var n=An;if(n&&t){var o=en(n).hoistableStyles,d=Rn(t);a=a||"default";var y=o.get(d);if(!y){var D={loading:0,preload:null};if(y=n.querySelector(Fr(d)))D.loading=5;else{t=v({rel:"stylesheet",href:t,"data-precedence":a},l),(l=Va.get(d))&&fu(t,l);var q=y=n.createElement("link");Gt(q),ea(q,"link",t),q._p=new Promise(function(J,ce){q.onload=J,q.onerror=ce}),q.addEventListener("load",function(){D.loading|=1}),q.addEventListener("error",function(){D.loading|=2}),D.loading|=4,gc(y,a,n)}y={type:"stylesheet",instance:y,count:1,state:D},o.set(d,y)}}}function Zb(t,a){Fs.X(t,a);var l=An;if(l&&t){var n=en(l).hoistableScripts,o=On(t),d=n.get(o);d||(d=l.querySelector(Hr(o)),d||(t=v({src:t,async:!0},a),(a=Va.get(o))&&gu(t,a),d=l.createElement("script"),Gt(d),ea(d,"link",t),l.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},n.set(o,d))}}function Jb(t,a){Fs.M(t,a);var l=An;if(l&&t){var n=en(l).hoistableScripts,o=On(t),d=n.get(o);d||(d=l.querySelector(Hr(o)),d||(t=v({src:t,async:!0,type:"module"},a),(a=Va.get(o))&&gu(t,a),d=l.createElement("script"),Gt(d),ea(d,"link",t),l.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},n.set(o,d))}}function df(t,a,l,n){var o=(o=X.current)?fc(o):null;if(!o)throw Error(c(446));switch(t){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=Rn(l.href),l=en(o).hoistableStyles,n=l.get(a),n||(n={type:"style",instance:null,count:0,state:null},l.set(a,n)),n):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){t=Rn(l.href);var d=en(o).hoistableStyles,y=d.get(t);if(y||(o=o.ownerDocument||o,y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,y),(d=o.querySelector(Fr(t)))&&!d._p&&(y.instance=d,y.state.loading=5),Va.has(t)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Va.set(t,l),d||Ib(o,t,l,y.state))),a&&n===null)throw Error(c(528,""));return y}if(a&&n!==null)throw Error(c(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=On(l),l=en(o).hoistableScripts,n=l.get(a),n||(n={type:"script",instance:null,count:0,state:null},l.set(a,n)),n):{type:"void",instance:null,count:0,state:null};default:throw Error(c(444,t))}}function Rn(t){return'href="'+za(t)+'"'}function Fr(t){return'link[rel="stylesheet"]['+t+"]"}function uf(t){return v({},t,{"data-precedence":t.precedence,precedence:null})}function Ib(t,a,l,n){t.querySelector('link[rel="preload"][as="style"]['+a+"]")?n.loading=1:(a=t.createElement("link"),n.preload=a,a.addEventListener("load",function(){return n.loading|=1}),a.addEventListener("error",function(){return n.loading|=2}),ea(a,"link",l),Gt(a),t.head.appendChild(a))}function On(t){return'[src="'+za(t)+'"]'}function Hr(t){return"script[async]"+t}function mf(t,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var n=t.querySelector('style[data-href~="'+za(l.href)+'"]');if(n)return a.instance=n,Gt(n),n;var o=v({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return n=(t.ownerDocument||t).createElement("style"),Gt(n),ea(n,"style",o),gc(n,l.precedence,t),a.instance=n;case"stylesheet":o=Rn(l.href);var d=t.querySelector(Fr(o));if(d)return a.state.loading|=4,a.instance=d,Gt(d),d;n=uf(l),(o=Va.get(o))&&fu(n,o),d=(t.ownerDocument||t).createElement("link"),Gt(d);var y=d;return y._p=new Promise(function(D,q){y.onload=D,y.onerror=q}),ea(d,"link",n),a.state.loading|=4,gc(d,l.precedence,t),a.instance=d;case"script":return d=On(l.src),(o=t.querySelector(Hr(d)))?(a.instance=o,Gt(o),o):(n=l,(o=Va.get(d))&&(n=v({},l),gu(n,o)),t=t.ownerDocument||t,o=t.createElement("script"),Gt(o),ea(o,"link",n),t.head.appendChild(o),a.instance=o);case"void":return null;default:throw Error(c(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(n=a.instance,a.state.loading|=4,gc(n,l.precedence,t));return a.instance}function gc(t,a,l){for(var n=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),o=n.length?n[n.length-1]:null,d=o,y=0;y<n.length;y++){var D=n[y];if(D.dataset.precedence===a)d=D;else if(d!==o)break}d?d.parentNode.insertBefore(t,d.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(t,a.firstChild))}function fu(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.title==null&&(t.title=a.title)}function gu(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.integrity==null&&(t.integrity=a.integrity)}var yc=null;function hf(t,a,l){if(yc===null){var n=new Map,o=yc=new Map;o.set(l,n)}else o=yc,n=o.get(l),n||(n=new Map,o.set(l,n));if(n.has(t))return n;for(n.set(t,null),l=l.getElementsByTagName(t),o=0;o<l.length;o++){var d=l[o];if(!(d[ar]||d[Zt]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var y=d.getAttribute(a)||"";y=t+y;var D=n.get(y);D?D.push(d):n.set(y,[d])}}return n}function xf(t,a,l){t=t.ownerDocument||t,t.head.insertBefore(l,a==="title"?t.querySelector("head > title"):null)}function Wb(t,a,l){if(l===1||a.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return t=a.disabled,typeof a.precedence=="string"&&t==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function pf(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function ev(t,a,l,n){if(l.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var o=Rn(n.href),d=a.querySelector(Fr(o));if(d){a=d._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(t.count++,t=bc.bind(t),a.then(t,t)),l.state.loading|=4,l.instance=d,Gt(d);return}d=a.ownerDocument||a,n=uf(n),(o=Va.get(o))&&fu(n,o),d=d.createElement("link"),Gt(d);var y=d;y._p=new Promise(function(D,q){y.onload=D,y.onerror=q}),ea(d,"link",n),l.instance=d}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(l,a),(a=l.state.preload)&&(l.state.loading&3)===0&&(t.count++,l=bc.bind(t),a.addEventListener("load",l),a.addEventListener("error",l))}}var yu=0;function tv(t,a){return t.stylesheets&&t.count===0&&jc(t,t.stylesheets),0<t.count||0<t.imgCount?function(l){var n=setTimeout(function(){if(t.stylesheets&&jc(t,t.stylesheets),t.unsuspend){var d=t.unsuspend;t.unsuspend=null,d()}},6e4+a);0<t.imgBytes&&yu===0&&(yu=62500*zb());var o=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&jc(t,t.stylesheets),t.unsuspend)){var d=t.unsuspend;t.unsuspend=null,d()}},(t.imgBytes>yu?50:800)+a);return t.unsuspend=l,function(){t.unsuspend=null,clearTimeout(n),clearTimeout(o)}}:null}function bc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)jc(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var vc=null;function jc(t,a){t.stylesheets=null,t.unsuspend!==null&&(t.count++,vc=new Map,a.forEach(av,t),vc=null,bc.call(t))}function av(t,a){if(!(a.state.loading&4)){var l=vc.get(t);if(l)var n=l.get(null);else{l=new Map,vc.set(t,l);for(var o=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<o.length;d++){var y=o[d];(y.nodeName==="LINK"||y.getAttribute("media")!=="not all")&&(l.set(y.dataset.precedence,y),n=y)}n&&l.set(null,n)}o=a.instance,y=o.getAttribute("data-precedence"),d=l.get(y)||n,d===n&&l.set(null,o),l.set(y,o),this.count++,n=bc.bind(this),o.addEventListener("load",n),o.addEventListener("error",n),d?d.parentNode.insertBefore(o,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(o,t.firstChild)),a.state.loading|=4}}var Br={$$typeof:z,Provider:null,Consumer:null,_currentValue:G,_currentValue2:G,_threadCount:0};function sv(t,a,l,n,o,d,y,D,q){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ho(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ho(0),this.hiddenUpdates=ho(null),this.identifierPrefix=n,this.onUncaughtError=o,this.onCaughtError=d,this.onRecoverableError=y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=q,this.incompleteTransitions=new Map}function ff(t,a,l,n,o,d,y,D,q,J,ce,he){return t=new sv(t,a,l,y,q,J,ce,he,D),a=1,d===!0&&(a|=24),d=Na(3,null,null,a),t.current=d,d.stateNode=t,a=Jo(),a.refCount++,t.pooledCache=a,a.refCount++,d.memoizedState={element:n,isDehydrated:l,cache:a},td(d),t}function gf(t){return t?(t=un,t):un}function yf(t,a,l,n,o,d){o=gf(o),n.context===null?n.context=o:n.pendingContext=o,n=Js(a),n.payload={element:l},d=d===void 0?null:d,d!==null&&(n.callback=d),l=Is(t,n,a),l!==null&&(pa(l,t,a),br(l,t,a))}function bf(t,a){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var l=t.retryLane;t.retryLane=l!==0&&l<a?l:a}}function bu(t,a){bf(t,a),(t=t.alternate)&&bf(t,a)}function vf(t){if(t.tag===13||t.tag===31){var a=jl(t,67108864);a!==null&&pa(a,t,67108864),bu(t,67108864)}}function jf(t){if(t.tag===13||t.tag===31){var a=Ea();a=xo(a);var l=jl(t,a);l!==null&&pa(l,t,a),bu(t,a)}}var Nc=!0;function lv(t,a,l,n){var o=$.T;$.T=null;var d=pe.p;try{pe.p=2,vu(t,a,l,n)}finally{pe.p=d,$.T=o}}function nv(t,a,l,n){var o=$.T;$.T=null;var d=pe.p;try{pe.p=8,vu(t,a,l,n)}finally{pe.p=d,$.T=o}}function vu(t,a,l,n){if(Nc){var o=ju(n);if(o===null)ru(t,a,n,_c,l),_f(t,n);else if(iv(o,t,a,l,n))n.stopPropagation();else if(_f(t,n),a&4&&-1<rv.indexOf(t)){for(;o!==null;){var d=Wl(o);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var y=fe(d.pendingLanes);if(y!==0){var D=d;for(D.pendingLanes|=2,D.entangledLanes|=2;y;){var q=1<<31-Ht(y);D.entanglements[1]|=q,y&=~q}xs(d),(at&6)===0&&(nc=_t()+500,zr(0))}}break;case 31:case 13:D=jl(d,2),D!==null&&pa(D,d,2),ic(),bu(d,2)}if(d=ju(n),d===null&&ru(t,a,n,_c,l),d===o)break;o=d}o!==null&&n.stopPropagation()}else ru(t,a,n,null,l)}}function ju(t){return t=_o(t),Nu(t)}var _c=null;function Nu(t){if(_c=null,t=Il(t),t!==null){var a=h(t);if(a===null)t=null;else{var l=a.tag;if(l===13){if(t=x(a),t!==null)return t;t=null}else if(l===31){if(t=m(a),t!==null)return t;t=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;t=null}else a!==t&&(t=null)}}return _c=t,null}function Nf(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ds()){case va:return 2;case be:return 8;case ta:case vs:return 32;case Ia:return 268435456;default:return 32}default:return 32}}var _u=!1,ol=null,dl=null,ul=null,$r=new Map,Vr=new Map,ml=[],rv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function _f(t,a){switch(t){case"focusin":case"focusout":ol=null;break;case"dragenter":case"dragleave":dl=null;break;case"mouseover":case"mouseout":ul=null;break;case"pointerover":case"pointerout":$r.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vr.delete(a.pointerId)}}function Qr(t,a,l,n,o,d){return t===null||t.nativeEvent!==d?(t={blockedOn:a,domEventName:l,eventSystemFlags:n,nativeEvent:d,targetContainers:[o]},a!==null&&(a=Wl(a),a!==null&&vf(a)),t):(t.eventSystemFlags|=n,a=t.targetContainers,o!==null&&a.indexOf(o)===-1&&a.push(o),t)}function iv(t,a,l,n,o){switch(a){case"focusin":return ol=Qr(ol,t,a,l,n,o),!0;case"dragenter":return dl=Qr(dl,t,a,l,n,o),!0;case"mouseover":return ul=Qr(ul,t,a,l,n,o),!0;case"pointerover":var d=o.pointerId;return $r.set(d,Qr($r.get(d)||null,t,a,l,n,o)),!0;case"gotpointercapture":return d=o.pointerId,Vr.set(d,Qr(Vr.get(d)||null,t,a,l,n,o)),!0}return!1}function wf(t){var a=Il(t.target);if(a!==null){var l=h(a);if(l!==null){if(a=l.tag,a===13){if(a=x(l),a!==null){t.blockedOn=a,qm(t.priority,function(){jf(l)});return}}else if(a===31){if(a=m(l),a!==null){t.blockedOn=a,qm(t.priority,function(){jf(l)});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){t.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}t.blockedOn=null}function wc(t){if(t.blockedOn!==null)return!1;for(var a=t.targetContainers;0<a.length;){var l=ju(t.nativeEvent);if(l===null){l=t.nativeEvent;var n=new l.constructor(l.type,l);No=n,l.target.dispatchEvent(n),No=null}else return a=Wl(l),a!==null&&vf(a),t.blockedOn=l,!1;a.shift()}return!0}function Cf(t,a,l){wc(t)&&l.delete(a)}function cv(){_u=!1,ol!==null&&wc(ol)&&(ol=null),dl!==null&&wc(dl)&&(dl=null),ul!==null&&wc(ul)&&(ul=null),$r.forEach(Cf),Vr.forEach(Cf)}function Cc(t,a){t.blockedOn===a&&(t.blockedOn=null,_u||(_u=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,cv)))}var Sc=null;function Sf(t){Sc!==t&&(Sc=t,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){Sc===t&&(Sc=null);for(var a=0;a<t.length;a+=3){var l=t[a],n=t[a+1],o=t[a+2];if(typeof n!="function"){if(Nu(n||l)===null)continue;break}var d=Wl(l);d!==null&&(t.splice(a,3),a-=3,jd(d,{pending:!0,data:o,method:l.method,action:n},n,o))}}))}function zn(t){function a(q){return Cc(q,t)}ol!==null&&Cc(ol,t),dl!==null&&Cc(dl,t),ul!==null&&Cc(ul,t),$r.forEach(a),Vr.forEach(a);for(var l=0;l<ml.length;l++){var n=ml[l];n.blockedOn===t&&(n.blockedOn=null)}for(;0<ml.length&&(l=ml[0],l.blockedOn===null);)wf(l),l.blockedOn===null&&ml.shift();if(l=(t.ownerDocument||t).$$reactFormReplay,l!=null)for(n=0;n<l.length;n+=3){var o=l[n],d=l[n+1],y=o[oa]||null;if(typeof d=="function")y||Sf(l);else if(y){var D=null;if(d&&d.hasAttribute("formAction")){if(o=d,y=d[oa]||null)D=y.formAction;else if(Nu(o)!==null)continue}else D=y.action;typeof D=="function"?l[n+1]=D:(l.splice(n,3),n-=3),Sf(l)}}}function Ef(){function t(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(y){return o=y})},focusReset:"manual",scroll:"manual"})}function a(){o!==null&&(o(),o=null),n||setTimeout(l,20)}function l(){if(!n&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var n=!1,o=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(l,100),function(){n=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),o!==null&&(o(),o=null)}}}function wu(t){this._internalRoot=t}Ec.prototype.render=wu.prototype.render=function(t){var a=this._internalRoot;if(a===null)throw Error(c(409));var l=a.current,n=Ea();yf(l,n,t,a,null,null)},Ec.prototype.unmount=wu.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var a=t.containerInfo;yf(t.current,2,null,t,null,null),ic(),a[Jl]=null}};function Ec(t){this._internalRoot=t}Ec.prototype.unstable_scheduleHydration=function(t){if(t){var a=Lm();t={blockedOn:null,target:t,priority:a};for(var l=0;l<ml.length&&a!==0&&a<ml[l].priority;l++);ml.splice(l,0,t),l===0&&wf(t)}};var Df=r.version;if(Df!=="19.2.3")throw Error(c(527,Df,"19.2.3"));pe.findDOMNode=function(t){var a=t._reactInternals;if(a===void 0)throw typeof t.render=="function"?Error(c(188)):(t=Object.keys(t).join(","),Error(c(268,t)));return t=g(a),t=t!==null?f(t):null,t=t===null?null:t.stateNode,t};var ov={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Dc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Dc.isDisabled&&Dc.supportsFiber)try{Ee=Dc.inject(ov),Ae=Dc}catch{}}return Pr.createRoot=function(t,a){if(!u(t))throw Error(c(299));var l=!1,n="",o=Ox,d=zx,y=Lx;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(n=a.identifierPrefix),a.onUncaughtError!==void 0&&(o=a.onUncaughtError),a.onCaughtError!==void 0&&(d=a.onCaughtError),a.onRecoverableError!==void 0&&(y=a.onRecoverableError)),a=ff(t,1,!1,null,null,l,n,null,o,d,y,Ef),t[Jl]=a.current,nu(t),new wu(a)},Pr.hydrateRoot=function(t,a,l){if(!u(t))throw Error(c(299));var n=!1,o="",d=Ox,y=zx,D=Lx,q=null;return l!=null&&(l.unstable_strictMode===!0&&(n=!0),l.identifierPrefix!==void 0&&(o=l.identifierPrefix),l.onUncaughtError!==void 0&&(d=l.onUncaughtError),l.onCaughtError!==void 0&&(y=l.onCaughtError),l.onRecoverableError!==void 0&&(D=l.onRecoverableError),l.formState!==void 0&&(q=l.formState)),a=ff(t,1,!0,a,l??null,n,o,q,d,y,D,Ef),a.context=gf(null),l=a.current,n=Ea(),n=xo(n),o=Js(n),o.callback=null,Is(l,o,n),l=n,a.current.lanes=l,tr(a,l),xs(a),t[Jl]=a.current,nu(t),new Ec(a)},Pr.version="19.2.3",Pr}var Uf;function vv(){if(Uf)return Eu.exports;Uf=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(r){console.error(r)}}return s(),Eu.exports=bv(),Eu.exports}var jv=vv();const Nv=F0(jv);var Ff="popstate";function _v(s={}){function r(c,u){let{pathname:h,search:x,hash:m}=c.location;return $u("",{pathname:h,search:x,hash:m},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function i(c,u){return typeof u=="string"?u:ti(u)}return Cv(r,i,null,s)}function bt(s,r){if(s===!1||s===null||typeof s>"u")throw new Error(r)}function Xa(s,r){if(!s){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function wv(){return Math.random().toString(36).substring(2,10)}function Hf(s,r){return{usr:s.state,key:s.key,idx:r}}function $u(s,r,i=null,c){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof r=="string"?Yn(r):r,state:i,key:r&&r.key||c||wv()}}function ti({pathname:s="/",search:r="",hash:i=""}){return r&&r!=="?"&&(s+=r.charAt(0)==="?"?r:"?"+r),i&&i!=="#"&&(s+=i.charAt(0)==="#"?i:"#"+i),s}function Yn(s){let r={};if(s){let i=s.indexOf("#");i>=0&&(r.hash=s.substring(i),s=s.substring(0,i));let c=s.indexOf("?");c>=0&&(r.search=s.substring(c),s=s.substring(0,c)),s&&(r.pathname=s)}return r}function Cv(s,r,i,c={}){let{window:u=document.defaultView,v5Compat:h=!1}=c,x=u.history,m="POP",p=null,g=f();g==null&&(g=0,x.replaceState({...x.state,idx:g},""));function f(){return(x.state||{idx:null}).idx}function v(){m="POP";let j=f(),_=j==null?null:j-g;g=j,p&&p({action:m,location:C.location,delta:_})}function E(j,_){m="PUSH";let N=$u(C.location,j,_);g=f()+1;let z=Hf(N,g),k=C.createHref(N);try{x.pushState(z,"",k)}catch(U){if(U instanceof DOMException&&U.name==="DataCloneError")throw U;u.location.assign(k)}h&&p&&p({action:m,location:C.location,delta:1})}function S(j,_){m="REPLACE";let N=$u(C.location,j,_);g=f();let z=Hf(N,g),k=C.createHref(N);x.replaceState(z,"",k),h&&p&&p({action:m,location:C.location,delta:0})}function w(j){return Sv(j)}let C={get action(){return m},get location(){return s(u,x)},listen(j){if(p)throw new Error("A history only accepts one active listener");return u.addEventListener(Ff,v),p=j,()=>{u.removeEventListener(Ff,v),p=null}},createHref(j){return r(u,j)},createURL:w,encodeLocation(j){let _=w(j);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:E,replace:S,go(j){return x.go(j)}};return C}function Sv(s,r=!1){let i="http://localhost";typeof window<"u"&&(i=window.location.origin!=="null"?window.location.origin:window.location.href),bt(i,"No window.location.(origin|href) available to create URL");let c=typeof s=="string"?s:ti(s);return c=c.replace(/ $/,"%20"),!r&&c.startsWith("//")&&(c=i+c),new URL(c,i)}function H0(s,r,i="/"){return Ev(s,r,i,!1)}function Ev(s,r,i,c){let u=typeof r=="string"?Yn(r):r,h=Bs(u.pathname||"/",i);if(h==null)return null;let x=B0(s);Dv(x);let m=null;for(let p=0;m==null&&p<x.length;++p){let g=Fv(h);m=qv(x[p],g,c)}return m}function B0(s,r=[],i=[],c="",u=!1){let h=(x,m,p=u,g)=>{let f={relativePath:g===void 0?x.path||"":g,caseSensitive:x.caseSensitive===!0,childrenIndex:m,route:x};if(f.relativePath.startsWith("/")){if(!f.relativePath.startsWith(c)&&p)return;bt(f.relativePath.startsWith(c),`Absolute route path "${f.relativePath}" nested under path "${c}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(c.length)}let v=Hs([c,f.relativePath]),E=i.concat(f);x.children&&x.children.length>0&&(bt(x.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),B0(x.children,r,E,v,p)),!(x.path==null&&!x.index)&&r.push({path:v,score:zv(v,x.index),routesMeta:E})};return s.forEach((x,m)=>{if(x.path===""||!x.path?.includes("?"))h(x,m);else for(let p of $0(x.path))h(x,m,!0,p)}),r}function $0(s){let r=s.split("/");if(r.length===0)return[];let[i,...c]=r,u=i.endsWith("?"),h=i.replace(/\?$/,"");if(c.length===0)return u?[h,""]:[h];let x=$0(c.join("/")),m=[];return m.push(...x.map(p=>p===""?h:[h,p].join("/"))),u&&m.push(...x),m.map(p=>s.startsWith("/")&&p===""?"/":p)}function Dv(s){s.sort((r,i)=>r.score!==i.score?i.score-r.score:Lv(r.routesMeta.map(c=>c.childrenIndex),i.routesMeta.map(c=>c.childrenIndex)))}var Tv=/^:[\w-]+$/,Mv=3,kv=2,Av=1,Rv=10,Ov=-2,Bf=s=>s==="*";function zv(s,r){let i=s.split("/"),c=i.length;return i.some(Bf)&&(c+=Ov),r&&(c+=kv),i.filter(u=>!Bf(u)).reduce((u,h)=>u+(Tv.test(h)?Mv:h===""?Av:Rv),c)}function Lv(s,r){return s.length===r.length&&s.slice(0,-1).every((c,u)=>c===r[u])?s[s.length-1]-r[r.length-1]:0}function qv(s,r,i=!1){let{routesMeta:c}=s,u={},h="/",x=[];for(let m=0;m<c.length;++m){let p=c[m],g=m===c.length-1,f=h==="/"?r:r.slice(h.length)||"/",v=Vc({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},f),E=p.route;if(!v&&g&&i&&!c[c.length-1].route.index&&(v=Vc({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},f)),!v)return null;Object.assign(u,v.params),x.push({params:u,pathname:Hs([h,v.pathname]),pathnameBase:Qv(Hs([h,v.pathnameBase])),route:E}),v.pathnameBase!=="/"&&(h=Hs([h,v.pathnameBase]))}return x}function Vc(s,r){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[i,c]=Uv(s.path,s.caseSensitive,s.end),u=r.match(i);if(!u)return null;let h=u[0],x=h.replace(/(.)\/+$/,"$1"),m=u.slice(1);return{params:c.reduce((g,{paramName:f,isOptional:v},E)=>{if(f==="*"){let w=m[E]||"";x=h.slice(0,h.length-w.length).replace(/(.)\/+$/,"$1")}const S=m[E];return v&&!S?g[f]=void 0:g[f]=(S||"").replace(/%2F/g,"/"),g},{}),pathname:h,pathnameBase:x,pattern:s}}function Uv(s,r=!1,i=!0){Xa(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let c=[],u="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(x,m,p)=>(c.push({paramName:m,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(c.push({paramName:"*"}),u+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?u+="\\/*$":s!==""&&s!=="/"&&(u+="(?:(?=\\/|$))"),[new RegExp(u,r?void 0:"i"),c]}function Fv(s){try{return s.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return Xa(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${r}).`),s}}function Bs(s,r){if(r==="/")return s;if(!s.toLowerCase().startsWith(r.toLowerCase()))return null;let i=r.endsWith("/")?r.length-1:r.length,c=s.charAt(i);return c&&c!=="/"?null:s.slice(i)||"/"}var Hv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Bv=s=>Hv.test(s);function $v(s,r="/"){let{pathname:i,search:c="",hash:u=""}=typeof s=="string"?Yn(s):s,h;if(i)if(Bv(i))h=i;else{if(i.includes("//")){let x=i;i=i.replace(/\/\/+/g,"/"),Xa(!1,`Pathnames cannot have embedded double slashes - normalizing ${x} -> ${i}`)}i.startsWith("/")?h=$f(i.substring(1),"/"):h=$f(i,r)}else h=r;return{pathname:h,search:Gv(c),hash:Pv(u)}}function $f(s,r){let i=r.replace(/\/+$/,"").split("/");return s.split("/").forEach(u=>{u===".."?i.length>1&&i.pop():u!=="."&&i.push(u)}),i.length>1?i.join("/"):"/"}function ku(s,r,i,c){return`Cannot include a '${s}' character in a manually specified \`to.${r}\` field [${JSON.stringify(c)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Vv(s){return s.filter((r,i)=>i===0||r.route.path&&r.route.path.length>0)}function rm(s){let r=Vv(s);return r.map((i,c)=>c===r.length-1?i.pathname:i.pathnameBase)}function im(s,r,i,c=!1){let u;typeof s=="string"?u=Yn(s):(u={...s},bt(!u.pathname||!u.pathname.includes("?"),ku("?","pathname","search",u)),bt(!u.pathname||!u.pathname.includes("#"),ku("#","pathname","hash",u)),bt(!u.search||!u.search.includes("#"),ku("#","search","hash",u)));let h=s===""||u.pathname==="",x=h?"/":u.pathname,m;if(x==null)m=i;else{let v=r.length-1;if(!c&&x.startsWith("..")){let E=x.split("/");for(;E[0]==="..";)E.shift(),v-=1;u.pathname=E.join("/")}m=v>=0?r[v]:"/"}let p=$v(u,m),g=x&&x!=="/"&&x.endsWith("/"),f=(h||x===".")&&i.endsWith("/");return!p.pathname.endsWith("/")&&(g||f)&&(p.pathname+="/"),p}var Hs=s=>s.join("/").replace(/\/\/+/g,"/"),Qv=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),Gv=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,Pv=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function Yv(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}function Xv(s){return s.map(r=>r.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var V0=["POST","PUT","PATCH","DELETE"];new Set(V0);var Kv=["GET",...V0];new Set(Kv);var Xn=b.createContext(null);Xn.displayName="DataRouter";var Yc=b.createContext(null);Yc.displayName="DataRouterState";b.createContext(!1);var Q0=b.createContext({isTransitioning:!1});Q0.displayName="ViewTransition";var Zv=b.createContext(new Map);Zv.displayName="Fetchers";var Jv=b.createContext(null);Jv.displayName="Await";var Ka=b.createContext(null);Ka.displayName="Navigation";var oi=b.createContext(null);oi.displayName="Location";var is=b.createContext({outlet:null,matches:[],isDataRoute:!1});is.displayName="Route";var cm=b.createContext(null);cm.displayName="RouteError";function Iv(s,{relative:r}={}){bt(Kn(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:c}=b.useContext(Ka),{hash:u,pathname:h,search:x}=di(s,{relative:r}),m=h;return i!=="/"&&(m=h==="/"?i:Hs([i,h])),c.createHref({pathname:m,search:x,hash:u})}function Kn(){return b.useContext(oi)!=null}function Za(){return bt(Kn(),"useLocation() may be used only in the context of a <Router> component."),b.useContext(oi).location}var G0="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function P0(s){b.useContext(Ka).static||b.useLayoutEffect(s)}function Aa(){let{isDataRoute:s}=b.useContext(is);return s?uj():Wv()}function Wv(){bt(Kn(),"useNavigate() may be used only in the context of a <Router> component.");let s=b.useContext(Xn),{basename:r,navigator:i}=b.useContext(Ka),{matches:c}=b.useContext(is),{pathname:u}=Za(),h=JSON.stringify(rm(c)),x=b.useRef(!1);return P0(()=>{x.current=!0}),b.useCallback((p,g={})=>{if(Xa(x.current,G0),!x.current)return;if(typeof p=="number"){i.go(p);return}let f=im(p,JSON.parse(h),u,g.relative==="path");s==null&&r!=="/"&&(f.pathname=f.pathname==="/"?r:Hs([r,f.pathname])),(g.replace?i.replace:i.push)(f,g.state,g)},[r,i,h,u,s])}b.createContext(null);function Y0(){let{matches:s}=b.useContext(is),r=s[s.length-1];return r?r.params:{}}function di(s,{relative:r}={}){let{matches:i}=b.useContext(is),{pathname:c}=Za(),u=JSON.stringify(rm(i));return b.useMemo(()=>im(s,JSON.parse(u),c,r==="path"),[s,u,c,r])}function ej(s,r){return X0(s,r)}function X0(s,r,i,c,u){bt(Kn(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:h}=b.useContext(Ka),{matches:x}=b.useContext(is),m=x[x.length-1],p=m?m.params:{},g=m?m.pathname:"/",f=m?m.pathnameBase:"/",v=m&&m.route;{let N=v&&v.path||"";K0(g,!v||N.endsWith("*")||N.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${N}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${N}"> to <Route path="${N==="/"?"*":`${N}/*`}">.`)}let E=Za(),S;if(r){let N=typeof r=="string"?Yn(r):r;bt(f==="/"||N.pathname?.startsWith(f),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${N.pathname}" was given in the \`location\` prop.`),S=N}else S=E;let w=S.pathname||"/",C=w;if(f!=="/"){let N=f.replace(/^\//,"").split("/");C="/"+w.replace(/^\//,"").split("/").slice(N.length).join("/")}let j=H0(s,{pathname:C});Xa(v||j!=null,`No routes matched location "${S.pathname}${S.search}${S.hash}" `),Xa(j==null||j[j.length-1].route.element!==void 0||j[j.length-1].route.Component!==void 0||j[j.length-1].route.lazy!==void 0,`Matched leaf route at location "${S.pathname}${S.search}${S.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=nj(j&&j.map(N=>Object.assign({},N,{params:Object.assign({},p,N.params),pathname:Hs([f,h.encodeLocation?h.encodeLocation(N.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?f:Hs([f,h.encodeLocation?h.encodeLocation(N.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:N.pathnameBase])})),x,i,c,u);return r&&_?b.createElement(oi.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...S},navigationType:"POP"}},_):_}function tj(){let s=dj(),r=Yv(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),i=s instanceof Error?s.stack:null,c="rgba(200,200,200, 0.5)",u={padding:"0.5rem",backgroundColor:c},h={padding:"2px 4px",backgroundColor:c},x=null;return console.error("Error handled by React Router default ErrorBoundary:",s),x=b.createElement(b.Fragment,null,b.createElement("p",null," Hey developer "),b.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",b.createElement("code",{style:h},"ErrorBoundary")," or"," ",b.createElement("code",{style:h},"errorElement")," prop on your route.")),b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},r),i?b.createElement("pre",{style:u},i):null,x)}var aj=b.createElement(tj,null),sj=class extends b.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,r){return r.location!==s.location||r.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:r.error,location:r.location,revalidation:s.revalidation||r.revalidation}}componentDidCatch(s,r){this.props.onError?this.props.onError(s,r):console.error("React Router caught the following error during render",s)}render(){return this.state.error!==void 0?b.createElement(is.Provider,{value:this.props.routeContext},b.createElement(cm.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function lj({routeContext:s,match:r,children:i}){let c=b.useContext(Xn);return c&&c.static&&c.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(c.staticContext._deepestRenderedBoundaryId=r.route.id),b.createElement(is.Provider,{value:s},i)}function nj(s,r=[],i=null,c=null,u=null){if(s==null){if(!i)return null;if(i.errors)s=i.matches;else if(r.length===0&&!i.initialized&&i.matches.length>0)s=i.matches;else return null}let h=s,x=i?.errors;if(x!=null){let f=h.findIndex(v=>v.route.id&&x?.[v.route.id]!==void 0);bt(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(x).join(",")}`),h=h.slice(0,Math.min(h.length,f+1))}let m=!1,p=-1;if(i)for(let f=0;f<h.length;f++){let v=h[f];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(p=f),v.route.id){let{loaderData:E,errors:S}=i,w=v.route.loader&&!E.hasOwnProperty(v.route.id)&&(!S||S[v.route.id]===void 0);if(v.route.lazy||w){m=!0,p>=0?h=h.slice(0,p+1):h=[h[0]];break}}}let g=i&&c?(f,v)=>{c(f,{location:i.location,params:i.matches?.[0]?.params??{},unstable_pattern:Xv(i.matches),errorInfo:v})}:void 0;return h.reduceRight((f,v,E)=>{let S,w=!1,C=null,j=null;i&&(S=x&&v.route.id?x[v.route.id]:void 0,C=v.route.errorElement||aj,m&&(p<0&&E===0?(K0("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,j=null):p===E&&(w=!0,j=v.route.hydrateFallbackElement||null)));let _=r.concat(h.slice(0,E+1)),N=()=>{let z;return S?z=C:w?z=j:v.route.Component?z=b.createElement(v.route.Component,null):v.route.element?z=v.route.element:z=f,b.createElement(lj,{match:v,routeContext:{outlet:f,matches:_,isDataRoute:i!=null},children:z})};return i&&(v.route.ErrorBoundary||v.route.errorElement||E===0)?b.createElement(sj,{location:i.location,revalidation:i.revalidation,component:C,error:S,children:N(),routeContext:{outlet:null,matches:_,isDataRoute:!0},onError:g}):N()},null)}function om(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function rj(s){let r=b.useContext(Xn);return bt(r,om(s)),r}function ij(s){let r=b.useContext(Yc);return bt(r,om(s)),r}function cj(s){let r=b.useContext(is);return bt(r,om(s)),r}function dm(s){let r=cj(s),i=r.matches[r.matches.length-1];return bt(i.route.id,`${s} can only be used on routes that contain a unique "id"`),i.route.id}function oj(){return dm("useRouteId")}function dj(){let s=b.useContext(cm),r=ij("useRouteError"),i=dm("useRouteError");return s!==void 0?s:r.errors?.[i]}function uj(){let{router:s}=rj("useNavigate"),r=dm("useNavigate"),i=b.useRef(!1);return P0(()=>{i.current=!0}),b.useCallback(async(u,h={})=>{Xa(i.current,G0),i.current&&(typeof u=="number"?await s.navigate(u):await s.navigate(u,{fromRouteId:r,...h}))},[s,r])}var Vf={};function K0(s,r,i){!r&&!Vf[s]&&(Vf[s]=!0,Xa(!1,i))}b.memo(mj);function mj({routes:s,future:r,state:i,unstable_onError:c}){return X0(s,void 0,i,c,r)}function Da({to:s,replace:r,state:i,relative:c}){bt(Kn(),"<Navigate> may be used only in the context of a <Router> component.");let{static:u}=b.useContext(Ka);Xa(!u,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:h}=b.useContext(is),{pathname:x}=Za(),m=Aa(),p=im(s,rm(h),x,c==="path"),g=JSON.stringify(p);return b.useEffect(()=>{m(JSON.parse(g),{replace:r,state:i,relative:c})},[m,g,c,r,i]),null}function it(s){bt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function hj({basename:s="/",children:r=null,location:i,navigationType:c="POP",navigator:u,static:h=!1,unstable_useTransitions:x}){bt(!Kn(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let m=s.replace(/^\/*/,"/"),p=b.useMemo(()=>({basename:m,navigator:u,static:h,unstable_useTransitions:x,future:{}}),[m,u,h,x]);typeof i=="string"&&(i=Yn(i));let{pathname:g="/",search:f="",hash:v="",state:E=null,key:S="default"}=i,w=b.useMemo(()=>{let C=Bs(g,m);return C==null?null:{location:{pathname:C,search:f,hash:v,state:E,key:S},navigationType:c}},[m,g,f,v,E,S,c]);return Xa(w!=null,`<Router basename="${m}"> is not able to match the URL "${g}${f}${v}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:b.createElement(Ka.Provider,{value:p},b.createElement(oi.Provider,{children:r,value:w}))}function xj({children:s,location:r}){return ej(Vu(s),r)}function Vu(s,r=[]){let i=[];return b.Children.forEach(s,(c,u)=>{if(!b.isValidElement(c))return;let h=[...r,u];if(c.type===b.Fragment){i.push.apply(i,Vu(c.props.children,h));return}bt(c.type===it,`[${typeof c.type=="string"?c.type:c.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),bt(!c.props.index||!c.props.children,"An index route cannot have child routes.");let x={id:c.props.id||h.join("-"),caseSensitive:c.props.caseSensitive,element:c.props.element,Component:c.props.Component,index:c.props.index,path:c.props.path,middleware:c.props.middleware,loader:c.props.loader,action:c.props.action,hydrateFallbackElement:c.props.hydrateFallbackElement,HydrateFallback:c.props.HydrateFallback,errorElement:c.props.errorElement,ErrorBoundary:c.props.ErrorBoundary,hasErrorBoundary:c.props.hasErrorBoundary===!0||c.props.ErrorBoundary!=null||c.props.errorElement!=null,shouldRevalidate:c.props.shouldRevalidate,handle:c.props.handle,lazy:c.props.lazy};c.props.children&&(x.children=Vu(c.props.children,h)),i.push(x)}),i}var zc="get",Lc="application/x-www-form-urlencoded";function Xc(s){return typeof HTMLElement<"u"&&s instanceof HTMLElement}function pj(s){return Xc(s)&&s.tagName.toLowerCase()==="button"}function fj(s){return Xc(s)&&s.tagName.toLowerCase()==="form"}function gj(s){return Xc(s)&&s.tagName.toLowerCase()==="input"}function yj(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function bj(s,r){return s.button===0&&(!r||r==="_self")&&!yj(s)}var Tc=null;function vj(){if(Tc===null)try{new FormData(document.createElement("form"),0),Tc=!1}catch{Tc=!0}return Tc}var jj=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Au(s){return s!=null&&!jj.has(s)?(Xa(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Lc}"`),null):s}function Nj(s,r){let i,c,u,h,x;if(fj(s)){let m=s.getAttribute("action");c=m?Bs(m,r):null,i=s.getAttribute("method")||zc,u=Au(s.getAttribute("enctype"))||Lc,h=new FormData(s)}else if(pj(s)||gj(s)&&(s.type==="submit"||s.type==="image")){let m=s.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=s.getAttribute("formaction")||m.getAttribute("action");if(c=p?Bs(p,r):null,i=s.getAttribute("formmethod")||m.getAttribute("method")||zc,u=Au(s.getAttribute("formenctype"))||Au(m.getAttribute("enctype"))||Lc,h=new FormData(m,s),!vj()){let{name:g,type:f,value:v}=s;if(f==="image"){let E=g?`${g}.`:"";h.append(`${E}x`,"0"),h.append(`${E}y`,"0")}else g&&h.append(g,v)}}else{if(Xc(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=zc,c=null,u=Lc,x=s}return h&&u==="text/plain"&&(x=h,h=void 0),{action:c,method:i.toLowerCase(),encType:u,formData:h,body:x}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function um(s,r){if(s===!1||s===null||typeof s>"u")throw new Error(r)}function _j(s,r,i){let c=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return c.pathname==="/"?c.pathname=`_root.${i}`:r&&Bs(c.pathname,r)==="/"?c.pathname=`${r.replace(/\/$/,"")}/_root.${i}`:c.pathname=`${c.pathname.replace(/\/$/,"")}.${i}`,c}async function wj(s,r){if(s.id in r)return r[s.id];try{let i=await import(s.module);return r[s.id]=i,i}catch(i){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Cj(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function Sj(s,r,i){let c=await Promise.all(s.map(async u=>{let h=r.routes[u.route.id];if(h){let x=await wj(h,i);return x.links?x.links():[]}return[]}));return Mj(c.flat(1).filter(Cj).filter(u=>u.rel==="stylesheet"||u.rel==="preload").map(u=>u.rel==="stylesheet"?{...u,rel:"prefetch",as:"style"}:{...u,rel:"prefetch"}))}function Qf(s,r,i,c,u,h){let x=(p,g)=>i[g]?p.route.id!==i[g].route.id:!0,m=(p,g)=>i[g].pathname!==p.pathname||i[g].route.path?.endsWith("*")&&i[g].params["*"]!==p.params["*"];return h==="assets"?r.filter((p,g)=>x(p,g)||m(p,g)):h==="data"?r.filter((p,g)=>{let f=c.routes[p.route.id];if(!f||!f.hasLoader)return!1;if(x(p,g)||m(p,g))return!0;if(p.route.shouldRevalidate){let v=p.route.shouldRevalidate({currentUrl:new URL(u.pathname+u.search+u.hash,window.origin),currentParams:i[0]?.params||{},nextUrl:new URL(s,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function Ej(s,r,{includeHydrateFallback:i}={}){return Dj(s.map(c=>{let u=r.routes[c.route.id];if(!u)return[];let h=[u.module];return u.clientActionModule&&(h=h.concat(u.clientActionModule)),u.clientLoaderModule&&(h=h.concat(u.clientLoaderModule)),i&&u.hydrateFallbackModule&&(h=h.concat(u.hydrateFallbackModule)),u.imports&&(h=h.concat(u.imports)),h}).flat(1))}function Dj(s){return[...new Set(s)]}function Tj(s){let r={},i=Object.keys(s).sort();for(let c of i)r[c]=s[c];return r}function Mj(s,r){let i=new Set;return new Set(r),s.reduce((c,u)=>{let h=JSON.stringify(Tj(u));return i.has(h)||(i.add(h),c.push({key:h,link:u})),c},[])}function Z0(){let s=b.useContext(Xn);return um(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function kj(){let s=b.useContext(Yc);return um(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var mm=b.createContext(void 0);mm.displayName="FrameworkContext";function J0(){let s=b.useContext(mm);return um(s,"You must render this element inside a <HydratedRouter> element"),s}function Aj(s,r){let i=b.useContext(mm),[c,u]=b.useState(!1),[h,x]=b.useState(!1),{onFocus:m,onBlur:p,onMouseEnter:g,onMouseLeave:f,onTouchStart:v}=r,E=b.useRef(null);b.useEffect(()=>{if(s==="render"&&x(!0),s==="viewport"){let C=_=>{_.forEach(N=>{x(N.isIntersecting)})},j=new IntersectionObserver(C,{threshold:.5});return E.current&&j.observe(E.current),()=>{j.disconnect()}}},[s]),b.useEffect(()=>{if(c){let C=setTimeout(()=>{x(!0)},100);return()=>{clearTimeout(C)}}},[c]);let S=()=>{u(!0)},w=()=>{u(!1),x(!1)};return i?s!=="intent"?[h,E,{}]:[h,E,{onFocus:Yr(m,S),onBlur:Yr(p,w),onMouseEnter:Yr(g,S),onMouseLeave:Yr(f,w),onTouchStart:Yr(v,S)}]:[!1,E,{}]}function Yr(s,r){return i=>{s&&s(i),i.defaultPrevented||r(i)}}function Rj({page:s,...r}){let{router:i}=Z0(),c=b.useMemo(()=>H0(i.routes,s,i.basename),[i.routes,s,i.basename]);return c?b.createElement(zj,{page:s,matches:c,...r}):null}function Oj(s){let{manifest:r,routeModules:i}=J0(),[c,u]=b.useState([]);return b.useEffect(()=>{let h=!1;return Sj(s,r,i).then(x=>{h||u(x)}),()=>{h=!0}},[s,r,i]),c}function zj({page:s,matches:r,...i}){let c=Za(),{manifest:u,routeModules:h}=J0(),{basename:x}=Z0(),{loaderData:m,matches:p}=kj(),g=b.useMemo(()=>Qf(s,r,p,u,c,"data"),[s,r,p,u,c]),f=b.useMemo(()=>Qf(s,r,p,u,c,"assets"),[s,r,p,u,c]),v=b.useMemo(()=>{if(s===c.pathname+c.search+c.hash)return[];let w=new Set,C=!1;if(r.forEach(_=>{let N=u.routes[_.route.id];!N||!N.hasLoader||(!g.some(z=>z.route.id===_.route.id)&&_.route.id in m&&h[_.route.id]?.shouldRevalidate||N.hasClientLoader?C=!0:w.add(_.route.id))}),w.size===0)return[];let j=_j(s,x,"data");return C&&w.size>0&&j.searchParams.set("_routes",r.filter(_=>w.has(_.route.id)).map(_=>_.route.id).join(",")),[j.pathname+j.search]},[x,m,c,u,g,r,s,h]),E=b.useMemo(()=>Ej(f,u),[f,u]),S=Oj(f);return b.createElement(b.Fragment,null,v.map(w=>b.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...i})),E.map(w=>b.createElement("link",{key:w,rel:"modulepreload",href:w,...i})),S.map(({key:w,link:C})=>b.createElement("link",{key:w,nonce:i.nonce,...C})))}function Lj(...s){return r=>{s.forEach(i=>{typeof i=="function"?i(r):i!=null&&(i.current=r)})}}var I0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{I0&&(window.__reactRouterVersion="7.10.1")}catch{}function qj({basename:s,children:r,unstable_useTransitions:i,window:c}){let u=b.useRef();u.current==null&&(u.current=_v({window:c,v5Compat:!0}));let h=u.current,[x,m]=b.useState({action:h.action,location:h.location}),p=b.useCallback(g=>{i===!1?m(g):b.startTransition(()=>m(g))},[i]);return b.useLayoutEffect(()=>h.listen(p),[h,p]),b.createElement(hj,{basename:s,children:r,location:x.location,navigationType:x.action,navigator:h,unstable_useTransitions:i===!0})}var W0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,kt=b.forwardRef(function({onClick:r,discover:i="render",prefetch:c="none",relative:u,reloadDocument:h,replace:x,state:m,target:p,to:g,preventScrollReset:f,viewTransition:v,...E},S){let{basename:w,unstable_useTransitions:C}=b.useContext(Ka),j=typeof g=="string"&&W0.test(g),_,N=!1;if(typeof g=="string"&&j&&(_=g,I0))try{let B=new URL(window.location.href),ye=g.startsWith("//")?new URL(B.protocol+g):new URL(g),F=Bs(ye.pathname,w);ye.origin===B.origin&&F!=null?g=F+ye.search+ye.hash:N=!0}catch{Xa(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let z=Iv(g,{relative:u}),[k,U,A]=Aj(c,E),T=Bj(g,{replace:x,state:m,target:p,preventScrollReset:f,relative:u,viewTransition:v,unstable_useTransitions:C});function O(B){r&&r(B),B.defaultPrevented||T(B)}let ee=b.createElement("a",{...E,...A,href:_||z,onClick:N||h?r:O,ref:Lj(S,U),target:p,"data-discover":!j&&i==="render"?"true":void 0});return k&&!j?b.createElement(b.Fragment,null,ee,b.createElement(Rj,{page:z})):ee});kt.displayName="Link";var Uj=b.forwardRef(function({"aria-current":r="page",caseSensitive:i=!1,className:c="",end:u=!1,style:h,to:x,viewTransition:m,children:p,...g},f){let v=di(x,{relative:g.relative}),E=Za(),S=b.useContext(Yc),{navigator:w,basename:C}=b.useContext(Ka),j=S!=null&&Pj(v)&&m===!0,_=w.encodeLocation?w.encodeLocation(v).pathname:v.pathname,N=E.pathname,z=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;i||(N=N.toLowerCase(),z=z?z.toLowerCase():null,_=_.toLowerCase()),z&&C&&(z=Bs(z,C)||z);const k=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let U=N===_||!u&&N.startsWith(_)&&N.charAt(k)==="/",A=z!=null&&(z===_||!u&&z.startsWith(_)&&z.charAt(_.length)==="/"),T={isActive:U,isPending:A,isTransitioning:j},O=U?r:void 0,ee;typeof c=="function"?ee=c(T):ee=[c,U?"active":null,A?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let B=typeof h=="function"?h(T):h;return b.createElement(kt,{...g,"aria-current":O,className:ee,ref:f,style:B,to:x,viewTransition:m},typeof p=="function"?p(T):p)});Uj.displayName="NavLink";var Fj=b.forwardRef(({discover:s="render",fetcherKey:r,navigate:i,reloadDocument:c,replace:u,state:h,method:x=zc,action:m,onSubmit:p,relative:g,preventScrollReset:f,viewTransition:v,...E},S)=>{let{unstable_useTransitions:w}=b.useContext(Ka),C=Qj(),j=Gj(m,{relative:g}),_=x.toLowerCase()==="get"?"get":"post",N=typeof m=="string"&&W0.test(m),z=k=>{if(p&&p(k),k.defaultPrevented)return;k.preventDefault();let U=k.nativeEvent.submitter,A=U?.getAttribute("formmethod")||x,T=()=>C(U||k.currentTarget,{fetcherKey:r,method:A,navigate:i,replace:u,state:h,relative:g,preventScrollReset:f,viewTransition:v});w&&i!==!1?b.startTransition(()=>T()):T()};return b.createElement("form",{ref:S,method:_,action:j,onSubmit:c?p:z,...E,"data-discover":!N&&s==="render"?"true":void 0})});Fj.displayName="Form";function Hj(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function eg(s){let r=b.useContext(Xn);return bt(r,Hj(s)),r}function Bj(s,{target:r,replace:i,state:c,preventScrollReset:u,relative:h,viewTransition:x,unstable_useTransitions:m}={}){let p=Aa(),g=Za(),f=di(s,{relative:h});return b.useCallback(v=>{if(bj(v,r)){v.preventDefault();let E=i!==void 0?i:ti(g)===ti(f),S=()=>p(s,{replace:E,state:c,preventScrollReset:u,relative:h,viewTransition:x});m?b.startTransition(()=>S()):S()}},[g,p,f,i,c,r,s,u,h,x,m])}var $j=0,Vj=()=>`__${String(++$j)}__`;function Qj(){let{router:s}=eg("useSubmit"),{basename:r}=b.useContext(Ka),i=oj(),c=s.fetch,u=s.navigate;return b.useCallback(async(h,x={})=>{let{action:m,method:p,encType:g,formData:f,body:v}=Nj(h,r);if(x.navigate===!1){let E=x.fetcherKey||Vj();await c(E,i,x.action||m,{preventScrollReset:x.preventScrollReset,formData:f,body:v,formMethod:x.method||p,formEncType:x.encType||g,flushSync:x.flushSync})}else await u(x.action||m,{preventScrollReset:x.preventScrollReset,formData:f,body:v,formMethod:x.method||p,formEncType:x.encType||g,replace:x.replace,state:x.state,fromRouteId:i,flushSync:x.flushSync,viewTransition:x.viewTransition})},[c,u,r,i])}function Gj(s,{relative:r}={}){let{basename:i}=b.useContext(Ka),c=b.useContext(is);bt(c,"useFormAction must be used inside a RouteContext");let[u]=c.matches.slice(-1),h={...di(s||".",{relative:r})},x=Za();if(s==null){h.search=x.search;let m=new URLSearchParams(h.search),p=m.getAll("index");if(p.some(f=>f==="")){m.delete("index"),p.filter(v=>v).forEach(v=>m.append("index",v));let f=m.toString();h.search=f?`?${f}`:""}}return(!s||s===".")&&u.route.index&&(h.search=h.search?h.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(h.pathname=h.pathname==="/"?i:Hs([i,h.pathname])),ti(h)}function Pj(s,{relative:r}={}){let i=b.useContext(Q0);bt(i!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:c}=eg("useViewTransitionState"),u=di(s,{relative:r});if(!i.isTransitioning)return!1;let h=Bs(i.currentLocation.pathname,c)||i.currentLocation.pathname,x=Bs(i.nextLocation.pathname,c)||i.nextLocation.pathname;return Vc(u.pathname,x)!=null||Vc(u.pathname,h)!=null}var Zn=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(s){return this.listeners.add(s),this.onSubscribe(),()=>{this.listeners.delete(s),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Yj={setTimeout:(s,r)=>setTimeout(s,r),clearTimeout:s=>clearTimeout(s),setInterval:(s,r)=>setInterval(s,r),clearInterval:s=>clearInterval(s)},Xj=class{#e=Yj;#t=!1;setTimeoutProvider(s){this.#e=s}setTimeout(s,r){return this.#e.setTimeout(s,r)}clearTimeout(s){this.#e.clearTimeout(s)}setInterval(s,r){return this.#e.setInterval(s,r)}clearInterval(s){this.#e.clearInterval(s)}},ql=new Xj;function Kj(s){setTimeout(s,0)}var Gl=typeof window>"u"||"Deno"in globalThis;function na(){}function Zj(s,r){return typeof s=="function"?s(r):s}function Qu(s){return typeof s=="number"&&s>=0&&s!==1/0}function tg(s,r){return Math.max(s+(r||0)-Date.now(),0)}function fl(s,r){return typeof s=="function"?s(r):s}function Ga(s,r){return typeof s=="function"?s(r):s}function Gf(s,r){const{type:i="all",exact:c,fetchStatus:u,predicate:h,queryKey:x,stale:m}=s;if(x){if(c){if(r.queryHash!==hm(x,r.options))return!1}else if(!ai(r.queryKey,x))return!1}if(i!=="all"){const p=r.isActive();if(i==="active"&&!p||i==="inactive"&&p)return!1}return!(typeof m=="boolean"&&r.isStale()!==m||u&&u!==r.state.fetchStatus||h&&!h(r))}function Pf(s,r){const{exact:i,status:c,predicate:u,mutationKey:h}=s;if(h){if(!r.options.mutationKey)return!1;if(i){if(Pl(r.options.mutationKey)!==Pl(h))return!1}else if(!ai(r.options.mutationKey,h))return!1}return!(c&&r.state.status!==c||u&&!u(r))}function hm(s,r){return(r?.queryKeyHashFn||Pl)(s)}function Pl(s){return JSON.stringify(s,(r,i)=>Gu(i)?Object.keys(i).sort().reduce((c,u)=>(c[u]=i[u],c),{}):i)}function ai(s,r){return s===r?!0:typeof s!=typeof r?!1:s&&r&&typeof s=="object"&&typeof r=="object"?Object.keys(r).every(i=>ai(s[i],r[i])):!1}var Jj=Object.prototype.hasOwnProperty;function ag(s,r){if(s===r)return s;const i=Yf(s)&&Yf(r);if(!i&&!(Gu(s)&&Gu(r)))return r;const u=(i?s:Object.keys(s)).length,h=i?r:Object.keys(r),x=h.length,m=i?new Array(x):{};let p=0;for(let g=0;g<x;g++){const f=i?g:h[g],v=s[f],E=r[f];if(v===E){m[f]=v,(i?g<u:Jj.call(s,f))&&p++;continue}if(v===null||E===null||typeof v!="object"||typeof E!="object"){m[f]=E;continue}const S=ag(v,E);m[f]=S,S===v&&p++}return u===x&&p===u?s:m}function Qc(s,r){if(!r||Object.keys(s).length!==Object.keys(r).length)return!1;for(const i in s)if(s[i]!==r[i])return!1;return!0}function Yf(s){return Array.isArray(s)&&s.length===Object.keys(s).length}function Gu(s){if(!Xf(s))return!1;const r=s.constructor;if(r===void 0)return!0;const i=r.prototype;return!(!Xf(i)||!i.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(s)!==Object.prototype)}function Xf(s){return Object.prototype.toString.call(s)==="[object Object]"}function Ij(s){return new Promise(r=>{ql.setTimeout(r,s)})}function Pu(s,r,i){return typeof i.structuralSharing=="function"?i.structuralSharing(s,r):i.structuralSharing!==!1?ag(s,r):r}function Wj(s,r,i=0){const c=[...s,r];return i&&c.length>i?c.slice(1):c}function eN(s,r,i=0){const c=[r,...s];return i&&c.length>i?c.slice(0,-1):c}var xm=Symbol();function sg(s,r){return!s.queryFn&&r?.initialPromise?()=>r.initialPromise:!s.queryFn||s.queryFn===xm?()=>Promise.reject(new Error(`Missing queryFn: '${s.queryHash}'`)):s.queryFn}function lg(s,r){return typeof s=="function"?s(...r):!!s}var tN=class extends Zn{#e;#t;#a;constructor(){super(),this.#a=s=>{if(!Gl&&window.addEventListener){const r=()=>s();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}}}onSubscribe(){this.#t||this.setEventListener(this.#a)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(s){this.#a=s,this.#t?.(),this.#t=s(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()})}setFocused(s){this.#e!==s&&(this.#e=s,this.onFocus())}onFocus(){const s=this.isFocused();this.listeners.forEach(r=>{r(s)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},pm=new tN;function Yu(){let s,r;const i=new Promise((u,h)=>{s=u,r=h});i.status="pending",i.catch(()=>{});function c(u){Object.assign(i,u),delete i.resolve,delete i.reject}return i.resolve=u=>{c({status:"fulfilled",value:u}),s(u)},i.reject=u=>{c({status:"rejected",reason:u}),r(u)},i}var aN=Kj;function sN(){let s=[],r=0,i=m=>{m()},c=m=>{m()},u=aN;const h=m=>{r?s.push(m):u(()=>{i(m)})},x=()=>{const m=s;s=[],m.length&&u(()=>{c(()=>{m.forEach(p=>{i(p)})})})};return{batch:m=>{let p;r++;try{p=m()}finally{r--,r||x()}return p},batchCalls:m=>(...p)=>{h(()=>{m(...p)})},schedule:h,setNotifyFunction:m=>{i=m},setBatchNotifyFunction:m=>{c=m},setScheduler:m=>{u=m}}}var $t=sN(),lN=class extends Zn{#e=!0;#t;#a;constructor(){super(),this.#a=s=>{if(!Gl&&window.addEventListener){const r=()=>s(!0),i=()=>s(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",i,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",i)}}}}onSubscribe(){this.#t||this.setEventListener(this.#a)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(s){this.#a=s,this.#t?.(),this.#t=s(this.setOnline.bind(this))}setOnline(s){this.#e!==s&&(this.#e=s,this.listeners.forEach(i=>{i(s)}))}isOnline(){return this.#e}},Gc=new lN;function nN(s){return Math.min(1e3*2**s,3e4)}function ng(s){return(s??"online")==="online"?Gc.isOnline():!0}var Xu=class extends Error{constructor(s){super("CancelledError"),this.revert=s?.revert,this.silent=s?.silent}};function rg(s){let r=!1,i=0,c;const u=Yu(),h=()=>u.status!=="pending",x=C=>{if(!h()){const j=new Xu(C);E(j),s.onCancel?.(j)}},m=()=>{r=!0},p=()=>{r=!1},g=()=>pm.isFocused()&&(s.networkMode==="always"||Gc.isOnline())&&s.canRun(),f=()=>ng(s.networkMode)&&s.canRun(),v=C=>{h()||(c?.(),u.resolve(C))},E=C=>{h()||(c?.(),u.reject(C))},S=()=>new Promise(C=>{c=j=>{(h()||g())&&C(j)},s.onPause?.()}).then(()=>{c=void 0,h()||s.onContinue?.()}),w=()=>{if(h())return;let C;const j=i===0?s.initialPromise:void 0;try{C=j??s.fn()}catch(_){C=Promise.reject(_)}Promise.resolve(C).then(v).catch(_=>{if(h())return;const N=s.retry??(Gl?0:3),z=s.retryDelay??nN,k=typeof z=="function"?z(i,_):z,U=N===!0||typeof N=="number"&&i<N||typeof N=="function"&&N(i,_);if(r||!U){E(_);return}i++,s.onFail?.(i,_),Ij(k).then(()=>g()?void 0:S()).then(()=>{r?E(_):w()})})};return{promise:u,status:()=>u.status,cancel:x,continue:()=>(c?.(),u),cancelRetry:m,continueRetry:p,canStart:f,start:()=>(f()?w():S().then(w),u)}}var ig=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Qu(this.gcTime)&&(this.#e=ql.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(s){this.gcTime=Math.max(this.gcTime||0,s??(Gl?1/0:300*1e3))}clearGcTimeout(){this.#e&&(ql.clearTimeout(this.#e),this.#e=void 0)}},rN=class extends ig{#e;#t;#a;#l;#s;#r;#i;constructor(s){super(),this.#i=!1,this.#r=s.defaultOptions,this.setOptions(s.options),this.observers=[],this.#l=s.client,this.#a=this.#l.getQueryCache(),this.queryKey=s.queryKey,this.queryHash=s.queryHash,this.#e=Zf(this.options),this.state=s.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#s?.promise}setOptions(s){if(this.options={...this.#r,...s},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=Zf(this.options);r.data!==void 0&&(this.setState(Kf(r.data,r.dataUpdatedAt)),this.#e=r)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#a.remove(this)}setData(s,r){const i=Pu(this.state.data,s,this.options);return this.#n({data:i,type:"success",dataUpdatedAt:r?.updatedAt,manual:r?.manual}),i}setState(s,r){this.#n({type:"setState",state:s,setStateOptions:r})}cancel(s){const r=this.#s?.promise;return this.#s?.cancel(s),r?r.then(na).catch(na):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(s=>Ga(s.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===xm||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(s=>fl(s.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(s=>s.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(s=0){return this.state.data===void 0?!0:s==="static"?!1:this.state.isInvalidated?!0:!tg(this.state.dataUpdatedAt,s)}onFocus(){this.observers.find(r=>r.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#s?.continue()}onOnline(){this.observers.find(r=>r.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#s?.continue()}addObserver(s){this.observers.includes(s)||(this.observers.push(s),this.clearGcTimeout(),this.#a.notify({type:"observerAdded",query:this,observer:s}))}removeObserver(s){this.observers.includes(s)&&(this.observers=this.observers.filter(r=>r!==s),this.observers.length||(this.#s&&(this.#i?this.#s.cancel({revert:!0}):this.#s.cancelRetry()),this.scheduleGc()),this.#a.notify({type:"observerRemoved",query:this,observer:s}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#n({type:"invalidate"})}async fetch(s,r){if(this.state.fetchStatus!=="idle"&&this.#s?.status()!=="rejected"){if(this.state.data!==void 0&&r?.cancelRefetch)this.cancel({silent:!0});else if(this.#s)return this.#s.continueRetry(),this.#s.promise}if(s&&this.setOptions(s),!this.options.queryFn){const m=this.observers.find(p=>p.options.queryFn);m&&this.setOptions(m.options)}const i=new AbortController,c=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(this.#i=!0,i.signal)})},u=()=>{const m=sg(this.options,r),g=(()=>{const f={client:this.#l,queryKey:this.queryKey,meta:this.meta};return c(f),f})();return this.#i=!1,this.options.persister?this.options.persister(m,g,this):m(g)},x=(()=>{const m={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:this.#l,state:this.state,fetchFn:u};return c(m),m})();this.options.behavior?.onFetch(x,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==x.fetchOptions?.meta)&&this.#n({type:"fetch",meta:x.fetchOptions?.meta}),this.#s=rg({initialPromise:r?.initialPromise,fn:x.fetchFn,onCancel:m=>{m instanceof Xu&&m.revert&&this.setState({...this.#t,fetchStatus:"idle"}),i.abort()},onFail:(m,p)=>{this.#n({type:"failed",failureCount:m,error:p})},onPause:()=>{this.#n({type:"pause"})},onContinue:()=>{this.#n({type:"continue"})},retry:x.options.retry,retryDelay:x.options.retryDelay,networkMode:x.options.networkMode,canRun:()=>!0});try{const m=await this.#s.start();if(m===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(m),this.#a.config.onSuccess?.(m,this),this.#a.config.onSettled?.(m,this.state.error,this),m}catch(m){if(m instanceof Xu){if(m.silent)return this.#s.promise;if(m.revert){if(this.state.data===void 0)throw m;return this.state.data}}throw this.#n({type:"error",error:m}),this.#a.config.onError?.(m,this),this.#a.config.onSettled?.(this.state.data,m,this),m}finally{this.scheduleGc()}}#n(s){const r=i=>{switch(s.type){case"failed":return{...i,fetchFailureCount:s.failureCount,fetchFailureReason:s.error};case"pause":return{...i,fetchStatus:"paused"};case"continue":return{...i,fetchStatus:"fetching"};case"fetch":return{...i,...cg(i.data,this.options),fetchMeta:s.meta??null};case"success":const c={...i,...Kf(s.data,s.dataUpdatedAt),dataUpdateCount:i.dataUpdateCount+1,...!s.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=s.manual?c:void 0,c;case"error":const u=s.error;return{...i,error:u,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,fetchFailureReason:u,fetchStatus:"idle",status:"error"};case"invalidate":return{...i,isInvalidated:!0};case"setState":return{...i,...s.state}}};this.state=r(this.state),$t.batch(()=>{this.observers.forEach(i=>{i.onQueryUpdate()}),this.#a.notify({query:this,type:"updated",action:s})})}};function cg(s,r){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:ng(r.networkMode)?"fetching":"paused",...s===void 0&&{error:null,status:"pending"}}}function Kf(s,r){return{data:s,dataUpdatedAt:r??Date.now(),error:null,isInvalidated:!1,status:"success"}}function Zf(s){const r=typeof s.initialData=="function"?s.initialData():s.initialData,i=r!==void 0,c=i?typeof s.initialDataUpdatedAt=="function"?s.initialDataUpdatedAt():s.initialDataUpdatedAt:0;return{data:r,dataUpdateCount:0,dataUpdatedAt:i?c??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:i?"success":"pending",fetchStatus:"idle"}}var iN=class extends Zn{constructor(s,r){super(),this.options=r,this.#e=s,this.#n=null,this.#i=Yu(),this.bindMethods(),this.setOptions(r)}#e;#t=void 0;#a=void 0;#l=void 0;#s;#r;#i;#n;#p;#m;#h;#o;#d;#c;#x=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),Jf(this.#t,this.options)?this.#u():this.updateResult(),this.#b())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Ku(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Ku(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#v(),this.#j(),this.#t.removeObserver(this)}setOptions(s){const r=this.options,i=this.#t;if(this.options=this.#e.defaultQueryOptions(s),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Ga(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#N(),this.#t.setOptions(this.options),r._defaulted&&!Qc(this.options,r)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const c=this.hasListeners();c&&If(this.#t,i,this.options,r)&&this.#u(),this.updateResult(),c&&(this.#t!==i||Ga(this.options.enabled,this.#t)!==Ga(r.enabled,this.#t)||fl(this.options.staleTime,this.#t)!==fl(r.staleTime,this.#t))&&this.#f();const u=this.#g();c&&(this.#t!==i||Ga(this.options.enabled,this.#t)!==Ga(r.enabled,this.#t)||u!==this.#c)&&this.#y(u)}getOptimisticResult(s){const r=this.#e.getQueryCache().build(this.#e,s),i=this.createResult(r,s);return oN(this,i)&&(this.#l=i,this.#r=this.options,this.#s=this.#t.state),i}getCurrentResult(){return this.#l}trackResult(s,r){return new Proxy(s,{get:(i,c)=>(this.trackProp(c),r?.(c),c==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#i.status==="pending"&&this.#i.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(i,c))})}trackProp(s){this.#x.add(s)}getCurrentQuery(){return this.#t}refetch({...s}={}){return this.fetch({...s})}fetchOptimistic(s){const r=this.#e.defaultQueryOptions(s),i=this.#e.getQueryCache().build(this.#e,r);return i.fetch().then(()=>this.createResult(i,r))}fetch(s){return this.#u({...s,cancelRefetch:s.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#l))}#u(s){this.#N();let r=this.#t.fetch(this.options,s);return s?.throwOnError||(r=r.catch(na)),r}#f(){this.#v();const s=fl(this.options.staleTime,this.#t);if(Gl||this.#l.isStale||!Qu(s))return;const i=tg(this.#l.dataUpdatedAt,s)+1;this.#o=ql.setTimeout(()=>{this.#l.isStale||this.updateResult()},i)}#g(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#y(s){this.#j(),this.#c=s,!(Gl||Ga(this.options.enabled,this.#t)===!1||!Qu(this.#c)||this.#c===0)&&(this.#d=ql.setInterval(()=>{(this.options.refetchIntervalInBackground||pm.isFocused())&&this.#u()},this.#c))}#b(){this.#f(),this.#y(this.#g())}#v(){this.#o&&(ql.clearTimeout(this.#o),this.#o=void 0)}#j(){this.#d&&(ql.clearInterval(this.#d),this.#d=void 0)}createResult(s,r){const i=this.#t,c=this.options,u=this.#l,h=this.#s,x=this.#r,p=s!==i?s.state:this.#a,{state:g}=s;let f={...g},v=!1,E;if(r._optimisticResults){const O=this.hasListeners(),ee=!O&&Jf(s,r),B=O&&If(s,i,r,c);(ee||B)&&(f={...f,...cg(g.data,s.options)}),r._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:S,errorUpdatedAt:w,status:C}=f;E=f.data;let j=!1;if(r.placeholderData!==void 0&&E===void 0&&C==="pending"){let O;u?.isPlaceholderData&&r.placeholderData===x?.placeholderData?(O=u.data,j=!0):O=typeof r.placeholderData=="function"?r.placeholderData(this.#h?.state.data,this.#h):r.placeholderData,O!==void 0&&(C="success",E=Pu(u?.data,O,r),v=!0)}if(r.select&&E!==void 0&&!j)if(u&&E===h?.data&&r.select===this.#p)E=this.#m;else try{this.#p=r.select,E=r.select(E),E=Pu(u?.data,E,r),this.#m=E,this.#n=null}catch(O){this.#n=O}this.#n&&(S=this.#n,E=this.#m,w=Date.now(),C="error");const _=f.fetchStatus==="fetching",N=C==="pending",z=C==="error",k=N&&_,U=E!==void 0,T={status:C,fetchStatus:f.fetchStatus,isPending:N,isSuccess:C==="success",isError:z,isInitialLoading:k,isLoading:k,data:E,dataUpdatedAt:f.dataUpdatedAt,error:S,errorUpdatedAt:w,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>p.dataUpdateCount||f.errorUpdateCount>p.errorUpdateCount,isFetching:_,isRefetching:_&&!N,isLoadingError:z&&!U,isPaused:f.fetchStatus==="paused",isPlaceholderData:v,isRefetchError:z&&U,isStale:fm(s,r),refetch:this.refetch,promise:this.#i,isEnabled:Ga(r.enabled,s)!==!1};if(this.options.experimental_prefetchInRender){const O=ye=>{T.status==="error"?ye.reject(T.error):T.data!==void 0&&ye.resolve(T.data)},ee=()=>{const ye=this.#i=T.promise=Yu();O(ye)},B=this.#i;switch(B.status){case"pending":s.queryHash===i.queryHash&&O(B);break;case"fulfilled":(T.status==="error"||T.data!==B.value)&&ee();break;case"rejected":(T.status!=="error"||T.error!==B.reason)&&ee();break}}return T}updateResult(){const s=this.#l,r=this.createResult(this.#t,this.options);if(this.#s=this.#t.state,this.#r=this.options,this.#s.data!==void 0&&(this.#h=this.#t),Qc(r,s))return;this.#l=r;const i=()=>{if(!s)return!0;const{notifyOnChangeProps:c}=this.options,u=typeof c=="function"?c():c;if(u==="all"||!u&&!this.#x.size)return!0;const h=new Set(u??this.#x);return this.options.throwOnError&&h.add("error"),Object.keys(this.#l).some(x=>{const m=x;return this.#l[m]!==s[m]&&h.has(m)})};this.#_({listeners:i()})}#N(){const s=this.#e.getQueryCache().build(this.#e,this.options);if(s===this.#t)return;const r=this.#t;this.#t=s,this.#a=s.state,this.hasListeners()&&(r?.removeObserver(this),s.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#b()}#_(s){$t.batch(()=>{s.listeners&&this.listeners.forEach(r=>{r(this.#l)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function cN(s,r){return Ga(r.enabled,s)!==!1&&s.state.data===void 0&&!(s.state.status==="error"&&r.retryOnMount===!1)}function Jf(s,r){return cN(s,r)||s.state.data!==void 0&&Ku(s,r,r.refetchOnMount)}function Ku(s,r,i){if(Ga(r.enabled,s)!==!1&&fl(r.staleTime,s)!=="static"){const c=typeof i=="function"?i(s):i;return c==="always"||c!==!1&&fm(s,r)}return!1}function If(s,r,i,c){return(s!==r||Ga(c.enabled,s)===!1)&&(!i.suspense||s.state.status!=="error")&&fm(s,i)}function fm(s,r){return Ga(r.enabled,s)!==!1&&s.isStaleByTime(fl(r.staleTime,s))}function oN(s,r){return!Qc(s.getCurrentResult(),r)}function Wf(s){return{onFetch:(r,i)=>{const c=r.options,u=r.fetchOptions?.meta?.fetchMore?.direction,h=r.state.data?.pages||[],x=r.state.data?.pageParams||[];let m={pages:[],pageParams:[]},p=0;const g=async()=>{let f=!1;const v=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(r.signal.aborted?f=!0:r.signal.addEventListener("abort",()=>{f=!0}),r.signal)})},E=sg(r.options,r.fetchOptions),S=async(w,C,j)=>{if(f)return Promise.reject();if(C==null&&w.pages.length)return Promise.resolve(w);const N=(()=>{const A={client:r.client,queryKey:r.queryKey,pageParam:C,direction:j?"backward":"forward",meta:r.options.meta};return v(A),A})(),z=await E(N),{maxPages:k}=r.options,U=j?eN:Wj;return{pages:U(w.pages,z,k),pageParams:U(w.pageParams,C,k)}};if(u&&h.length){const w=u==="backward",C=w?dN:e0,j={pages:h,pageParams:x},_=C(c,j);m=await S(j,_,w)}else{const w=s??h.length;do{const C=p===0?x[0]??c.initialPageParam:e0(c,m);if(p>0&&C==null)break;m=await S(m,C),p++}while(p<w)}return m};r.options.persister?r.fetchFn=()=>r.options.persister?.(g,{client:r.client,queryKey:r.queryKey,meta:r.options.meta,signal:r.signal},i):r.fetchFn=g}}}function e0(s,{pages:r,pageParams:i}){const c=r.length-1;return r.length>0?s.getNextPageParam(r[c],r,i[c],i):void 0}function dN(s,{pages:r,pageParams:i}){return r.length>0?s.getPreviousPageParam?.(r[0],r,i[0],i):void 0}var uN=class extends ig{#e;#t;#a;#l;constructor(s){super(),this.#e=s.client,this.mutationId=s.mutationId,this.#a=s.mutationCache,this.#t=[],this.state=s.state||og(),this.setOptions(s.options),this.scheduleGc()}setOptions(s){this.options=s,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(s){this.#t.includes(s)||(this.#t.push(s),this.clearGcTimeout(),this.#a.notify({type:"observerAdded",mutation:this,observer:s}))}removeObserver(s){this.#t=this.#t.filter(r=>r!==s),this.scheduleGc(),this.#a.notify({type:"observerRemoved",mutation:this,observer:s})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#a.remove(this))}continue(){return this.#l?.continue()??this.execute(this.state.variables)}async execute(s){const r=()=>{this.#s({type:"continue"})},i={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#l=rg({fn:()=>this.options.mutationFn?this.options.mutationFn(s,i):Promise.reject(new Error("No mutationFn found")),onFail:(h,x)=>{this.#s({type:"failed",failureCount:h,error:x})},onPause:()=>{this.#s({type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#a.canRun(this)});const c=this.state.status==="pending",u=!this.#l.canStart();try{if(c)r();else{this.#s({type:"pending",variables:s,isPaused:u}),await this.#a.config.onMutate?.(s,this,i);const x=await this.options.onMutate?.(s,i);x!==this.state.context&&this.#s({type:"pending",context:x,variables:s,isPaused:u})}const h=await this.#l.start();return await this.#a.config.onSuccess?.(h,s,this.state.context,this,i),await this.options.onSuccess?.(h,s,this.state.context,i),await this.#a.config.onSettled?.(h,null,this.state.variables,this.state.context,this,i),await this.options.onSettled?.(h,null,s,this.state.context,i),this.#s({type:"success",data:h}),h}catch(h){try{throw await this.#a.config.onError?.(h,s,this.state.context,this,i),await this.options.onError?.(h,s,this.state.context,i),await this.#a.config.onSettled?.(void 0,h,this.state.variables,this.state.context,this,i),await this.options.onSettled?.(void 0,h,s,this.state.context,i),h}finally{this.#s({type:"error",error:h})}}finally{this.#a.runNext(this)}}#s(s){const r=i=>{switch(s.type){case"failed":return{...i,failureCount:s.failureCount,failureReason:s.error};case"pause":return{...i,isPaused:!0};case"continue":return{...i,isPaused:!1};case"pending":return{...i,context:s.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:s.isPaused,status:"pending",variables:s.variables,submittedAt:Date.now()};case"success":return{...i,data:s.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...i,data:void 0,error:s.error,failureCount:i.failureCount+1,failureReason:s.error,isPaused:!1,status:"error"}}};this.state=r(this.state),$t.batch(()=>{this.#t.forEach(i=>{i.onMutationUpdate(s)}),this.#a.notify({mutation:this,type:"updated",action:s})})}};function og(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var mN=class extends Zn{constructor(s={}){super(),this.config=s,this.#e=new Set,this.#t=new Map,this.#a=0}#e;#t;#a;build(s,r,i){const c=new uN({client:s,mutationCache:this,mutationId:++this.#a,options:s.defaultMutationOptions(r),state:i});return this.add(c),c}add(s){this.#e.add(s);const r=Mc(s);if(typeof r=="string"){const i=this.#t.get(r);i?i.push(s):this.#t.set(r,[s])}this.notify({type:"added",mutation:s})}remove(s){if(this.#e.delete(s)){const r=Mc(s);if(typeof r=="string"){const i=this.#t.get(r);if(i)if(i.length>1){const c=i.indexOf(s);c!==-1&&i.splice(c,1)}else i[0]===s&&this.#t.delete(r)}}this.notify({type:"removed",mutation:s})}canRun(s){const r=Mc(s);if(typeof r=="string"){const c=this.#t.get(r)?.find(u=>u.state.status==="pending");return!c||c===s}else return!0}runNext(s){const r=Mc(s);return typeof r=="string"?this.#t.get(r)?.find(c=>c!==s&&c.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){$t.batch(()=>{this.#e.forEach(s=>{this.notify({type:"removed",mutation:s})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(s){const r={exact:!0,...s};return this.getAll().find(i=>Pf(r,i))}findAll(s={}){return this.getAll().filter(r=>Pf(s,r))}notify(s){$t.batch(()=>{this.listeners.forEach(r=>{r(s)})})}resumePausedMutations(){const s=this.getAll().filter(r=>r.state.isPaused);return $t.batch(()=>Promise.all(s.map(r=>r.continue().catch(na))))}};function Mc(s){return s.options.scope?.id}var hN=class extends Zn{#e;#t=void 0;#a;#l;constructor(r,i){super(),this.#e=r,this.setOptions(i),this.bindMethods(),this.#s()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){const i=this.options;this.options=this.#e.defaultMutationOptions(r),Qc(this.options,i)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#a,observer:this}),i?.mutationKey&&this.options.mutationKey&&Pl(i.mutationKey)!==Pl(this.options.mutationKey)?this.reset():this.#a?.state.status==="pending"&&this.#a.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#a?.removeObserver(this)}onMutationUpdate(r){this.#s(),this.#r(r)}getCurrentResult(){return this.#t}reset(){this.#a?.removeObserver(this),this.#a=void 0,this.#s(),this.#r()}mutate(r,i){return this.#l=i,this.#a?.removeObserver(this),this.#a=this.#e.getMutationCache().build(this.#e,this.options),this.#a.addObserver(this),this.#a.execute(r)}#s(){const r=this.#a?.state??og();this.#t={...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset}}#r(r){$t.batch(()=>{if(this.#l&&this.hasListeners()){const i=this.#t.variables,c=this.#t.context,u={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};r?.type==="success"?(this.#l.onSuccess?.(r.data,i,c,u),this.#l.onSettled?.(r.data,null,i,c,u)):r?.type==="error"&&(this.#l.onError?.(r.error,i,c,u),this.#l.onSettled?.(void 0,r.error,i,c,u))}this.listeners.forEach(i=>{i(this.#t)})})}},xN=class extends Zn{constructor(s={}){super(),this.config=s,this.#e=new Map}#e;build(s,r,i){const c=r.queryKey,u=r.queryHash??hm(c,r);let h=this.get(u);return h||(h=new rN({client:s,queryKey:c,queryHash:u,options:s.defaultQueryOptions(r),state:i,defaultOptions:s.getQueryDefaults(c)}),this.add(h)),h}add(s){this.#e.has(s.queryHash)||(this.#e.set(s.queryHash,s),this.notify({type:"added",query:s}))}remove(s){const r=this.#e.get(s.queryHash);r&&(s.destroy(),r===s&&this.#e.delete(s.queryHash),this.notify({type:"removed",query:s}))}clear(){$t.batch(()=>{this.getAll().forEach(s=>{this.remove(s)})})}get(s){return this.#e.get(s)}getAll(){return[...this.#e.values()]}find(s){const r={exact:!0,...s};return this.getAll().find(i=>Gf(r,i))}findAll(s={}){const r=this.getAll();return Object.keys(s).length>0?r.filter(i=>Gf(s,i)):r}notify(s){$t.batch(()=>{this.listeners.forEach(r=>{r(s)})})}onFocus(){$t.batch(()=>{this.getAll().forEach(s=>{s.onFocus()})})}onOnline(){$t.batch(()=>{this.getAll().forEach(s=>{s.onOnline()})})}},pN=class{#e;#t;#a;#l;#s;#r;#i;#n;constructor(s={}){this.#e=s.queryCache||new xN,this.#t=s.mutationCache||new mN,this.#a=s.defaultOptions||{},this.#l=new Map,this.#s=new Map,this.#r=0}mount(){this.#r++,this.#r===1&&(this.#i=pm.subscribe(async s=>{s&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#n=Gc.subscribe(async s=>{s&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#r--,this.#r===0&&(this.#i?.(),this.#i=void 0,this.#n?.(),this.#n=void 0)}isFetching(s){return this.#e.findAll({...s,fetchStatus:"fetching"}).length}isMutating(s){return this.#t.findAll({...s,status:"pending"}).length}getQueryData(s){const r=this.defaultQueryOptions({queryKey:s});return this.#e.get(r.queryHash)?.state.data}ensureQueryData(s){const r=this.defaultQueryOptions(s),i=this.#e.build(this,r),c=i.state.data;return c===void 0?this.fetchQuery(s):(s.revalidateIfStale&&i.isStaleByTime(fl(r.staleTime,i))&&this.prefetchQuery(r),Promise.resolve(c))}getQueriesData(s){return this.#e.findAll(s).map(({queryKey:r,state:i})=>{const c=i.data;return[r,c]})}setQueryData(s,r,i){const c=this.defaultQueryOptions({queryKey:s}),h=this.#e.get(c.queryHash)?.state.data,x=Zj(r,h);if(x!==void 0)return this.#e.build(this,c).setData(x,{...i,manual:!0})}setQueriesData(s,r,i){return $t.batch(()=>this.#e.findAll(s).map(({queryKey:c})=>[c,this.setQueryData(c,r,i)]))}getQueryState(s){const r=this.defaultQueryOptions({queryKey:s});return this.#e.get(r.queryHash)?.state}removeQueries(s){const r=this.#e;$t.batch(()=>{r.findAll(s).forEach(i=>{r.remove(i)})})}resetQueries(s,r){const i=this.#e;return $t.batch(()=>(i.findAll(s).forEach(c=>{c.reset()}),this.refetchQueries({type:"active",...s},r)))}cancelQueries(s,r={}){const i={revert:!0,...r},c=$t.batch(()=>this.#e.findAll(s).map(u=>u.cancel(i)));return Promise.all(c).then(na).catch(na)}invalidateQueries(s,r={}){return $t.batch(()=>(this.#e.findAll(s).forEach(i=>{i.invalidate()}),s?.refetchType==="none"?Promise.resolve():this.refetchQueries({...s,type:s?.refetchType??s?.type??"active"},r)))}refetchQueries(s,r={}){const i={...r,cancelRefetch:r.cancelRefetch??!0},c=$t.batch(()=>this.#e.findAll(s).filter(u=>!u.isDisabled()&&!u.isStatic()).map(u=>{let h=u.fetch(void 0,i);return i.throwOnError||(h=h.catch(na)),u.state.fetchStatus==="paused"?Promise.resolve():h}));return Promise.all(c).then(na)}fetchQuery(s){const r=this.defaultQueryOptions(s);r.retry===void 0&&(r.retry=!1);const i=this.#e.build(this,r);return i.isStaleByTime(fl(r.staleTime,i))?i.fetch(r):Promise.resolve(i.state.data)}prefetchQuery(s){return this.fetchQuery(s).then(na).catch(na)}fetchInfiniteQuery(s){return s.behavior=Wf(s.pages),this.fetchQuery(s)}prefetchInfiniteQuery(s){return this.fetchInfiniteQuery(s).then(na).catch(na)}ensureInfiniteQueryData(s){return s.behavior=Wf(s.pages),this.ensureQueryData(s)}resumePausedMutations(){return Gc.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#a}setDefaultOptions(s){this.#a=s}setQueryDefaults(s,r){this.#l.set(Pl(s),{queryKey:s,defaultOptions:r})}getQueryDefaults(s){const r=[...this.#l.values()],i={};return r.forEach(c=>{ai(s,c.queryKey)&&Object.assign(i,c.defaultOptions)}),i}setMutationDefaults(s,r){this.#s.set(Pl(s),{mutationKey:s,defaultOptions:r})}getMutationDefaults(s){const r=[...this.#s.values()],i={};return r.forEach(c=>{ai(s,c.mutationKey)&&Object.assign(i,c.defaultOptions)}),i}defaultQueryOptions(s){if(s._defaulted)return s;const r={...this.#a.queries,...this.getQueryDefaults(s.queryKey),...s,_defaulted:!0};return r.queryHash||(r.queryHash=hm(r.queryKey,r)),r.refetchOnReconnect===void 0&&(r.refetchOnReconnect=r.networkMode!=="always"),r.throwOnError===void 0&&(r.throwOnError=!!r.suspense),!r.networkMode&&r.persister&&(r.networkMode="offlineFirst"),r.queryFn===xm&&(r.enabled=!1),r}defaultMutationOptions(s){return s?._defaulted?s:{...this.#a.mutations,...s?.mutationKey&&this.getMutationDefaults(s.mutationKey),...s,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},dg=b.createContext(void 0),et=s=>{const r=b.useContext(dg);if(!r)throw new Error("No QueryClient set, use QueryClientProvider to set one");return r},fN=({client:s,children:r})=>(b.useEffect(()=>(s.mount(),()=>{s.unmount()}),[s]),e.jsx(dg.Provider,{value:s,children:r})),ug=b.createContext(!1),gN=()=>b.useContext(ug);ug.Provider;function yN(){let s=!1;return{clearReset:()=>{s=!1},reset:()=>{s=!0},isReset:()=>s}}var bN=b.createContext(yN()),vN=()=>b.useContext(bN),jN=(s,r)=>{(s.suspense||s.throwOnError||s.experimental_prefetchInRender)&&(r.isReset()||(s.retryOnMount=!1))},NN=s=>{b.useEffect(()=>{s.clearReset()},[s])},_N=({result:s,errorResetBoundary:r,throwOnError:i,query:c,suspense:u})=>s.isError&&!r.isReset()&&!s.isFetching&&c&&(u&&s.data===void 0||lg(i,[s.error,c])),wN=s=>{if(s.suspense){const i=u=>u==="static"?u:Math.max(u??1e3,1e3),c=s.staleTime;s.staleTime=typeof c=="function"?(...u)=>i(c(...u)):i(c),typeof s.gcTime=="number"&&(s.gcTime=Math.max(s.gcTime,1e3))}},CN=(s,r)=>s.isLoading&&s.isFetching&&!r,SN=(s,r)=>s?.suspense&&r.isPending,t0=(s,r,i)=>r.fetchOptimistic(s).catch(()=>{i.clearReset()});function EN(s,r,i){const c=gN(),u=vN(),h=et(),x=h.defaultQueryOptions(s);h.getDefaultOptions().queries?._experimental_beforeQuery?.(x),x._optimisticResults=c?"isRestoring":"optimistic",wN(x),jN(x,u),NN(u);const m=!h.getQueryCache().get(x.queryHash),[p]=b.useState(()=>new r(h,x)),g=p.getOptimisticResult(x),f=!c&&s.subscribed!==!1;if(b.useSyncExternalStore(b.useCallback(v=>{const E=f?p.subscribe($t.batchCalls(v)):na;return p.updateResult(),E},[p,f]),()=>p.getCurrentResult(),()=>p.getCurrentResult()),b.useEffect(()=>{p.setOptions(x)},[x,p]),SN(x,g))throw t0(x,p,u);if(_N({result:g,errorResetBoundary:u,throwOnError:x.throwOnError,query:h.getQueryCache().get(x.queryHash),suspense:x.suspense}))throw g.error;return h.getDefaultOptions().queries?._experimental_afterQuery?.(x,g),x.experimental_prefetchInRender&&!Gl&&CN(g,c)&&(m?t0(x,p,u):h.getQueryCache().get(x.queryHash)?.promise)?.catch(na).finally(()=>{p.updateResult()}),x.notifyOnChangeProps?g:p.trackResult(g)}function ke(s,r){return EN(s,iN)}function Ne(s,r){const i=et(),[c]=b.useState(()=>new hN(i,s));b.useEffect(()=>{c.setOptions(s)},[c,s]);const u=b.useSyncExternalStore(b.useCallback(x=>c.subscribe($t.batchCalls(x)),[c]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),h=b.useCallback((x,m)=>{c.mutate(x,m).catch(na)},[c]);if(u.error&&lg(c.options.throwOnError,[u.error]))throw u.error;return{...u,mutate:h,mutateAsync:u.mutate}}function mg(s,r){return function(){return s.apply(r,arguments)}}const{toString:DN}=Object.prototype,{getPrototypeOf:gm}=Object,{iterator:Kc,toStringTag:hg}=Symbol,Zc=(s=>r=>{const i=DN.call(r);return s[i]||(s[i]=i.slice(8,-1).toLowerCase())})(Object.create(null)),cs=s=>(s=s.toLowerCase(),r=>Zc(r)===s),Jc=s=>r=>typeof r===s,{isArray:Jn}=Array,Qn=Jc("undefined");function ui(s){return s!==null&&!Qn(s)&&s.constructor!==null&&!Qn(s.constructor)&&ga(s.constructor.isBuffer)&&s.constructor.isBuffer(s)}const xg=cs("ArrayBuffer");function TN(s){let r;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?r=ArrayBuffer.isView(s):r=s&&s.buffer&&xg(s.buffer),r}const MN=Jc("string"),ga=Jc("function"),pg=Jc("number"),mi=s=>s!==null&&typeof s=="object",kN=s=>s===!0||s===!1,qc=s=>{if(Zc(s)!=="object")return!1;const r=gm(s);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(hg in s)&&!(Kc in s)},AN=s=>{if(!mi(s)||ui(s))return!1;try{return Object.keys(s).length===0&&Object.getPrototypeOf(s)===Object.prototype}catch{return!1}},RN=cs("Date"),ON=cs("File"),zN=cs("Blob"),LN=cs("FileList"),qN=s=>mi(s)&&ga(s.pipe),UN=s=>{let r;return s&&(typeof FormData=="function"&&s instanceof FormData||ga(s.append)&&((r=Zc(s))==="formdata"||r==="object"&&ga(s.toString)&&s.toString()==="[object FormData]"))},FN=cs("URLSearchParams"),[HN,BN,$N,VN]=["ReadableStream","Request","Response","Headers"].map(cs),QN=s=>s.trim?s.trim():s.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function hi(s,r,{allOwnKeys:i=!1}={}){if(s===null||typeof s>"u")return;let c,u;if(typeof s!="object"&&(s=[s]),Jn(s))for(c=0,u=s.length;c<u;c++)r.call(null,s[c],c,s);else{if(ui(s))return;const h=i?Object.getOwnPropertyNames(s):Object.keys(s),x=h.length;let m;for(c=0;c<x;c++)m=h[c],r.call(null,s[m],m,s)}}function fg(s,r){if(ui(s))return null;r=r.toLowerCase();const i=Object.keys(s);let c=i.length,u;for(;c-- >0;)if(u=i[c],r===u.toLowerCase())return u;return null}const Ul=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,gg=s=>!Qn(s)&&s!==Ul;function Zu(){const{caseless:s,skipUndefined:r}=gg(this)&&this||{},i={},c=(u,h)=>{const x=s&&fg(i,h)||h;qc(i[x])&&qc(u)?i[x]=Zu(i[x],u):qc(u)?i[x]=Zu({},u):Jn(u)?i[x]=u.slice():(!r||!Qn(u))&&(i[x]=u)};for(let u=0,h=arguments.length;u<h;u++)arguments[u]&&hi(arguments[u],c);return i}const GN=(s,r,i,{allOwnKeys:c}={})=>(hi(r,(u,h)=>{i&&ga(u)?s[h]=mg(u,i):s[h]=u},{allOwnKeys:c}),s),PN=s=>(s.charCodeAt(0)===65279&&(s=s.slice(1)),s),YN=(s,r,i,c)=>{s.prototype=Object.create(r.prototype,c),s.prototype.constructor=s,Object.defineProperty(s,"super",{value:r.prototype}),i&&Object.assign(s.prototype,i)},XN=(s,r,i,c)=>{let u,h,x;const m={};if(r=r||{},s==null)return r;do{for(u=Object.getOwnPropertyNames(s),h=u.length;h-- >0;)x=u[h],(!c||c(x,s,r))&&!m[x]&&(r[x]=s[x],m[x]=!0);s=i!==!1&&gm(s)}while(s&&(!i||i(s,r))&&s!==Object.prototype);return r},KN=(s,r,i)=>{s=String(s),(i===void 0||i>s.length)&&(i=s.length),i-=r.length;const c=s.indexOf(r,i);return c!==-1&&c===i},ZN=s=>{if(!s)return null;if(Jn(s))return s;let r=s.length;if(!pg(r))return null;const i=new Array(r);for(;r-- >0;)i[r]=s[r];return i},JN=(s=>r=>s&&r instanceof s)(typeof Uint8Array<"u"&&gm(Uint8Array)),IN=(s,r)=>{const c=(s&&s[Kc]).call(s);let u;for(;(u=c.next())&&!u.done;){const h=u.value;r.call(s,h[0],h[1])}},WN=(s,r)=>{let i;const c=[];for(;(i=s.exec(r))!==null;)c.push(i);return c},e1=cs("HTMLFormElement"),t1=s=>s.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(i,c,u){return c.toUpperCase()+u}),a0=(({hasOwnProperty:s})=>(r,i)=>s.call(r,i))(Object.prototype),a1=cs("RegExp"),yg=(s,r)=>{const i=Object.getOwnPropertyDescriptors(s),c={};hi(i,(u,h)=>{let x;(x=r(u,h,s))!==!1&&(c[h]=x||u)}),Object.defineProperties(s,c)},s1=s=>{yg(s,(r,i)=>{if(ga(s)&&["arguments","caller","callee"].indexOf(i)!==-1)return!1;const c=s[i];if(ga(c)){if(r.enumerable=!1,"writable"in r){r.writable=!1;return}r.set||(r.set=()=>{throw Error("Can not rewrite read-only method '"+i+"'")})}})},l1=(s,r)=>{const i={},c=u=>{u.forEach(h=>{i[h]=!0})};return Jn(s)?c(s):c(String(s).split(r)),i},n1=()=>{},r1=(s,r)=>s!=null&&Number.isFinite(s=+s)?s:r;function i1(s){return!!(s&&ga(s.append)&&s[hg]==="FormData"&&s[Kc])}const c1=s=>{const r=new Array(10),i=(c,u)=>{if(mi(c)){if(r.indexOf(c)>=0)return;if(ui(c))return c;if(!("toJSON"in c)){r[u]=c;const h=Jn(c)?[]:{};return hi(c,(x,m)=>{const p=i(x,u+1);!Qn(p)&&(h[m]=p)}),r[u]=void 0,h}}return c};return i(s,0)},o1=cs("AsyncFunction"),d1=s=>s&&(mi(s)||ga(s))&&ga(s.then)&&ga(s.catch),bg=((s,r)=>s?setImmediate:r?((i,c)=>(Ul.addEventListener("message",({source:u,data:h})=>{u===Ul&&h===i&&c.length&&c.shift()()},!1),u=>{c.push(u),Ul.postMessage(i,"*")}))(`axios@${Math.random()}`,[]):i=>setTimeout(i))(typeof setImmediate=="function",ga(Ul.postMessage)),u1=typeof queueMicrotask<"u"?queueMicrotask.bind(Ul):typeof process<"u"&&process.nextTick||bg,m1=s=>s!=null&&ga(s[Kc]),le={isArray:Jn,isArrayBuffer:xg,isBuffer:ui,isFormData:UN,isArrayBufferView:TN,isString:MN,isNumber:pg,isBoolean:kN,isObject:mi,isPlainObject:qc,isEmptyObject:AN,isReadableStream:HN,isRequest:BN,isResponse:$N,isHeaders:VN,isUndefined:Qn,isDate:RN,isFile:ON,isBlob:zN,isRegExp:a1,isFunction:ga,isStream:qN,isURLSearchParams:FN,isTypedArray:JN,isFileList:LN,forEach:hi,merge:Zu,extend:GN,trim:QN,stripBOM:PN,inherits:YN,toFlatObject:XN,kindOf:Zc,kindOfTest:cs,endsWith:KN,toArray:ZN,forEachEntry:IN,matchAll:WN,isHTMLForm:e1,hasOwnProperty:a0,hasOwnProp:a0,reduceDescriptors:yg,freezeMethods:s1,toObjectSet:l1,toCamelCase:t1,noop:n1,toFiniteNumber:r1,findKey:fg,global:Ul,isContextDefined:gg,isSpecCompliantForm:i1,toJSONObject:c1,isAsyncFn:o1,isThenable:d1,setImmediate:bg,asap:u1,isIterable:m1};function He(s,r,i,c,u){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=s,this.name="AxiosError",r&&(this.code=r),i&&(this.config=i),c&&(this.request=c),u&&(this.response=u,this.status=u.status?u.status:null)}le.inherits(He,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:le.toJSONObject(this.config),code:this.code,status:this.status}}});const vg=He.prototype,jg={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(s=>{jg[s]={value:s}});Object.defineProperties(He,jg);Object.defineProperty(vg,"isAxiosError",{value:!0});He.from=(s,r,i,c,u,h)=>{const x=Object.create(vg);le.toFlatObject(s,x,function(f){return f!==Error.prototype},g=>g!=="isAxiosError");const m=s&&s.message?s.message:"Error",p=r==null&&s?s.code:r;return He.call(x,m,p,i,c,u),s&&x.cause==null&&Object.defineProperty(x,"cause",{value:s,configurable:!0}),x.name=s&&s.name||"Error",h&&Object.assign(x,h),x};const h1=null;function Ju(s){return le.isPlainObject(s)||le.isArray(s)}function Ng(s){return le.endsWith(s,"[]")?s.slice(0,-2):s}function s0(s,r,i){return s?s.concat(r).map(function(u,h){return u=Ng(u),!i&&h?"["+u+"]":u}).join(i?".":""):r}function x1(s){return le.isArray(s)&&!s.some(Ju)}const p1=le.toFlatObject(le,{},null,function(r){return/^is[A-Z]/.test(r)});function Ic(s,r,i){if(!le.isObject(s))throw new TypeError("target must be an object");r=r||new FormData,i=le.toFlatObject(i,{metaTokens:!0,dots:!1,indexes:!1},!1,function(C,j){return!le.isUndefined(j[C])});const c=i.metaTokens,u=i.visitor||f,h=i.dots,x=i.indexes,p=(i.Blob||typeof Blob<"u"&&Blob)&&le.isSpecCompliantForm(r);if(!le.isFunction(u))throw new TypeError("visitor must be a function");function g(w){if(w===null)return"";if(le.isDate(w))return w.toISOString();if(le.isBoolean(w))return w.toString();if(!p&&le.isBlob(w))throw new He("Blob is not supported. Use a Buffer instead.");return le.isArrayBuffer(w)||le.isTypedArray(w)?p&&typeof Blob=="function"?new Blob([w]):Buffer.from(w):w}function f(w,C,j){let _=w;if(w&&!j&&typeof w=="object"){if(le.endsWith(C,"{}"))C=c?C:C.slice(0,-2),w=JSON.stringify(w);else if(le.isArray(w)&&x1(w)||(le.isFileList(w)||le.endsWith(C,"[]"))&&(_=le.toArray(w)))return C=Ng(C),_.forEach(function(z,k){!(le.isUndefined(z)||z===null)&&r.append(x===!0?s0([C],k,h):x===null?C:C+"[]",g(z))}),!1}return Ju(w)?!0:(r.append(s0(j,C,h),g(w)),!1)}const v=[],E=Object.assign(p1,{defaultVisitor:f,convertValue:g,isVisitable:Ju});function S(w,C){if(!le.isUndefined(w)){if(v.indexOf(w)!==-1)throw Error("Circular reference detected in "+C.join("."));v.push(w),le.forEach(w,function(_,N){(!(le.isUndefined(_)||_===null)&&u.call(r,_,le.isString(N)?N.trim():N,C,E))===!0&&S(_,C?C.concat(N):[N])}),v.pop()}}if(!le.isObject(s))throw new TypeError("data must be an object");return S(s),r}function l0(s){const r={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(s).replace(/[!'()~]|%20|%00/g,function(c){return r[c]})}function ym(s,r){this._pairs=[],s&&Ic(s,this,r)}const _g=ym.prototype;_g.append=function(r,i){this._pairs.push([r,i])};_g.toString=function(r){const i=r?function(c){return r.call(this,c,l0)}:l0;return this._pairs.map(function(u){return i(u[0])+"="+i(u[1])},"").join("&")};function f1(s){return encodeURIComponent(s).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function wg(s,r,i){if(!r)return s;const c=i&&i.encode||f1;le.isFunction(i)&&(i={serialize:i});const u=i&&i.serialize;let h;if(u?h=u(r,i):h=le.isURLSearchParams(r)?r.toString():new ym(r,i).toString(c),h){const x=s.indexOf("#");x!==-1&&(s=s.slice(0,x)),s+=(s.indexOf("?")===-1?"?":"&")+h}return s}class n0{constructor(){this.handlers=[]}use(r,i,c){return this.handlers.push({fulfilled:r,rejected:i,synchronous:c?c.synchronous:!1,runWhen:c?c.runWhen:null}),this.handlers.length-1}eject(r){this.handlers[r]&&(this.handlers[r]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(r){le.forEach(this.handlers,function(c){c!==null&&r(c)})}}const Cg={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},g1=typeof URLSearchParams<"u"?URLSearchParams:ym,y1=typeof FormData<"u"?FormData:null,b1=typeof Blob<"u"?Blob:null,v1={isBrowser:!0,classes:{URLSearchParams:g1,FormData:y1,Blob:b1},protocols:["http","https","file","blob","url","data"]},bm=typeof window<"u"&&typeof document<"u",Iu=typeof navigator=="object"&&navigator||void 0,j1=bm&&(!Iu||["ReactNative","NativeScript","NS"].indexOf(Iu.product)<0),N1=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",_1=bm&&window.location.href||"http://localhost",w1=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:bm,hasStandardBrowserEnv:j1,hasStandardBrowserWebWorkerEnv:N1,navigator:Iu,origin:_1},Symbol.toStringTag,{value:"Module"})),sa={...w1,...v1};function C1(s,r){return Ic(s,new sa.classes.URLSearchParams,{visitor:function(i,c,u,h){return sa.isNode&&le.isBuffer(i)?(this.append(c,i.toString("base64")),!1):h.defaultVisitor.apply(this,arguments)},...r})}function S1(s){return le.matchAll(/\w+|\[(\w*)]/g,s).map(r=>r[0]==="[]"?"":r[1]||r[0])}function E1(s){const r={},i=Object.keys(s);let c;const u=i.length;let h;for(c=0;c<u;c++)h=i[c],r[h]=s[h];return r}function Sg(s){function r(i,c,u,h){let x=i[h++];if(x==="__proto__")return!0;const m=Number.isFinite(+x),p=h>=i.length;return x=!x&&le.isArray(u)?u.length:x,p?(le.hasOwnProp(u,x)?u[x]=[u[x],c]:u[x]=c,!m):((!u[x]||!le.isObject(u[x]))&&(u[x]=[]),r(i,c,u[x],h)&&le.isArray(u[x])&&(u[x]=E1(u[x])),!m)}if(le.isFormData(s)&&le.isFunction(s.entries)){const i={};return le.forEachEntry(s,(c,u)=>{r(S1(c),u,i,0)}),i}return null}function D1(s,r,i){if(le.isString(s))try{return(r||JSON.parse)(s),le.trim(s)}catch(c){if(c.name!=="SyntaxError")throw c}return(i||JSON.stringify)(s)}const xi={transitional:Cg,adapter:["xhr","http","fetch"],transformRequest:[function(r,i){const c=i.getContentType()||"",u=c.indexOf("application/json")>-1,h=le.isObject(r);if(h&&le.isHTMLForm(r)&&(r=new FormData(r)),le.isFormData(r))return u?JSON.stringify(Sg(r)):r;if(le.isArrayBuffer(r)||le.isBuffer(r)||le.isStream(r)||le.isFile(r)||le.isBlob(r)||le.isReadableStream(r))return r;if(le.isArrayBufferView(r))return r.buffer;if(le.isURLSearchParams(r))return i.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),r.toString();let m;if(h){if(c.indexOf("application/x-www-form-urlencoded")>-1)return C1(r,this.formSerializer).toString();if((m=le.isFileList(r))||c.indexOf("multipart/form-data")>-1){const p=this.env&&this.env.FormData;return Ic(m?{"files[]":r}:r,p&&new p,this.formSerializer)}}return h||u?(i.setContentType("application/json",!1),D1(r)):r}],transformResponse:[function(r){const i=this.transitional||xi.transitional,c=i&&i.forcedJSONParsing,u=this.responseType==="json";if(le.isResponse(r)||le.isReadableStream(r))return r;if(r&&le.isString(r)&&(c&&!this.responseType||u)){const x=!(i&&i.silentJSONParsing)&&u;try{return JSON.parse(r,this.parseReviver)}catch(m){if(x)throw m.name==="SyntaxError"?He.from(m,He.ERR_BAD_RESPONSE,this,null,this.response):m}}return r}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:sa.classes.FormData,Blob:sa.classes.Blob},validateStatus:function(r){return r>=200&&r<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};le.forEach(["delete","get","head","post","put","patch"],s=>{xi.headers[s]={}});const T1=le.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),M1=s=>{const r={};let i,c,u;return s&&s.split(`
`).forEach(function(x){u=x.indexOf(":"),i=x.substring(0,u).trim().toLowerCase(),c=x.substring(u+1).trim(),!(!i||r[i]&&T1[i])&&(i==="set-cookie"?r[i]?r[i].push(c):r[i]=[c]:r[i]=r[i]?r[i]+", "+c:c)}),r},r0=Symbol("internals");function Xr(s){return s&&String(s).trim().toLowerCase()}function Uc(s){return s===!1||s==null?s:le.isArray(s)?s.map(Uc):String(s)}function k1(s){const r=Object.create(null),i=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let c;for(;c=i.exec(s);)r[c[1]]=c[2];return r}const A1=s=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(s.trim());function Ru(s,r,i,c,u){if(le.isFunction(c))return c.call(this,r,i);if(u&&(r=i),!!le.isString(r)){if(le.isString(c))return r.indexOf(c)!==-1;if(le.isRegExp(c))return c.test(r)}}function R1(s){return s.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(r,i,c)=>i.toUpperCase()+c)}function O1(s,r){const i=le.toCamelCase(" "+r);["get","set","has"].forEach(c=>{Object.defineProperty(s,c+i,{value:function(u,h,x){return this[c].call(this,r,u,h,x)},configurable:!0})})}let ya=class{constructor(r){r&&this.set(r)}set(r,i,c){const u=this;function h(m,p,g){const f=Xr(p);if(!f)throw new Error("header name must be a non-empty string");const v=le.findKey(u,f);(!v||u[v]===void 0||g===!0||g===void 0&&u[v]!==!1)&&(u[v||p]=Uc(m))}const x=(m,p)=>le.forEach(m,(g,f)=>h(g,f,p));if(le.isPlainObject(r)||r instanceof this.constructor)x(r,i);else if(le.isString(r)&&(r=r.trim())&&!A1(r))x(M1(r),i);else if(le.isObject(r)&&le.isIterable(r)){let m={},p,g;for(const f of r){if(!le.isArray(f))throw TypeError("Object iterator must return a key-value pair");m[g=f[0]]=(p=m[g])?le.isArray(p)?[...p,f[1]]:[p,f[1]]:f[1]}x(m,i)}else r!=null&&h(i,r,c);return this}get(r,i){if(r=Xr(r),r){const c=le.findKey(this,r);if(c){const u=this[c];if(!i)return u;if(i===!0)return k1(u);if(le.isFunction(i))return i.call(this,u,c);if(le.isRegExp(i))return i.exec(u);throw new TypeError("parser must be boolean|regexp|function")}}}has(r,i){if(r=Xr(r),r){const c=le.findKey(this,r);return!!(c&&this[c]!==void 0&&(!i||Ru(this,this[c],c,i)))}return!1}delete(r,i){const c=this;let u=!1;function h(x){if(x=Xr(x),x){const m=le.findKey(c,x);m&&(!i||Ru(c,c[m],m,i))&&(delete c[m],u=!0)}}return le.isArray(r)?r.forEach(h):h(r),u}clear(r){const i=Object.keys(this);let c=i.length,u=!1;for(;c--;){const h=i[c];(!r||Ru(this,this[h],h,r,!0))&&(delete this[h],u=!0)}return u}normalize(r){const i=this,c={};return le.forEach(this,(u,h)=>{const x=le.findKey(c,h);if(x){i[x]=Uc(u),delete i[h];return}const m=r?R1(h):String(h).trim();m!==h&&delete i[h],i[m]=Uc(u),c[m]=!0}),this}concat(...r){return this.constructor.concat(this,...r)}toJSON(r){const i=Object.create(null);return le.forEach(this,(c,u)=>{c!=null&&c!==!1&&(i[u]=r&&le.isArray(c)?c.join(", "):c)}),i}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([r,i])=>r+": "+i).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(r){return r instanceof this?r:new this(r)}static concat(r,...i){const c=new this(r);return i.forEach(u=>c.set(u)),c}static accessor(r){const c=(this[r0]=this[r0]={accessors:{}}).accessors,u=this.prototype;function h(x){const m=Xr(x);c[m]||(O1(u,x),c[m]=!0)}return le.isArray(r)?r.forEach(h):h(r),this}};ya.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);le.reduceDescriptors(ya.prototype,({value:s},r)=>{let i=r[0].toUpperCase()+r.slice(1);return{get:()=>s,set(c){this[i]=c}}});le.freezeMethods(ya);function Ou(s,r){const i=this||xi,c=r||i,u=ya.from(c.headers);let h=c.data;return le.forEach(s,function(m){h=m.call(i,h,u.normalize(),r?r.status:void 0)}),u.normalize(),h}function Eg(s){return!!(s&&s.__CANCEL__)}function In(s,r,i){He.call(this,s??"canceled",He.ERR_CANCELED,r,i),this.name="CanceledError"}le.inherits(In,He,{__CANCEL__:!0});function Dg(s,r,i){const c=i.config.validateStatus;!i.status||!c||c(i.status)?s(i):r(new He("Request failed with status code "+i.status,[He.ERR_BAD_REQUEST,He.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))}function z1(s){const r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(s);return r&&r[1]||""}function L1(s,r){s=s||10;const i=new Array(s),c=new Array(s);let u=0,h=0,x;return r=r!==void 0?r:1e3,function(p){const g=Date.now(),f=c[h];x||(x=g),i[u]=p,c[u]=g;let v=h,E=0;for(;v!==u;)E+=i[v++],v=v%s;if(u=(u+1)%s,u===h&&(h=(h+1)%s),g-x<r)return;const S=f&&g-f;return S?Math.round(E*1e3/S):void 0}}function q1(s,r){let i=0,c=1e3/r,u,h;const x=(g,f=Date.now())=>{i=f,u=null,h&&(clearTimeout(h),h=null),s(...g)};return[(...g)=>{const f=Date.now(),v=f-i;v>=c?x(g,f):(u=g,h||(h=setTimeout(()=>{h=null,x(u)},c-v)))},()=>u&&x(u)]}const Pc=(s,r,i=3)=>{let c=0;const u=L1(50,250);return q1(h=>{const x=h.loaded,m=h.lengthComputable?h.total:void 0,p=x-c,g=u(p),f=x<=m;c=x;const v={loaded:x,total:m,progress:m?x/m:void 0,bytes:p,rate:g||void 0,estimated:g&&m&&f?(m-x)/g:void 0,event:h,lengthComputable:m!=null,[r?"download":"upload"]:!0};s(v)},i)},i0=(s,r)=>{const i=s!=null;return[c=>r[0]({lengthComputable:i,total:s,loaded:c}),r[1]]},c0=s=>(...r)=>le.asap(()=>s(...r)),U1=sa.hasStandardBrowserEnv?((s,r)=>i=>(i=new URL(i,sa.origin),s.protocol===i.protocol&&s.host===i.host&&(r||s.port===i.port)))(new URL(sa.origin),sa.navigator&&/(msie|trident)/i.test(sa.navigator.userAgent)):()=>!0,F1=sa.hasStandardBrowserEnv?{write(s,r,i,c,u,h,x){if(typeof document>"u")return;const m=[`${s}=${encodeURIComponent(r)}`];le.isNumber(i)&&m.push(`expires=${new Date(i).toUTCString()}`),le.isString(c)&&m.push(`path=${c}`),le.isString(u)&&m.push(`domain=${u}`),h===!0&&m.push("secure"),le.isString(x)&&m.push(`SameSite=${x}`),document.cookie=m.join("; ")},read(s){if(typeof document>"u")return null;const r=document.cookie.match(new RegExp("(?:^|; )"+s+"=([^;]*)"));return r?decodeURIComponent(r[1]):null},remove(s){this.write(s,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function H1(s){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(s)}function B1(s,r){return r?s.replace(/\/?\/$/,"")+"/"+r.replace(/^\/+/,""):s}function Tg(s,r,i){let c=!H1(r);return s&&(c||i==!1)?B1(s,r):r}const o0=s=>s instanceof ya?{...s}:s;function Yl(s,r){r=r||{};const i={};function c(g,f,v,E){return le.isPlainObject(g)&&le.isPlainObject(f)?le.merge.call({caseless:E},g,f):le.isPlainObject(f)?le.merge({},f):le.isArray(f)?f.slice():f}function u(g,f,v,E){if(le.isUndefined(f)){if(!le.isUndefined(g))return c(void 0,g,v,E)}else return c(g,f,v,E)}function h(g,f){if(!le.isUndefined(f))return c(void 0,f)}function x(g,f){if(le.isUndefined(f)){if(!le.isUndefined(g))return c(void 0,g)}else return c(void 0,f)}function m(g,f,v){if(v in r)return c(g,f);if(v in s)return c(void 0,g)}const p={url:h,method:h,data:h,baseURL:x,transformRequest:x,transformResponse:x,paramsSerializer:x,timeout:x,timeoutMessage:x,withCredentials:x,withXSRFToken:x,adapter:x,responseType:x,xsrfCookieName:x,xsrfHeaderName:x,onUploadProgress:x,onDownloadProgress:x,decompress:x,maxContentLength:x,maxBodyLength:x,beforeRedirect:x,transport:x,httpAgent:x,httpsAgent:x,cancelToken:x,socketPath:x,responseEncoding:x,validateStatus:m,headers:(g,f,v)=>u(o0(g),o0(f),v,!0)};return le.forEach(Object.keys({...s,...r}),function(f){const v=p[f]||u,E=v(s[f],r[f],f);le.isUndefined(E)&&v!==m||(i[f]=E)}),i}const Mg=s=>{const r=Yl({},s);let{data:i,withXSRFToken:c,xsrfHeaderName:u,xsrfCookieName:h,headers:x,auth:m}=r;if(r.headers=x=ya.from(x),r.url=wg(Tg(r.baseURL,r.url,r.allowAbsoluteUrls),s.params,s.paramsSerializer),m&&x.set("Authorization","Basic "+btoa((m.username||"")+":"+(m.password?unescape(encodeURIComponent(m.password)):""))),le.isFormData(i)){if(sa.hasStandardBrowserEnv||sa.hasStandardBrowserWebWorkerEnv)x.setContentType(void 0);else if(le.isFunction(i.getHeaders)){const p=i.getHeaders(),g=["content-type","content-length"];Object.entries(p).forEach(([f,v])=>{g.includes(f.toLowerCase())&&x.set(f,v)})}}if(sa.hasStandardBrowserEnv&&(c&&le.isFunction(c)&&(c=c(r)),c||c!==!1&&U1(r.url))){const p=u&&h&&F1.read(h);p&&x.set(u,p)}return r},$1=typeof XMLHttpRequest<"u",V1=$1&&function(s){return new Promise(function(i,c){const u=Mg(s);let h=u.data;const x=ya.from(u.headers).normalize();let{responseType:m,onUploadProgress:p,onDownloadProgress:g}=u,f,v,E,S,w;function C(){S&&S(),w&&w(),u.cancelToken&&u.cancelToken.unsubscribe(f),u.signal&&u.signal.removeEventListener("abort",f)}let j=new XMLHttpRequest;j.open(u.method.toUpperCase(),u.url,!0),j.timeout=u.timeout;function _(){if(!j)return;const z=ya.from("getAllResponseHeaders"in j&&j.getAllResponseHeaders()),U={data:!m||m==="text"||m==="json"?j.responseText:j.response,status:j.status,statusText:j.statusText,headers:z,config:s,request:j};Dg(function(T){i(T),C()},function(T){c(T),C()},U),j=null}"onloadend"in j?j.onloadend=_:j.onreadystatechange=function(){!j||j.readyState!==4||j.status===0&&!(j.responseURL&&j.responseURL.indexOf("file:")===0)||setTimeout(_)},j.onabort=function(){j&&(c(new He("Request aborted",He.ECONNABORTED,s,j)),j=null)},j.onerror=function(k){const U=k&&k.message?k.message:"Network Error",A=new He(U,He.ERR_NETWORK,s,j);A.event=k||null,c(A),j=null},j.ontimeout=function(){let k=u.timeout?"timeout of "+u.timeout+"ms exceeded":"timeout exceeded";const U=u.transitional||Cg;u.timeoutErrorMessage&&(k=u.timeoutErrorMessage),c(new He(k,U.clarifyTimeoutError?He.ETIMEDOUT:He.ECONNABORTED,s,j)),j=null},h===void 0&&x.setContentType(null),"setRequestHeader"in j&&le.forEach(x.toJSON(),function(k,U){j.setRequestHeader(U,k)}),le.isUndefined(u.withCredentials)||(j.withCredentials=!!u.withCredentials),m&&m!=="json"&&(j.responseType=u.responseType),g&&([E,w]=Pc(g,!0),j.addEventListener("progress",E)),p&&j.upload&&([v,S]=Pc(p),j.upload.addEventListener("progress",v),j.upload.addEventListener("loadend",S)),(u.cancelToken||u.signal)&&(f=z=>{j&&(c(!z||z.type?new In(null,s,j):z),j.abort(),j=null)},u.cancelToken&&u.cancelToken.subscribe(f),u.signal&&(u.signal.aborted?f():u.signal.addEventListener("abort",f)));const N=z1(u.url);if(N&&sa.protocols.indexOf(N)===-1){c(new He("Unsupported protocol "+N+":",He.ERR_BAD_REQUEST,s));return}j.send(h||null)})},Q1=(s,r)=>{const{length:i}=s=s?s.filter(Boolean):[];if(r||i){let c=new AbortController,u;const h=function(g){if(!u){u=!0,m();const f=g instanceof Error?g:this.reason;c.abort(f instanceof He?f:new In(f instanceof Error?f.message:f))}};let x=r&&setTimeout(()=>{x=null,h(new He(`timeout ${r} of ms exceeded`,He.ETIMEDOUT))},r);const m=()=>{s&&(x&&clearTimeout(x),x=null,s.forEach(g=>{g.unsubscribe?g.unsubscribe(h):g.removeEventListener("abort",h)}),s=null)};s.forEach(g=>g.addEventListener("abort",h));const{signal:p}=c;return p.unsubscribe=()=>le.asap(m),p}},G1=function*(s,r){let i=s.byteLength;if(i<r){yield s;return}let c=0,u;for(;c<i;)u=c+r,yield s.slice(c,u),c=u},P1=async function*(s,r){for await(const i of Y1(s))yield*G1(i,r)},Y1=async function*(s){if(s[Symbol.asyncIterator]){yield*s;return}const r=s.getReader();try{for(;;){const{done:i,value:c}=await r.read();if(i)break;yield c}}finally{await r.cancel()}},d0=(s,r,i,c)=>{const u=P1(s,r);let h=0,x,m=p=>{x||(x=!0,c&&c(p))};return new ReadableStream({async pull(p){try{const{done:g,value:f}=await u.next();if(g){m(),p.close();return}let v=f.byteLength;if(i){let E=h+=v;i(E)}p.enqueue(new Uint8Array(f))}catch(g){throw m(g),g}},cancel(p){return m(p),u.return()}},{highWaterMark:2})},u0=64*1024,{isFunction:kc}=le,X1=(({Request:s,Response:r})=>({Request:s,Response:r}))(le.global),{ReadableStream:m0,TextEncoder:h0}=le.global,x0=(s,...r)=>{try{return!!s(...r)}catch{return!1}},K1=s=>{s=le.merge.call({skipUndefined:!0},X1,s);const{fetch:r,Request:i,Response:c}=s,u=r?kc(r):typeof fetch=="function",h=kc(i),x=kc(c);if(!u)return!1;const m=u&&kc(m0),p=u&&(typeof h0=="function"?(w=>C=>w.encode(C))(new h0):async w=>new Uint8Array(await new i(w).arrayBuffer())),g=h&&m&&x0(()=>{let w=!1;const C=new i(sa.origin,{body:new m0,method:"POST",get duplex(){return w=!0,"half"}}).headers.has("Content-Type");return w&&!C}),f=x&&m&&x0(()=>le.isReadableStream(new c("").body)),v={stream:f&&(w=>w.body)};u&&["text","arrayBuffer","blob","formData","stream"].forEach(w=>{!v[w]&&(v[w]=(C,j)=>{let _=C&&C[w];if(_)return _.call(C);throw new He(`Response type '${w}' is not supported`,He.ERR_NOT_SUPPORT,j)})});const E=async w=>{if(w==null)return 0;if(le.isBlob(w))return w.size;if(le.isSpecCompliantForm(w))return(await new i(sa.origin,{method:"POST",body:w}).arrayBuffer()).byteLength;if(le.isArrayBufferView(w)||le.isArrayBuffer(w))return w.byteLength;if(le.isURLSearchParams(w)&&(w=w+""),le.isString(w))return(await p(w)).byteLength},S=async(w,C)=>{const j=le.toFiniteNumber(w.getContentLength());return j??E(C)};return async w=>{let{url:C,method:j,data:_,signal:N,cancelToken:z,timeout:k,onDownloadProgress:U,onUploadProgress:A,responseType:T,headers:O,withCredentials:ee="same-origin",fetchOptions:B}=Mg(w),ye=r||fetch;T=T?(T+"").toLowerCase():"text";let F=Q1([N,z&&z.toAbortSignal()],k),te=null;const je=F&&F.unsubscribe&&(()=>{F.unsubscribe()});let xe;try{if(A&&g&&j!=="get"&&j!=="head"&&(xe=await S(O,_))!==0){let M=new i(C,{method:"POST",body:_,duplex:"half"}),V;if(le.isFormData(_)&&(V=M.headers.get("content-type"))&&O.setContentType(V),M.body){const[ae,W]=i0(xe,Pc(c0(A)));_=d0(M.body,u0,ae,W)}}le.isString(ee)||(ee=ee?"include":"omit");const $=h&&"credentials"in i.prototype,pe={...B,signal:F,method:j.toUpperCase(),headers:O.normalize().toJSON(),body:_,duplex:"half",credentials:$?ee:void 0};te=h&&new i(C,pe);let G=await(h?ye(te,B):ye(C,pe));const Y=f&&(T==="stream"||T==="response");if(f&&(U||Y&&je)){const M={};["status","statusText","headers"].forEach(R=>{M[R]=G[R]});const V=le.toFiniteNumber(G.headers.get("content-length")),[ae,W]=U&&i0(V,Pc(c0(U),!0))||[];G=new c(d0(G.body,u0,ae,()=>{W&&W(),je&&je()}),M)}T=T||"text";let me=await v[le.findKey(v,T)||"text"](G,w);return!Y&&je&&je(),await new Promise((M,V)=>{Dg(M,V,{data:me,headers:ya.from(G.headers),status:G.status,statusText:G.statusText,config:w,request:te})})}catch($){throw je&&je(),$&&$.name==="TypeError"&&/Load failed|fetch/i.test($.message)?Object.assign(new He("Network Error",He.ERR_NETWORK,w,te),{cause:$.cause||$}):He.from($,$&&$.code,w,te)}}},Z1=new Map,kg=s=>{let r=s&&s.env||{};const{fetch:i,Request:c,Response:u}=r,h=[c,u,i];let x=h.length,m=x,p,g,f=Z1;for(;m--;)p=h[m],g=f.get(p),g===void 0&&f.set(p,g=m?new Map:K1(r)),f=g;return g};kg();const vm={http:h1,xhr:V1,fetch:{get:kg}};le.forEach(vm,(s,r)=>{if(s){try{Object.defineProperty(s,"name",{value:r})}catch{}Object.defineProperty(s,"adapterName",{value:r})}});const p0=s=>`- ${s}`,J1=s=>le.isFunction(s)||s===null||s===!1;function I1(s,r){s=le.isArray(s)?s:[s];const{length:i}=s;let c,u;const h={};for(let x=0;x<i;x++){c=s[x];let m;if(u=c,!J1(c)&&(u=vm[(m=String(c)).toLowerCase()],u===void 0))throw new He(`Unknown adapter '${m}'`);if(u&&(le.isFunction(u)||(u=u.get(r))))break;h[m||"#"+x]=u}if(!u){const x=Object.entries(h).map(([p,g])=>`adapter ${p} `+(g===!1?"is not supported by the environment":"is not available in the build"));let m=i?x.length>1?`since :
`+x.map(p0).join(`
`):" "+p0(x[0]):"as no adapter specified";throw new He("There is no suitable adapter to dispatch the request "+m,"ERR_NOT_SUPPORT")}return u}const Ag={getAdapter:I1,adapters:vm};function zu(s){if(s.cancelToken&&s.cancelToken.throwIfRequested(),s.signal&&s.signal.aborted)throw new In(null,s)}function f0(s){return zu(s),s.headers=ya.from(s.headers),s.data=Ou.call(s,s.transformRequest),["post","put","patch"].indexOf(s.method)!==-1&&s.headers.setContentType("application/x-www-form-urlencoded",!1),Ag.getAdapter(s.adapter||xi.adapter,s)(s).then(function(c){return zu(s),c.data=Ou.call(s,s.transformResponse,c),c.headers=ya.from(c.headers),c},function(c){return Eg(c)||(zu(s),c&&c.response&&(c.response.data=Ou.call(s,s.transformResponse,c.response),c.response.headers=ya.from(c.response.headers))),Promise.reject(c)})}const Rg="1.13.2",Wc={};["object","boolean","number","function","string","symbol"].forEach((s,r)=>{Wc[s]=function(c){return typeof c===s||"a"+(r<1?"n ":" ")+s}});const g0={};Wc.transitional=function(r,i,c){function u(h,x){return"[Axios v"+Rg+"] Transitional option '"+h+"'"+x+(c?". "+c:"")}return(h,x,m)=>{if(r===!1)throw new He(u(x," has been removed"+(i?" in "+i:"")),He.ERR_DEPRECATED);return i&&!g0[x]&&(g0[x]=!0,console.warn(u(x," has been deprecated since v"+i+" and will be removed in the near future"))),r?r(h,x,m):!0}};Wc.spelling=function(r){return(i,c)=>(console.warn(`${c} is likely a misspelling of ${r}`),!0)};function W1(s,r,i){if(typeof s!="object")throw new He("options must be an object",He.ERR_BAD_OPTION_VALUE);const c=Object.keys(s);let u=c.length;for(;u-- >0;){const h=c[u],x=r[h];if(x){const m=s[h],p=m===void 0||x(m,h,s);if(p!==!0)throw new He("option "+h+" must be "+p,He.ERR_BAD_OPTION_VALUE);continue}if(i!==!0)throw new He("Unknown option "+h,He.ERR_BAD_OPTION)}}const Fc={assertOptions:W1,validators:Wc},ps=Fc.validators;let Ql=class{constructor(r){this.defaults=r||{},this.interceptors={request:new n0,response:new n0}}async request(r,i){try{return await this._request(r,i)}catch(c){if(c instanceof Error){let u={};Error.captureStackTrace?Error.captureStackTrace(u):u=new Error;const h=u.stack?u.stack.replace(/^.+\n/,""):"";try{c.stack?h&&!String(c.stack).endsWith(h.replace(/^.+\n.+\n/,""))&&(c.stack+=`
`+h):c.stack=h}catch{}}throw c}}_request(r,i){typeof r=="string"?(i=i||{},i.url=r):i=r||{},i=Yl(this.defaults,i);const{transitional:c,paramsSerializer:u,headers:h}=i;c!==void 0&&Fc.assertOptions(c,{silentJSONParsing:ps.transitional(ps.boolean),forcedJSONParsing:ps.transitional(ps.boolean),clarifyTimeoutError:ps.transitional(ps.boolean)},!1),u!=null&&(le.isFunction(u)?i.paramsSerializer={serialize:u}:Fc.assertOptions(u,{encode:ps.function,serialize:ps.function},!0)),i.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?i.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:i.allowAbsoluteUrls=!0),Fc.assertOptions(i,{baseUrl:ps.spelling("baseURL"),withXsrfToken:ps.spelling("withXSRFToken")},!0),i.method=(i.method||this.defaults.method||"get").toLowerCase();let x=h&&le.merge(h.common,h[i.method]);h&&le.forEach(["delete","get","head","post","put","patch","common"],w=>{delete h[w]}),i.headers=ya.concat(x,h);const m=[];let p=!0;this.interceptors.request.forEach(function(C){typeof C.runWhen=="function"&&C.runWhen(i)===!1||(p=p&&C.synchronous,m.unshift(C.fulfilled,C.rejected))});const g=[];this.interceptors.response.forEach(function(C){g.push(C.fulfilled,C.rejected)});let f,v=0,E;if(!p){const w=[f0.bind(this),void 0];for(w.unshift(...m),w.push(...g),E=w.length,f=Promise.resolve(i);v<E;)f=f.then(w[v++],w[v++]);return f}E=m.length;let S=i;for(;v<E;){const w=m[v++],C=m[v++];try{S=w(S)}catch(j){C.call(this,j);break}}try{f=f0.call(this,S)}catch(w){return Promise.reject(w)}for(v=0,E=g.length;v<E;)f=f.then(g[v++],g[v++]);return f}getUri(r){r=Yl(this.defaults,r);const i=Tg(r.baseURL,r.url,r.allowAbsoluteUrls);return wg(i,r.params,r.paramsSerializer)}};le.forEach(["delete","get","head","options"],function(r){Ql.prototype[r]=function(i,c){return this.request(Yl(c||{},{method:r,url:i,data:(c||{}).data}))}});le.forEach(["post","put","patch"],function(r){function i(c){return function(h,x,m){return this.request(Yl(m||{},{method:r,headers:c?{"Content-Type":"multipart/form-data"}:{},url:h,data:x}))}}Ql.prototype[r]=i(),Ql.prototype[r+"Form"]=i(!0)});let e2=class Og{constructor(r){if(typeof r!="function")throw new TypeError("executor must be a function.");let i;this.promise=new Promise(function(h){i=h});const c=this;this.promise.then(u=>{if(!c._listeners)return;let h=c._listeners.length;for(;h-- >0;)c._listeners[h](u);c._listeners=null}),this.promise.then=u=>{let h;const x=new Promise(m=>{c.subscribe(m),h=m}).then(u);return x.cancel=function(){c.unsubscribe(h)},x},r(function(h,x,m){c.reason||(c.reason=new In(h,x,m),i(c.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]}unsubscribe(r){if(!this._listeners)return;const i=this._listeners.indexOf(r);i!==-1&&this._listeners.splice(i,1)}toAbortSignal(){const r=new AbortController,i=c=>{r.abort(c)};return this.subscribe(i),r.signal.unsubscribe=()=>this.unsubscribe(i),r.signal}static source(){let r;return{token:new Og(function(u){r=u}),cancel:r}}};function t2(s){return function(i){return s.apply(null,i)}}function a2(s){return le.isObject(s)&&s.isAxiosError===!0}const Wu={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Wu).forEach(([s,r])=>{Wu[r]=s});function zg(s){const r=new Ql(s),i=mg(Ql.prototype.request,r);return le.extend(i,Ql.prototype,r,{allOwnKeys:!0}),le.extend(i,r,null,{allOwnKeys:!0}),i.create=function(u){return zg(Yl(s,u))},i}const Rt=zg(xi);Rt.Axios=Ql;Rt.CanceledError=In;Rt.CancelToken=e2;Rt.isCancel=Eg;Rt.VERSION=Rg;Rt.toFormData=Ic;Rt.AxiosError=He;Rt.Cancel=Rt.CanceledError;Rt.all=function(r){return Promise.all(r)};Rt.spread=t2;Rt.isAxiosError=a2;Rt.mergeConfig=Yl;Rt.AxiosHeaders=ya;Rt.formToJSON=s=>Sg(le.isHTMLForm(s)?new FormData(s):s);Rt.getAdapter=Ag.getAdapter;Rt.HttpStatusCode=Wu;Rt.default=Rt;const{Axios:k5,AxiosError:A5,CanceledError:R5,isCancel:O5,CancelToken:z5,VERSION:L5,all:q5,Cancel:U5,isAxiosError:F5,spread:H5,toFormData:B5,AxiosHeaders:$5,HttpStatusCode:V5,formToJSON:Q5,getAdapter:G5,mergeConfig:P5}=Rt,Z=Rt.create({baseURL:"/api/v1",headers:{"Content-Type":"application/json"}});Z.interceptors.request.use(s=>{const r=localStorage.getItem("token");return r&&(s.headers.Authorization=`Bearer ${r}`),s});Z.interceptors.response.use(s=>s,s=>(s.response?.status===401&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login"),Promise.reject(s)));const Vn={login:(s,r)=>Z.post("/auth/login",{email:s,password:r}),logout:()=>Z.delete("/auth/logout"),me:()=>Z.get("/auth/me"),updateProfile:s=>Z.patch("/auth/profile",{user:s}),changePassword:s=>Z.patch("/auth/password",s),forceChangePassword:s=>Z.post("/auth/password/force_change",s)},Hn={list:()=>Z.get("/auth/signatures"),get:s=>Z.get(`/auth/signatures/${s}`),create:s=>Z.post("/auth/signatures",{signature:s}),update:(s,r)=>Z.patch(`/auth/signatures/${s}`,{signature:r}),delete:s=>Z.delete(`/auth/signatures/${s}`),setDefault:s=>Z.post(`/auth/signatures/${s}/set_default`),toggleActive:s=>Z.post(`/auth/signatures/${s}/toggle_active`),getFonts:()=>Z.get("/auth/signatures/fonts")},Pa={list:s=>Z.get("/hr/vacations",{params:s}),get:s=>Z.get(`/hr/vacations/${s}`),create:s=>Z.post("/hr/vacations",{vacation:s}),update:(s,r)=>Z.patch(`/hr/vacations/${s}`,{vacation:r}),delete:s=>Z.delete(`/hr/vacations/${s}`),submit:s=>Z.post(`/hr/vacations/${s}/submit`),cancel:(s,r)=>Z.post(`/hr/vacations/${s}/cancel`,{reason:r}),generateDocument:s=>Z.post(`/hr/vacations/${s}/generate_document`),signDocument:s=>Z.post(`/hr/vacations/${s}/sign_document`),downloadDocument:s=>Z.get(`/hr/vacations/${s}/download_document`,{responseType:"blob"})},Qa={list:s=>Z.get("/hr/certifications",{params:s}),get:s=>Z.get(`/hr/certifications/${s}`),create:s=>Z.post("/hr/certifications",{certification:s}),update:(s,r)=>Z.patch(`/hr/certifications/${s}`,{certification:r}),cancel:s=>Z.post(`/hr/certifications/${s}/cancel`),delete:s=>Z.delete(`/hr/certifications/${s}`),generateDocument:s=>Z.post(`/hr/certifications/${s}/generate_document`),signDocument:s=>Z.post(`/hr/certifications/${s}/sign_document`),downloadDocument:s=>Z.get(`/hr/certifications/${s}/download_document`,{responseType:"blob"}),getAvailableTypes:()=>Z.get("/hr/certifications/available_types")},$n={list:s=>Z.get("/hr/approvals",{params:s}),get:s=>Z.get(`/hr/approvals/${s}`),approve:(s,r)=>Z.post(`/hr/approvals/${s}/approve`,r),reject:(s,r)=>Z.post(`/hr/approvals/${s}/reject`,{reason:r})},Ol={list:s=>Z.get("/hr/employees",{params:s}),get:s=>Z.get(`/hr/employees/${s}`),create:s=>Z.post("/hr/employees",{employee:s}),update:(s,r)=>Z.patch(`/hr/employees/${s}`,{employee:r}),getSubordinates:s=>Z.get(`/hr/employees/${s}/subordinates`),getVacationBalance:s=>Z.get(`/hr/employees/${s}/vacation_balance`),createAccount:s=>Z.post(`/hr/employees/${s}/create_account`),generateDocument:(s,r)=>Z.post(`/hr/employees/${s}/generate_document`,{template_id:r})},s2={getStats:()=>Z.get("/hr/dashboard")},Yt={list:s=>Z.get("/documents",{params:s}),get:s=>Z.get(`/documents/${s}`),download:s=>Z.get(`/documents/${s}/download`,{responseType:"blob"}),delete:s=>Z.delete(`/documents/${s}`),pendingSignatures:()=>Z.get("/documents/pending_signatures"),sign:s=>Z.post(`/documents/${s}/sign`)},Fl={list:s=>Z.get("/folders",{params:s}),get:s=>Z.get(`/folders/${s}`),create:s=>Z.post("/folders",{folder:s}),update:(s,r)=>Z.patch(`/folders/${s}`,{folder:r}),delete:s=>Z.delete(`/folders/${s}`),addDocument:(s,r)=>Z.post(`/folders/${s}/documents`,{document_id:r}),removeDocument:(s,r)=>Z.delete(`/folders/${s}/documents/${r}`)},Hl={list:s=>Z.get("/admin/signatory_types",{params:s}),get:s=>Z.get(`/admin/signatory_types/${s}`),create:s=>Z.post("/admin/signatory_types",{signatory_type:s}),update:(s,r)=>Z.patch(`/admin/signatory_types/${s}`,{signatory_type:r}),delete:s=>Z.delete(`/admin/signatory_types/${s}`),toggleActive:s=>Z.post(`/admin/signatory_types/${s}/toggle_active`),seedSystem:()=>Z.post("/admin/signatory_types/seed_system"),reorder:s=>Z.post("/admin/signatory_types/reorder",{ids:s})},Ya={list:s=>Z.get("/admin/variable_mappings",{params:s}),grouped:()=>Z.get("/admin/variable_mappings/grouped"),get:s=>Z.get(`/admin/variable_mappings/${s}`),create:s=>Z.post("/admin/variable_mappings",{mapping:s}),update:(s,r)=>Z.patch(`/admin/variable_mappings/${s}`,{mapping:r}),delete:s=>Z.delete(`/admin/variable_mappings/${s}`),toggleActive:s=>Z.post(`/admin/variable_mappings/${s}/toggle_active`),seedSystem:()=>Z.post("/admin/variable_mappings/seed_system"),reorder:s=>Z.post("/admin/variable_mappings/reorder",{ids:s}),pendingVariables:s=>Z.get("/admin/variable_mappings/pending_variables",{params:s}),autoAssign:s=>Z.post("/admin/variable_mappings/auto_assign",s),createAndAssign:s=>Z.post("/admin/variable_mappings/create_and_assign",s),aliases:()=>Z.get("/admin/variable_mappings/aliases"),addAlias:(s,r)=>Z.post(`/admin/variable_mappings/${s}/add_alias`,{alias_name:r}),removeAlias:(s,r)=>Z.post(`/admin/variable_mappings/${s}/remove_alias`,{alias_name:r})},si={list:s=>Z.get("/templates",{params:s}),get:s=>Z.get(`/templates/${s}`),getThirdPartyRequirements:s=>Z.get(`/templates/${s}/third_party_requirements`)},jt={list:s=>Z.get("/admin/templates",{params:s}),get:s=>Z.get(`/admin/templates/${s}`),create:s=>Z.post("/admin/templates",s),update:(s,r)=>Z.patch(`/admin/templates/${s}`,r),delete:s=>Z.delete(`/admin/templates/${s}`),activate:s=>Z.post(`/admin/templates/${s}/activate`),archive:s=>Z.post(`/admin/templates/${s}/archive`),duplicate:s=>Z.post(`/admin/templates/${s}/duplicate`),upload:(s,r)=>{const i=new FormData;return i.append("file",r),Z.post(`/admin/templates/${s}/upload`,i,{headers:{"Content-Type":"multipart/form-data"}})},getCategories:()=>Z.get("/admin/templates/categories"),getVariableMappings:()=>Z.get("/admin/templates/variable_mappings"),reassignMappings:s=>Z.post(`/admin/templates/${s}/reassign_mappings`),download:s=>Z.get(`/admin/templates/${s}/download`,{responseType:"blob"}),preview:s=>Z.get(`/admin/templates/${s}/preview`,{responseType:"blob"}),listSignatories:s=>Z.get(`/admin/templates/${s}/signatories`),createSignatory:(s,r)=>Z.post(`/admin/templates/${s}/signatories`,{signatory:r}),updateSignatory:(s,r,i)=>Z.patch(`/admin/templates/${s}/signatories/${r}`,{signatory:i}),deleteSignatory:(s,r)=>Z.delete(`/admin/templates/${s}/signatories/${r}`),reorderSignatories:(s,r)=>Z.post(`/admin/templates/${s}/signatories/reorder`,{ids:r}),getThirdPartyRequirements:s=>Z.get(`/admin/templates/${s}/third_party_requirements`)},zl={list:s=>Z.get("/legal/third_party_types",{params:s}),get:s=>Z.get(`/legal/third_party_types/${s}`),create:s=>Z.post("/legal/third_party_types",{third_party_type:s}),update:(s,r)=>Z.patch(`/legal/third_party_types/${s}`,{third_party_type:r}),delete:s=>Z.delete(`/legal/third_party_types/${s}`),toggleActive:s=>Z.post(`/legal/third_party_types/${s}/toggle_active`)},gs={list:s=>Z.get("/legal/third_parties",{params:s}),get:s=>Z.get(`/legal/third_parties/${s}`),create:s=>Z.post("/legal/third_parties",{third_party:s}),update:(s,r)=>Z.patch(`/legal/third_parties/${s}`,{third_party:r}),delete:s=>Z.delete(`/legal/third_parties/${s}`),activate:s=>Z.post(`/legal/third_parties/${s}/activate`),deactivate:s=>Z.post(`/legal/third_parties/${s}/deactivate`),block:(s,r)=>Z.post(`/legal/third_parties/${s}/block`,{reason:r})},fa={list:s=>Z.get("/legal/contracts",{params:s}),get:s=>Z.get(`/legal/contracts/${s}`),create:s=>Z.post("/legal/contracts",{contract:s}),update:(s,r)=>Z.patch(`/legal/contracts/${s}`,{contract:r}),delete:s=>Z.delete(`/legal/contracts/${s}`),submit:s=>Z.post(`/legal/contracts/${s}/submit`),activate:s=>Z.post(`/legal/contracts/${s}/activate`),terminate:(s,r)=>Z.post(`/legal/contracts/${s}/terminate`,{reason:r}),cancel:(s,r)=>Z.post(`/legal/contracts/${s}/cancel`,{reason:r}),archive:s=>Z.post(`/legal/contracts/${s}/archive`),unarchive:s=>Z.post(`/legal/contracts/${s}/unarchive`),generateDocument:(s,r)=>Z.post(`/legal/contracts/${s}/generate_document`,{template_id:r}),signDocument:s=>Z.post(`/legal/contracts/${s}/sign_document`),downloadDocument:s=>Z.get(`/legal/contracts/${s}/download_document`,{responseType:"blob"}),validateTemplate:s=>Z.post("/legal/contracts/validate_template",s)},Kr={list:s=>Z.get("/legal/contract_approvals",{params:s}),get:s=>Z.get(`/legal/contract_approvals/${s}`),approve:(s,r)=>Z.post(`/legal/contract_approvals/${s}/approve`,{notes:r}),reject:(s,r)=>Z.post(`/legal/contract_approvals/${s}/reject`,{reason:r}),sign:(s,r)=>Z.post(`/legal/contract_approvals/${s}/sign`,{signature_position:r})},y0={get:()=>Z.get("/admin/settings"),update:s=>Z.patch("/admin/settings",{settings:s})},Zr={list:s=>Z.get("/admin/departments",{params:s}),get:s=>Z.get(`/admin/departments/${s}`),create:s=>Z.post("/admin/departments",{department:s}),update:(s,r)=>Z.patch(`/admin/departments/${s}`,{department:r}),delete:s=>Z.delete(`/admin/departments/${s}`),toggleActive:s=>Z.post(`/admin/departments/${s}/toggle_active`)},xl={list:s=>Z.get("/admin/users",{params:s}),get:s=>Z.get(`/admin/users/${s}`),create:s=>Z.post("/admin/users",{user:s}),update:(s,r)=>Z.patch(`/admin/users/${s}`,{user:r}),delete:s=>Z.delete(`/admin/users/${s}`),toggleActive:s=>Z.post(`/admin/users/${s}/toggle_active`),assignRoles:(s,r)=>Z.post(`/admin/users/${s}/assign_roles`,{role_names:r}),getRoles:()=>Z.get("/admin/users/roles"),getStats:()=>Z.get("/admin/users/stats")},Bn={VIEWER:1,EMPLOYEE:2,HR:3,LEGAL:4,ADMIN:5},Ir={1:"Viewer",2:"Employee",3:"HR",4:"Legal",5:"Admin"},Lg=b.createContext(null);function l2({children:s}){const[r,i]=b.useState(null),[c,u]=b.useState(!0),[h,x]=b.useState(!1);b.useEffect(()=>{const B=localStorage.getItem("user"),ye=localStorage.getItem("token");B&&ye?(i(JSON.parse(B)),Vn.me().then(F=>{i(F.data.data),localStorage.setItem("user",JSON.stringify(F.data.data))}).catch(()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),i(null)}).finally(()=>u(!1))):u(!1)},[]);const m=b.useCallback(async(B,ye)=>{const F=await Vn.login(B,ye),{data:te,token:je}=F.data;return localStorage.setItem("token",je),localStorage.setItem("user",JSON.stringify(te)),i(te),te},[]),p=b.useCallback(async()=>{try{await Vn.logout()}catch{}localStorage.removeItem("token"),localStorage.removeItem("user"),i(null)},[]),g=b.useCallback(B=>!r?.roles||h&&B!=="employee"?!1:r.roles.includes(B)||r.roles.includes("admin"),[r,h]),f=b.useCallback(B=>!r?.permissions||h?!1:r.permissions.includes("*")?!0:r.permissions.includes(B),[r,h]),v=h?Bn.EMPLOYEE:r?.permission_level||0,E=b.useCallback(B=>h?Bn.EMPLOYEE>=B:(r?.permission_level||0)>=B,[r,h]),S=b.useCallback(B=>h?Bn.EMPLOYEE<=B:(r?.permission_level||0)<=B,[r,h]),w=b.useCallback(()=>{const B=h?Bn.EMPLOYEE:r?.permission_level||0;return Ir[B]||"None"},[r,h]),C=r?.roles?.includes("admin"),j=r?.is_hr||r?.roles?.includes("hr")||r?.roles?.includes("hr_manager"),_=r?.is_supervisor||!1,N=C||j||_,z=h?!1:C,k=h?!1:j,U=h?!1:_,A=r?.must_change_password||!1,T=b.useCallback(()=>{x(B=>!B)},[]),O=b.useCallback(B=>{i(B),localStorage.setItem("user",JSON.stringify(B))},[]),ee={user:r,loading:c,login:m,logout:p,hasRole:g,hasPermission:f,isAdmin:z,isHR:k,isSupervisor:U,isAuthenticated:!!r,mustChangePassword:A,updateUser:O,employeeMode:h,toggleEmployeeMode:T,hasElevatedRole:N,permissionLevel:v,hasAtLeastLevel:E,hasAtMostLevel:S,getLevelName:w,PERMISSION_LEVELS:Bn};return e.jsx(Lg.Provider,{value:ee,children:s})}function Ra(){const s=b.useContext(Lg);if(!s)throw new Error("useAuth must be used within AuthProvider");return s}const n2=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),r2=s=>s.replace(/^([A-Z])|[\s-_]+(\w)/g,(r,i,c)=>c?c.toUpperCase():i.toLowerCase()),b0=s=>{const r=r2(s);return r.charAt(0).toUpperCase()+r.slice(1)},qg=(...s)=>s.filter((r,i,c)=>!!r&&r.trim()!==""&&c.indexOf(r)===i).join(" ").trim(),i2=s=>{for(const r in s)if(r.startsWith("aria-")||r==="role"||r==="title")return!0};var c2={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const o2=b.forwardRef(({color:s="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:c,className:u="",children:h,iconNode:x,...m},p)=>b.createElement("svg",{ref:p,...c2,width:r,height:r,stroke:s,strokeWidth:c?Number(i)*24/Number(r):i,className:qg("lucide",u),...!h&&!i2(m)&&{"aria-hidden":"true"},...m},[...x.map(([g,f])=>b.createElement(g,f)),...Array.isArray(h)?h:[h]]));const ve=(s,r)=>{const i=b.forwardRef(({className:c,...u},h)=>b.createElement(o2,{ref:h,iconNode:r,className:qg(`lucide-${n2(b0(s))}`,`lucide-${s}`,c),...u}));return i.displayName=b0(s),i};const d2=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h2",key:"tvwodi"}],["path",{d:"M20 8v11a2 2 0 0 1-2 2h-2",key:"1gkqxj"}],["path",{d:"m9 15 3-3 3 3",key:"1pd0qc"}],["path",{d:"M12 12v9",key:"192myk"}]],u2=ve("archive-restore",d2);const m2=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],eo=ve("archive",m2);const h2=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],li=ve("arrow-down",h2);const x2=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],p2=ve("arrow-left",x2);const f2=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Ll=ve("arrow-right",f2);const g2=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],to=ve("arrow-up-down",g2);const y2=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],ao=ve("arrow-up",y2);const b2=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],ss=ve("award",b2);const v2=[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],j2=ve("ban",v2);const N2=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],_2=ve("bell",N2);const w2=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Ta=ve("briefcase",w2);const C2=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],Ut=ve("building-2",C2);const S2=[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]],ni=ve("building",S2);const E2=[["path",{d:"M16 14v2.2l1.6 1",key:"fo4ql5"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]],D2=ve("calendar-clock",E2);const T2=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],Ug=ve("calendar-days",T2);const M2=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],St=ve("calendar",M2);const k2=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],A2=ve("camera",k2);const R2=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],O2=ve("chart-column",R2);const z2=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Gn=ve("chevron-down",z2);const L2=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],jm=ve("chevron-left",L2);const q2=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],ys=ve("chevron-right",q2);const U2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],st=ve("circle-alert",U2);const F2=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Be=ve("circle-check-big",F2);const H2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],B2=ve("circle-user",H2);const $2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Ma=ve("circle-x",$2);const V2=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Xt=ve("clock",V2);const Q2=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],G2=ve("copy",Q2);const P2=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],v0=ve("credit-card",P2);const Y2=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],em=ve("database",Y2);const X2=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Bl=ve("dollar-sign",X2);const K2=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],ba=ve("download",K2);const Z2=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],Nm=ve("ellipsis-vertical",Z2);const J2=[["path",{d:"M21 21H8a2 2 0 0 1-1.42-.587l-3.994-3.999a2 2 0 0 1 0-2.828l10-10a2 2 0 0 1 2.829 0l5.999 6a2 2 0 0 1 0 2.828L12.834 21",key:"g5wo59"}],["path",{d:"m5.082 11.09 8.828 8.828",key:"1wx5vj"}]],I2=ve("eraser",J2);const W2=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Fg=ve("external-link",W2);const e_=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],tm=ve("eye-off",e_);const t_=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],At=ve("eye",t_);const a_=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],Wn=ve("file-check",a_);const s_=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],$l=ve("file-down",s_);const l_=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],ri=ve("file-exclamation-point",l_);const n_=[["path",{d:"m18.226 5.226-2.52-2.52A2.4 2.4 0 0 0 14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-.351",key:"1k2beg"}],["path",{d:"M21.378 12.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"2t3380"}],["path",{d:"M8 18h1",key:"13wk12"}]],am=ve("file-pen-line",n_);const r_=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M9 15h6",key:"cctwl0"}],["path",{d:"M12 18v-6",key:"17g6i2"}]],ii=ve("file-plus",r_);const i_=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["circle",{cx:"11.5",cy:"14.5",r:"2.5",key:"1bq0ko"}],["path",{d:"M13.3 16.3 15 18",key:"2quom7"}]],Hc=ve("file-search",i_);const c_=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Oe=ve("file-text",c_);const o_=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],d_=ve("folder-open",o_);const u_=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],j0=ve("folder-plus",u_);const m_=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],Hg=ve("folder",m_);const h_=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],_m=ve("funnel",h_);const x_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],p_=ve("globe",x_);const f_=[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]],g_=ve("handshake",f_);const y_=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],N0=ve("history",y_);const b_=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],so=ve("house",b_);const v_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],j_=ve("info",v_);const N_=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],wm=ve("key",N_);const __=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Vl=ve("loader-circle",__);const w_=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Xl=ve("lock",w_);const C_=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],S_=ve("log-out",C_);const E_=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],lo=ve("mail",E_);const D_=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Wr=ve("map-pin",D_);const T_=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],M_=ve("menu",T_);const k_=[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]],A_=ve("move",k_);const R_=[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]],O_=ve("network",R_);const z_=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],yt=ve("pen-tool",z_);const L_=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],ns=ve("pen",L_);const q_=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],Cm=ve("pencil",q_);const U_=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],_0=ve("phone",U_);const F_=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ke=ve("plus",F_);const H_=[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]],B_=ve("power",H_);const $_=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],ci=ve("refresh-cw",$_);const V_=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Q_=ve("rotate-ccw",V_);const G_=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],$s=ve("save",G_);const P_=[["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"m19 8 3 8a5 5 0 0 1-6 0zV7",key:"zcdpyk"}],["path",{d:"M3 7h1a17 17 0 0 0 8-2 17 17 0 0 0 8 2h1",key:"1yorad"}],["path",{d:"m5 8 3 8a5 5 0 0 1-6 0zV7",key:"eua70x"}],["path",{d:"M7 21h10",key:"1b0cd5"}]],Bg=ve("scale",P_);const Y_=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],ra=ve("search",Y_);const X_=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],no=ve("send",X_);const K_=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],er=ve("settings",K_);const Z_=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],J_=ve("shield-check",Z_);const I_=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],as=ve("shield",I_);const W_=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Bc=ve("square-check-big",W_);const ew=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],ro=ve("square-pen",ew);const tw=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],w0=ve("star",tw);const aw=[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],io=ve("toggle-left",aw);const sw=[["circle",{cx:"15",cy:"12",r:"3",key:"1afu0r"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],co=ve("toggle-right",sw);const lw=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Nt=ve("trash-2",lw);const nw=[["path",{d:"M13 8c0-2.76-2.46-5-5.5-5S2 5.24 2 8h2l1-1 1 1h4",key:"foxbe7"}],["path",{d:"M13 7.14A5.82 5.82 0 0 1 16.5 6c3.04 0 5.5 2.24 5.5 5h-3l-1-1-1 1h-3",key:"18arnh"}],["path",{d:"M5.89 9.71c-2.15 2.15-2.3 5.47-.35 7.43l4.24-4.25.7-.7.71-.71 2.12-2.12c-1.95-1.96-5.27-1.8-7.42.35",key:"ywahnh"}],["path",{d:"M11 15.5c.5 2.5-.17 4.5-1 6.5h4c2-5.5-.5-12-1-14",key:"ft0feo"}]],rw=ve("tree-palm",nw);const iw=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Sm=ve("trending-up",iw);const cw=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],rs=ve("triangle-alert",cw);const ow=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],dw=ve("truck",ow);const uw=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],C0=ve("type",uw);const mw=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],S0=ve("upload",mw);const hw=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Em=ve("user-check",hw);const xw=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],oo=ve("user-plus",xw);const pw=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],$g=ve("user-x",pw);const fw=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],ka=ve("user",fw);const gw=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],ht=ve("users",gw);const yw=[["path",{d:"M8 21s-4-3-4-9 4-9 4-9",key:"uto9ud"}],["path",{d:"M16 3s4 3 4 9-4 9-4 9",key:"4w2vsq"}],["line",{x1:"15",x2:"9",y1:"9",y2:"15",key:"f7djnv"}],["line",{x1:"9",x2:"15",y1:"9",y2:"15",key:"1shsy8"}]],pi=ve("variable",yw);const bw=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],vt=ve("x",bw);const vw=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],jw=ve("zoom-in",vw);const Nw=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],_w=ve("zoom-out",Nw),ww=[{name:"Inicio",href:"/",icon:so},{name:"Documentos",href:"/documents",icon:Oe},{name:"Carpetas",href:"/folders",icon:Hg}],E0=[{name:"Mis Solicitudes",href:"/hr/my-requests/vacations",icon:Oe},{name:"Organigrama",href:"/hr/organigrama",icon:O_}],Cw=[{name:"Aprobaciones",href:"/hr/approvals",icon:Bc,badge:!0},{name:"Empleados",href:"/hr/employees",icon:ht},{name:"Documentacion",href:"/hr/documents",icon:Wn},{name:"Dashboard HR",href:"/hr/dashboard",icon:O2}],Sw=(s,r,i)=>i||!s&&!r?E0:[...E0,...Cw],Ew=[{name:"Configuracin",href:"/admin/settings",icon:er},{name:"Usuarios",href:"/admin/users",icon:as},{name:"reas",href:"/admin/departments",icon:Ut},{name:"Templates",href:"/admin/templates",icon:Oe}],Dw=[{name:"Contratos",href:"/legal/contracts",icon:Oe},{name:"Aprobaciones",href:"/legal/approvals",icon:Wn,badge:!0}];function Tw({children:s}){const[r,i]=b.useState(!1),[c,u]=b.useState(!1),[h,x]=b.useState([]),{user:m,logout:p,isAdmin:g,isHR:f,isSupervisor:v,employeeMode:E,toggleEmployeeMode:S,hasElevatedRole:w}=Ra(),C=Za(),j=Aa(),{data:_}=ke({queryKey:["hr-approvals-count"],queryFn:()=>$n.list(),enabled:v||f,refetchInterval:6e4}),{data:N}=ke({queryKey:["legal-approvals-count"],queryFn:()=>Kr.list(),enabled:g||m?.roles?.includes("legal"),refetchInterval:6e4}),z=_?.data?.meta?.total_pending||0,k=N?.data?.meta?.total_pending||0,U=async()=>{await p(),j("/login")},A=ee=>{x(B=>B.includes(ee)?B.filter(ye=>ye!==ee):[...B,ee])},T=({item:ee})=>{const B=C.pathname===ee.href||ee.href.includes("/my-requests")&&C.pathname.startsWith("/hr/my-requests"),F=ee.badge?ee.href==="/hr/approvals"?z:ee.href==="/legal/approvals"?k:0:0;return e.jsxs(kt,{to:ee.href,className:`flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${B?"bg-primary-50 text-primary-700":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[e.jsx(ee.icon,{className:"w-5 h-5"}),ee.name,F>0&&e.jsx("span",{className:"ml-auto bg-danger-500 text-white text-xs px-2 py-0.5 rounded-full",children:F})]})},O=({id:ee,title:B,items:ye,icon:F})=>{const te=h.includes(ee),je=ye.some(xe=>C.pathname===xe.href||xe.href.includes("/my-requests")&&C.pathname.startsWith("/hr/my-requests"));return e.jsxs("div",{className:"mb-2",children:[e.jsxs("button",{onClick:()=>A(ee),className:`w-full flex items-center justify-between px-3 py-2 rounded-lg text-sm font-semibold transition-colors ${je?"text-primary-700 bg-primary-50/50":"text-gray-500 hover:bg-gray-50 hover:text-gray-700"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[F&&e.jsx(F,{className:"w-4 h-4"}),e.jsx("span",{className:"uppercase tracking-wider text-xs",children:B})]}),te?e.jsx(Gn,{className:"w-4 h-4"}):e.jsx(ys,{className:"w-4 h-4"})]}),e.jsx("div",{className:`overflow-hidden transition-all duration-200 ${te?"max-h-96 opacity-100 mt-1":"max-h-0 opacity-0"}`,children:e.jsx("nav",{className:"space-y-1 pl-2",children:ye.map(xe=>e.jsx(T,{item:xe},xe.href))})})]})};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>i(!1)}),e.jsxs("aside",{className:`fixed top-0 left-0 z-50 h-full w-64 bg-white border-r border-gray-200 transform transition-transform lg:translate-x-0 ${r?"translate-x-0":"-translate-x-full"}`,children:[e.jsxs("div",{className:"flex items-center justify-between h-16 px-4 border-b border-gray-200",children:[e.jsxs(kt,{to:"/",className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden",children:e.jsx("img",{src:"/Valkiria.png",alt:"Valkyria",className:"w-full h-full object-cover scale-[1.15]"})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("span",{className:"font-bold text-gray-900 leading-tight",children:[e.jsx("span",{className:"text-primary-600",children:"VAL"}),"KYRIA"]}),e.jsx("span",{className:"text-[9px] text-gray-400 tracking-wider",children:"ECM"})]})]}),e.jsx("button",{className:"lg:hidden p-1 rounded hover:bg-gray-100",onClick:()=>i(!1),children:e.jsx(vt,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-4 overflow-y-auto h-[calc(100%-4rem)]",children:[w&&e.jsx("div",{className:"mb-4 p-2 bg-gray-50 rounded-lg",children:e.jsx("button",{onClick:S,className:`w-full flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors ${E?"bg-primary-100 text-primary-700":"bg-white text-gray-700 hover:bg-gray-100"}`,children:E?e.jsxs(e.Fragment,{children:[e.jsx(B2,{className:"w-4 h-4"}),e.jsx("span",{children:"Modo Empleado"}),e.jsx("span",{className:"ml-auto text-xs bg-primary-200 px-2 py-0.5 rounded",children:"Activo"})]}):e.jsxs(e.Fragment,{children:[e.jsx(as,{className:"w-4 h-4"}),e.jsx("span",{children:"Cambiar a Empleado"})]})})}),e.jsx(O,{id:"general",title:"General",items:ww,icon:so}),e.jsx(O,{id:"hr",title:"Recursos Humanos",items:Sw(v,f,E),icon:ht}),!E&&e.jsxs(e.Fragment,{children:[g&&e.jsx(O,{id:"legal",title:"Gestin Legal",items:Dw,icon:Bg}),g&&e.jsx(O,{id:"system",title:"Sistema",items:Ew,icon:er})]})]})]}),e.jsxs("div",{className:"lg:pl-64",children:[e.jsx("header",{className:"sticky top-0 z-30 h-16 bg-white border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between h-full px-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{className:"lg:hidden p-2 rounded-lg hover:bg-gray-100",onClick:()=>i(!0),children:e.jsx(M_,{className:"w-5 h-5"})}),e.jsx("div",{className:"hidden md:flex items-center",children:e.jsxs("div",{className:"relative",children:[e.jsx(ra,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar documentos...",className:"w-64 pl-9 pr-4 py-2 text-sm border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{className:"relative p-2 rounded-lg hover:bg-gray-100",children:[e.jsx(_2,{className:"w-5 h-5 text-gray-500"}),e.jsx("span",{className:"absolute top-1 right-1 w-2 h-2 bg-danger-500 rounded-full"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{className:"flex items-center gap-2 p-2 rounded-lg hover:bg-gray-100",onClick:()=>u(!c),children:[e.jsx("div",{className:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center",children:e.jsx(ka,{className:"w-4 h-4 text-primary-600"})}),e.jsxs("div",{className:"hidden md:block text-left",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[m?.first_name," ",m?.last_name]}),e.jsx("p",{className:"text-xs text-gray-500",children:m?.email})]}),e.jsx(Gn,{className:"w-4 h-4 text-gray-400"})]}),c&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>u(!1)}),e.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-50",children:[e.jsxs(kt,{to:"/profile",className:"flex items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",onClick:()=>u(!1),children:[e.jsx(ka,{className:"w-4 h-4"}),"Mi Perfil"]}),e.jsx("hr",{className:"my-1"}),e.jsxs("button",{onClick:U,className:"flex items-center gap-2 w-full px-4 py-2 text-sm text-danger-600 hover:bg-danger-50",children:[e.jsx(S_,{className:"w-4 h-4"}),"Cerrar Sesin"]})]})]})]})]})]})}),e.jsx("main",{className:"p-6",children:s})]})]})}const Mw={primary:"bg-primary-600 text-white hover:bg-primary-700 focus:ring-primary-500",secondary:"bg-gray-100 text-gray-700 hover:bg-gray-200 focus:ring-gray-500",success:"bg-green-600 text-white hover:bg-green-700 focus:ring-green-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",ghost:"text-gray-600 hover:bg-gray-100 focus:ring-gray-500",outline:"border border-gray-300 text-gray-700 hover:bg-gray-50 focus:ring-gray-500"},kw={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2",lg:"px-6 py-3 text-lg"};function L({children:s,variant:r="primary",size:i="md",loading:c=!1,disabled:u=!1,icon:h,className:x="",...m}){return e.jsxs("button",{className:`
        inline-flex items-center justify-center gap-2 font-medium rounded-lg
        transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2
        disabled:opacity-50 disabled:cursor-not-allowed
        ${Mw[r]}
        ${kw[i]}
        ${x}
      `,disabled:u||c,...m,children:[c?e.jsx(Vl,{className:"w-4 h-4 animate-spin"}):h?e.jsx(h,{className:"w-4 h-4"}):null,s]})}const ue=b.forwardRef(({label:s,error:r,hint:i,className:c="",...u},h)=>e.jsxs("div",{className:"w-full",children:[s&&e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:s}),e.jsx("input",{ref:h,className:`
          w-full px-3 py-2 border rounded-lg text-gray-900
          focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent
          disabled:bg-gray-50 disabled:text-gray-500
          ${r?"border-red-300":"border-gray-300"}
          ${c}
        `,...u}),i&&!r&&e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:i}),r&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r})]}));ue.displayName="Input";const Aw=[{email:"admin@valkyria.com",password:"Admin123",role:"Admin",color:"bg-red-100 text-red-700"},{email:"hr.manager@valkyria.com",password:"HrManager123",role:"Gerente RRHH",color:"bg-purple-100 text-purple-700"},{email:"hr.staff@valkyria.com",password:"HrStaff123",role:"Staff RRHH",color:"bg-indigo-100 text-indigo-700"},{email:"supervisor@valkyria.com",password:"Supervisor123",role:"Supervisor",color:"bg-blue-100 text-blue-700"},{email:"employee1@valkyria.com",password:"Employee123",role:"Empleado",color:"bg-green-100 text-green-700"},{email:"employee2@valkyria.com",password:"Employee123",role:"Empleado",color:"bg-green-100 text-green-700"},{email:"legal@valkyria.com",password:"Legal123",role:"Legal",color:"bg-amber-100 text-amber-700"},{email:"viewer@valkyria.com",password:"Viewer123",role:"Viewer",color:"bg-gray-100 text-gray-700"}];function Rw(){const[s,r]=b.useState(""),[i,c]=b.useState(""),[u,h]=b.useState(!1),[x,m]=b.useState(""),[p,g]=b.useState(!1),{login:f}=Ra(),v=Aa(),S=Za().state?.from?.pathname||"/",w=j=>{r(j.email),c(j.password)},C=async j=>{j.preventDefault(),m(""),g(!0);try{(await f(s,i)).must_change_password?v("/change-password",{replace:!0}):v(S,{replace:!0})}catch(_){m(_.response?.data?.error||"Error al iniciar sesin")}finally{g(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary-600 to-primary-800 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-36 h-36 mx-auto mb-4 rounded-full overflow-hidden shadow-2xl",children:e.jsx("img",{src:"/Valkiria.png",alt:"Valkyria",className:"w-full h-full object-cover scale-[1.15]"})}),e.jsx("h1",{className:"text-3xl font-bold text-white",children:"VALKYRIA ECM"}),e.jsx("p",{className:"text-primary-200 mt-2",children:"Protegemos lo que importa"})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 text-center mb-6",children:"Iniciar Sesin"}),x&&e.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-700",children:[e.jsx(st,{className:"w-5 h-5 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:x})]}),e.jsxs("form",{onSubmit:C,className:"space-y-4",children:[e.jsx(ue,{label:"Correo Electrnico",type:"email",value:s,onChange:j=>r(j.target.value),placeholder:"tu@email.com",required:!0,autoFocus:!0}),e.jsxs("div",{className:"relative",children:[e.jsx(ue,{label:"Contrasea",type:u?"text":"password",value:i,onChange:j=>c(j.target.value),placeholder:"",required:!0}),e.jsx("button",{type:"button",onClick:()=>h(!u),className:"absolute right-3 top-[34px] text-gray-400 hover:text-gray-600 transition-colors",children:u?e.jsx(tm,{className:"w-5 h-5"}):e.jsx(At,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",className:"rounded border-gray-300"}),e.jsx("span",{className:"text-gray-600",children:"Recordarme"})]}),e.jsx("a",{href:"#",className:"text-primary-600 hover:text-primary-700",children:"Olvidaste tu contrasea?"})]}),e.jsx(L,{type:"submit",loading:p,className:"w-full",children:"Iniciar Sesin"})]})]}),(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")&&e.jsxs("div",{className:"mt-6 bg-white/10 backdrop-blur rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(ht,{className:"w-4 h-4 text-primary-200"}),e.jsx("span",{className:"text-sm font-medium text-primary-100",children:"Usuarios de Prueba"})]}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:Aw.map(j=>e.jsxs("button",{onClick:()=>w(j),className:"flex items-center gap-2 p-2 rounded-lg bg-white/10 hover:bg-white/20 transition-colors text-left",children:[e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${j.color}`,children:j.role}),e.jsx("span",{className:"text-xs text-white truncate",children:j.email.split("@")[0]})]},j.email))}),e.jsx("p",{className:"text-xs text-primary-300 mt-2 text-center",children:"Click para autocompletar credenciales"})]}),e.jsx("p",{className:"text-center text-primary-200 text-sm mt-6",children:" 2025 VALKYRIA ECM. Todos los derechos reservados."})]})})}function Ow(){const[s,r]=b.useState(""),[i,c]=b.useState(""),[u,h]=b.useState(""),[x,m]=b.useState(!1),[p,g]=b.useState(!1),[f,v]=b.useState(""),[E,S]=b.useState(!1),{user:w,updateUser:C,logout:j}=Ra(),_=Aa(),N=async k=>{if(k.preventDefault(),v(""),!s.trim()){v("El correo corporativo es requerido");return}if(!s.includes("@")){v("Ingresa un correo electronico valido");return}if(i!==u){v("Las contraseas no coinciden");return}if(i.length<8){v("La contrasea debe tener al menos 8 caracteres");return}S(!0);try{const U=await Vn.forceChangePassword({corporate_email:s,new_password:i,new_password_confirmation:u});U.data.token&&localStorage.setItem("token",U.data.token),U.data.data&&C(U.data.data),_("/",{replace:!0})}catch(U){v(U.response?.data?.error||"Error al cambiar la contrasea")}finally{S(!1)}},z=()=>{j(),_("/login",{replace:!0})};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-amber-500 to-amber-700 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-white rounded-2xl shadow-lg mb-4",children:e.jsx(Xl,{className:"w-8 h-8 text-amber-600"})}),e.jsx("h1",{className:"text-3xl font-bold text-white",children:"Cambio de Contrasea"}),e.jsx("p",{className:"text-amber-100 mt-2",children:"Por seguridad, debes cambiar tu contrasea"})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[e.jsx("div",{className:"mb-6 p-4 bg-amber-50 border border-amber-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(J_,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-amber-800",children:["Bienvenido(a), ",w?.first_name||"Usuario"]}),e.jsx("p",{className:"text-sm text-amber-700 mt-1",children:"Esta es tu primera vez iniciando sesion. Por razones de seguridad, debes establecer una nueva contrasea antes de continuar."})]})]})}),f&&e.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-700",children:[e.jsx(st,{className:"w-5 h-5 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:f})]}),e.jsxs("form",{onSubmit:N,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(ue,{label:"Correo Corporativo",type:"email",value:s,onChange:k=>r(k.target.value),placeholder:"tu.nombre@empresa.com",required:!0,autoFocus:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Este sera tu nuevo correo para iniciar sesion"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(ue,{label:"Nueva Contrasea",type:x?"text":"password",value:i,onChange:k=>c(k.target.value),placeholder:"Minimo 8 caracteres",required:!0}),e.jsx("button",{type:"button",onClick:()=>m(!x),className:"absolute right-3 top-[34px] text-gray-400 hover:text-gray-600 transition-colors",children:x?e.jsx(tm,{className:"w-5 h-5"}):e.jsx(At,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"relative",children:[e.jsx(ue,{label:"Confirmar Nueva Contrasea",type:p?"text":"password",value:u,onChange:k=>h(k.target.value),placeholder:"Repite la contrasea",required:!0}),e.jsx("button",{type:"button",onClick:()=>g(!p),className:"absolute right-3 top-[34px] text-gray-400 hover:text-gray-600 transition-colors",children:p?e.jsx(tm,{className:"w-5 h-5"}):e.jsx(At,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"text-sm text-gray-600 bg-gray-50 p-3 rounded-lg",children:[e.jsx("p",{className:"font-medium mb-1",children:"Requisitos de la contrasea:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-0.5 text-gray-500",children:[e.jsx("li",{children:"Minimo 8 caracteres"}),e.jsx("li",{children:"No puede ser igual a tu numero de documento"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(L,{type:"button",variant:"secondary",onClick:z,className:"flex-1",children:"Cancelar"}),e.jsx(L,{type:"submit",loading:E,className:"flex-1",children:"Cambiar Contrasea"})]})]})]}),e.jsx("p",{className:"text-center text-amber-100 text-sm mt-6",children:"VALKYRIA ECM - Sistema de Gestion de Contenido Empresarial"})]})})}function we({children:s,className:r="",...i}){return e.jsx("div",{className:`bg-white rounded-xl shadow-sm border border-gray-200 ${r}`,...i,children:s})}function Vt({children:s,className:r=""}){return e.jsx("div",{className:`px-6 py-4 border-b border-gray-200 ${r}`,children:s})}function Qt({children:s,className:r=""}){return e.jsx("h3",{className:`text-lg font-semibold text-gray-900 ${r}`,children:s})}function Ce({children:s,className:r=""}){return e.jsx("div",{className:`p-6 ${r}`,children:s})}const zw={draft:"bg-gray-100 text-gray-700",pending:"bg-yellow-100 text-yellow-800",processing:"bg-blue-100 text-blue-800",approved:"bg-blue-100 text-blue-800",enjoyed:"bg-green-100 text-green-800",completed:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800",cancelled:"bg-gray-100 text-gray-500",active:"bg-green-100 text-green-800",inactive:"bg-gray-100 text-gray-500",on_leave:"bg-yellow-100 text-yellow-800"},Lw={draft:"Borrador",pending:"Solicitada",processing:"En proceso",approved:"Aprobada",enjoyed:"Disfrutada",completed:"Completado",rejected:"Rechazada",cancelled:"Cancelada",active:"Activo",inactive:"Inactivo",on_leave:"De licencia"};function qe({status:s,children:r}){const i=zw[s]||"bg-gray-100 text-gray-700",c=r||Lw[s]||s;return e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${i}`,children:c})}function Qe({isOpen:s,onClose:r,title:i,children:c,size:u="md"}){if(!s)return null;const h={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl","2xl":"max-w-5xl",full:"max-w-7xl"};return e.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 transition-opacity",onClick:r}),e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsxs("div",{className:`relative w-full ${h[u]} bg-white rounded-xl shadow-xl`,children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:i}),e.jsx("button",{onClick:r,className:"p-1 rounded-lg hover:bg-gray-100 transition-colors",children:e.jsx(vt,{className:"w-5 h-5 text-gray-500"})})]}),e.jsx("div",{className:"p-6",children:c})]})})]})}function Ln({title:s,value:r,icon:i,color:c,subtitle:u,href:h,onClick:x}){const m={blue:"bg-blue-50 text-blue-600",green:"bg-green-50 text-green-600",yellow:"bg-yellow-50 text-yellow-600",purple:"bg-purple-50 text-purple-600",indigo:"bg-indigo-50 text-indigo-600",orange:"bg-orange-50 text-orange-600"},p=e.jsx(we,{className:h||x?"cursor-pointer hover:shadow-md transition-shadow":"",children:e.jsxs(Ce,{className:"flex items-center gap-4",children:[e.jsx("div",{className:`p-3 rounded-xl ${m[c]}`,children:e.jsx(i,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r}),e.jsx("p",{className:"text-sm text-gray-500",children:s}),u&&e.jsx("p",{className:"text-xs text-gray-400",children:u})]}),(h||x)&&e.jsx(Ll,{className:"w-4 h-4 text-gray-400"})]})});return h?e.jsx(kt,{to:h,children:p}):x?e.jsx("div",{onClick:x,children:p}):p}function qn({title:s,description:r,icon:i,href:c,color:u,onClick:h,state:x}){const m={blue:"bg-blue-500 hover:bg-blue-600",green:"bg-green-500 hover:bg-green-600",purple:"bg-purple-500 hover:bg-purple-600",indigo:"bg-indigo-500 hover:bg-indigo-600",orange:"bg-orange-500 hover:bg-orange-600"},p=e.jsxs(e.Fragment,{children:[e.jsx(i,{className:"w-8 h-8"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:s}),e.jsx("p",{className:"text-sm opacity-80",children:r})]}),e.jsx(Ll,{className:"w-5 h-5"})]});return h?e.jsx("button",{onClick:h,className:`flex items-center gap-4 p-4 rounded-xl text-white transition-colors ${m[u]} w-full text-left`,children:p}):e.jsx(kt,{to:c,state:x,className:`flex items-center gap-4 p-4 rounded-xl text-white transition-colors ${m[u]}`,children:p})}function D0({request:s,type:r}){const i=r==="vacation",c=i?St:ss;return e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"p-2 bg-white rounded-lg",children:e.jsx(c,{className:"w-4 h-4 text-gray-500"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:i?`${s.days_requested} das`:s.certification_type}),e.jsx("p",{className:"text-xs text-gray-500",children:s.request_number})]}),e.jsx(qe,{status:s.status})]})}function qw({document:s,onPreview:r,onSign:i}){s.signatures?.filter(h=>h.status==="pending")?.length;const c=s.signatures?.filter(h=>h.status==="signed")?.length||0,u=s.signatures?.length||0;return e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-amber-50 rounded-lg border border-amber-100",children:[e.jsx("div",{className:"p-2 bg-white rounded-lg",children:e.jsx(am,{className:"w-4 h-4 text-amber-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:s.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[c,"/",u," firmas completadas"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{variant:"ghost",size:"sm",onClick:()=>r(s),children:e.jsx(At,{className:"w-4 h-4"})}),s.can_sign&&e.jsxs(L,{variant:"primary",size:"sm",onClick:()=>i(s),children:[e.jsx(ro,{className:"w-4 h-4"}),"Firmar"]})]})]})}function Uw({contract:s}){return e.jsxs(kt,{to:"/legal/contracts",className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsx("div",{className:"p-2 bg-white rounded-lg",children:e.jsx(Ta,{className:"w-4 h-4 text-indigo-500"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:s.title}),e.jsx("p",{className:"text-xs text-gray-500",children:s.third_party?.name||"Sin tercero"})]}),e.jsx(qe,{status:s.status})]})}function Fw(){const{user:s,isHR:r,isSupervisor:i,isAdmin:c,hasPermission:u}=Ra(),h=Aa(),[x,m]=b.useState(null),[p,g]=b.useState(null),[f,v]=b.useState(!1),E=u("legal")||u("contracts")||s?.permissions?.some(F=>F.level>=Bn.LEGAL)||c,{data:S}=ke({queryKey:["vacations","recent"],queryFn:()=>Pa.list({per_page:5})}),{data:w}=ke({queryKey:["certifications","recent"],queryFn:()=>Qa.list({per_page:5})}),{data:C}=ke({queryKey:["approvals"],queryFn:()=>$n.list(),enabled:r||i}),{data:j}=ke({queryKey:["pending-signatures"],queryFn:()=>Yt.pendingSignatures()}),{data:_}=ke({queryKey:["contracts","recent"],queryFn:()=>fa.list({per_page:5}),enabled:E}),N=S?.data?.data||[],z=w?.data?.data||[],k=C?.data?.data||{vacation_requests:[],certification_requests:[]},U=j?.data?.data||[],A=_?.data?.data||[],T=(k.vacation_requests?.length||0)+(k.certification_requests?.length||0),O=async F=>{m(F),v(!0);try{const te=await Yt.download(F.id),je=new Blob([te.data],{type:"application/pdf"}),xe=URL.createObjectURL(je);g(xe)}catch(te){console.error("Error loading preview:",te)}finally{v(!1)}},ee=()=>{p&&URL.revokeObjectURL(p),m(null),g(null)},B=F=>{h(`/documents/${F.id}/sign`)},ye=async()=>{if(x)try{const F=await Yt.download(x.id),te=new Blob([F.data],{type:"application/pdf"}),je=URL.createObjectURL(te),xe=window.document.createElement("a");xe.href=je,xe.download=x.file_name||`${x.name}.pdf`,window.document.body.appendChild(xe),xe.click(),window.document.body.removeChild(xe),URL.revokeObjectURL(je)}catch(F){console.error("Error downloading:",F)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["Bienvenido, ",s?.first_name]}),e.jsx("p",{className:"text-gray-500",children:"Aqu tienes un resumen de tu actividad"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(Ln,{title:"Das de vacaciones",value:Math.floor(s?.vacation?.days_available??0),icon:St,color:"blue",subtitle:s?.vacation?.days_pending>s?.vacation?.days_available?`${Math.floor(s?.vacation?.days_pending)} pendientes`:"Disponibles",href:"/hr/my-requests/vacations"}),e.jsx(Ln,{title:"Solicitudes pendientes",value:N.filter(F=>F.status==="pending").length,icon:Xt,color:"yellow",href:"/hr/my-requests/vacations"}),(r||i)&&e.jsx(Ln,{title:"Por aprobar",value:T,icon:Bc,color:"green",href:"/hr/approvals"}),e.jsx(Ln,{title:"Certificaciones",value:z.filter(F=>F.status==="completed").length,icon:ss,color:"purple",subtitle:"Completadas",href:"/hr/my-requests/certifications"}),U.length>0&&e.jsx(Ln,{title:"Firmas pendientes",value:U.length,icon:am,color:"orange",subtitle:"Documentos por firmar",href:"/documents"}),E&&e.jsx(Ln,{title:"Contratos",value:A.length,icon:Ta,color:"indigo",subtitle:"Activos",href:"/legal/contracts"})]}),e.jsxs(we,{children:[e.jsx(Vt,{children:e.jsx(Qt,{children:"Acciones Rpidas"})}),e.jsx(Ce,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[e.jsx(qn,{title:"Nueva Solicitud de Vacaciones",description:"Solicita das libres",icon:St,href:"/hr/my-requests/vacations",state:{openNew:!0},color:"blue"}),e.jsx(qn,{title:"Solicitar Certificacin",description:"Certificado laboral",icon:ss,href:"/hr/my-requests/certifications",state:{openNew:!0},color:"green"}),e.jsx(qn,{title:"Mis Documentos",description:"Ver y firmar documentos",icon:Oe,href:"/documents",color:"purple"}),E&&e.jsx(qn,{title:"Gestin de Contratos",description:"Contratos y terceros",icon:Ta,href:"/legal/contracts",color:"indigo"}),(r||i)&&e.jsx(qn,{title:"Aprobar Solicitudes",description:`${T} pendientes`,icon:Bc,href:"/hr/approvals",color:"orange"}),r&&e.jsx(qn,{title:"Gestin de Empleados",description:"Administrar personal",icon:ht,href:"/hr/employees",color:"blue"})]})})]}),U.length>0&&e.jsxs(we,{children:[e.jsxs(Vt,{className:"flex flex-row items-center justify-between",children:[e.jsxs(Qt,{className:"flex items-center gap-2",children:[e.jsx(am,{className:"w-5 h-5 text-amber-500"}),"Documentos Pendientes de tu Firma"]}),e.jsx(kt,{to:"/documents",children:e.jsxs(L,{variant:"ghost",size:"sm",children:["Ver todos",e.jsx(Ll,{className:"w-4 h-4 ml-1"})]})})]}),e.jsx(Ce,{children:e.jsx("div",{className:"space-y-2",children:U.slice(0,5).map(F=>e.jsx(qw,{document:F,onPreview:O,onSign:B},F.id))})})]}),e.jsxs("div",{className:`grid grid-cols-1 ${E?"lg:grid-cols-3":"lg:grid-cols-2"} gap-6`,children:[e.jsxs(we,{children:[e.jsxs(Vt,{className:"flex flex-row items-center justify-between",children:[e.jsx(Qt,{children:"Mis Solicitudes de Vacaciones"}),e.jsx(kt,{to:"/hr/my-requests/vacations",children:e.jsxs(L,{variant:"ghost",size:"sm",children:["Ver todas",e.jsx(Ll,{className:"w-4 h-4 ml-1"})]})})]}),e.jsx(Ce,{children:N.length>0?e.jsx("div",{className:"space-y-2",children:N.slice(0,5).map(F=>e.jsx(D0,{request:F,type:"vacation"},F.id))}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(St,{className:"w-12 h-12 mx-auto mb-2 opacity-20"}),e.jsx("p",{children:"No tienes solicitudes de vacaciones"}),e.jsx(kt,{to:"/hr/my-requests/vacations",children:e.jsxs(L,{variant:"primary",size:"sm",className:"mt-4",children:[e.jsx(Ke,{className:"w-4 h-4"}),"Nueva Solicitud"]})})]})})]}),r||i?e.jsxs(we,{children:[e.jsxs(Vt,{className:"flex flex-row items-center justify-between",children:[e.jsx(Qt,{children:"Pendientes de Aprobacin"}),e.jsx(kt,{to:"/hr/approvals",children:e.jsxs(L,{variant:"ghost",size:"sm",children:["Ver todas",e.jsx(Ll,{className:"w-4 h-4 ml-1"})]})})]}),e.jsx(Ce,{children:T>0?e.jsxs("div",{className:"space-y-2",children:[k.vacation_requests?.slice(0,3).map(F=>e.jsxs(kt,{to:"/hr/approvals",className:"flex items-center gap-3 p-3 bg-yellow-50 rounded-lg border border-yellow-100 hover:bg-yellow-100 transition-colors",children:[e.jsx(St,{className:"w-5 h-5 text-yellow-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:F.employee?.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[F.days_requested," das"]})]}),e.jsx(qe,{status:"pending"})]},F.id)),k.certification_requests?.slice(0,2).map(F=>e.jsxs(kt,{to:"/hr/approvals",className:"flex items-center gap-3 p-3 bg-yellow-50 rounded-lg border border-yellow-100 hover:bg-yellow-100 transition-colors",children:[e.jsx(ss,{className:"w-5 h-5 text-yellow-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:F.employee?.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Certificacin ",F.certification_type]})]}),e.jsx(qe,{status:"pending"})]},F.id))]}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Bc,{className:"w-12 h-12 mx-auto mb-2 opacity-20"}),e.jsx("p",{children:"No hay solicitudes pendientes"})]})})]}):e.jsxs(we,{children:[e.jsxs(Vt,{className:"flex flex-row items-center justify-between",children:[e.jsx(Qt,{children:"Mis Certificaciones"}),e.jsx(kt,{to:"/hr/my-requests/certifications",children:e.jsxs(L,{variant:"ghost",size:"sm",children:["Ver todas",e.jsx(Ll,{className:"w-4 h-4 ml-1"})]})})]}),e.jsx(Ce,{children:z.length>0?e.jsx("div",{className:"space-y-2",children:z.slice(0,5).map(F=>e.jsx(D0,{request:F,type:"certification"},F.id))}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(ss,{className:"w-12 h-12 mx-auto mb-2 opacity-20"}),e.jsx("p",{children:"No tienes certificaciones solicitadas"}),e.jsx(kt,{to:"/hr/my-requests/certifications",children:e.jsxs(L,{variant:"primary",size:"sm",className:"mt-4",children:[e.jsx(Ke,{className:"w-4 h-4"}),"Nueva Certificacin"]})})]})})]}),E&&e.jsxs(we,{children:[e.jsxs(Vt,{className:"flex flex-row items-center justify-between",children:[e.jsx(Qt,{children:"Contratos Recientes"}),e.jsx(kt,{to:"/legal/contracts",children:e.jsxs(L,{variant:"ghost",size:"sm",children:["Ver todos",e.jsx(Ll,{className:"w-4 h-4 ml-1"})]})})]}),e.jsx(Ce,{children:A.length>0?e.jsx("div",{className:"space-y-2",children:A.slice(0,5).map(F=>e.jsx(Uw,{contract:F},F.id))}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Ta,{className:"w-12 h-12 mx-auto mb-2 opacity-20"}),e.jsx("p",{children:"No hay contratos recientes"}),e.jsx(kt,{to:"/legal/contracts",children:e.jsxs(L,{variant:"primary",size:"sm",className:"mt-4",children:[e.jsx(Ke,{className:"w-4 h-4"}),"Nuevo Contrato"]})})]})})]})]}),e.jsx(Qe,{isOpen:!!x,onClose:ee,title:x?.name||"Vista Previa",size:"xl",children:e.jsxs("div",{className:"space-y-4",children:[f?e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):p?e.jsx("iframe",{src:p,className:"w-full h-[70vh] border rounded-lg",title:"Document Preview"}):e.jsx("div",{className:"flex items-center justify-center h-96 text-gray-500",children:"No se pudo cargar el documento"}),e.jsxs("div",{className:"flex justify-between items-center pt-4 border-t",children:[e.jsx("div",{className:"text-sm text-gray-500",children:x?.signatures&&e.jsxs("span",{children:[x.signatures.filter(F=>F.status==="signed").length,"/",x.signatures.length," firmas completadas"]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(L,{variant:"secondary",onClick:ye,children:[e.jsx(ba,{className:"w-4 h-4 mr-2"}),"Descargar"]}),x?.can_sign&&e.jsxs(L,{variant:"primary",onClick:()=>{ee(),B(x)},children:[e.jsx(ro,{className:"w-4 h-4 mr-2"}),"Firmar Documento"]}),e.jsx(L,{variant:"ghost",onClick:ee,children:"Cerrar"})]})]})]})})]})}function Hw({onSave:s,initialData:r=null,width:i=400,height:c=150,strokeColor:u="#000000",strokeWidth:h=2,disabled:x=!1}){const m=b.useRef(null),[p,g]=b.useState(!1),[f,v]=b.useState(!1),[E,S]=b.useState(null);b.useEffect(()=>{const z=m.current;if(!z)return;const k=z.getContext("2d");if(z.width=i,z.height=c,k.strokeStyle=u,k.lineWidth=h,k.lineCap="round",k.lineJoin="round",k.clearRect(0,0,i,c),r){const U=new Image;U.onload=()=>{k.drawImage(U,0,0),v(!0)},U.src=r.startsWith("data:")?r:`data:image/png;base64,${r}`}},[r,i,c,u,h]);const w=b.useCallback(z=>{const k=m.current,U=k.getBoundingClientRect(),A=k.width/U.width,T=k.height/U.height;return z.touches&&z.touches.length>0?{x:(z.touches[0].clientX-U.left)*A,y:(z.touches[0].clientY-U.top)*T}:{x:(z.clientX-U.left)*A,y:(z.clientY-U.top)*T}},[]),C=b.useCallback(z=>{if(x)return;z.preventDefault();const k=w(z);S(k),g(!0),v(!0)},[x,w]),j=b.useCallback(z=>{if(!p||x)return;z.preventDefault();const U=m.current.getContext("2d"),A=w(z);U.beginPath(),U.moveTo(E.x,E.y),U.lineTo(A.x,A.y),U.stroke(),S(A)},[p,x,E,w]),_=b.useCallback(()=>{if(g(!1),S(null),f&&s){const U=m.current.toDataURL("image/png").replace(/^data:image\/png;base64,/,"");s(U)}},[f,s]),N=b.useCallback(()=>{const z=m.current;if(!z)return;z.getContext("2d").clearRect(0,0,z.width,z.height),v(!1),s&&s(null)},[s]);return e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:`border-2 border-dashed rounded-lg bg-white relative ${x?"bg-gray-50 cursor-not-allowed":"cursor-crosshair"}`,style:{width:"100%",maxWidth:i},children:[e.jsx("canvas",{ref:m,className:"w-full touch-none",style:{aspectRatio:`${i}/${c}`,maxHeight:c},onMouseDown:C,onMouseMove:j,onMouseUp:_,onMouseLeave:_,onTouchStart:C,onTouchMove:j,onTouchEnd:_}),!f&&!x&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none text-gray-400 text-sm",children:"Dibuje su firma aqui"})]}),!x&&e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{type:"button",onClick:N,className:"flex items-center gap-1 px-3 py-1.5 text-sm text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors",children:[e.jsx(I2,{className:"w-4 h-4"}),"Borrar"]}),e.jsxs("button",{type:"button",onClick:N,className:"flex items-center gap-1 px-3 py-1.5 text-sm text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-lg transition-colors",children:[e.jsx(Q_,{className:"w-4 h-4"}),"Reiniciar"]})]})]})}const Lu=[{name:"Allura",family:"Allura, cursive"},{name:"Dancing Script",family:'"Dancing Script", cursive'},{name:"Great Vibes",family:'"Great Vibes", cursive'},{name:"Pacifico",family:"Pacifico, cursive"},{name:"Sacramento",family:"Sacramento, cursive"}],Bw=[{name:"Negro",value:"#000000"},{name:"Azul Oscuro",value:"#1e3a5f"},{name:"Azul",value:"#2563eb"},{name:"Verde Oscuro",value:"#166534"},{name:"Gris",value:"#4b5563"}];function $w({defaultText:s="",defaultFont:r="Allura",defaultColor:i="#000000",defaultSize:c=48,onChange:u,disabled:h=!1}){const[x,m]=b.useState(s),[p,g]=b.useState(r),[f,v]=b.useState(i),[E,S]=b.useState(c),[w,C]=b.useState(!1);b.useEffect(()=>{(async()=>{const N=Lu.map(k=>k.name.replace(" ","+")).join("&family="),z=document.createElement("link");z.href=`https://fonts.googleapis.com/css2?family=${N}&display=swap`,z.rel="stylesheet",document.head.appendChild(z),z.onload=()=>C(!0)})()},[]),b.useEffect(()=>{u&&x&&u({styled_text:x,font_family:p,font_color:f,font_size:E})},[x,p,f,E,u]);const j=Lu.find(_=>_.name===p)?.family||"cursive";return e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Texto de la firma"}),e.jsx("input",{type:"text",value:x,onChange:_=>m(_.target.value),placeholder:"Escriba su nombre o iniciales",disabled:h,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent disabled:bg-gray-50 disabled:text-gray-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estilo de fuente"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-2",children:Lu.map(_=>e.jsxs("button",{type:"button",onClick:()=>g(_.name),disabled:h,className:`p-3 border rounded-lg text-left transition-all ${p===_.name?"border-primary-500 bg-primary-50 ring-2 ring-primary-200":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"} ${h?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,children:[e.jsx("span",{style:{fontFamily:_.family,fontSize:"20px",color:f},children:x||"Firma"}),e.jsx("span",{className:"block text-xs text-gray-500 mt-1",children:_.name})]},_.name))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Color de la firma"}),e.jsxs("div",{className:"flex gap-2",children:[Bw.map(_=>e.jsx("button",{type:"button",onClick:()=>v(_.value),disabled:h,className:`w-8 h-8 rounded-full border-2 transition-all ${f===_.value?"ring-2 ring-offset-2 ring-primary-500":"hover:scale-110"} ${h?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,style:{backgroundColor:_.value},title:_.name},_.value)),e.jsxs("div",{className:"flex items-center gap-2 ml-2",children:[e.jsx("input",{type:"color",value:f,onChange:_=>v(_.target.value),disabled:h,className:"w-8 h-8 rounded cursor-pointer border border-gray-300",title:"Color personalizado"}),e.jsx("span",{className:"text-xs text-gray-500",children:"Personalizado"})]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Tamano: ",E,"px"]}),e.jsx("input",{type:"range",min:"24",max:"72",value:E,onChange:_=>S(Number(_.target.value)),disabled:h,className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Vista previa"}),e.jsx("div",{className:`p-4 border-2 border-dashed rounded-lg bg-white min-h-[80px] flex items-center justify-center ${w?"":"animate-pulse"}`,children:x?e.jsx("span",{style:{fontFamily:j,fontSize:`${E}px`,color:f},children:x}):e.jsx("span",{className:"text-gray-400",children:"Escriba su nombre para ver la vista previa"})})]})]})}function fs({icon:s,label:r,value:i}){return e.jsxs("div",{className:"flex items-center gap-3 py-3 border-b border-gray-100 last:border-0",children:[e.jsx("div",{className:"p-2 bg-gray-50 rounded-lg",children:e.jsx(s,{className:"w-4 h-4 text-gray-500"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs text-gray-500",children:r}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:i||"-"})]})]})}function qu({title:s,children:r}){return e.jsxs(we,{children:[e.jsx(Vt,{children:e.jsx(Qt,{children:s})}),e.jsx(Ce,{children:r})]})}function Vw({used:s,total:r,label:i}){const c=r>0?Math.min(s/r*100,100):0;return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:i}),e.jsxs("span",{className:"font-medium",children:[s," / ",r," das"]})]}),e.jsx("div",{className:"h-2 bg-gray-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-primary-500 rounded-full transition-all duration-300",style:{width:`${c}%`}})})]})}function Qw({user:s,isOpen:r,onClose:i,onSuccess:c}){const[u,h]=b.useState({first_name:s?.first_name||"",last_name:s?.last_name||"",time_zone:s?.time_zone||"UTC",locale:s?.locale||"es"}),[x,m]=b.useState(""),p=Ne({mutationFn:f=>Vn.updateProfile(f),onSuccess:f=>{c(f.data.data),i()},onError:f=>{m(f.response?.data?.error||"Error al actualizar perfil")}}),g=f=>{f.preventDefault(),m(""),p.mutate(u)};return r?e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Editar Perfil"}),e.jsx("button",{onClick:i,className:"p-1 hover:bg-gray-100 rounded",children:e.jsx(vt,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:g,className:"p-4 space-y-4",children:[x&&e.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-700",children:[e.jsx(st,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:x})]}),e.jsx(ue,{label:"Nombre",value:u.first_name,onChange:f=>h({...u,first_name:f.target.value}),required:!0}),e.jsx(ue,{label:"Apellido",value:u.last_name,onChange:f=>h({...u,last_name:f.target.value}),required:!0}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Zona Horaria"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:u.time_zone,onChange:f=>h({...u,time_zone:f.target.value}),children:[e.jsx("option",{value:"UTC",children:"UTC"}),e.jsx("option",{value:"America/Mexico_City",children:"Ciudad de Mxico (GMT-6)"}),e.jsx("option",{value:"America/Bogota",children:"Bogot (GMT-5)"}),e.jsx("option",{value:"America/Lima",children:"Lima (GMT-5)"}),e.jsx("option",{value:"America/Santiago",children:"Santiago (GMT-4)"}),e.jsx("option",{value:"America/Buenos_Aires",children:"Buenos Aires (GMT-3)"}),e.jsx("option",{value:"America/Sao_Paulo",children:"So Paulo (GMT-3)"}),e.jsx("option",{value:"Europe/Madrid",children:"Madrid (GMT+1)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Idioma"}),e.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",value:u.locale,onChange:f=>h({...u,locale:f.target.value}),children:[e.jsx("option",{value:"es",children:"Espaol"}),e.jsx("option",{value:"en",children:"English"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(L,{type:"button",variant:"secondary",onClick:i,children:"Cancelar"}),e.jsxs(L,{type:"submit",loading:p.isPending,children:[e.jsx($s,{className:"w-4 h-4"}),"Guardar Cambios"]})]})]})]})}):null}function Gw({isOpen:s,onClose:r}){const[i,c]=b.useState({current_password:"",new_password:"",confirm_password:""}),[u,h]=b.useState(""),[x,m]=b.useState(!1),p=Ne({mutationFn:f=>Vn.changePassword(f),onSuccess:()=>{m(!0),c({current_password:"",new_password:"",confirm_password:""}),setTimeout(()=>{r(),m(!1)},2e3)},onError:f=>{h(f.response?.data?.error||"Error al cambiar contrasea")}}),g=f=>{if(f.preventDefault(),h(""),i.new_password!==i.confirm_password){h("Las contraseas no coinciden");return}if(i.new_password.length<8){h("La contrasea debe tener al menos 8 caracteres");return}p.mutate({current_password:i.current_password,password:i.new_password,password_confirmation:i.confirm_password})};return s?e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Cambiar Contrasea"}),e.jsx("button",{onClick:r,className:"p-1 hover:bg-gray-100 rounded",children:e.jsx(vt,{className:"w-5 h-5"})})]}),x?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(Be,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-900",children:"Contrasea actualizada!"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Tu contrasea ha sido cambiada exitosamente"})]}):e.jsxs("form",{onSubmit:g,className:"p-4 space-y-4",children:[u&&e.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-700",children:[e.jsx(st,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:u})]}),e.jsx(ue,{label:"Contrasea Actual",type:"password",value:i.current_password,onChange:f=>c({...i,current_password:f.target.value}),required:!0}),e.jsx(ue,{label:"Nueva Contrasea",type:"password",value:i.new_password,onChange:f=>c({...i,new_password:f.target.value}),required:!0,hint:"Mnimo 8 caracteres"}),e.jsx(ue,{label:"Confirmar Nueva Contrasea",type:"password",value:i.confirm_password,onChange:f=>c({...i,confirm_password:f.target.value}),required:!0}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(L,{type:"button",variant:"secondary",onClick:r,children:"Cancelar"}),e.jsxs(L,{type:"submit",loading:p.isPending,children:[e.jsx(wm,{className:"w-4 h-4"}),"Cambiar Contrasea"]})]})]})]})}):null}function Pw(){const s=et(),[r,i]=b.useState(!1),[c,u]=b.useState("drawn"),[h,x]=b.useState(""),[m,p]=b.useState(null),[g,f]=b.useState(null),[v,E]=b.useState(""),{data:S,isLoading:w}=ke({queryKey:["signatures"],queryFn:()=>Hn.list()}),C=Ne({mutationFn:A=>Hn.create(A),onSuccess:()=>{s.invalidateQueries(["signatures"]),z()},onError:A=>{E(A.response?.data?.error||"Error al crear la firma")}}),j=Ne({mutationFn:A=>Hn.delete(A),onSuccess:()=>{s.invalidateQueries(["signatures"])},onError:A=>{const T=A.response?.data;T?.in_use?alert(`Esta firma est siendo utilizada en ${T.documents_count} documento(s). Desactvela en lugar de eliminarla.`):alert(T?.error||"Error al eliminar la firma")}}),_=Ne({mutationFn:A=>Hn.toggleActive(A),onSuccess:()=>{s.invalidateQueries(["signatures"])},onError:A=>{alert(A.response?.data?.error||"Error al cambiar estado de la firma")}}),N=Ne({mutationFn:A=>Hn.setDefault(A),onSuccess:()=>{s.invalidateQueries(["signatures"])}}),z=()=>{i(!1),u("drawn"),x(""),p(null),f(null),E("")},k=()=>{if(!h.trim()){E("El nombre de la firma es requerido");return}if(c==="drawn"&&!m){E("Por favor dibuje su firma");return}if(c==="styled"&&!g?.styled_text){E("Por favor ingrese el texto de su firma");return}const A={name:h,signature_type:c,...c==="drawn"?{image_data:m}:g};C.mutate(A)},U=S?.data?.data||[];return e.jsxs(we,{children:[e.jsx(Vt,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Qt,{className:"flex items-center gap-2",children:[e.jsx(yt,{className:"w-5 h-5 text-primary-600"}),"Firma Digital"]}),e.jsxs(L,{size:"sm",onClick:()=>i(!0),children:[e.jsx(Ke,{className:"w-4 h-4"}),"Nueva Firma"]})]})}),e.jsxs(Ce,{children:[w?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500"})}):U.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(yt,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"No tienes firmas digitales configuradas"}),e.jsxs(L,{variant:"secondary",onClick:()=>i(!0),children:[e.jsx(Ke,{className:"w-4 h-4"}),"Crear mi primera firma"]})]}):e.jsx("div",{className:"space-y-4",children:U.map(A=>e.jsxs("div",{className:`flex items-center gap-4 p-4 border rounded-lg ${A.active?A.is_default?"border-primary-300 bg-primary-50":"border-gray-200":"border-gray-200 bg-gray-50 opacity-60"}`,children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:[e.jsx("span",{className:`font-medium ${A.active?"":"text-gray-500"}`,children:A.name}),A.is_default&&A.active&&e.jsxs(qe,{status:"approved",className:"text-xs",children:[e.jsx(w0,{className:"w-3 h-3 mr-1"}),"Predeterminada"]}),e.jsx(qe,{variant:"secondary",className:"text-xs",children:A.signature_type==="drawn"?e.jsxs(e.Fragment,{children:[e.jsx(yt,{className:"w-3 h-3 mr-1"})," Dibujada"]}):e.jsxs(e.Fragment,{children:[e.jsx(C0,{className:"w-3 h-3 mr-1"})," Estilizada"]})}),!A.active&&e.jsx(qe,{status:"cancelled",className:"text-xs",children:"Desactivada"}),A.in_use&&e.jsxs(qe,{variant:"secondary",className:"text-xs bg-blue-50 text-blue-700",children:[e.jsx(Oe,{className:"w-3 h-3 mr-1"}),"En uso (",A.documents_count,")"]})]}),A.signature_type==="styled"&&e.jsx("p",{className:`text-2xl ${A.active?"":"opacity-50"}`,style:{fontFamily:`"${A.font_family}", cursive`,color:A.font_color},children:A.styled_text})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{size:"sm",variant:"secondary",onClick:()=>_.mutate(A.id),disabled:_.isPending,title:A.active?"Desactivar firma":"Activar firma",children:e.jsx(B_,{className:`w-4 h-4 ${A.active?"text-green-600":"text-gray-400"}`})}),!A.is_default&&A.active&&e.jsx(L,{size:"sm",variant:"secondary",onClick:()=>N.mutate(A.id),disabled:N.isPending,title:"Establecer como predeterminada",children:e.jsx(w0,{className:"w-4 h-4"})}),e.jsx(L,{size:"sm",variant:"danger",onClick:()=>{if(A.in_use){alert(`Esta firma est siendo utilizada en ${A.documents_count} documento(s). Desactvela en lugar de eliminarla.`);return}confirm("Est seguro de eliminar esta firma?")&&j.mutate(A.id)},disabled:j.isPending||A.in_use,title:A.in_use?"No se puede eliminar, est en uso":"Eliminar firma",children:e.jsx(Nt,{className:"w-4 h-4"})})]})]},A.id))}),r&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b sticky top-0 bg-white",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Nueva Firma Digital"}),e.jsx("button",{onClick:z,className:"p-1 hover:bg-gray-100 rounded",children:e.jsx(vt,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[v&&e.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-700",children:[e.jsx(st,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:v})]}),e.jsx(ue,{label:"Nombre de la firma",value:h,onChange:A=>x(A.target.value),placeholder:"Ej: Firma formal, Iniciales, etc."}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de firma"}),e.jsxs("div",{className:"flex border rounded-lg overflow-hidden",children:[e.jsxs("button",{type:"button",onClick:()=>u("drawn"),className:`flex-1 px-4 py-2 text-sm font-medium flex items-center justify-center gap-2 ${c==="drawn"?"bg-primary-500 text-white":"bg-gray-50 text-gray-700 hover:bg-gray-100"}`,children:[e.jsx(yt,{className:"w-4 h-4"}),"Dibujar"]}),e.jsxs("button",{type:"button",onClick:()=>u("styled"),className:`flex-1 px-4 py-2 text-sm font-medium flex items-center justify-center gap-2 ${c==="styled"?"bg-primary-500 text-white":"bg-gray-50 text-gray-700 hover:bg-gray-100"}`,children:[e.jsx(C0,{className:"w-4 h-4"}),"Estilizada"]})]})]}),c==="drawn"?e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dibuje su firma"}),e.jsx(Hw,{onSave:p,width:400,height:150})]}):e.jsx($w,{onChange:f}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx(L,{type:"button",variant:"secondary",onClick:z,children:"Cancelar"}),e.jsxs(L,{onClick:k,loading:C.isPending,children:[e.jsx($s,{className:"w-4 h-4"}),"Guardar Firma"]})]})]})]})})]})]})}function Yw(s){return s?new Date(s).toLocaleDateString("es-CO",{year:"numeric",month:"long",day:"numeric"}):"-"}function Xw(s){if(!s)return"0 aos";const r=Math.floor(s),i=Math.round((s-r)*12);return r===0&&i===0?"Menos de 1 mes":r===0?`${i} ${i===1?"mes":"meses"}`:i===0?`${r} ${r===1?"ao":"aos"}`:`${r} ${r===1?"ao":"aos"} y ${i} ${i===1?"mes":"meses"}`}function Kw(){const{user:s}=Ra(),[r,i]=b.useState(!1),[c,u]=b.useState(!1),h=f=>{localStorage.setItem("user",JSON.stringify(f)),window.location.reload()},x=f=>{const v={admin:"bg-red-100 text-red-700",hr:"bg-purple-100 text-purple-700",legal:"bg-blue-100 text-blue-700",employee:"bg-green-100 text-green-700",viewer:"bg-gray-100 text-gray-700"};return v[f]||v.employee},m=f=>({admin:"Administrador",hr:"Recursos Humanos",legal:"Legal",employee:"Empleado",viewer:"Visor"})[f]||f,p=s?.vacation||{},g=s?.employee||{};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Mi Perfil"}),e.jsx("p",{className:"text-gray-500",children:"Gestiona tu informacin personal y preferencias"})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsx(we,{children:e.jsx(Ce,{className:"p-6",children:e.jsxs("div",{className:"flex items-start gap-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-24 h-24 bg-primary-100 rounded-full flex items-center justify-center",children:e.jsxs("span",{className:"text-3xl font-bold text-primary-600",children:[s?.first_name?.[0],s?.last_name?.[0]]})}),e.jsx("button",{className:"absolute bottom-0 right-0 p-2 bg-white rounded-full shadow-lg border hover:bg-gray-50",children:e.jsx(A2,{className:"w-4 h-4 text-gray-600"})})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:s?.full_name}),e.jsx("p",{className:"text-gray-500",children:s?.email}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[g.job_title,"  ",g.department]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[s?.roles?.map(f=>e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${x(f)}`,children:m(f)},f)),s?.is_supervisor&&e.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-700",children:"Supervisor"})]}),e.jsxs("div",{className:"flex gap-3 mt-4",children:[e.jsx(L,{size:"sm",onClick:()=>i(!0),children:"Editar Perfil"}),e.jsxs(L,{size:"sm",variant:"secondary",onClick:()=>u(!0),children:[e.jsx(wm,{className:"w-4 h-4"}),"Cambiar Contrasea"]})]})]})]})})}),e.jsx(qu,{title:"Informacin Laboral",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-8",children:[e.jsx(fs,{icon:ka,label:"Nmero de Empleado",value:g.employee_number}),e.jsx(fs,{icon:Ta,label:"Cargo",value:g.job_title}),e.jsx(fs,{icon:Ut,label:"Departamento",value:g.department}),e.jsx(fs,{icon:Ug,label:"Fecha de Contratacin",value:Yw(g.hire_date)}),e.jsx(fs,{icon:Sm,label:"Antigedad",value:Xw(p.years_of_service)}),e.jsx(fs,{icon:ss,label:"Aos Completos",value:`${p.complete_years||0} aos`})]})}),e.jsx(qu,{title:"Informacin de Contacto",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-8",children:[e.jsx(fs,{icon:lo,label:"Correo Electrnico",value:s?.email}),e.jsx(fs,{icon:Ut,label:"Organizacin",value:"VALKYRIA Corp"})]})}),e.jsx(qu,{title:"Preferencias",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-8",children:[e.jsx(fs,{icon:p_,label:"Idioma",value:s?.locale==="es"?"Espaol":"English"}),e.jsx(fs,{icon:Xt,label:"Zona Horaria",value:s?.time_zone||"UTC"})]})}),e.jsx(Pw,{})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(we,{children:[e.jsx(Vt,{children:e.jsxs(Qt,{className:"flex items-center gap-2",children:[e.jsx(St,{className:"w-5 h-5 text-primary-600"}),"Vacaciones"]})}),e.jsxs(Ce,{className:"space-y-4",children:[e.jsxs("div",{className:"text-center py-4 bg-primary-50 rounded-xl",children:[e.jsx("p",{className:"text-4xl font-bold text-primary-600",children:Math.floor(p.days_available||0)}),e.jsx("p",{className:"text-sm text-primary-700 mt-1",children:"Das disponibles"})]}),e.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg",children:[e.jsx("p",{className:"text-xs text-blue-700 font-medium",children:"Poltica: Ley Laboral Colombiana"}),e.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:[p.days_per_year||15," das hbiles por ao de servicio"]})]}),e.jsxs("div",{className:"space-y-3 pt-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Das causados (total)"}),e.jsx("span",{className:"font-medium",children:Math.floor(p.days_accrued_total||0)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Das usados (total)"}),e.jsx("span",{className:"font-medium",children:Math.floor(p.days_used_total||0)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Das pendientes"}),e.jsx("span",{className:"font-medium text-primary-600",children:Math.floor(p.days_pending||0)})]}),e.jsx("div",{className:"border-t pt-3",children:e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Mximo acumulable"}),e.jsxs("span",{className:"font-medium",children:[p.max_accumulation_days||30," das"]})]})})]}),p.days_expiring>0&&e.jsxs("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg flex items-start gap-2",children:[e.jsx(rs,{className:"w-4 h-4 text-yellow-600 mt-0.5"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-yellow-800",children:[Math.floor(p.days_expiring)," das por vencer"]}),e.jsxs("p",{className:"text-xs text-yellow-600",children:["Exceden el mximo acumulable de ",p.max_accumulation_days," das"]})]})]}),p.can_compensate_cash&&e.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:[e.jsxs("p",{className:"text-sm text-green-800",children:[e.jsx(Be,{className:"w-4 h-4 inline mr-1"}),"Puedes compensar hasta ",p.max_cash_compensation," das en efectivo"]}),e.jsx("p",{className:"text-xs text-green-600 mt-1",children:"Disponible despus de 4 aos de servicio"})]}),e.jsx("div",{className:"pt-2",children:e.jsx(Vw,{used:p.days_used_total||0,total:p.days_accrued_total||0,label:"Das usados vs causados"})})]})]}),e.jsxs(we,{children:[e.jsx(Vt,{children:e.jsxs(Qt,{className:"flex items-center gap-2",children:[e.jsx(as,{className:"w-5 h-5 text-green-600"}),"Seguridad"]})}),e.jsxs(Ce,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Contrasea"}),e.jsx(qe,{status:"approved",children:"Configurada"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"ltimo acceso"}),e.jsx("span",{className:"text-sm text-gray-900",children:"Hoy"})]}),e.jsx(L,{variant:"secondary",size:"sm",className:"w-full mt-2",onClick:()=>u(!0),children:"Cambiar Contrasea"})]})]}),e.jsxs(we,{children:[e.jsx(Vt,{children:e.jsx(Qt,{children:"Permisos"})}),e.jsx(Ce,{children:e.jsxs("div",{className:"space-y-2",children:[s?.permissions?.slice(0,6).map(f=>e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Be,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{className:"text-gray-600",children:f==="*"?"Acceso completo":f.replace("."," - ")})]},f)),s?.permissions?.length>6&&e.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:["+",s.permissions.length-6," permisos ms"]})]})})]})]})]}),e.jsx(Qw,{user:s,isOpen:r,onClose:()=>i(!1),onSuccess:h}),e.jsx(Gw,{isOpen:c,onClose:()=>u(!1)})]})}const Le=b.forwardRef(({label:s,error:r,options:i,placeholder:c,className:u="",...h},x)=>e.jsxs("div",{className:"w-full",children:[s&&e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:s}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{ref:x,className:`
            w-full px-3 py-2 border rounded-lg text-gray-900 appearance-none
            focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent
            disabled:bg-gray-50 disabled:text-gray-500
            ${r?"border-red-300":"border-gray-300"}
            ${u}
          `,...h,children:[c&&e.jsx("option",{value:"",children:c}),i.map(m=>e.jsx("option",{value:m.value,children:m.label},m.value))]}),e.jsx(Gn,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 pointer-events-none"})]}),r&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:r})]}));Le.displayName="Select";const T0=[{value:"vacation",label:"Vacaciones"},{value:"personal",label:"Da Personal"},{value:"sick",label:"Enfermedad"},{value:"bereavement",label:"Duelo"},{value:"unpaid",label:"Sin Goce"}],Zw=[{value:"",label:"Todos"},{value:"draft",label:"Borrador"},{value:"pending",label:"Solicitada"},{value:"approved",label:"Aprobada"},{value:"enjoyed",label:"Disfrutada"},{value:"rejected",label:"Rechazada"},{value:"cancelled",label:"Cancelada"}];function Jw({onClose:s,onSuccess:r,balance:i}){const[c,u]=b.useState(1),[h,x]=b.useState({vacation_type:"vacation",start_date:"",end_date:"",days_requested:"",reason:""}),[m,p]=b.useState(null),[g,f]=b.useState(null),[v,E]=b.useState(null),[S,w]=b.useState(!1),[C,j]=b.useState(""),_=et(),{data:N}=ke({queryKey:["vacation-template"],queryFn:async()=>(await si.list({category:"vacation"})).data?.data?.[0]||null}),z=N,k=Ne({mutationFn:Y=>Pa.create(Y),onSuccess:async Y=>{const me=Y.data?.data,M=Y.data?.document;if(p(me),f(M),j(""),me?.id&&me?.has_document)try{const V=await Pa.downloadDocument(me.id),ae=new Blob([V.data],{type:"application/pdf"});E(URL.createObjectURL(ae))}catch(V){console.error("Error loading PDF:",V),E(null)}else E(null);u(2)},onError:Y=>{const me=Y.response?.data?.errors;Array.isArray(me)?j(me.join(", ")):j(Y.response?.data?.error||"Error al crear la solicitud")}}),U=Ne({mutationFn:Y=>Pa.signDocument(Y),onSuccess:Y=>{f(Y.data?.document),p(Y.data?.data),T()},onError:Y=>{j(Y.response?.data?.error||"Error al firmar el documento")}}),A=Ne({mutationFn:Y=>Pa.submit(Y),onSuccess:Y=>{p(Y.data?.data),u(3),_.invalidateQueries(["vacations"])},onError:Y=>{j(Y.response?.data?.error||"Error al enviar la solicitud")}}),T=async()=>{if(m?.id)try{const Y=await Pa.downloadDocument(m.id),me=new Blob([Y.data],{type:"application/pdf"});v&&URL.revokeObjectURL(v),E(URL.createObjectURL(me))}catch(Y){console.error("Error reloading PDF:",Y)}},O=Y=>{const me=Y%19,M=Math.floor(Y/100),V=Y%100,ae=Math.floor(M/4),W=M%4,R=Math.floor((M+8)/25),X=Math.floor((M-R+1)/3),ge=(19*me+M-ae-X+15)%30,Q=Math.floor(V/4),ie=V%4,_e=(32+2*W+2*Q-ge-ie)%7,ze=Math.floor((me+11*ge+22*_e)/451),$e=Math.floor((ge+_e-7*ze+114)/31),ne=(ge+_e-7*ze+114)%31+1;return new Date(Y,$e-1,ne)},ee=Y=>{const me=new Date(Y),M=me.getDay();return M===0?me.setDate(me.getDate()+1):M!==1&&me.setDate(me.getDate()+(8-M)),me},B=Y=>{const me=[],M=O(Y);me.push(new Date(Y,0,1)),me.push(new Date(Y,4,1)),me.push(new Date(Y,6,20)),me.push(new Date(Y,7,7)),me.push(new Date(Y,11,8)),me.push(new Date(Y,11,25)),me.push(ee(new Date(Y,0,6))),me.push(ee(new Date(Y,2,19))),me.push(ee(new Date(Y,5,29))),me.push(ee(new Date(Y,7,15))),me.push(ee(new Date(Y,9,12))),me.push(ee(new Date(Y,10,1))),me.push(ee(new Date(Y,10,11)));const V=new Date(M);V.setDate(M.getDate()-3),me.push(V);const ae=new Date(M);ae.setDate(M.getDate()-2),me.push(ae);const W=new Date(M);W.setDate(M.getDate()+39),me.push(ee(W));const R=new Date(M);R.setDate(M.getDate()+60),me.push(ee(R));const X=new Date(M);return X.setDate(M.getDate()+68),me.push(ee(X)),me},ye=(Y,me)=>{const M=Y.toISOString().split("T")[0];return me.some(V=>V.toISOString().split("T")[0]===M)},F=(Y,me)=>{let M=0;const V=new Date(Y),ae=new Date(me),W=V.getFullYear(),R=ae.getFullYear();let X=[];for(let ge=W;ge<=R;ge++)X=X.concat(B(ge));for(;V<=ae;){const ge=V.getDay();ge!==0&&ge!==6&&!ye(V,X)&&M++,V.setDate(V.getDate()+1)}return M};b.useEffect(()=>{if(h.start_date&&h.end_date){const Y=new Date(h.start_date+"T00:00:00"),me=new Date(h.end_date+"T00:00:00");if(me>=Y){const M=F(Y,me);x(V=>({...V,days_requested:M.toString()}))}}},[h.start_date,h.end_date]),b.useEffect(()=>()=>{v&&URL.revokeObjectURL(v)},[v]);const te=Y=>{Y.preventDefault(),k.mutate(h)},je=()=>{j(""),m?.id&&U.mutate(m.id)},xe=()=>{j(""),m?.id&&A.mutate(m.id)},$=()=>{_.invalidateQueries(["vacations"]),r?.(),s()},pe=()=>{v&&window.open(v,"_blank")},G=g?.employee_signed||!1;return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-center gap-2 mb-6",children:[1,2,3].map(Y=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${c>=Y?"bg-primary-500 text-white":"bg-gray-200 text-gray-500"}`,children:c>Y?e.jsx(Be,{className:"w-5 h-5"}):Y}),Y<3&&e.jsx("div",{className:`w-12 h-1 mx-1 ${c>Y?"bg-primary-500":"bg-gray-200"}`})]},Y))}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 px-4 mb-6",children:[e.jsx("span",{className:c>=1?"text-primary-600 font-medium":"",children:"Datos"}),e.jsx("span",{className:c>=2?"text-primary-600 font-medium":"",children:"Firmar"}),e.jsx("span",{className:c>=3?"text-primary-600 font-medium":"",children:"Enviado"})]}),c===1&&e.jsxs("form",{onSubmit:te,className:"space-y-4",children:[z&&e.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg flex items-start gap-3",children:[e.jsx(Oe,{className:"w-5 h-5 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-blue-900",children:z.name}),e.jsx("p",{className:"text-sm text-blue-700",children:"Se generar el documento oficial para tu firma"}),z.signatories_count>0&&e.jsxs("div",{className:"flex items-center gap-1 mt-2 text-sm text-blue-600",children:[e.jsx(ht,{className:"w-4 h-4"}),e.jsxs("span",{children:[z.signatories_count," firmantes requeridos"]})]})]})]}),e.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg flex items-center justify-between",children:[e.jsx("span",{className:"text-green-700",children:"Das disponibles para solicitar:"}),e.jsx("span",{className:"text-xl font-bold text-green-600",children:Math.floor(i?.available||0)})]}),e.jsx(Le,{label:"Tipo de Solicitud",options:T0,value:h.vacation_type,onChange:Y=>x({...h,vacation_type:Y.target.value}),required:!0}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(ue,{label:"Fecha Inicio",type:"date",value:h.start_date,min:new Date().toISOString().split("T")[0],onChange:Y=>{x({...h,start_date:Y.target.value}),j("")},required:!0}),e.jsx(ue,{label:"Fecha Fin",type:"date",value:h.end_date,min:h.start_date||new Date().toISOString().split("T")[0],onChange:Y=>{x({...h,end_date:Y.target.value}),j("")},required:!0})]}),e.jsx(ue,{label:"Das Solicitados",type:"number",step:"0.5",min:"0.5",value:h.days_requested,onChange:Y=>x({...h,days_requested:Y.target.value}),required:!0}),parseFloat(h.days_requested)>(i?.available||0)&&e.jsxs("div",{className:"p-3 bg-amber-50 border border-amber-200 rounded-lg flex items-center gap-2 text-amber-700",children:[e.jsx(st,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Los das solicitados exceden tu saldo disponible"})]}),C&&e.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-700",children:[e.jsx(st,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:C})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Motivo (opcional)"}),e.jsx("textarea",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",rows:3,value:h.reason,onChange:Y=>x({...h,reason:Y.target.value}),placeholder:"Describe el motivo de tu solicitud..."})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx(L,{type:"button",variant:"secondary",onClick:s,children:"Cancelar"}),e.jsx(L,{type:"submit",loading:k.isPending,children:"Continuar"})]})]}),c===2&&m&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsxs("h3",{className:"font-medium text-gray-900",children:["Solicitud ",m.request_number]}),e.jsx(qe,{status:m.status})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Tipo:"}),e.jsx("p",{className:"font-medium",children:T0.find(Y=>Y.value===m.vacation_type)?.label})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Fechas:"}),e.jsxs("p",{className:"font-medium",children:[new Date(m.start_date).toLocaleDateString("es-ES")," - ",new Date(m.end_date).toLocaleDateString("es-ES")]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Das:"}),e.jsx("p",{className:"font-bold text-primary-600",children:m.days_requested})]})]})]}),v?e.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"bg-gray-100 px-4 py-2 flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Documento de Solicitud"}),e.jsxs(L,{variant:"ghost",size:"sm",onClick:pe,children:[e.jsx(Fg,{className:"w-4 h-4"}),"Abrir en nueva pestaa"]})]}),e.jsx("iframe",{src:v,className:"w-full h-[400px] border-0",title:"Vista previa del documento"})]}):e.jsxs("div",{className:"border rounded-lg p-8 text-center bg-gray-50",children:[e.jsx(Vl,{className:"w-8 h-8 animate-spin mx-auto text-gray-400 mb-2"}),e.jsx("p",{className:"text-gray-500",children:"Cargando documento..."})]}),e.jsxs("div",{className:"p-4 bg-white border rounded-lg",children:[e.jsxs("h4",{className:"font-medium text-gray-900 mb-3 flex items-center gap-2",children:[e.jsx(yt,{className:"w-4 h-4"}),"Firmas Requeridas"]}),e.jsx("div",{className:"space-y-3",children:g?.signatures?.map((Y,me)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium ${Y.signed?"bg-green-500 text-white":"bg-gray-300 text-gray-600"}`,children:Y.signed?e.jsx(Be,{className:"w-5 h-5"}):me+1}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:Y.label}),Y.signed&&e.jsxs("p",{className:"text-xs text-green-600",children:["Firmado por ",Y.signed_by," - ",new Date(Y.signed_at).toLocaleString("es-ES")]})]})]}),Y.signatory_type_code==="employee"&&!Y.signed&&e.jsxs(L,{size:"sm",onClick:je,loading:U.isPending,children:[e.jsx(yt,{className:"w-4 h-4"}),"Firmar"]}),Y.signatory_type_code!=="employee"&&!Y.signed&&e.jsx("span",{className:"text-xs text-gray-500 px-2 py-1 bg-gray-200 rounded",children:"Pendiente"})]},me))})]}),C&&e.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-700",children:[e.jsx(st,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:C})]}),!G&&e.jsxs("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-lg flex items-start gap-3",children:[e.jsx(st,{className:"w-5 h-5 text-amber-600 mt-0.5"}),e.jsxs("div",{className:"text-sm text-amber-800",children:[e.jsx("p",{className:"font-medium",children:"Debes firmar el documento antes de enviar"}),e.jsx("p",{className:"mt-1",children:'Haz clic en el botn "Firmar" junto a tu nombre para continuar.'})]})]}),G&&e.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg flex items-start gap-3",children:[e.jsx(Be,{className:"w-5 h-5 text-green-600 mt-0.5"}),e.jsxs("div",{className:"text-sm text-green-800",children:[e.jsx("p",{className:"font-medium",children:"Documento firmado!"}),e.jsx("p",{className:"mt-1",children:"Ahora puedes enviar la solicitud para aprobacin del supervisor y RRHH."})]})]}),e.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[e.jsx(L,{variant:"secondary",onClick:()=>u(1),children:"Volver"}),e.jsxs(L,{onClick:xe,loading:A.isPending,disabled:!G,children:[e.jsx(no,{className:"w-4 h-4"}),"Enviar Solicitud"]})]})]}),c===3&&m&&e.jsxs("div",{className:"space-y-4 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto",children:e.jsx(Be,{className:"w-8 h-8 text-green-600"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Solicitud Enviada!"}),e.jsxs("p",{className:"text-gray-600",children:["Tu solicitud ",e.jsx("span",{className:"font-medium",children:m.request_number})," ha sido enviada correctamente."]}),v&&e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Documento firmado:"}),e.jsxs(L,{variant:"secondary",onClick:pe,children:[e.jsx($l,{className:"w-4 h-4"}),"Ver Documento PDF"]})]}),e.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg text-left",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Prximos pasos:"}),e.jsxs("div",{className:"space-y-2 text-sm text-blue-800",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Xt,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{children:"Tu supervisor recibir la solicitud para aprobacin y firma"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(yt,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{children:"Recursos Humanos revisar y firmar la solicitud"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Be,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{children:"Recibirs notificacin cuando sea aprobada"})]})]})]}),e.jsx("div",{className:"pt-4 border-t",children:e.jsx(L,{onClick:$,children:"Cerrar"})})]})]})}function Iw({vacation:s,onSubmit:r,onCancel:i,onDelete:c,onView:u,onDownload:h,onSign:x}){const m={vacation:"Vacaciones",personal:"Da Personal",sick:"Enfermedad",bereavement:"Duelo",unpaid:"Sin Goce"};return e.jsx(we,{className:"hover:shadow-md transition-shadow",children:e.jsxs(Ce,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"p-2 bg-primary-50 rounded-lg",children:e.jsx(St,{className:"w-5 h-5 text-primary-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:m[s.vacation_type]||s.vacation_type}),e.jsx("p",{className:"text-sm text-gray-500",children:s.request_number}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[new Date(s.start_date).toLocaleDateString("es-ES")," - ",new Date(s.end_date).toLocaleDateString("es-ES")]}),e.jsxs("p",{className:"text-sm font-medium text-primary-600 mt-1",children:[s.days_requested," das"]})]})]}),e.jsx(qe,{status:s.status})]}),e.jsxs("div",{className:"flex justify-end gap-1 mt-4 pt-4 border-t border-gray-100",children:[e.jsx(L,{variant:"ghost",size:"sm",onClick:()=>u(s),title:"Ver detalles",children:e.jsx(At,{className:"w-4 h-4"})}),s.has_document&&e.jsx(L,{variant:"ghost",size:"sm",onClick:()=>h(s.id),title:"Descargar documento",children:e.jsx($l,{className:"w-4 h-4"})}),s.status==="draft"&&s.needs_employee_signature&&e.jsxs(L,{variant:"secondary",size:"sm",onClick:()=>x(s),title:"Firmar documento",children:[e.jsx(yt,{className:"w-4 h-4"}),"Firmar"]}),s.status==="draft"&&!s.needs_employee_signature&&e.jsx(L,{variant:"primary",size:"sm",onClick:()=>r(s.id),title:"Enviar solicitud",children:e.jsx(no,{className:"w-4 h-4"})}),["draft","pending"].includes(s.status)&&e.jsx(L,{variant:"ghost",size:"sm",onClick:()=>i(s.id),title:"Cancelar solicitud",children:e.jsx(vt,{className:"w-4 h-4"})}),s.can_delete&&e.jsx(L,{variant:"danger",size:"sm",onClick:()=>c(s.id),title:"Eliminar solicitud",children:e.jsx(Nt,{className:"w-4 h-4"})})]})]})})}function Ww(){const[s,r]=b.useState(!1),[i,c]=b.useState(!1),[u,h]=b.useState(null),[x,m]=b.useState(""),p=et(),g=Za(),f=Aa();b.useEffect(()=>{g.state?.openNew&&(r(!0),f(g.pathname,{replace:!0,state:{}}))},[g.state,g.pathname,f]);const{data:v,isLoading:E}=ke({queryKey:["vacations",{status:x}],queryFn:()=>Pa.list({status:x||void 0})}),S=Ne({mutationFn:T=>Pa.submit(T),onSuccess:()=>{p.invalidateQueries(["vacations"])}}),w=Ne({mutationFn:T=>Pa.cancel(T),onSuccess:()=>{p.invalidateQueries(["vacations"])}}),C=Ne({mutationFn:T=>Pa.delete(T),onSuccess:()=>{p.invalidateQueries(["vacations"])},onError:T=>{alert(T.response?.data?.error||"Error al eliminar la solicitud")}}),j=Ne({mutationFn:T=>Pa.signDocument(T),onSuccess:()=>{p.invalidateQueries(["vacations"]),alert("Documento firmado exitosamente. Ahora puedes enviar la solicitud.")},onError:T=>{const O=T.response?.data?.error||"Error al firmar el documento";T.response?.data?.action_required?.type==="configure_signature"?window.confirm("No tienes firma digital configurada. Deseas configurarla ahora?")&&f("/profile"):alert(O)}}),_=T=>{window.confirm("Ests seguro de que deseas eliminar esta solicitud? Esta accin no se puede deshacer.")&&C.mutate(T)},N=T=>{j.mutate(T.id)},z=v?.data?.data||[],k=v?.data?.meta?.vacation_balance||{},U=T=>{h(T),c(!0)},A=async T=>{try{const O=await Pa.downloadDocument(T),ee=new Blob([O.data],{type:"application/pdf"}),B=window.URL.createObjectURL(ee);window.open(B,"_blank")}catch(O){console.error("Error downloading document:",O),alert("Error al descargar el documento")}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Mis Vacaciones"}),e.jsx("p",{className:"text-gray-500",children:"Gestiona tus solicitudes de vacaciones"})]}),e.jsxs(L,{onClick:()=>r(!0),children:[e.jsx(Ke,{className:"w-4 h-4"}),"Nueva Solicitud"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(we,{className:"bg-blue-50 border-blue-200",children:e.jsx(Ce,{className:"p-5",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-blue-100 rounded-xl",children:e.jsx(Ug,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:Math.floor((k.accrued||0)-(k.enjoyed||0))}),e.jsx("p",{className:"text-sm text-blue-700 font-medium",children:"Das por Contrato"}),e.jsx("p",{className:"text-xs text-blue-500",children:"Acumulados - Disfrutados"})]})]})})}),e.jsx(we,{className:"bg-amber-50 border-amber-200",children:e.jsx(Ce,{className:"p-5",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-amber-100 rounded-xl",children:e.jsx(D2,{className:"w-6 h-6 text-amber-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-3xl font-bold text-amber-600",children:Math.floor(k.scheduled||0)}),e.jsx("p",{className:"text-sm text-amber-700 font-medium",children:"Das Programados"}),e.jsx("p",{className:"text-xs text-amber-500",children:"Aprobados sin disfrutar"})]})]})})}),e.jsx(we,{className:"bg-green-50 border-green-300 ring-2 ring-green-200",children:e.jsx(Ce,{className:"p-5",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-green-100 rounded-xl",children:e.jsx(Ke,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-3xl font-bold text-green-600",children:Math.floor(k.available||0)}),e.jsx("p",{className:"text-sm text-green-700 font-medium",children:"Das Vacaciones"}),e.jsx("p",{className:"text-xs text-green-500",children:"Para solicitar"})]})]})})})]}),e.jsx(we,{children:e.jsx(Ce,{className:"py-3",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(_m,{className:"w-4 h-4 text-gray-400"}),e.jsx(Le,{options:Zw,value:x,onChange:T=>m(T.target.value),className:"w-48"})]})})}),E?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[1,2,3].map(T=>e.jsx(we,{className:"animate-pulse",children:e.jsx(Ce,{className:"p-4",children:e.jsx("div",{className:"h-24 bg-gray-100 rounded"})})},T))}):z.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:z.map(T=>e.jsx(Iw,{vacation:T,onSubmit:O=>S.mutate(O),onCancel:O=>w.mutate(O),onDelete:_,onView:U,onDownload:A,onSign:N},T.id))}):e.jsx(we,{children:e.jsxs(Ce,{className:"py-12 text-center",children:[e.jsx(St,{className:"w-16 h-16 mx-auto text-gray-300 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No tienes solicitudes de vacaciones"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Crea tu primera solicitud de vacaciones"}),e.jsxs(L,{onClick:()=>r(!0),children:[e.jsx(Ke,{className:"w-4 h-4"}),"Nueva Solicitud"]})]})}),e.jsx(Qe,{isOpen:s,onClose:()=>r(!1),title:"Nueva Solicitud de Vacaciones",size:"xl",children:e.jsx(Jw,{onClose:()=>r(!1),onSuccess:()=>p.invalidateQueries(["vacations"]),balance:k})}),e.jsx(Qe,{isOpen:i,onClose:()=>c(!1),title:"Detalle de Solicitud",size:"md",children:u&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-500",children:"Nmero:"}),e.jsx("span",{className:"font-medium",children:u.request_number})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-500",children:"Estado:"}),e.jsx(qe,{status:u.status})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-500",children:"Tipo:"}),e.jsx("span",{children:u.vacation_type})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-500",children:"Fechas:"}),e.jsxs("span",{children:[new Date(u.start_date).toLocaleDateString("es-ES")," - ",new Date(u.end_date).toLocaleDateString("es-ES")]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-500",children:"Das:"}),e.jsx("span",{className:"font-medium text-primary-600",children:u.days_requested})]}),u.reason&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 block mb-1",children:"Motivo:"}),e.jsx("p",{className:"text-gray-700 bg-gray-50 p-3 rounded-lg",children:u.reason})]}),u.decision_reason&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 block mb-1",children:"Comentario del aprobador:"}),e.jsx("p",{className:"text-gray-700 bg-gray-50 p-3 rounded-lg",children:u.decision_reason})]}),u.has_document&&e.jsx("div",{className:"pt-4 border-t",children:e.jsxs(L,{variant:"secondary",className:"w-full",onClick:()=>A(u.id),children:[e.jsx($l,{className:"w-4 h-4"}),"Descargar Documento"]})})]})})]})}function M0({request:s,type:r,onApprove:i,onReject:c,onView:u,showActions:h=!0}){const x=r==="vacation",m=x?St:ss;return e.jsx(we,{className:"hover:shadow-md transition-shadow",children:e.jsx(Ce,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`p-3 rounded-xl ${x?"bg-blue-50":"bg-purple-50"}`,children:e.jsx(m,{className:`w-6 h-6 ${x?"text-blue-600":"text-purple-600"}`})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:s.employee?.name||"Empleado"}),e.jsxs("p",{className:"text-sm text-gray-500",children:[s.employee?.department,"  ",s.employee?.job_title]})]}),e.jsx(qe,{status:s.status})]}),e.jsxs("div",{className:"mt-3 space-y-1",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Solicitud:"})," ",s.request_number]}),x?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Tipo:"})," ",s.vacation_type]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Fechas:"})," ",new Date(s.start_date).toLocaleDateString("es-ES")," -"," ",new Date(s.end_date).toLocaleDateString("es-ES")]}),e.jsxs("div",{className:"flex items-center gap-4 mt-1",children:[e.jsxs("p",{className:"text-sm font-medium text-primary-600",children:[Math.floor(s.days_requested)," das solicitados"]}),e.jsxs("p",{className:"text-sm text-gray-500",children:[e.jsx("span",{className:"font-medium text-green-600",children:Math.floor(s.employee?.available_vacation_days||0)})," das disponibles"]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Tipo:"})," Certificacin ",s.certification_type]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Propsito:"})," ",s.purpose]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Tiempo estimado: ",s.estimated_days," das"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-4 pt-4 border-t border-gray-100",children:[e.jsxs(L,{variant:"ghost",size:"sm",onClick:()=>u(s,r),children:[e.jsx(At,{className:"w-4 h-4"}),"Detalle"]}),h&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex-1"}),e.jsxs(L,{variant:"danger",size:"sm",onClick:()=>c(s,r),children:[e.jsx(Ma,{className:"w-4 h-4"}),"Rechazar"]}),e.jsxs(L,{variant:"success",size:"sm",onClick:()=>i(s,r),children:[e.jsx(Be,{className:"w-4 h-4"}),"Aprobar"]})]})]})]})]})})})}function e4(){const[s,r]=b.useState("pending"),[i,c]=b.useState(!1),[u,h]=b.useState(!1),[x,m]=b.useState(null),[p,g]=b.useState(null),[f,v]=b.useState(""),E=et(),{data:S,isLoading:w}=ke({queryKey:["approvals","pending"],queryFn:()=>$n.list({status:"pending"})}),{data:C,isLoading:j}=ke({queryKey:["approvals","history"],queryFn:()=>$n.list({status:"history"}),enabled:s==="history"}),_=Ne({mutationFn:({id:xe})=>$n.approve(xe,{}),onSuccess:()=>{E.invalidateQueries(["approvals"]),E.invalidateQueries(["approvals-count"])}}),N=Ne({mutationFn:({id:xe,reason:$})=>$n.reject(xe,$),onSuccess:()=>{E.invalidateQueries(["approvals"]),E.invalidateQueries(["approvals-count"]),c(!1),v("")}}),z=Ne({mutationFn:xe=>Qa.generateDocument(xe),onSuccess:xe=>{E.invalidateQueries(["approvals"]),alert("Documento generado exitosamente"),xe.data?.data?.certification&&m($=>({...$,document_uuid:xe.data.data.certification.document_uuid,status:xe.data.data.certification.status}))},onError:xe=>{alert(xe.response?.data?.error||"Error al generar documento")}}),k=async xe=>{try{const $=await Qa.downloadDocument(xe),pe=new Blob([$.data],{type:"application/pdf"}),G=window.URL.createObjectURL(pe),Y=document.createElement("a");Y.href=G,Y.download=`certificacion-${xe}.pdf`,document.body.appendChild(Y),Y.click(),document.body.removeChild(Y),window.URL.revokeObjectURL(G)}catch($){alert($.response?.data?.error||"Error al descargar documento")}},U=S?.data?.data||{vacation_requests:[],certification_requests:[]},A=C?.data?.data||{vacation_requests:[],certification_requests:[]},T=(U.vacation_requests?.length||0)+(U.certification_requests?.length||0),O=(A.vacation_requests?.length||0)+(A.certification_requests?.length||0),ee=(xe,$)=>{window.confirm("Ests seguro de aprobar esta solicitud?")&&_.mutate({id:xe.id,type:$})},B=(xe,$)=>{m(xe),g($),c(!0)},ye=(xe,$)=>{m(xe),g($),h(!0)},F=()=>{if(!f.trim()){alert("Debes proporcionar un motivo de rechazo");return}N.mutate({id:x.id,reason:f})},te=s==="pending"?U:A,je=s==="pending"?w:j;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Gestin de Aprobaciones"}),e.jsx("p",{className:"text-gray-500",children:"Administra las solicitudes de vacaciones y certificaciones"})]}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"-mb-px flex space-x-8",children:[e.jsxs("button",{onClick:()=>r("pending"),className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center gap-2 ${s==="pending"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(Xt,{className:"w-4 h-4"}),"Pendientes",T>0&&e.jsx("span",{className:"bg-danger-500 text-white text-xs px-2 py-0.5 rounded-full",children:T})]}),e.jsxs("button",{onClick:()=>r("history"),className:`py-4 px-1 border-b-2 font-medium text-sm flex items-center gap-2 ${s==="history"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(N0,{className:"w-4 h-4"}),"Historial",s==="history"&&O>0&&e.jsx("span",{className:"bg-gray-200 text-gray-700 text-xs px-2 py-0.5 rounded-full",children:O})]})]})}),s==="pending"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(we,{children:e.jsxs(Ce,{className:"flex items-center gap-4 p-4",children:[e.jsx("div",{className:"p-3 bg-yellow-50 rounded-xl",children:e.jsx(Xt,{className:"w-6 h-6 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:T}),e.jsx("p",{className:"text-sm text-gray-500",children:"Total Pendientes"})]})]})}),e.jsx(we,{children:e.jsxs(Ce,{className:"flex items-center gap-4 p-4",children:[e.jsx("div",{className:"p-3 bg-blue-50 rounded-xl",children:e.jsx(St,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:U.vacation_requests?.length||0}),e.jsx("p",{className:"text-sm text-gray-500",children:"Vacaciones"})]})]})}),e.jsx(we,{children:e.jsxs(Ce,{className:"flex items-center gap-4 p-4",children:[e.jsx("div",{className:"p-3 bg-purple-50 rounded-xl",children:e.jsx(ss,{className:"w-6 h-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:U.certification_requests?.length||0}),e.jsx("p",{className:"text-sm text-gray-500",children:"Certificaciones"})]})]})})]}),je&&e.jsx("div",{className:"space-y-4",children:[1,2,3].map(xe=>e.jsx(we,{className:"animate-pulse",children:e.jsx(Ce,{className:"p-4",children:e.jsx("div",{className:"h-24 bg-gray-100 rounded"})})},xe))}),!je&&te.vacation_requests?.length>0&&e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(St,{className:"w-5 h-5 text-blue-600"}),"Solicitudes de Vacaciones"]}),e.jsx("div",{className:"space-y-4",children:te.vacation_requests.map(xe=>e.jsx(M0,{request:xe,type:"vacation",onApprove:ee,onReject:B,onView:ye,showActions:s==="pending"},xe.id))})]}),!je&&te.certification_requests?.length>0&&e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(ss,{className:"w-5 h-5 text-purple-600"}),"Solicitudes de Certificacin"]}),e.jsx("div",{className:"space-y-4",children:te.certification_requests.map(xe=>e.jsx(M0,{request:xe,type:"certification",onApprove:ee,onReject:B,onView:ye,showActions:s==="pending"},xe.id))})]}),!je&&te.vacation_requests?.length===0&&te.certification_requests?.length===0&&e.jsx(we,{children:e.jsx(Ce,{className:"py-12 text-center",children:s==="pending"?e.jsxs(e.Fragment,{children:[e.jsx(Be,{className:"w-16 h-16 mx-auto text-green-300 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Todo al da!"}),e.jsx("p",{className:"text-gray-500",children:"No tienes solicitudes pendientes de aprobacin"})]}):e.jsxs(e.Fragment,{children:[e.jsx(N0,{className:"w-16 h-16 mx-auto text-gray-300 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Sin historial"}),e.jsx("p",{className:"text-gray-500",children:"An no hay solicitudes procesadas"})]})})}),e.jsx(Qe,{isOpen:i,onClose:()=>c(!1),title:"Rechazar Solicitud",size:"md",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("p",{className:"text-gray-600",children:["Por favor, proporciona el motivo del rechazo para la solicitud"," ",e.jsx("span",{className:"font-medium",children:x?.request_number}),"."]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Motivo del Rechazo *"}),e.jsx("textarea",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",rows:4,value:f,onChange:xe=>v(xe.target.value),placeholder:"Explica el motivo del rechazo...",required:!0})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(L,{variant:"secondary",onClick:()=>c(!1),children:"Cancelar"}),e.jsx(L,{variant:"danger",onClick:F,loading:N.isPending,children:"Confirmar Rechazo"})]})]})}),e.jsx(Qe,{isOpen:u,onClose:()=>h(!1),title:"Detalle de Solicitud",size:"lg",children:x&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-50 rounded-xl",children:[e.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-full flex items-center justify-center",children:e.jsx(ka,{className:"w-6 h-6 text-primary-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:x.employee?.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[x.employee?.department,"  ",x.employee?.job_title]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Nmero de Solicitud"}),e.jsx("p",{className:"font-medium",children:x.request_number})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Estado"}),e.jsx(qe,{status:x.status})]}),p==="vacation"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Tipo"}),e.jsx("p",{className:"font-medium",children:x.vacation_type})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Das Solicitados"}),e.jsx("p",{className:"font-medium text-primary-600",children:x.days_requested})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Fecha Inicio"}),e.jsx("p",{className:"font-medium",children:new Date(x.start_date).toLocaleDateString("es-ES")})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Fecha Fin"}),e.jsx("p",{className:"font-medium",children:new Date(x.end_date).toLocaleDateString("es-ES")})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Tipo de Certificacin"}),e.jsx("p",{className:"font-medium",children:x.certification_type})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Propsito"}),e.jsx("p",{className:"font-medium",children:x.purpose})]})]})]}),x.reason&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Motivo"}),e.jsx("p",{className:"p-3 bg-gray-50 rounded-lg text-gray-700",children:x.reason})]}),x.status==="pending"&&e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx(L,{variant:"secondary",onClick:()=>h(!1),children:"Cerrar"}),e.jsx(L,{variant:"danger",onClick:()=>{h(!1),B(x,p)},children:"Rechazar"}),e.jsx(L,{variant:"success",onClick:()=>{h(!1),ee(x,p)},children:"Aprobar"})]}),x.status!=="pending"&&e.jsxs("div",{className:"space-y-4 pt-4 border-t",children:[p==="certification"&&x.status==="approved"&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-medium text-blue-900 mb-2 flex items-center gap-2",children:[e.jsx(Oe,{className:"w-4 h-4"}),"Generacion de Documento"]}),x.document_uuid?e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm text-blue-700",children:"Documento generado"}),e.jsxs(L,{size:"sm",onClick:()=>k(x.id),children:[e.jsx(ba,{className:"w-4 h-4"}),"Descargar PDF"]})]}):e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm text-blue-700",children:"Genera el documento de certificacion para el empleado"}),e.jsxs(L,{size:"sm",onClick:()=>z.mutate(x.id),loading:z.isPending,children:[e.jsx(Oe,{className:"w-4 h-4"}),"Generar Documento"]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(L,{variant:"secondary",onClick:()=>h(!1),children:"Cerrar"})})]})]})})]})}const t4=[{value:"",label:"Todos los estados"},{value:"active",label:"Activo"},{value:"inactive",label:"Inactivo"},{value:"on_leave",label:"En licencia"},{value:"terminated",label:"Terminado"}],k0=[{value:"",label:"Todos los departamentos"},{value:"engineering",label:"Ingeniera"},{value:"hr",label:"Recursos Humanos"},{value:"finance",label:"Finanzas"},{value:"sales",label:"Ventas"},{value:"marketing",label:"Marketing"},{value:"operations",label:"Operaciones"},{value:"legal",label:"Legal"}],Vg=[{value:"active",label:"Activo"},{value:"inactive",label:"Inactivo"},{value:"on_leave",label:"En licencia"},{value:"terminated",label:"Terminado"},{value:"suspended",label:"Suspendido"}],Dm=[{value:"full_time",label:"Tiempo Completo"},{value:"part_time",label:"Medio Tiempo"},{value:"contractor",label:"Contratista"},{value:"intern",label:"Pasante"}],Tm=[{value:"indefinite",label:"Termino Indefinido"},{value:"fixed_term",label:"Termino Fijo"},{value:"work_or_labor",label:"Obra o Labor"},{value:"apprentice",label:"Aprendizaje"}],Qg=[{value:"CC",label:"Cedula de Ciudadania"},{value:"CE",label:"Cedula de Extranjeria"},{value:"PA",label:"Pasaporte"},{value:"TI",label:"Tarjeta de Identidad"},{value:"NIT",label:"NIT"}],ls=s=>{if(!s||s===0)return"cero pesos";const r=["","uno","dos","tres","cuatro","cinco","seis","siete","ocho","nueve"],i=["diez","once","doce","trece","catorce","quince","dieciseis","diecisiete","dieciocho","diecinueve"],c=["","","veinte","treinta","cuarenta","cincuenta","sesenta","setenta","ochenta","noventa"],u=["","ciento","doscientos","trescientos","cuatrocientos","quinientos","seiscientos","setecientos","ochocientos","novecientos"],h=Math.floor(parseFloat(s));if(h===0)return"cero pesos";const x=g=>g===0?"":g<10?r[g]:g<20?i[g-10]:g<30?g===20?"veinte":"veinti"+r[g-20]:g<100?c[Math.floor(g/10)]+(g%10>0?" y "+r[g%10]:""):g===100?"cien":g<1e3?u[Math.floor(g/100)]+(g%100>0?" "+x(g%100):""):g.toString(),m=[];let p=h;if(p>=1e6){const g=Math.floor(p/1e6);m.push(g===1?"un millon":x(g)+" millones"),p%=1e6}if(p>=1e3){const g=Math.floor(p/1e3);m.push(g===1?"mil":x(g)+" mil"),p%=1e3}return p>0&&m.push(x(p)),m.join(" ").trim()+" pesos"},Gg=(s,r)=>{if(!s||!r)return null;const i=new Date(s),c=new Date(r);if(c<=i)return null;const u=(c.getFullYear()-i.getFullYear())*12+(c.getMonth()-i.getMonth()),h=Math.ceil((c-i)/(1e3*60*60*24));return u>=12&&u%12===0?{value:u/12,unit:"years"}:u>=1?{value:u,unit:"months"}:h>=7&&h%7===0?{value:h/7,unit:"weeks"}:{value:h,unit:"days"}},a4={indefinite:"Termino Indefinido",fixed_term:"Termino Fijo",work_or_labor:"Obra o Labor",apprentice:"Aprendizaje"},Pg=[{value:"days",label:"Dias"},{value:"weeks",label:"Semanas"},{value:"months",label:"Meses"},{value:"years",label:"Anos"}],s4={days:"dias",weeks:"semanas",months:"meses",years:"anos"},ei={active:"Activo",inactive:"Inactivo",on_leave:"En licencia",terminated:"Terminado",suspended:"Suspendido"},Pn={active:"bg-green-100 text-green-700",inactive:"bg-gray-100 text-gray-700",on_leave:"bg-yellow-100 text-yellow-700",terminated:"bg-red-100 text-red-700",suspended:"bg-orange-100 text-orange-700"},l4={full_time:"Tiempo Completo",part_time:"Medio Tiempo",contractor:"Contratista",intern:"Pasante"};function n4({employee:s,employees:r,contractTemplates:i=[],departmentOptions:c=[],onSubmit:u,onCancel:h,loading:x,error:m}){const[p,g]=b.useState({first_name:"",last_name:"",employee_number:"",job_title:"",department:"",employment_status:"active",employment_type:"full_time",hire_date:"",termination_date:"",cost_center:"",date_of_birth:"",emergency_contact_name:"",emergency_contact_phone:"",supervisor_id:"",contract_type:"indefinite",contract_template_id:"",contract_start_date:"",contract_end_date:"",contract_duration_value:"",contract_duration_unit:"months",trial_period_days:"60",salary:"",food_allowance:"",transport_allowance:"",payment_frequency:"monthly",work_city:"",identification_type:"CC",identification_number:"",place_of_birth:"",nationality:"Colombiana",address:"",phone:"",personal_email:""}),[f,v]=b.useState("basico");b.useEffect(()=>{s&&g({first_name:s.first_name||"",last_name:s.last_name||"",employee_number:s.employee_number||"",job_title:s.job_title||"",department:s.department||"",employment_status:s.employment_status||"active",employment_type:s.employment_type||"full_time",hire_date:s.hire_date?s.hire_date.split("T")[0]:"",termination_date:s.termination_date?s.termination_date.split("T")[0]:"",cost_center:s.cost_center||"",date_of_birth:s.date_of_birth?s.date_of_birth.split("T")[0]:"",emergency_contact_name:s.emergency_contact_name||"",emergency_contact_phone:s.emergency_contact_phone||"",supervisor_id:s.supervisor_id||"",contract_type:s.contract_type||"indefinite",contract_template_id:s.contract_template_id||"",contract_start_date:s.contract_start_date?s.contract_start_date.split("T")[0]:"",contract_end_date:s.contract_end_date?s.contract_end_date.split("T")[0]:"",contract_duration_value:s.contract_duration_value||"",contract_duration_unit:s.contract_duration_unit||"months",trial_period_days:s.trial_period_days||"60",salary:s.salary||"",food_allowance:s.food_allowance||"",transport_allowance:s.transport_allowance||"",payment_frequency:s.payment_frequency||"monthly",work_city:s.work_city||"",identification_type:s.identification_type||"CC",identification_number:s.identification_number||"",place_of_birth:s.place_of_birth||"",nationality:s.nationality||"Colombiana",address:s.address||"",phone:s.phone||"",personal_email:s.personal_email||""})},[s]),b.useEffect(()=>{const C=Gg(p.contract_start_date,p.contract_end_date);C&&g(j=>({...j,contract_duration_value:C.value.toString(),contract_duration_unit:C.unit}))},[p.contract_start_date,p.contract_end_date]);const E=C=>{C.preventDefault();const j={...p};Object.keys(j).forEach(_=>{j[_]===""&&(j[_]=null)}),u(j)},S=[{value:"",label:"Junta Directiva"},...r.filter(C=>C.id!==s?.id).map(C=>({value:C.id,label:`${C.full_name} - ${C.job_title||"Sin cargo"}`}))],w=[{id:"basico",label:"Datos Bsicos",icon:ka},{id:"laboral",label:"Laboral",icon:Ta},{id:"contrato",label:"Contrato",icon:Oe},{id:"compensacion",label:"Compensacin",icon:Bl},{id:"personal",label:"Personal",icon:Wr}];return e.jsxs("form",{onSubmit:E,className:"space-y-6",children:[m&&e.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-700",children:[e.jsx(st,{className:"w-5 h-5 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:m})]}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-4",children:w.map(C=>e.jsxs("button",{type:"button",onClick:()=>v(C.id),className:`py-2 px-1 border-b-2 font-medium text-sm flex items-center gap-2 ${f===C.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(C.icon,{className:"w-4 h-4"}),C.label]},C.id))})}),f==="basico"&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ue,{label:"Nombre *",value:p.first_name,onChange:C=>g({...p,first_name:C.target.value}),placeholder:"Nombre del empleado",required:!0}),e.jsx(ue,{label:"Apellido *",value:p.last_name,onChange:C=>g({...p,last_name:C.target.value}),placeholder:"Apellido del empleado",required:!0})]})}),f==="laboral"&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ue,{label:"Numero de Empleado",value:p.employee_number,onChange:C=>g({...p,employee_number:C.target.value}),placeholder:"EMP-001"}),e.jsx(ue,{label:"Cargo",value:p.job_title,onChange:C=>g({...p,job_title:C.target.value}),placeholder:"Ej: Desarrollador Senior"}),e.jsx(Le,{label:"Departamento",options:c,value:p.department,onChange:C=>g({...p,department:C.target.value})}),e.jsx(ue,{label:"Centro de Costo",value:p.cost_center,onChange:C=>g({...p,cost_center:C.target.value}),placeholder:"Ej: CC-100"}),e.jsx(Le,{label:"Estado Laboral",options:Vg,value:p.employment_status,onChange:C=>g({...p,employment_status:C.target.value})}),e.jsx(Le,{label:"Tipo de Empleo",options:Dm,value:p.employment_type,onChange:C=>g({...p,employment_type:C.target.value})}),e.jsx("div",{children:e.jsx(Le,{label:"Jefe Inmediato",options:S,value:p.supervisor_id,onChange:C=>g({...p,supervisor_id:C.target.value})})}),e.jsx(ue,{label:"Fecha de Contratacion",type:"date",value:p.hire_date,onChange:C=>g({...p,hire_date:C.target.value})})]})}),f==="contrato"&&e.jsxs("div",{className:"space-y-4",children:[p.contract_type==="indefinite"&&e.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg text-sm text-blue-700",children:[e.jsx("strong",{children:"Contrato a Trmino Indefinido:"})," No requiere fecha de finalizacin ni duracin especfica."]}),p.contract_type==="fixed_term"&&e.jsxs("div",{className:"p-3 bg-amber-50 border border-amber-200 rounded-lg text-sm text-amber-700",children:[e.jsx("strong",{children:"Contrato a Trmino Fijo:"})," Requiere fecha de finalizacin y duracin del contrato."]}),p.contract_type==="work_or_labor"&&e.jsxs("div",{className:"p-3 bg-purple-50 border border-purple-200 rounded-lg text-sm text-purple-700",children:[e.jsx("strong",{children:"Contrato por Obra o Labor:"})," Vinculado a la duracin de una obra o labor especfica."]}),p.contract_type==="apprentice"&&e.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg text-sm text-green-700",children:[e.jsx("strong",{children:"Contrato de Aprendizaje:"})," Para practicantes y aprendices en formacin."]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(Le,{label:"Tipo de Contrato",options:i.length>0?i:Tm,value:i.length>0?p.contract_template_id:p.contract_type,onChange:C=>{if(i.length>0)g({...p,contract_template_id:C.target.value});else{const j=C.target.value,_={contract_type:j};j==="indefinite"&&(_.contract_end_date="",_.contract_duration_value="",_.contract_duration_unit="months"),g({...p,..._})}}}),e.jsx(ue,{label:"Dias de Periodo de Prueba",type:"number",value:p.trial_period_days,onChange:C=>g({...p,trial_period_days:C.target.value}),placeholder:p.contract_type==="apprentice"?"0":"60"}),e.jsx(ue,{label:"Fecha de Inicio del Contrato",type:"date",value:p.contract_start_date,onChange:C=>g({...p,contract_start_date:C.target.value}),required:!0}),p.contract_type!=="indefinite"&&e.jsx(ue,{label:"Fecha de Fin del Contrato",type:"date",value:p.contract_end_date,onChange:C=>g({...p,contract_end_date:C.target.value}),min:p.contract_start_date,required:p.contract_type==="fixed_term"}),p.contract_type!=="indefinite"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Duracin del Contrato"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ue,{type:"number",value:p.contract_duration_value,onChange:C=>g({...p,contract_duration_value:C.target.value}),placeholder:"12",className:"flex-1"}),e.jsx(Le,{options:Pg,value:p.contract_duration_unit,onChange:C=>g({...p,contract_duration_unit:C.target.value}),className:"w-32"})]})]}),p.employment_status==="terminated"&&e.jsx(ue,{label:"Fecha de Terminacion",type:"date",value:p.termination_date,onChange:C=>g({...p,termination_date:C.target.value})})]})]}),f==="compensacion"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(ue,{label:"Salario Mensual",type:"number",value:p.salary,onChange:C=>g({...p,salary:C.target.value}),placeholder:"2500000"}),p.salary&&e.jsx("p",{className:"text-xs text-gray-500 mt-1 italic",children:ls(p.salary)})]}),e.jsxs("div",{children:[e.jsx(ue,{label:"Auxilio de Alimentacion",type:"number",value:p.food_allowance,onChange:C=>g({...p,food_allowance:C.target.value}),placeholder:"0"}),p.food_allowance>0&&e.jsx("p",{className:"text-xs text-gray-500 mt-1 italic",children:ls(p.food_allowance)})]}),e.jsxs("div",{children:[e.jsx(ue,{label:"Auxilio de Transporte",type:"number",value:p.transport_allowance,onChange:C=>g({...p,transport_allowance:C.target.value}),placeholder:"140606"}),p.transport_allowance>0&&e.jsx("p",{className:"text-xs text-gray-500 mt-1 italic",children:ls(p.transport_allowance)})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(Le,{label:"Periodicidad de Pago",options:[{value:"weekly",label:"Semanal"},{value:"biweekly",label:"Quincenal"},{value:"monthly",label:"Mensual"}],value:p.payment_frequency,onChange:C=>g({...p,payment_frequency:C.target.value})}),e.jsx(ue,{label:"Ciudad de Labores",value:p.work_city,onChange:C=>g({...p,work_city:C.target.value}),placeholder:"Ej: Bogot D.C."})]}),(p.salary||p.food_allowance||p.transport_allowance)&&e.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[e.jsxs("p",{className:"text-sm text-green-700",children:[e.jsx("span",{className:"font-medium",children:"Compensacion Total: "}),"$",((parseFloat(p.salary)||0)+(parseFloat(p.food_allowance)||0)+(parseFloat(p.transport_allowance)||0)).toLocaleString("es-CO")]}),e.jsx("p",{className:"text-xs text-green-600 mt-1 italic",children:ls((parseFloat(p.salary)||0)+(parseFloat(p.food_allowance)||0)+(parseFloat(p.transport_allowance)||0))})]})]}),f==="personal"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Identificacion"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(Le,{label:"Tipo de Documento",options:Qg,value:p.identification_type,onChange:C=>g({...p,identification_type:C.target.value})}),e.jsx(ue,{label:"Numero de Documento",value:p.identification_number,onChange:C=>g({...p,identification_number:C.target.value}),placeholder:"1234567890"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Datos Personales"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ue,{label:"Fecha de Nacimiento",type:"date",value:p.date_of_birth,onChange:C=>g({...p,date_of_birth:C.target.value})}),e.jsx(ue,{label:"Lugar de Nacimiento",value:p.place_of_birth,onChange:C=>g({...p,place_of_birth:C.target.value}),placeholder:"Bogota, Colombia"}),e.jsx(ue,{label:"Nacionalidad",value:p.nationality,onChange:C=>g({...p,nationality:C.target.value}),placeholder:"Colombiana"}),e.jsx(ue,{label:"Telefono",value:p.phone,onChange:C=>g({...p,phone:C.target.value}),placeholder:"+57 300 123 4567"}),e.jsx(ue,{label:"Correo Personal",type:"email",value:p.personal_email,onChange:C=>g({...p,personal_email:C.target.value}),placeholder:"correo@personal.com"}),e.jsx("div",{className:"md:col-span-2",children:e.jsx(ue,{label:"Direccion",value:p.address,onChange:C=>g({...p,address:C.target.value}),placeholder:"Calle 123 # 45-67, Bogota"})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Contacto de Emergencia"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ue,{label:"Nombre del Contacto",value:p.emergency_contact_name,onChange:C=>g({...p,emergency_contact_name:C.target.value}),placeholder:"Nombre completo"}),e.jsx(ue,{label:"Telefono del Contacto",value:p.emergency_contact_phone,onChange:C=>g({...p,emergency_contact_phone:C.target.value}),placeholder:"+57 300 123 4567"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200",children:[e.jsx(L,{type:"button",variant:"secondary",onClick:h,children:"Cancelar"}),e.jsxs(L,{type:"submit",loading:x,children:[e.jsx($s,{className:"w-4 h-4"}),"Guardar Cambios"]})]})]})}function r4({employees:s=[],contractTemplates:r=[],departmentOptions:i=[],onSubmit:c,onCancel:u,loading:h,error:x}){const[m,p]=b.useState({first_name:"",last_name:"",personal_email:"",identification_type:"CC",identification_number:"",employee_number:"",job_title:"",department:"",employment_status:"active",employment_type:"full_time",hire_date:new Date().toISOString().split("T")[0],supervisor_id:"",cost_center:"",contract_type:"indefinite",contract_template_id:"",contract_start_date:new Date().toISOString().split("T")[0],contract_end_date:"",contract_duration_value:"",contract_duration_unit:"months",trial_period_days:"60",salary:"",food_allowance:"",transport_allowance:"",payment_frequency:"monthly",work_city:"",date_of_birth:"",place_of_birth:"",nationality:"Colombiana",address:"",phone:"",emergency_contact_name:"",emergency_contact_phone:""}),[g,f]=b.useState("basico"),[v,E]=b.useState({});b.useEffect(()=>{const N=Gg(m.contract_start_date,m.contract_end_date);N&&p(z=>({...z,contract_duration_value:N.value.toString(),contract_duration_unit:N.unit}))},[m.contract_start_date,m.contract_end_date]);const S=()=>{const N={};return m.first_name.trim()||(N.first_name="Nombre es requerido"),m.last_name.trim()||(N.last_name="Apellido es requerido"),m.personal_email.trim()||(N.personal_email="Correo es requerido"),m.identification_number.trim()||(N.identification_number="Nmero de documento es requerido"),m.job_title.trim()||(N.job_title="Cargo es requerido"),m.department||(N.department="Departamento es requerido"),m.hire_date||(N.hire_date="Fecha de contratacin es requerida"),E(N),Object.keys(N).length===0},w=N=>{if(N.preventDefault(),!S()){v.first_name||v.last_name||v.personal_email||v.identification_number?f("basico"):(v.job_title||v.department||v.supervisor_id||v.hire_date)&&f("laboral");return}const z={...m};Object.keys(z).forEach(k=>{z[k]===""&&(z[k]=null)}),c(z)},C=[{value:"",label:"Junta Directiva"},...s.map(N=>({value:N.id,label:`${N.full_name} - ${N.job_title||"Sin cargo"}`}))],j=[{id:"basico",label:"Datos Bsicos",icon:ka,required:!0},{id:"laboral",label:"Laboral",icon:Ta,required:!0},{id:"contrato",label:"Contrato",icon:Oe},{id:"compensacion",label:"Compensacin",icon:Bl},{id:"personal",label:"Personal",icon:Wr}],_=N=>N==="basico"?v.first_name||v.last_name||v.personal_email||v.identification_number:N==="laboral"?v.job_title||v.department||v.hire_date:!1;return e.jsxs("form",{onSubmit:w,className:"space-y-6",children:[x&&e.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-700",children:[e.jsx(st,{className:"w-5 h-5 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:x})]}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-2 overflow-x-auto",children:j.map(N=>e.jsxs("button",{type:"button",onClick:()=>f(N.id),className:`py-2 px-3 border-b-2 font-medium text-sm flex items-center gap-2 whitespace-nowrap ${g===N.id?"border-primary-500 text-primary-600":_(N.id)?"border-red-300 text-red-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(N.icon,{className:"w-4 h-4"}),N.label,N.required&&e.jsx("span",{className:"text-red-500",children:"*"}),_(N.id)&&e.jsx(st,{className:"w-3 h-3 text-red-500"})]},N.id))})}),g==="basico"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-700",children:[e.jsx("strong",{children:"Informacin requerida:"})," Estos datos son necesarios para crear la cuenta del empleado."]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(ue,{label:"Nombre *",value:m.first_name,onChange:N=>p({...m,first_name:N.target.value}),placeholder:"Nombre",error:v.first_name}),v.first_name&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:v.first_name})]}),e.jsxs("div",{children:[e.jsx(ue,{label:"Apellido *",value:m.last_name,onChange:N=>p({...m,last_name:N.target.value}),placeholder:"Apellido",error:v.last_name}),v.last_name&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:v.last_name})]}),e.jsxs("div",{children:[e.jsx(ue,{label:"Correo Personal *",type:"email",value:m.personal_email,onChange:N=>p({...m,personal_email:N.target.value}),placeholder:"correo@personal.com",error:v.personal_email}),v.personal_email&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:v.personal_email}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Se usar para crear la cuenta de usuario"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx(Le,{label:"Tipo Doc *",options:Qg,value:m.identification_type,onChange:N=>p({...m,identification_type:N.target.value})}),e.jsxs("div",{className:"col-span-2",children:[e.jsx(ue,{label:"Nmero de Documento *",value:m.identification_number,onChange:N=>p({...m,identification_number:N.target.value}),placeholder:"1234567890",error:v.identification_number}),v.identification_number&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:v.identification_number}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Ser la contrasea inicial"})]})]})]})]}),g==="laboral"&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ue,{label:"Nmero de Empleado",value:m.employee_number,onChange:N=>p({...m,employee_number:N.target.value}),placeholder:"EMP-001 (auto si vaco)"}),e.jsxs("div",{children:[e.jsx(ue,{label:"Cargo *",value:m.job_title,onChange:N=>p({...m,job_title:N.target.value}),placeholder:"Ej: Desarrollador Senior",error:v.job_title}),v.job_title&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:v.job_title})]}),e.jsxs("div",{children:[e.jsx(Le,{label:"Departamento *",options:[{value:"",label:"Seleccionar departamento *"},...i.slice(1)],value:m.department,onChange:N=>p({...m,department:N.target.value})}),v.department&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:v.department})]}),e.jsx(ue,{label:"Centro de Costo",value:m.cost_center,onChange:N=>p({...m,cost_center:N.target.value}),placeholder:"Ej: CC-100"}),e.jsx(Le,{label:"Estado Laboral",options:Vg,value:m.employment_status,onChange:N=>p({...m,employment_status:N.target.value})}),e.jsx(Le,{label:"Tipo de Empleo",options:Dm,value:m.employment_type,onChange:N=>p({...m,employment_type:N.target.value})}),e.jsx("div",{children:e.jsx(Le,{label:"Jefe Inmediato",options:C,value:m.supervisor_id,onChange:N=>p({...m,supervisor_id:N.target.value})})}),e.jsxs("div",{children:[e.jsx(ue,{label:"Fecha de Contratacin *",type:"date",value:m.hire_date,onChange:N=>p({...m,hire_date:N.target.value}),error:v.hire_date}),v.hire_date&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:v.hire_date})]})]})}),g==="contrato"&&e.jsxs("div",{className:"space-y-4",children:[m.contract_type==="indefinite"&&e.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg text-sm text-blue-700",children:[e.jsx("strong",{children:"Contrato a Trmino Indefinido:"})," No requiere fecha de finalizacin ni duracin especfica."]}),m.contract_type==="fixed_term"&&e.jsxs("div",{className:"p-3 bg-amber-50 border border-amber-200 rounded-lg text-sm text-amber-700",children:[e.jsx("strong",{children:"Contrato a Trmino Fijo:"})," Requiere fecha de finalizacin y duracin del contrato."]}),m.contract_type==="work_or_labor"&&e.jsxs("div",{className:"p-3 bg-purple-50 border border-purple-200 rounded-lg text-sm text-purple-700",children:[e.jsx("strong",{children:"Contrato por Obra o Labor:"})," Vinculado a la duracin de una obra o labor especfica."]}),m.contract_type==="apprentice"&&e.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg text-sm text-green-700",children:[e.jsx("strong",{children:"Contrato de Aprendizaje:"})," Para practicantes y aprendices en formacin."]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(Le,{label:"Tipo de Contrato",options:r.length>0?[{value:"",label:"Seleccionar template"},...r]:Tm,value:r.length>0?m.contract_template_id:m.contract_type,onChange:N=>{if(r.length>0)p({...m,contract_template_id:N.target.value});else{const z=N.target.value,k={contract_type:z};z==="indefinite"&&(k.contract_end_date="",k.contract_duration_value="",k.contract_duration_unit="months"),p({...m,...k})}}}),e.jsx(ue,{label:"Das de Periodo de Prueba",type:"number",value:m.trial_period_days,onChange:N=>p({...m,trial_period_days:N.target.value}),placeholder:m.contract_type==="apprentice"?"0":"60"}),e.jsx(ue,{label:"Fecha de Inicio del Contrato",type:"date",value:m.contract_start_date,onChange:N=>p({...m,contract_start_date:N.target.value}),required:!0}),m.contract_type!=="indefinite"&&e.jsx(ue,{label:"Fecha de Fin del Contrato",type:"date",value:m.contract_end_date,onChange:N=>p({...m,contract_end_date:N.target.value}),min:m.contract_start_date,required:m.contract_type==="fixed_term"}),m.contract_type!=="indefinite"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Duracin del Contrato"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ue,{type:"number",value:m.contract_duration_value,onChange:N=>p({...m,contract_duration_value:N.target.value}),placeholder:"12",className:"flex-1"}),e.jsx(Le,{options:Pg,value:m.contract_duration_unit,onChange:N=>p({...m,contract_duration_unit:N.target.value}),className:"w-32"})]})]})]})]}),g==="compensacion"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(ue,{label:"Salario Mensual",type:"number",value:m.salary,onChange:N=>p({...m,salary:N.target.value}),placeholder:"2500000"}),m.salary&&e.jsx("p",{className:"text-xs text-gray-500 mt-1 italic",children:ls(m.salary)})]}),e.jsxs("div",{children:[e.jsx(ue,{label:"Auxilio de Alimentacin",type:"number",value:m.food_allowance,onChange:N=>p({...m,food_allowance:N.target.value}),placeholder:"0"}),m.food_allowance>0&&e.jsx("p",{className:"text-xs text-gray-500 mt-1 italic",children:ls(m.food_allowance)})]}),e.jsxs("div",{children:[e.jsx(ue,{label:"Auxilio de Transporte",type:"number",value:m.transport_allowance,onChange:N=>p({...m,transport_allowance:N.target.value}),placeholder:"140606"}),m.transport_allowance>0&&e.jsx("p",{className:"text-xs text-gray-500 mt-1 italic",children:ls(m.transport_allowance)})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(Le,{label:"Periodicidad de Pago",options:[{value:"weekly",label:"Semanal"},{value:"biweekly",label:"Quincenal"},{value:"monthly",label:"Mensual"}],value:m.payment_frequency,onChange:N=>p({...m,payment_frequency:N.target.value})}),e.jsx(ue,{label:"Ciudad de Labores",value:m.work_city,onChange:N=>p({...m,work_city:N.target.value}),placeholder:"Ej: Bogot D.C."})]}),(m.salary||m.food_allowance||m.transport_allowance)&&e.jsx("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-green-700",children:[e.jsx("span",{className:"font-medium",children:"Compensacin Total: "}),"$",((parseFloat(m.salary)||0)+(parseFloat(m.food_allowance)||0)+(parseFloat(m.transport_allowance)||0)).toLocaleString("es-CO")]})})]}),g==="personal"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Datos Personales"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ue,{label:"Fecha de Nacimiento",type:"date",value:m.date_of_birth,onChange:N=>p({...m,date_of_birth:N.target.value})}),e.jsx(ue,{label:"Lugar de Nacimiento",value:m.place_of_birth,onChange:N=>p({...m,place_of_birth:N.target.value}),placeholder:"Bogot, Colombia"}),e.jsx(ue,{label:"Nacionalidad",value:m.nationality,onChange:N=>p({...m,nationality:N.target.value}),placeholder:"Colombiana"}),e.jsx(ue,{label:"Telfono",value:m.phone,onChange:N=>p({...m,phone:N.target.value}),placeholder:"+57 300 123 4567"}),e.jsx("div",{className:"md:col-span-2",children:e.jsx(ue,{label:"Direccin",value:m.address,onChange:N=>p({...m,address:N.target.value}),placeholder:"Calle 123 # 45-67, Bogot"})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Contacto de Emergencia"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ue,{label:"Nombre del Contacto",value:m.emergency_contact_name,onChange:N=>p({...m,emergency_contact_name:N.target.value}),placeholder:"Nombre completo"}),e.jsx(ue,{label:"Telfono del Contacto",value:m.emergency_contact_phone,onChange:N=>p({...m,emergency_contact_phone:N.target.value}),placeholder:"+57 300 123 4567"})]})]})]}),e.jsxs("div",{className:"flex justify-between items-center gap-3 pt-4 border-t border-gray-200",children:[e.jsxs("p",{className:"text-xs text-gray-500",children:["Los campos marcados con ",e.jsx("span",{className:"text-red-500",children:"*"})," son obligatorios"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(L,{type:"button",variant:"secondary",onClick:u,children:"Cancelar"}),e.jsxs(L,{type:"submit",loading:h,children:[e.jsx(oo,{className:"w-4 h-4"}),"Crear Empleado"]})]})]})]})}function i4({employee:s,onView:r}){return e.jsx(we,{className:"hover:shadow-md transition-shadow",children:e.jsxs(Ce,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsxs("span",{className:"text-primary-700 font-semibold text-lg",children:[s.first_name?.[0],s.last_name?.[0]]})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 truncate",children:s.full_name}),e.jsx("p",{className:"text-sm text-gray-500",children:s.employee_number})]}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${Pn[s.employment_status]||Pn.active}`,children:ei[s.employment_status]||s.employment_status})]}),e.jsxs("div",{className:"mt-3 space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(Ta,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"truncate",children:s.job_title||"Sin cargo"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(ni,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"truncate",children:s.department||"Sin departamento"})]}),s.email&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(lo,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"truncate",children:s.email})]})]})]})]}),e.jsx("div",{className:"flex justify-end mt-4 pt-3 border-t border-gray-100",children:e.jsxs(L,{variant:"ghost",size:"sm",onClick:()=>r(s),children:[e.jsx(At,{className:"w-4 h-4"}),"Ver Detalle"]})})]})})}function c4({employees:s,onView:r,sortColumn:i,sortDirection:c,onSort:u}){const h=({column:m})=>i!==m?e.jsx(to,{className:"w-3 h-3 text-gray-400"}):c==="asc"?e.jsx(ao,{className:"w-3 h-3 text-primary-600"}):e.jsx(li,{className:"w-3 h-3 text-primary-600"}),x=({column:m,children:p,align:g="left"})=>e.jsx("th",{onClick:()=>u(m),className:`px-4 py-3 text-${g} text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 select-none`,children:e.jsxs("div",{className:`flex items-center gap-1 ${g==="right"?"justify-end":g==="center"?"justify-center":""}`,children:[p,e.jsx(h,{column:m})]})});return e.jsx(we,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200 bg-gray-50",children:[e.jsx(x,{column:"full_name",children:"Empleado"}),e.jsx(x,{column:"job_title",children:"Cargo"}),e.jsx(x,{column:"department",children:"Departamento"}),e.jsx(x,{column:"employment_status",children:"Estado"}),e.jsx(x,{column:"hire_date",children:"Fecha Ingreso"}),e.jsx(x,{column:"available_vacation_days",align:"center",children:"Vacaciones"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:s.map(m=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-primary-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsxs("span",{className:"text-primary-700 font-medium",children:[m.first_name?.[0],m.last_name?.[0]]})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:m.full_name}),e.jsx("p",{className:"text-sm text-gray-500",children:m.email})]})]})}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-600",children:m.job_title||"-"}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-600",children:m.department||"-"}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Pn[m.employment_status]||Pn.active}`,children:ei[m.employment_status]||m.employment_status})}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-600",children:m.hire_date?new Date(m.hire_date).toLocaleDateString("es-CO"):"-"}),e.jsx("td",{className:"px-4 py-4 text-center",children:e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[m.available_vacation_days??0," das"]})}),e.jsx("td",{className:"px-4 py-4 text-right",children:e.jsx(L,{variant:"ghost",size:"sm",onClick:()=>r(m),children:e.jsx(At,{className:"w-4 h-4"})})})]},m.id))})]})})})}function o4(){const{isHR:s,isAdmin:r}=Ra(),i=s||r,[c,u]=b.useState(""),[h,x]=b.useState(""),[m,p]=b.useState(""),[g,f]=b.useState(""),[v,E]=b.useState(""),[S,w]=b.useState(!1),[C,j]=b.useState("table"),[_,N]=b.useState(1),[z,k]=b.useState(!1),[U,A]=b.useState(!1),[T,O]=b.useState(!1),[ee,B]=b.useState(!1),[ye,F]=b.useState(!1),[te,je]=b.useState(null),[xe,$]=b.useState(null),[pe,G]=b.useState(""),[Y,me]=b.useState(""),[M,V]=b.useState("full_name"),[ae,W]=b.useState("asc"),R=et(),X=k0,{data:ge,isLoading:Q,isError:ie}=ke({queryKey:["employees",{q:c,status:h,department:m,page:_,sortColumn:M,sortDirection:ae}],queryFn:()=>Ol.list({q:c||void 0,status:h||void 0,department:m||void 0,sort_by:M,sort_direction:ae,page:_,per_page:20})}),{data:_e,isLoading:ze}=ke({queryKey:["employee",xe?.id],queryFn:()=>Ol.get(xe.id),enabled:!!xe?.id&&(z||U)}),$e=Ne({mutationFn:({id:fe,data:Je})=>Ol.update(fe,Je),onSuccess:()=>{R.invalidateQueries(["employees"]),R.invalidateQueries(["employee",xe?.id]),A(!1),G("")},onError:fe=>{G(fe.response?.data?.error||"Error al actualizar el empleado")}}),ne=Ne({mutationFn:fe=>Ol.create(fe),onSuccess:fe=>{R.invalidateQueries(["employees"]),O(!1),me("");const Je=fe.data?.data;Je&&($(Je),k(!0))},onError:fe=>{me(fe.response?.data?.error||fe.response?.data?.errors?.join(", ")||"Error al crear el empleado")}}),Te=Ne({mutationFn:fe=>Ol.createAccount(fe),onSuccess:fe=>{R.invalidateQueries(["employees"]),R.invalidateQueries(["employee",xe?.id]),alert(fe.data.message||"Cuenta creada exitosamente. La contrasea inicial es el nmero de cdula.")},onError:fe=>{alert(fe.response?.data?.error||"Error al crear la cuenta")}}),tt=Ne({mutationFn:({employeeId:fe,templateId:Je})=>Ol.generateDocument(fe,Je),onSuccess:fe=>{B(!1),alert(fe.data.message||"Documento generado exitosamente. Puede descargarlo desde la seccin de documentos.")},onError:fe=>{const Je=fe.response?.data;Je?.missing_variables?(B(!1),G(`Faltan datos requeridos para generar el documento:
${Je.missing_variables}`),A(!0)):alert(Je?.error||"Error al generar el documento")}}),{data:lt}=ke({queryKey:["templates",{category:"contract"}],queryFn:()=>si.list({category:"contract"})}),Et=lt?.data?.data||[],{data:os}=ke({queryKey:["employee-documents",xe?.id],queryFn:()=>Yt.list({employee_id:xe.id,category:"contract,employee_contract,employee"}),enabled:!!xe?.id&&z}),ia=os?.data?.data||[],Ft=ia.length>0,bs=ia[0],{data:Ja}=ke({queryKey:["contract-detail",te?.id],queryFn:()=>Yt.get(te.id),enabled:!!te?.id&&ye}),xt=Ja?.data?.data||te,_t=Et.map(fe=>({value:fe.id,label:fe.name})),ds=ge?.data?.data||[],va=ge?.data?.meta||{},be=_e?.data?.data||xe,ta=ds.filter(fe=>!(g&&fe.contract_type!==g||v&&fe.employment_type!==v)).sort((fe,Je)=>{let Kt,ca;switch(M){case"full_name":Kt=(fe.full_name||"").toLowerCase(),ca=(Je.full_name||"").toLowerCase();break;case"job_title":Kt=(fe.job_title||"").toLowerCase(),ca=(Je.job_title||"").toLowerCase();break;case"department":Kt=(fe.department||"").toLowerCase(),ca=(Je.department||"").toLowerCase();break;case"employment_status":Kt=ei[fe.employment_status]||fe.employment_status||"",ca=ei[Je.employment_status]||Je.employment_status||"";break;case"hire_date":Kt=fe.hire_date?new Date(fe.hire_date).getTime():0,ca=Je.hire_date?new Date(Je.hire_date).getTime():0;break;case"available_vacation_days":Kt=fe.available_vacation_days??0,ca=Je.available_vacation_days??0;break;default:Kt=(fe.full_name||"").toLowerCase(),ca=(Je.full_name||"").toLowerCase()}return Kt<ca?ae==="asc"?-1:1:Kt>ca?ae==="asc"?1:-1:0}),vs=fe=>{M===fe?W(Je=>Je==="asc"?"desc":"asc"):(V(fe),W("asc"))},Ia=()=>{u(""),x(""),p(""),f(""),E(""),N(1)},oe=c||h||m||g||v,se=fe=>{$(fe),k(!0)},Ee=()=>{k(!1),A(!0),G("")},Ae=()=>{A(!1),$(null),G("")},ct=fe=>{$e.mutate({id:xe.id,data:fe})},Ht=fe=>{confirm(`Crear cuenta de usuario para este empleado?

La contrasea inicial ser el nmero de cdula y deber cambiarla en el primer inicio de sesin.`)&&Te.mutate(fe)},fi=()=>{B(!0)},uo=fe=>{je(fe),F(!0)},mo=async fe=>{try{const Je=await Yt.download(fe),Kt=new Blob([Je.data],{type:"application/pdf"}),ca=window.URL.createObjectURL(Kt),Vs=document.createElement("a");Vs.href=ca,Vs.download=`contrato-${xe?.full_name||"documento"}.pdf`,document.body.appendChild(Vs),Vs.click(),document.body.removeChild(Vs),window.URL.revokeObjectURL(ca)}catch(Je){console.error("Error downloading contract:",Je)}},Kl=fe=>{xe&&tt.mutate({employeeId:xe.id,templateId:fe})},Zl=fe=>{fe.preventDefault(),N(1)},js=Math.ceil((va.total||0)/(va.per_page||20));return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Empleados"}),e.jsx("p",{className:"text-gray-500",children:"Directorio de empleados de la organizacin"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[i&&e.jsxs(L,{onClick:()=>{me(""),O(!0)},children:[e.jsx(Ke,{className:"w-4 h-4"}),"Agregar Empleado"]}),e.jsxs("div",{className:"flex items-center gap-1 border-l pl-3 ml-2",children:[e.jsx(L,{variant:C==="table"?"primary":"secondary",size:"sm",onClick:()=>j("table"),children:"Tabla"}),e.jsx(L,{variant:C==="grid"?"primary":"secondary",size:"sm",onClick:()=>j("grid"),children:"Tarjetas"})]})]})]}),e.jsx(we,{children:e.jsx(Ce,{className:"py-4",children:e.jsxs("form",{onSubmit:Zl,className:"space-y-3",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsx("div",{className:"flex-1 min-w-[200px]",children:e.jsxs("div",{className:"relative",children:[e.jsx(ra,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar por nombre o nmero...",value:c,onChange:fe=>u(fe.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]})}),e.jsxs("button",{type:"button",onClick:()=>w(!S),className:`px-3 py-2 text-sm rounded-lg flex items-center gap-2 transition-colors ${S||oe?"bg-primary-100 text-primary-700 hover:bg-primary-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[e.jsx(_m,{className:"w-4 h-4"}),"Filtros",oe&&e.jsx("span",{className:"bg-primary-600 text-white text-xs px-1.5 py-0.5 rounded-full",children:[h,m,g,v].filter(Boolean).length})]}),oe&&e.jsxs("button",{type:"button",onClick:Ia,className:"px-3 py-2 text-sm text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg flex items-center gap-1",children:[e.jsx(vt,{className:"w-4 h-4"}),"Limpiar"]})]}),S&&e.jsxs("div",{className:"flex flex-wrap items-center gap-3 pt-3 border-t border-gray-100",children:[e.jsx(Le,{options:t4,value:h,onChange:fe=>{x(fe.target.value),N(1)},className:"w-44"}),e.jsx(Le,{options:k0,value:m,onChange:fe=>{p(fe.target.value),N(1)},className:"w-48"}),e.jsx(Le,{options:[{value:"",label:"Tipo de contrato"},...Tm],value:g,onChange:fe=>{f(fe.target.value),N(1)},className:"w-44"}),e.jsx(Le,{options:[{value:"",label:"Tipo de empleo"},...Dm],value:v,onChange:fe=>{E(fe.target.value),N(1)},className:"w-44"})]}),!Q&&ds.length>0&&e.jsx("div",{className:"text-sm text-gray-500 flex items-center justify-between",children:e.jsxs("span",{children:["Mostrando ",e.jsx("strong",{children:ta.length})," de ",e.jsx("strong",{children:va.total||ds.length})," empleados",M&&e.jsxs("span",{className:"ml-2 text-gray-400",children:[" Ordenado por ",M==="full_name"?"nombre":M==="job_title"?"cargo":M==="department"?"departamento":M==="employment_status"?"estado":"fecha ingreso"," (",ae==="asc"?"A-Z":"Z-A",")"]})]})})]})})}),Q?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[1,2,3,4,5,6].map(fe=>e.jsx(we,{className:"animate-pulse",children:e.jsx(Ce,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/3"})]})]})})},fe))}):ie?e.jsx(we,{children:e.jsxs(Ce,{className:"py-12 text-center",children:[e.jsx(ht,{className:"w-16 h-16 mx-auto text-red-300 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Error al cargar empleados"}),e.jsx("p",{className:"text-gray-500",children:"No se pudo obtener la lista de empleados. Intenta de nuevo."})]})}):ta.length>0?e.jsxs(e.Fragment,{children:[C==="grid"?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:ta.map(fe=>e.jsx(i4,{employee:fe,onView:se},fe.id))}):e.jsx(c4,{employees:ta,onView:se,sortColumn:M,sortDirection:ae,onSort:vs}),js>1&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-gray-500",children:["Pgina ",_," de ",js]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(L,{variant:"secondary",size:"sm",onClick:()=>N(fe=>Math.max(1,fe-1)),disabled:_===1,children:[e.jsx(jm,{className:"w-4 h-4"}),"Anterior"]}),e.jsxs(L,{variant:"secondary",size:"sm",onClick:()=>N(fe=>Math.min(js,fe+1)),disabled:_===js,children:["Siguiente",e.jsx(ys,{className:"w-4 h-4"})]})]})]})]}):e.jsx(we,{children:e.jsxs(Ce,{className:"py-12 text-center",children:[e.jsx(ht,{className:"w-16 h-16 mx-auto text-gray-300 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No se encontraron empleados"}),e.jsx("p",{className:"text-gray-500",children:c||h||m?"Intenta ajustar los filtros de bsqueda":"No hay empleados registrados en el sistema"})]})}),e.jsx(Qe,{isOpen:z,onClose:()=>{k(!1),$(null)},title:"Detalle del Empleado",size:"lg",children:ze?e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-full"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-5 bg-gray-200 rounded w-48"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-32"})]})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:[1,2,3,4].map(fe=>e.jsx("div",{className:"h-12 bg-gray-100 rounded"},fe))})]}):be&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center",children:e.jsxs("span",{className:"text-primary-700 font-semibold text-2xl",children:[be.first_name?.[0],be.last_name?.[0]]})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:be.full_name}),e.jsx("p",{className:"text-gray-500",children:be.employee_number}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${Pn[be.employment_status]||Pn.active}`,children:ei[be.employment_status]||be.employment_status}),be.employment_type&&e.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-600",children:l4[be.employment_type]||be.employment_type})]})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:i&&e.jsxs(e.Fragment,{children:[Ft?e.jsxs(L,{variant:"secondary",size:"sm",onClick:()=>uo(bs),children:[e.jsx(At,{className:"w-4 h-4"}),"Ver Contrato"]}):e.jsxs(L,{variant:"secondary",size:"sm",onClick:fi,children:[e.jsx($l,{className:"w-4 h-4"}),"Generar Contrato"]}),e.jsxs(L,{variant:"secondary",size:"sm",onClick:Ee,children:[e.jsx(ro,{className:"w-4 h-4"}),"Editar"]})]})})]}),i&&e.jsx("div",{className:`p-4 rounded-lg ${be.has_account?"bg-green-50 border border-green-200":"bg-amber-50 border border-amber-200"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-3",children:be.has_account?e.jsxs(e.Fragment,{children:[e.jsx(Be,{className:"w-5 h-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-800",children:"Cuenta de usuario activa"}),e.jsx("p",{className:"text-xs text-green-600",children:be.user_email})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(wm,{className:"w-5 h-5 text-amber-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-amber-800",children:"Sin cuenta de usuario"}),e.jsx("p",{className:"text-xs text-amber-600",children:be.personal_email?`Se creara con: ${be.personal_email}`:"Agregue correo personal para crear cuenta"})]})]})}),!be.has_account&&be.personal_email&&be.identification_number&&e.jsxs(L,{size:"sm",onClick:()=>Ht(be.id),loading:Te.isPending,children:[e.jsx(oo,{className:"w-4 h-4"}),"Crear Cuenta"]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(lo,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Correo electronico"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:be.email||"-"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(Ta,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Cargo"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:be.job_title||"-"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(ni,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Departamento"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:be.department||"-"})]})]}),be.supervisor&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(ka,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Supervisor"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:be.supervisor.name}),e.jsx("p",{className:"text-xs text-gray-500",children:be.supervisor.job_title})]})]}),be.vacation_balance_days!==null&&be.vacation_balance_days!==void 0&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-blue-50 rounded-lg",children:[e.jsx(St,{className:"w-5 h-5 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-blue-600",children:"Dias de vacaciones disponibles"}),e.jsxs("p",{className:"text-sm font-medium text-blue-900",children:[be.vacation_balance_days," dias"]})]})]})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center gap-2",children:[e.jsx(Oe,{className:"w-4 h-4"}),"Informacion de Contrato"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(Oe,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Tipo de Contrato"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:be.contract_template_name||a4[be.contract_type]||be.contract_type||"-"})]})]}),be.hire_date&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(St,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Fecha de Contratacion"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:new Date(be.hire_date).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"})})]})]}),be.contract_start_date&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(St,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Inicio del Contrato"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:new Date(be.contract_start_date).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"})})]})]}),be.contract_end_date&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(St,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Fin del Contrato"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:new Date(be.contract_end_date).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"})})]})]}),be.contract_duration_value&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(St,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Duracion del Contrato"}),e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[be.contract_duration_value," ",s4[be.contract_duration_unit]||be.contract_duration_unit]})]})]}),be.trial_period_days&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(St,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Periodo de Prueba"}),e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[be.trial_period_days," dias"]})]})]})]})]}),(be.salary||be.food_allowance||be.transport_allowance)&&e.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center gap-2",children:[e.jsx(Bl,{className:"w-4 h-4"}),"Compensacion"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[be.salary&&e.jsxs("div",{className:"p-3 bg-green-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Bl,{className:"w-5 h-5 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-green-600",children:"Salario Mensual"}),e.jsxs("p",{className:"text-sm font-medium text-green-900",children:["$",parseFloat(be.salary).toLocaleString("es-CO")]})]})]}),e.jsx("p",{className:"text-xs text-green-600 mt-1 italic ml-8",children:ls(be.salary)})]}),be.food_allowance>0&&e.jsxs("div",{className:"p-3 bg-green-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Bl,{className:"w-5 h-5 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-green-600",children:"Auxilio Alimentacion"}),e.jsxs("p",{className:"text-sm font-medium text-green-900",children:["$",parseFloat(be.food_allowance).toLocaleString("es-CO")]})]})]}),e.jsx("p",{className:"text-xs text-green-600 mt-1 italic ml-8",children:ls(be.food_allowance)})]}),be.transport_allowance>0&&e.jsxs("div",{className:"p-3 bg-green-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Bl,{className:"w-5 h-5 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-green-600",children:"Auxilio Transporte"}),e.jsxs("p",{className:"text-sm font-medium text-green-900",children:["$",parseFloat(be.transport_allowance).toLocaleString("es-CO")]})]})]}),e.jsx("p",{className:"text-xs text-green-600 mt-1 italic ml-8",children:ls(be.transport_allowance)})]})]}),e.jsxs("div",{className:"mt-3 p-3 bg-green-100 rounded-lg",children:[e.jsxs("p",{className:"text-sm text-green-800",children:[e.jsx("span",{className:"font-medium",children:"Compensacion Total: "}),"$",((parseFloat(be.salary)||0)+(parseFloat(be.food_allowance)||0)+(parseFloat(be.transport_allowance)||0)).toLocaleString("es-CO")]}),e.jsx("p",{className:"text-xs text-green-700 mt-1 italic",children:ls((parseFloat(be.salary)||0)+(parseFloat(be.food_allowance)||0)+(parseFloat(be.transport_allowance)||0))})]})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center gap-2",children:[e.jsx(v0,{className:"w-4 h-4"}),"Informacion Personal"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[be.identification_number&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(v0,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Documento de Identidad"}),e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[be.identification_type||"CC",": ",be.identification_number]})]})]}),be.date_of_birth&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(St,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Fecha de Nacimiento"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:new Date(be.date_of_birth).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"})})]})]}),be.place_of_birth&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(Wr,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Lugar de Nacimiento"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:be.place_of_birth})]})]}),be.nationality&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(Wr,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Nacionalidad"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:be.nationality})]})]}),be.phone&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(_0,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Telefono"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:be.phone})]})]}),be.address&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg md:col-span-2",children:[e.jsx(Wr,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Direccion"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:be.address})]})]})]})]}),(be.emergency_contact_name||be.emergency_contact_phone)&&e.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Contacto de Emergencia"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[be.emergency_contact_name&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-orange-50 rounded-lg",children:[e.jsx(ka,{className:"w-5 h-5 text-orange-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-orange-600",children:"Nombre"}),e.jsx("p",{className:"text-sm font-medium text-orange-900",children:be.emergency_contact_name})]})]}),be.emergency_contact_phone&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-orange-50 rounded-lg",children:[e.jsx(_0,{className:"w-5 h-5 text-orange-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-orange-600",children:"Telefono"}),e.jsx("p",{className:"text-sm font-medium text-orange-900",children:be.emergency_contact_phone})]})]})]})]}),(be.is_supervisor||be.is_hr_staff||be.is_hr_manager)&&e.jsxs("div",{className:"flex flex-wrap gap-2 pt-2 border-t border-gray-200",children:[be.is_supervisor&&e.jsx(qe,{variant:"info",children:"Supervisor"}),be.is_hr_staff&&e.jsx(qe,{variant:"info",children:"Staff HR"}),be.is_hr_manager&&e.jsx(qe,{variant:"success",children:"Gerente HR"})]})]})}),e.jsx(Qe,{isOpen:U,onClose:Ae,title:`Editar Empleado: ${xe?.full_name||""}`,size:"lg",children:ze?e.jsx("div",{className:"animate-pulse space-y-4",children:[1,2,3,4].map(fe=>e.jsx("div",{className:"h-12 bg-gray-200 rounded"},fe))}):be&&e.jsx(n4,{employee:be,employees:ta,contractTemplates:_t,departmentOptions:X,onSubmit:ct,onCancel:Ae,loading:$e.isPending,error:pe})}),e.jsx(Qe,{isOpen:ee,onClose:()=>B(!1),title:"Seleccionar Template de Contrato",size:"md",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Seleccione el template que desea usar para generar el contrato de ",e.jsx("strong",{children:be?.full_name})]}),Et.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(Oe,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"No hay templates de contrato disponibles"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:'Cree un template con categora "contract" desde Admin  Templates'})]}):e.jsx("div",{className:"space-y-2",children:Et.map(fe=>e.jsx("button",{onClick:()=>Kl(fe.id),disabled:tt.isPending,className:"w-full p-4 text-left border border-gray-200 rounded-lg hover:bg-gray-50 hover:border-primary-300 transition-colors disabled:opacity-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:fe.name}),fe.description&&e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:fe.description})]}),e.jsx($l,{className:"w-5 h-5 text-gray-400"})]})},fe.id))}),tt.isPending&&e.jsxs("div",{className:"flex items-center justify-center gap-2 p-4 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-primary-600 border-t-transparent"}),e.jsx("span",{className:"text-sm text-primary-700",children:"Generando documento..."})]}),e.jsx("div",{className:"flex justify-end pt-4 border-t",children:e.jsx(L,{variant:"secondary",onClick:()=>B(!1),children:"Cancelar"})})]})}),e.jsx(Qe,{isOpen:ye,onClose:()=>{F(!1),je(null)},title:"Detalle del Contrato",size:"lg",children:te&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:xt.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Generado el ",new Date(xt.created_at).toLocaleDateString("es-CO",{day:"numeric",month:"long",year:"numeric"})]})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${xt.status==="completed"?"bg-green-100 text-green-700":xt.status==="pending_signatures"?"bg-yellow-100 text-yellow-700":xt.status==="draft"?"bg-gray-100 text-gray-700":"bg-red-100 text-red-700"}`,children:xt.status==="completed"?"Completado":xt.status==="pending_signatures"?"Pendiente de Firmas":xt.status==="draft"?"Borrador":xt.status})]}),xt.pending_signatures_count!==void 0&&e.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-blue-800",children:"Progreso de Firmas"}),e.jsxs("span",{className:"text-sm text-blue-600",children:[xt.completed_signatures_count||0," de ",xt.total_required_signatures||0," firmas"]})]}),e.jsx("div",{className:"w-full bg-blue-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all",style:{width:`${xt.total_required_signatures?(xt.completed_signatures_count||0)/xt.total_required_signatures*100:0}%`}})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Empleado"}),e.jsx("p",{className:"font-medium text-gray-900",children:xt.employee_name||be?.full_name})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Template"}),e.jsx("p",{className:"font-medium text-gray-900",children:xt.template_name||"N/A"})]})]}),xt.signatures&&xt.signatures.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Firmas Requeridas"}),e.jsx("div",{className:"space-y-2",children:xt.signatures.map((fe,Je)=>e.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border ${fe.status==="signed"?"border-green-200 bg-green-50":"border-yellow-200 bg-yellow-50"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[fe.status==="signed"?e.jsx(Be,{className:"w-5 h-5 text-green-500"}):e.jsx("div",{className:"w-5 h-5 border-2 border-yellow-400 rounded-full flex items-center justify-center",children:e.jsx("div",{className:"w-2 h-2 bg-yellow-400 rounded-full"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:fe.signatory_label}),e.jsx("p",{className:"text-sm text-gray-600",children:fe.status==="signed"?e.jsxs(e.Fragment,{children:["Firmado por ",e.jsx("strong",{children:fe.signed_by_name})," el ",new Date(fe.signed_at).toLocaleDateString("es-CO")]}):e.jsxs(e.Fragment,{children:["Pendiente de firma por: ",e.jsx("strong",{children:fe.user_name||"Sin asignar"})]})})]})]}),e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${fe.status==="signed"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:fe.status==="signed"?"Firmado":"Pendiente"})]},Je))})]}),ia.length>1&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:["Historial de Documentos (",ia.length,")"]}),e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:ia.map(fe=>e.jsxs("button",{onClick:()=>je(fe),className:`w-full flex items-center justify-between p-2 rounded-lg text-left transition-colors ${fe.id===te.id?"bg-primary-50 border border-primary-200":"hover:bg-gray-50 border border-transparent"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-900",children:fe.name})]}),e.jsx("span",{className:"text-xs text-gray-500",children:new Date(fe.created_at).toLocaleDateString("es-CO")})]},fe.id))})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[e.jsxs(L,{variant:"secondary",onClick:()=>fi(),children:[e.jsx($l,{className:"w-4 h-4"}),"Generar Nuevo Contrato"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{variant:"secondary",onClick:()=>{F(!1),je(null)},children:"Cerrar"}),e.jsxs(L,{onClick:()=>mo(te.id),children:[e.jsx($l,{className:"w-4 h-4"}),"Descargar PDF"]})]})]})]})}),e.jsx(Qe,{isOpen:T,onClose:()=>O(!1),title:"Agregar Nuevo Empleado",size:"lg",children:e.jsx(r4,{employees:ta,contractTemplates:_t,departmentOptions:X,onSubmit:fe=>ne.mutate(fe),onCancel:()=>O(!1),loading:ne.isPending,error:Y})})]})}const d4=[{value:"employment",label:"Certificacin Laboral Bsica"},{value:"salary",label:"Certificacin con Salario"},{value:"position",label:"Certificacin de Cargo"},{value:"full",label:"Certificacin Completa"},{value:"custom",label:"Certificacin Personalizada"}],u4=[{value:"bank",label:"Entidad Bancaria / Crdito"},{value:"visa",label:"Trmite de Visa"},{value:"rental",label:"Arrendamiento / Inmobiliaria"},{value:"government",label:"Trmite Gubernamental"},{value:"legal",label:"Proceso Legal"},{value:"other",label:"Otro"}],m4=[{value:"digital",label:"Digital (PDF)"},{value:"physical",label:"Fsica (Impresa)"},{value:"both",label:"Digital y Fsica"}],h4=[{value:"es",label:"Espaol"},{value:"en",label:"Ingls"}],x4=[{value:"",label:"Todos los estados"},{value:"pending",label:"Pendiente"},{value:"processing",label:"En Proceso"},{value:"completed",label:"Completado"},{value:"rejected",label:"Rechazado"},{value:"cancelled",label:"Cancelado"}],Uu={employment:"Certificacin Laboral",salary:"Con Salario",position:"Certificacin de Cargo",full:"Certificacin Completa",custom:"Personalizada"},A0={bank:"Entidad Bancaria",visa:"Trmite de Visa",rental:"Arrendamiento",government:"Trmite Gubernamental",legal:"Proceso Legal",other:"Otro"},Fu={employment:1,salary:2,position:1,full:3,custom:3};function p4({onSubmit:s,onCancel:r,loading:i,initialType:c,availableTypes:u}){const h=u?.length>0?u:d4,x=c&&h.find(v=>v.value===c)?c:h[0]?.value||"employment",[m,p]=b.useState({certification_type:x,purpose:"bank",purpose_details:"",language:"es",delivery_method:"digital",addressee:"",include_salary:x==="salary"||x==="full",include_position:!0,include_start_date:!0,include_department:!1,special_instructions:""});b.useEffect(()=>{c&&h.find(v=>v.value===c)&&p(v=>({...v,certification_type:c,include_salary:c==="salary"||c==="full"}))},[c,h]);const g=v=>{v.preventDefault(),s(m)},f=m.certification_type;return e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e.jsx(Le,{label:"Tipo de Certificacin",options:h,value:m.certification_type,onChange:v=>{const E=v.target.value,S=E==="salary"||E==="full"?m.include_salary:!1;p({...m,certification_type:E,include_salary:S})},required:!0}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center gap-2 text-blue-700",children:[e.jsx(Xt,{className:"w-4 h-4"}),e.jsxs("span",{className:"text-sm font-medium",children:["Tiempo estimado: ",Fu[f]," da",Fu[f]>1?"s":""," hbil",Fu[f]>1?"es":""]})]})}),e.jsx(Le,{label:"Propsito",options:u4,value:m.purpose,onChange:v=>p({...m,purpose:v.target.value}),required:!0}),m.purpose==="other"&&e.jsx(ue,{label:"Especifique el propsito",value:m.purpose_details,onChange:v=>p({...m,purpose_details:v.target.value}),placeholder:"Describa el propsito de la certificacin...",required:!0}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(Le,{label:"Idioma",options:h4,value:m.language,onChange:v=>p({...m,language:v.target.value})}),e.jsx(Le,{label:"Mtodo de Entrega",options:m4,value:m.delivery_method,onChange:v=>p({...m,delivery_method:v.target.value})})]}),e.jsx(ue,{label:"Dirigido a (opcional)",value:m.addressee,onChange:v=>p({...m,addressee:v.target.value}),placeholder:"Ej: A quien corresponda, Banco XYZ, Embajada..."}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Informacin a incluir"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("label",{className:"flex items-center gap-2 p-2 border rounded-lg cursor-pointer hover:bg-gray-50",children:[e.jsx("input",{type:"checkbox",checked:m.include_start_date,onChange:v=>p({...m,include_start_date:v.target.checked}),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"text-sm",children:"Fecha de ingreso"})]}),e.jsxs("label",{className:"flex items-center gap-2 p-2 border rounded-lg cursor-pointer hover:bg-gray-50",children:[e.jsx("input",{type:"checkbox",checked:m.include_position,onChange:v=>p({...m,include_position:v.target.checked}),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"text-sm",children:"Cargo actual"})]}),e.jsxs("label",{className:"flex items-center gap-2 p-2 border rounded-lg cursor-pointer hover:bg-gray-50",children:[e.jsx("input",{type:"checkbox",checked:m.include_department,onChange:v=>p({...m,include_department:v.target.checked}),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"text-sm",children:"Departamento"})]}),(m.certification_type==="salary"||m.certification_type==="full")&&e.jsxs("label",{className:"flex items-center gap-2 p-2 border rounded-lg cursor-pointer hover:bg-gray-50",children:[e.jsx("input",{type:"checkbox",checked:m.include_salary,onChange:v=>p({...m,include_salary:v.target.checked}),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"text-sm",children:"Informacin salarial"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Instrucciones especiales (opcional)"}),e.jsx("textarea",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",rows:3,value:m.special_instructions,onChange:v=>p({...m,special_instructions:v.target.value}),placeholder:"Informacin adicional o requisitos especiales..."})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(L,{type:"button",variant:"secondary",onClick:r,children:"Cancelar"}),e.jsx(L,{type:"submit",loading:i,children:"Solicitar Certificacin"})]})]})}const f4={pending:e.jsx(Xt,{className:"w-4 h-4 text-yellow-500"}),processing:e.jsx(Xt,{className:"w-4 h-4 text-blue-500 animate-pulse"}),completed:e.jsx(Be,{className:"w-4 h-4 text-green-500"}),rejected:e.jsx(st,{className:"w-4 h-4 text-red-500"}),cancelled:e.jsx(vt,{className:"w-4 h-4 text-gray-400"})};function g4(){const[s,r]=b.useState(!1),[i,c]=b.useState(!1),[u,h]=b.useState(!1),[x,m]=b.useState(null),[p,g]=b.useState(null),[f,v]=b.useState(null),[E,S]=b.useState(""),[w,C]=b.useState(""),[j,_]=b.useState(null),[N,z]=b.useState(null),[k,U]=b.useState(null),[A,T]=b.useState(null),[O,ee]=b.useState(null),[B,ye]=b.useState(null),F=et(),te=Aa(),je=Za(),{isHR:xe,isAdmin:$}=Ra();b.useEffect(()=>{je.state?.openNew&&(r(!0),te(je.pathname,{replace:!0,state:{}}))},[je.state,je.pathname,te]);const{data:pe}=ke({queryKey:["certification-available-types"],queryFn:()=>Qa.getAvailableTypes(),staleTime:300*1e3}),G=pe?.data?.data||[],Y=[{value:"",label:"Todos los tipos"},...G.map(ne=>({value:ne.value,label:ne.label}))],{data:me,isLoading:M}=ke({queryKey:["certifications",{status:E,type:w}],queryFn:()=>Qa.list({status:E||void 0,type:w||void 0})}),V=Ne({mutationFn:ne=>Qa.create(ne),onSuccess:()=>{F.invalidateQueries(["certifications"]),r(!1)}}),ae=Ne({mutationFn:ne=>Qa.cancel(ne),onSuccess:()=>{F.invalidateQueries(["certifications"])}}),W=Ne({mutationFn:ne=>Qa.generateDocument(ne),onSuccess:()=>{F.invalidateQueries(["certifications"]),_(null)},onError:ne=>{console.error("Error generating document:",ne),_(null);const Te=ne.response?.data;Te?.error_type==="missing_variables"?(m({message:Te.error,missingData:Te.missing_data,actions:Te.action_required||[]}),h(!0)):alert(Te?.error||"Error al generar documento")}}),R=Ne({mutationFn:ne=>Qa.delete(ne),onSuccess:()=>{F.invalidateQueries(["certifications"]),g(null)},onError:ne=>{console.error("Error deleting certification:",ne),alert(ne.response?.data?.error||"Error al eliminar certificacin")}}),X=Ne({mutationFn:ne=>Qa.signDocument(ne),onSuccess:ne=>{F.invalidateQueries(["certifications"]),U(null);const Te=ne.data.document;Te.all_signed?alert("Documento firmado y completado exitosamente"):alert(`Documento firmado. Firmas pendientes: ${Te.pending_signatures.join(", ")}`)},onError:ne=>{console.error("Error signing document:",ne),U(null);const Te=ne.response?.data;Te?.action_required?.type==="configure_signature"?confirm("No tienes firma digital configurada. Deseas configurarla ahora?")&&te("/profile"):alert(Te?.error||"Error al firmar documento")}}),ge=me?.data?.data||[],Q=ne=>{v(ne),c(!0)},ie=async ne=>{_(ne),W.mutate(ne)},_e=async ne=>{try{z(ne.id);const Te=await Qa.downloadDocument(ne.id),tt=new Blob([Te.data],{type:"application/pdf"}),lt=URL.createObjectURL(tt),Et=document.createElement("a");Et.href=lt,Et.download=`${ne.request_number}.pdf`,document.body.appendChild(Et),Et.click(),document.body.removeChild(Et),URL.revokeObjectURL(lt)}catch(Te){console.error("Error downloading document:",Te),alert("Error al descargar documento")}finally{z(null)}},ze=async ne=>{try{ee(ne.id);const Te=await Qa.downloadDocument(ne.id),tt=new Blob([Te.data],{type:"application/pdf"}),lt=URL.createObjectURL(tt);T(lt)}catch(Te){console.error("Error previewing document:",Te);const tt=Te.response?.data;tt?.error?alert(tt.error):alert("Error al previsualizar documento")}finally{ee(null)}},$e=()=>{A&&URL.revokeObjectURL(A),T(null)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Certificaciones"}),e.jsx("p",{className:"text-gray-500",children:"Solicita certificaciones laborales para distintos trmites"})]}),e.jsxs(L,{onClick:()=>r(!0),disabled:G.length===0,title:G.length===0?"No hay tipos de certificacin disponibles":"",children:[e.jsx(Ke,{className:"w-4 h-4"}),"Nueva Solicitud"]})]}),e.jsx(we,{children:e.jsx(Ce,{className:"py-3",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(_m,{className:"w-4 h-4 text-gray-400"}),e.jsx(Le,{options:x4,value:E,onChange:ne=>S(ne.target.value),className:"w-48"}),e.jsx(Le,{options:Y,value:w,onChange:ne=>C(ne.target.value),className:"w-56"})]})})}),G.length>0?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[G.find(ne=>ne.value==="employment")&&e.jsx(we,{className:"bg-blue-50 border-blue-200 cursor-pointer hover:shadow-md hover:border-blue-300 transition-all",onClick:()=>{ye("employment"),r(!0)},children:e.jsx(Ce,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Oe,{className:"w-8 h-8 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-blue-900",children:"Certificacin Laboral"}),e.jsx("p",{className:"text-sm text-blue-700",children:"Confirma tu vnculo laboral actual"})]})]})})}),G.find(ne=>ne.value==="salary")&&e.jsx(we,{className:"bg-green-50 border-green-200 cursor-pointer hover:shadow-md hover:border-green-300 transition-all",onClick:()=>{ye("salary"),r(!0)},children:e.jsx(Ce,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Be,{className:"w-8 h-8 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-green-900",children:"Con Informacin Salarial"}),e.jsx("p",{className:"text-sm text-green-700",children:"Incluye detalles de tu compensacin"})]})]})})}),G.find(ne=>ne.value==="full")&&e.jsx(we,{className:"bg-purple-50 border-purple-200 cursor-pointer hover:shadow-md hover:border-purple-300 transition-all",onClick:()=>{ye("full"),r(!0)},children:e.jsx(Ce,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Xt,{className:"w-8 h-8 text-purple-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-purple-900",children:"Certificacin Completa"}),e.jsx("p",{className:"text-sm text-purple-700",children:"Incluye toda tu informacin laboral"})]})]})})}),G.find(ne=>ne.value==="position")&&e.jsx(we,{className:"bg-amber-50 border-amber-200 cursor-pointer hover:shadow-md hover:border-amber-300 transition-all",onClick:()=>{ye("position"),r(!0)},children:e.jsx(Ce,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Oe,{className:"w-8 h-8 text-amber-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-amber-900",children:"Certificacin de Cargo"}),e.jsx("p",{className:"text-sm text-amber-700",children:"Detalla cargo y responsabilidades"})]})]})})}),G.find(ne=>ne.value==="custom")&&e.jsx(we,{className:"bg-gray-50 border-gray-200 cursor-pointer hover:shadow-md hover:border-gray-300 transition-all",onClick:()=>{ye("custom"),r(!0)},children:e.jsx(Ce,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Oe,{className:"w-8 h-8 text-gray-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"Certificacin Personalizada"}),e.jsx("p",{className:"text-sm text-gray-700",children:"Contenido segn necesidad"})]})]})})})]}):e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(rs,{className:"w-6 h-6 text-amber-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-amber-900",children:"No hay tipos de certificacin disponibles"}),e.jsx("p",{className:"text-sm text-amber-700",children:"Contacta al administrador para configurar los templates de certificacin."})]})]})}),e.jsxs(we,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-fixed",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"w-[15%] px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Nmero"}),e.jsx("th",{className:"w-[18%] px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Tipo"}),e.jsx("th",{className:"w-[17%] px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Propsito"}),e.jsx("th",{className:"w-[12%] px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Estado"}),e.jsx("th",{className:"w-[10%] px-4 py-3 text-center text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Das"}),e.jsx("th",{className:"w-[13%] px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Fecha"}),e.jsx("th",{className:"w-[15%] px-4 py-3 text-center text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Acciones"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:M?[...Array(3)].map((ne,Te)=>e.jsxs("tr",{className:"animate-pulse",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"h-4 bg-gray-200 rounded w-24"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"h-4 bg-gray-200 rounded w-32"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"h-4 bg-gray-200 rounded w-28"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"h-4 bg-gray-200 rounded w-20"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"h-4 bg-gray-200 rounded w-8 mx-auto"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"h-4 bg-gray-200 rounded w-20"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"h-4 bg-gray-200 rounded w-16 mx-auto"})})]},Te)):ge.length>0?ge.map(ne=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx("code",{className:"text-sm font-mono text-primary-600 bg-primary-50 px-2 py-0.5 rounded",children:ne.request_number})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"w-4 h-4 text-gray-400 flex-shrink-0"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 truncate",children:Uu[ne.certification_type]||ne.certification_type})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"text-sm text-gray-600 truncate block",children:A0[ne.purpose]||ne.purpose})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-1.5",children:[f4[ne.status],e.jsx(qe,{status:ne.status})]})}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("span",{className:"text-sm text-gray-600",children:ne.estimated_days})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-500",children:[e.jsx(St,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:new Date(ne.created_at).toLocaleDateString("es-ES",{day:"2-digit",month:"short"})})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx("button",{onClick:()=>Q(ne),className:"p-1.5 text-gray-500 hover:text-primary-600 hover:bg-primary-50 rounded transition-colors",title:"Ver detalle",children:e.jsx(At,{className:"w-4 h-4"})}),(xe||$)&&ne.status==="pending"&&!ne.document_uuid&&e.jsx("button",{onClick:()=>ie(ne.id),disabled:j===ne.id,className:"p-1.5 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded transition-colors disabled:opacity-50",title:"Generar documento",children:j===ne.id?e.jsx(Vl,{className:"w-4 h-4 animate-spin"}):e.jsx(ii,{className:"w-4 h-4"})}),ne.document_uuid&&ne.document_info?.can_download&&e.jsx("button",{onClick:()=>ze(ne),disabled:O===ne.id,className:"p-1.5 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded transition-colors disabled:opacity-50",title:"Previsualizar",children:O===ne.id?e.jsx(Vl,{className:"w-4 h-4 animate-spin"}):e.jsx(At,{className:"w-4 h-4"})}),ne.document_uuid&&ne.document_info?.can_download&&e.jsx("button",{onClick:()=>_e(ne),disabled:N===ne.id,className:"p-1.5 text-gray-500 hover:text-green-600 hover:bg-green-50 rounded transition-colors disabled:opacity-50",title:"Descargar",children:N===ne.id?e.jsx(Vl,{className:"w-4 h-4 animate-spin"}):e.jsx(ba,{className:"w-4 h-4"})}),ne.document_uuid&&ne.document_info?.pending_signatures?.length>0&&(xe||$)&&e.jsx("button",{onClick:()=>{U(ne.id),X.mutate(ne.id)},disabled:k===ne.id,className:"p-1.5 text-gray-500 hover:text-purple-600 hover:bg-purple-50 rounded transition-colors disabled:opacity-50",title:`Firmar documento (Pendiente: ${ne.document_info?.pending_signatures?.join(", ")})`,children:k===ne.id?e.jsx(Vl,{className:"w-4 h-4 animate-spin"}):e.jsx(yt,{className:"w-4 h-4"})}),ne.document_uuid&&!ne.document_info?.can_download&&!(xe||$)&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs text-amber-700 bg-amber-50 rounded",title:`Pendiente: ${ne.document_info?.pending_signatures?.join(", ")}`,children:[e.jsx(Xt,{className:"w-3 h-3 mr-1"}),"Firma pendiente"]}),["pending","processing"].includes(ne.status)&&!$&&e.jsx("button",{onClick:()=>ae.mutate(ne.id),className:"p-1.5 text-gray-500 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:"Cancelar",children:e.jsx(vt,{className:"w-4 h-4"})}),$&&e.jsx("button",{onClick:()=>g(ne),className:"p-1.5 text-gray-500 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:"Eliminar",children:e.jsx(Nt,{className:"w-4 h-4"})})]})})]},ne.id)):e.jsx("tr",{children:e.jsxs("td",{colSpan:7,className:"px-4 py-12 text-center",children:[e.jsx(Oe,{className:"w-12 h-12 mx-auto text-gray-300 mb-3"}),e.jsx("h3",{className:"text-base font-medium text-gray-900 mb-1",children:"No tienes solicitudes de certificaciones"}),e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Solicita una certificacin laboral para tus trmites"}),e.jsxs(L,{size:"sm",onClick:()=>r(!0),disabled:G.length===0,children:[e.jsx(Ke,{className:"w-4 h-4"}),"Nueva Solicitud"]})]})})})]})}),ge.length>0&&e.jsx("div",{className:"px-4 py-3 border-t border-gray-100 bg-gray-50",children:e.jsxs("p",{className:"text-sm text-gray-500",children:[ge.length," solicitud",ge.length!==1?"es":""]})})]}),e.jsx(Qe,{isOpen:s,onClose:()=>{r(!1),ye(null)},title:"Nueva Solicitud de Certificacin",size:"lg",children:e.jsx(p4,{onSubmit:ne=>V.mutate(ne),onCancel:()=>{r(!1),ye(null)},loading:V.isPending,initialType:B,availableTypes:G})}),e.jsx(Qe,{isOpen:i,onClose:()=>c(!1),title:"Detalle de Certificacin",size:"md",children:f&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-500",children:"Nmero:"}),e.jsx("span",{className:"font-medium",children:f.request_number})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-500",children:"Estado:"}),e.jsx(qe,{status:f.status})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-500",children:"Tipo:"}),e.jsx("span",{children:Uu[f.certification_type]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-500",children:"Propsito:"}),e.jsx("span",{children:A0[f.purpose]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-500",children:"Tiempo estimado:"}),e.jsxs("span",{children:[f.estimated_days," da",f.estimated_days>1?"s":""," hbil",f.estimated_days>1?"es":""]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-500",children:"Fecha solicitud:"}),e.jsx("span",{children:new Date(f.created_at).toLocaleDateString("es-ES")})]}),f.language&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-500",children:"Idioma:"}),e.jsx("span",{children:f.language==="es"?"Espaol":"Ingls"})]}),f.delivery_method&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-500",children:"Entrega:"}),e.jsxs("span",{children:[f.delivery_method==="digital"&&"Digital (PDF)",f.delivery_method==="physical"&&"Fsica (Impresa)",f.delivery_method==="both"&&"Digital y Fsica"]})]}),f.status==="completed"&&f.completed_at&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-500",children:"Fecha completado:"}),e.jsx("span",{className:"text-green-600 font-medium",children:new Date(f.completed_at).toLocaleDateString("es-ES")})]}),f.status==="rejected"&&f.rejection_reason&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 mt-4",children:[e.jsx("p",{className:"text-sm font-medium text-red-800 mb-1",children:"Motivo de rechazo:"}),e.jsx("p",{className:"text-red-700",children:f.rejection_reason})]}),f.processed_by&&e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3 mt-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Procesado por:"}),e.jsx("p",{className:"text-gray-600",children:f.processed_by.name})]}),f.document_uuid&&f.document_info?.can_download&&e.jsxs("div",{className:"pt-4 border-t space-y-2",children:[e.jsxs(L,{className:"w-full",variant:"primary",onClick:()=>ze(f),loading:O===f.id,children:[e.jsx(At,{className:"w-4 h-4"}),"Previsualizar Documento"]}),e.jsxs(L,{className:"w-full",variant:"secondary",onClick:()=>_e(f),loading:N===f.id,children:[e.jsx(ba,{className:"w-4 h-4"}),"Descargar Certificacin"]})]})]})}),e.jsx(Qe,{isOpen:u,onClose:()=>h(!1),title:"No se puede generar el documento",size:"md",children:x&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-red-50 border border-red-200 rounded-lg",children:[e.jsx(rs,{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-red-800",children:"Informacin faltante"}),e.jsx("p",{className:"text-sm text-red-700 mt-1",children:x.message})]})]}),x.missingData?.by_source?.employee?.length>0&&e.jsxs("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-amber-800 mb-2",children:"Datos del empleado requeridos:"}),e.jsx("ul",{className:"list-disc list-inside text-sm text-amber-700 space-y-1",children:x.missingData.by_source.employee.map((ne,Te)=>e.jsx("li",{children:ne.field_label||ne.field},Te))})]}),x.missingData?.by_source?.organization?.length>0&&e.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-blue-800 mb-2",children:"Datos de la organizacin requeridos:"}),e.jsx("ul",{className:"list-disc list-inside text-sm text-blue-700 space-y-1",children:x.missingData.by_source.organization.map((ne,Te)=>e.jsx("li",{children:ne.field_label||ne.field},Te))})]}),e.jsxs("div",{className:"flex flex-col gap-2 pt-4 border-t",children:[x.actions?.map((ne,Te)=>e.jsxs(L,{variant:Te===0?"primary":"secondary",className:"w-full justify-center",onClick:()=>{h(!1),ne.type==="edit_employee"&&ne.employee_id?te(`/hr/employees?edit=${ne.employee_id}`):ne.type==="edit_organization"?te("/admin/organization"):ne.type==="configure_mappings"&&te("/admin/variable-mappings")},children:[e.jsx(Fg,{className:"w-4 h-4"}),ne.label,ne.employee_name&&` (${ne.employee_name})`]},Te)),e.jsx(L,{variant:"ghost",className:"w-full justify-center",onClick:()=>h(!1),children:"Cerrar"})]})]})}),e.jsx(Qe,{isOpen:!!p,onClose:()=>g(null),title:"Eliminar Certificacin",size:"sm",children:p&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-red-50 border border-red-200 rounded-lg",children:[e.jsx(rs,{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-red-800",children:"Eliminar esta certificacin?"}),e.jsxs("p",{className:"text-sm text-red-700 mt-1",children:["Esta accin no se puede deshacer. Se eliminar permanentemente la solicitud"," ",e.jsx("strong",{children:p.request_number}),"."]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Tipo:"}),e.jsx("span",{className:"font-medium",children:Uu[p.certification_type]})]}),e.jsxs("div",{className:"flex justify-between mt-1",children:[e.jsx("span",{className:"text-gray-500",children:"Estado:"}),e.jsx(qe,{status:p.status})]})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx(L,{variant:"ghost",className:"flex-1",onClick:()=>g(null),children:"Cancelar"}),e.jsxs(L,{variant:"danger",className:"flex-1",loading:R.isPending,onClick:()=>R.mutate(p.id),children:[e.jsx(Nt,{className:"w-4 h-4"}),"Eliminar"]})]})]})}),e.jsx(Qe,{isOpen:!!A,onClose:$e,title:"Previsualizacin de Documento",size:"full",children:e.jsxs("div",{className:"flex flex-col h-[80vh]",children:[A&&e.jsx("iframe",{src:A,className:"w-full flex-1 border rounded-lg bg-gray-100",title:"Vista previa del documento"}),e.jsx("div",{className:"flex justify-end gap-3 pt-4 border-t mt-4",children:e.jsxs(L,{variant:"secondary",onClick:$e,children:[e.jsx(vt,{className:"w-4 h-4"}),"Cerrar"]})})]})})]})}const y4=[{id:"vacations",name:"Vacaciones",icon:St,path:"/hr/my-requests/vacations"},{id:"certifications",name:"Certificaciones",icon:ss,path:"/hr/my-requests/certifications"}];function R0(){const{tab:s}=Y0(),r=Aa();if(!s)return e.jsx(Da,{to:"/hr/my-requests/vacations",replace:!0});if(!["vacations","certifications"].includes(s))return e.jsx(Da,{to:"/hr/my-requests/vacations",replace:!0});const c=s;return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:y4.map(u=>{const h=u.icon,x=c===u.id;return e.jsxs("button",{onClick:()=>r(u.path),className:`
                  group inline-flex items-center gap-2 py-4 px-1 border-b-2 font-medium text-sm
                  ${x?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
                `,children:[e.jsx(h,{className:`w-5 h-5 ${x?"text-primary-500":"text-gray-400 group-hover:text-gray-500"}`}),u.name]},u.id)})})}),e.jsxs("div",{children:[c==="vacations"&&e.jsx(Ww,{}),c==="certifications"&&e.jsx(g4,{})]})]})}function Ac({title:s,value:r,subtitle:i,icon:c,color:u="blue",trend:h}){const x={blue:"bg-blue-50 text-blue-600 border-blue-100",green:"bg-green-50 text-green-600 border-green-100",yellow:"bg-yellow-50 text-yellow-600 border-yellow-100",red:"bg-red-50 text-red-600 border-red-100",purple:"bg-purple-50 text-purple-600 border-purple-100",orange:"bg-orange-50 text-orange-600 border-orange-100"},m={blue:"text-blue-500",green:"text-green-500",yellow:"text-yellow-500",red:"text-red-500",purple:"text-purple-500",orange:"text-orange-500"};return e.jsx(we,{className:`border ${x[u]}`,children:e.jsx(Ce,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:s}),e.jsx("p",{className:"text-3xl font-bold mt-1",children:r}),i&&e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:i}),h&&e.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[e.jsx(Sm,{className:"w-3 h-3 text-green-500"}),e.jsx("span",{className:"text-xs text-green-600",children:h})]})]}),e.jsx("div",{className:`p-3 rounded-xl ${x[u]}`,children:e.jsx(c,{className:`w-6 h-6 ${m[u]}`})})]})})})}function b4({data:s}){if(!s||Object.keys(s).length===0)return e.jsx("div",{className:"text-center py-8 text-gray-500",children:"No hay datos de departamentos"});const r=Object.values(s).reduce((u,h)=>u+h,0),i=["bg-blue-500","bg-green-500","bg-purple-500","bg-orange-500","bg-pink-500","bg-cyan-500","bg-yellow-500","bg-red-500"],c={engineering:"Ingenieria",hr:"Recursos Humanos",finance:"Finanzas",sales:"Ventas",marketing:"Marketing",operations:"Operaciones",legal:"Legal"};return e.jsx("div",{className:"space-y-3",children:Object.entries(s).map(([u,h],x)=>{const m=r>0?h/r*100:0;return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:c[u]||u}),e.jsxs("span",{className:"font-medium",children:[h," (",m.toFixed(0),"%)"]})]}),e.jsx("div",{className:"h-2 bg-gray-100 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full ${i[x%i.length]} rounded-full transition-all`,style:{width:`${m}%`}})})]},u)})})}function v4(){const{data:s,isLoading:r,error:i}=ke({queryKey:["hr-dashboard"],queryFn:async()=>(await s2.getStats()).data.data});if(r)return e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx(Vl,{className:"w-8 h-8 animate-spin text-primary-600"})});if(i)return e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] text-red-600",children:[e.jsx(st,{className:"w-12 h-12 mb-4"}),e.jsx("p",{className:"text-lg font-medium",children:"Error al cargar el dashboard"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:i.message})]});const{employees:c,vacation_requests:u,certification_requests:h}=s||{};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard HR"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Resumen de recursos humanos"})]}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx(ht,{className:"w-5 h-5"}),"Empleados"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(Ac,{title:"Total Empleados",value:c?.total||0,icon:ht,color:"blue"}),e.jsx(Ac,{title:"Activos",value:c?.active||0,subtitle:c?.total?`${(c.active/c.total*100).toFixed(0)}% del total`:null,icon:Em,color:"green"}),e.jsx(Ac,{title:"En Licencia",value:c?.on_leave||0,icon:$g,color:"yellow"}),e.jsx(Ac,{title:"Departamentos",value:Object.keys(c?.by_department||{}).length,icon:ni,color:"purple"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(we,{children:[e.jsx(Vt,{children:e.jsxs(Qt,{className:"flex items-center gap-2",children:[e.jsx(rw,{className:"w-5 h-5 text-green-600"}),"Solicitudes de Vacaciones"]})}),e.jsx(Ce,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-yellow-50 rounded-lg border border-yellow-100",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Xt,{className:"w-5 h-5 text-yellow-600"}),e.jsx("span",{className:"text-sm text-yellow-700",children:"Pendientes"})]}),e.jsx("p",{className:"text-2xl font-bold text-yellow-800 mt-2",children:u?.pending||0})]}),e.jsxs("div",{className:"p-4 bg-green-50 rounded-lg border border-green-100",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Be,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"text-sm text-green-700",children:"Aprobadas (Ao)"})]}),e.jsx("p",{className:"text-2xl font-bold text-green-800 mt-2",children:u?.approved_this_year||0})]}),e.jsxs("div",{className:"p-4 bg-red-50 rounded-lg border border-red-100",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ma,{className:"w-5 h-5 text-red-600"}),e.jsx("span",{className:"text-sm text-red-700",children:"Rechazadas (Ao)"})]}),e.jsx("p",{className:"text-2xl font-bold text-red-800 mt-2",children:u?.rejected_this_year||0})]}),e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-100",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(St,{className:"w-5 h-5 text-blue-600"}),e.jsx("span",{className:"text-sm text-blue-700",children:"De vacaciones hoy"})]}),e.jsx("p",{className:"text-2xl font-bold text-blue-800 mt-2",children:u?.employees_on_vacation_today||0})]})]})})]}),e.jsxs(we,{children:[e.jsx(Vt,{children:e.jsxs(Qt,{className:"flex items-center gap-2",children:[e.jsx(ss,{className:"w-5 h-5 text-purple-600"}),"Certificaciones Laborales"]})}),e.jsx(Ce,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-yellow-50 rounded-lg border border-yellow-100",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Xt,{className:"w-5 h-5 text-yellow-600"}),e.jsx("span",{className:"text-sm text-yellow-700",children:"Pendientes"})]}),e.jsx("p",{className:"text-2xl font-bold text-yellow-800 mt-2",children:h?.pending||0})]}),e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-100",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"w-5 h-5 text-blue-600"}),e.jsx("span",{className:"text-sm text-blue-700",children:"Procesando"})]}),e.jsx("p",{className:"text-2xl font-bold text-blue-800 mt-2",children:h?.processing||0})]}),e.jsxs("div",{className:"p-4 bg-green-50 rounded-lg border border-green-100",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Be,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"text-sm text-green-700",children:"Completadas (Ao)"})]}),e.jsx("p",{className:"text-2xl font-bold text-green-800 mt-2",children:h?.completed_this_year||0})]}),e.jsxs("div",{className:"p-4 bg-purple-50 rounded-lg border border-purple-100",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Sm,{className:"w-5 h-5 text-purple-600"}),e.jsx("span",{className:"text-sm text-purple-700",children:"Tiempo promedio"})]}),e.jsx("p",{className:"text-2xl font-bold text-purple-800 mt-2",children:h?.average_processing_days?`${h.average_processing_days.toFixed(1)} dias`:"N/A"})]})]})})]})]}),e.jsxs(we,{children:[e.jsx(Vt,{children:e.jsxs(Qt,{className:"flex items-center gap-2",children:[e.jsx(ni,{className:"w-5 h-5 text-gray-600"}),"Distribucion por Departamento"]})}),e.jsx(Ce,{children:e.jsx(b4,{data:c?.by_department})})]})]})}function Yg({employee:s,employees:r,expanded:i,onToggle:c,level:u=0}){const h=r.filter(f=>f.supervisor_id===s.id),x=h.length>0,m=i[s.id]!==!1,p=f=>{if(!f||f.length===0)return null;const v=f[0],E={admin:{bg:"bg-purple-100",text:"text-purple-700",label:"Admin"},hr:{bg:"bg-emerald-100",text:"text-emerald-700",label:"RRHH"},hr_manager:{bg:"bg-green-100",text:"text-green-700",label:"Gerente RRHH"},legal:{bg:"bg-orange-100",text:"text-orange-700",label:"Legal"},manager:{bg:"bg-blue-100",text:"text-blue-700",label:"Gerente"},employee:{bg:"bg-gray-100",text:"text-gray-700",label:"Empleado"},viewer:{bg:"bg-slate-100",text:"text-slate-600",label:"Visitante"}},S=E[v]||E.employee;return e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${S.bg} ${S.text}`,children:S.label})},g=f=>{switch(f){case"active":return"bg-green-500";case"inactive":return"bg-gray-400";case"on_leave":return"bg-yellow-500";default:return"bg-gray-400"}};return e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("div",{className:`
          relative bg-white rounded-xl border-2 shadow-sm hover:shadow-md transition-all
          ${u===0?"border-primary-400 bg-primary-50/30":"border-gray-200 hover:border-primary-300"}
          ${x?"cursor-pointer":""}
        `,onClick:()=>x&&c(s.id),style:{minWidth:"200px",maxWidth:"240px"},children:[e.jsx("div",{className:`absolute top-3 right-3 w-2.5 h-2.5 rounded-full ${g(s.employment_status)}`,title:s.employment_status==="active"?"Activo":s.employment_status}),e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"flex justify-center mb-3",children:e.jsxs("div",{className:`w-14 h-14 rounded-full flex items-center justify-center text-lg font-semibold
              ${u===0?"bg-primary-100 text-primary-700":"bg-gray-100 text-gray-600"}`,children:[s.first_name?.[0],s.last_name?.[0]]})}),e.jsx("h3",{className:"text-sm font-semibold text-gray-900 text-center truncate",children:s.full_name||`${s.first_name} ${s.last_name}`}),e.jsx("p",{className:"text-xs text-gray-500 text-center truncate mt-1",children:s.job_title||"Sin cargo"}),e.jsxs("div",{className:"flex items-center justify-center gap-2 mt-2 flex-wrap",children:[s.department&&e.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-blue-50 text-blue-600",children:s.department_label||s.department}),p(s.roles)]}),x&&e.jsxs("div",{className:"flex items-center justify-center gap-1 mt-3 text-xs text-gray-500",children:[e.jsx(ht,{className:"w-3.5 h-3.5"}),e.jsxs("span",{children:[h.length," colaborador",h.length!==1?"es":""]}),m?e.jsx(Gn,{className:"w-3.5 h-3.5"}):e.jsx(ys,{className:"w-3.5 h-3.5"})]})]})]}),x&&m&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-0.5 h-6 bg-gray-300"}),h.length>1&&e.jsx("div",{className:"relative w-full flex justify-center",children:e.jsx("div",{className:"h-0.5 bg-gray-300",style:{width:`${Math.min(h.length*220,880)}px`,maxWidth:"100%"}})}),e.jsx("div",{className:"flex flex-wrap justify-center gap-4 pt-2",children:h.map(f=>e.jsxs("div",{className:"flex flex-col items-center",children:[h.length>1&&e.jsx("div",{className:"w-0.5 h-4 bg-gray-300"}),e.jsx(Yg,{employee:f,employees:r,expanded:i,onToggle:c,level:u+1})]},f.id))})]})]})}function Rc({icon:s,label:r,value:i,color:c}){return e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${c}`,children:e.jsx(s,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i}),e.jsx("p",{className:"text-sm text-gray-500",children:r})]})]})})}function j4(){const[s,r]=b.useState({}),[i,c]=b.useState(""),[u,h]=b.useState(100),{data:x,isLoading:m,error:p}=ke({queryKey:["employees-orgchart"],queryFn:()=>Ol.list({per_page:500})}),g=x?.data?.data||[],f=new Set(g.map(_=>_.id)),v=g.filter(_=>!_.supervisor_id||!f.has(_.supervisor_id)),E=i?g.filter(_=>_.full_name?.toLowerCase().includes(i.toLowerCase())||_.first_name?.toLowerCase().includes(i.toLowerCase())||_.last_name?.toLowerCase().includes(i.toLowerCase())||_.job_title?.toLowerCase().includes(i.toLowerCase())||_.department?.toLowerCase().includes(i.toLowerCase())):g,S=_=>{r(N=>({...N,[_]:N[_]===!1}))},w=()=>{const _={};g.forEach(N=>{_[N.id]=!0}),r(_)},C=()=>{const _={};g.forEach(N=>{_[N.id]=!1}),r(_)},j={total:g.length,active:g.filter(_=>_.employment_status==="active").length,departments:[...new Set(g.map(_=>_.department).filter(Boolean))].length,conEquipo:g.filter(_=>g.some(N=>N.supervisor_id===_.id)).length};return m?e.jsx("div",{className:"flex items-center justify-center py-24",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):p?e.jsxs("div",{className:"bg-red-50 text-red-700 p-4 rounded-lg",children:["Error al cargar el organigrama: ",p.message]}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-primary-100 rounded-lg",children:e.jsx(Ut,{className:"w-6 h-6 text-primary-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Organigrama"}),e.jsx("p",{className:"text-gray-500",children:"Estructura organizacional de la empresa"})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(Rc,{icon:ht,label:"Total Empleados",value:j.total,color:"bg-blue-100 text-blue-600"}),e.jsx(Rc,{icon:ka,label:"Activos",value:j.active,color:"bg-green-100 text-green-600"}),e.jsx(Rc,{icon:Ut,label:"Departamentos",value:j.departments,color:"bg-purple-100 text-purple-600"}),e.jsx(Rc,{icon:Ta,label:"Con Colaboradores",value:j.conEquipo,color:"bg-amber-100 text-amber-600"})]}),e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[e.jsx(ra,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar empleado...",value:i,onChange:_=>c(_.target.value),className:"w-full pl-9 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),e.jsxs("div",{className:"flex items-center gap-2 border border-gray-300 rounded-lg px-2",children:[e.jsx("button",{onClick:()=>h(_=>Math.max(50,_-10)),className:"p-1.5 hover:bg-gray-100 rounded",title:"Reducir",children:e.jsx(_w,{className:"w-4 h-4 text-gray-600"})}),e.jsxs("span",{className:"text-sm text-gray-600 w-12 text-center",children:[u,"%"]}),e.jsx("button",{onClick:()=>h(_=>Math.min(150,_+10)),className:"p-1.5 hover:bg-gray-100 rounded",title:"Ampliar",children:e.jsx(jw,{className:"w-4 h-4 text-gray-600"})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:w,className:"px-3 py-2 text-sm border border-gray-300 rounded-lg hover:bg-gray-50",children:"Expandir Todo"}),e.jsx("button",{onClick:C,className:"px-3 py-2 text-sm border border-gray-300 rounded-lg hover:bg-gray-50",children:"Colapsar Todo"})]})]})}),i&&e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:[e.jsxs("h3",{className:"font-medium text-gray-900 mb-3",children:["Resultados de bsqueda (",E.length,")"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:E.map(_=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"w-10 h-10 rounded-full bg-primary-100 text-primary-700 flex items-center justify-center font-medium",children:[_.first_name?.[0],_.last_name?.[0]]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-gray-900 truncate",children:_.full_name}),e.jsx("p",{className:"text-sm text-gray-500 truncate",children:_.job_title})]})]},_.id))})]}),e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-6 overflow-auto",children:e.jsx("div",{className:"min-w-max flex justify-center",style:{transform:`scale(${u/100})`,transformOrigin:"top center"},children:v.length>0?e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[v.length>1&&e.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:[v.length," lderes principales"]}),e.jsx("div",{className:"flex flex-wrap justify-center gap-8",children:v.map(_=>e.jsx(Yg,{employee:_,employees:g,expanded:s,onToggle:S,level:0},_.id))})]}):e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(ht,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"No hay empleados registrados"})]})})})]})}const Un={draft:{label:"Borrador",color:"bg-gray-100 text-gray-700",icon:Oe},pending_signatures:{label:"Pendiente de firmas",color:"bg-amber-100 text-amber-700",icon:yt},completed:{label:"Completado",color:"bg-green-100 text-green-700",icon:Be},cancelled:{label:"Cancelado",color:"bg-red-100 text-red-700",icon:Ma}},Oc={contract:"Contrato",employee_contract:"Contrato Laboral",certification:"Certificacion",vacation:"Vacaciones",employee:"Empleado",other:"Otro"},O0={contract:"bg-blue-100 text-blue-700",employee_contract:"bg-indigo-100 text-indigo-700",certification:"bg-purple-100 text-purple-700",vacation:"bg-green-100 text-green-700",employee:"bg-orange-100 text-orange-700",other:"bg-gray-100 text-gray-700"},sm={employee:"Empleado",organization:"Organizacin",request:"Solicitud",system:"Sistema",custom:"Personalizado"},N4=["employee","organization","request","system","custom"],Xg=[{value:"string",label:"Texto"},{value:"date",label:"Fecha"},{value:"number",label:"Nmero"},{value:"boolean",label:"Si/No"},{value:"email",label:"Email"}],_4=[{value:"",label:"Sin formato",example:"1234567"},{value:"currency_cop",label:"Moneda (COP)",example:"$1.234.567"},{value:"currency_usd",label:"Moneda (USD)",example:"$1,234.56"},{value:"date_short",label:"Fecha corta",example:"15/01/2024"},{value:"date_long",label:"Fecha larga",example:"15 de enero de 2024"},{value:"text_upper",label:"Maysculas",example:"JUAN PREZ"},{value:"text_title",label:"Ttulo",example:"Juan Prez"}];function w4({mapping:s,isOpen:r,onClose:i,onSuccess:c}){const u=et(),h=!!s,[x,m]=b.useState({name:"",key:"",category:"custom",description:"",data_type:"string",format_pattern:"",source_model:"",source_field:""}),[p,g]=b.useState("");b.useEffect(()=>{m(s?{name:s.name||"",key:s.key||"",category:s.category||"custom",description:s.description||"",data_type:s.data_type||"string",format_pattern:s.format_pattern||"",source_model:s.source_model||"",source_field:s.source_field||""}:{name:"",key:"",category:"custom",description:"",data_type:"string",format_pattern:"",source_model:"",source_field:""}),g("")},[s,r]);const f=Ne({mutationFn:S=>Ya.create(S),onSuccess:()=>{u.invalidateQueries(["variable-mappings"]),c?.(),i()},onError:S=>{g(S.response?.data?.error||"Error al crear mapeo")}}),v=Ne({mutationFn:S=>Ya.update(s.id,S),onSuccess:()=>{u.invalidateQueries(["variable-mappings"]),c?.(),i()},onError:S=>{g(S.response?.data?.error||"Error al actualizar mapeo")}}),E=S=>{if(S.preventDefault(),g(""),!x.name.trim()){g("El nombre es requerido");return}if(h){const{key:w,...C}=x;v.mutate(C)}else f.mutate(x)};return r?e.jsx(Qe,{isOpen:r,onClose:i,title:h?"Editar Variable":"Nueva Variable",size:"lg",children:e.jsxs("form",{onSubmit:E,className:"space-y-4",children:[p&&e.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-700",children:[e.jsx(st,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:p})]}),e.jsx(ue,{label:"Nombre",value:x.name,onChange:S=>m({...x,name:S.target.value}),placeholder:"Ej: Salario Mensual",required:!0}),!h&&e.jsx(ue,{label:"Clave",value:x.key,onChange:S=>m({...x,key:S.target.value}),placeholder:"Ej: custom.salario_mensual"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Categora"}),e.jsx("select",{value:x.category,onChange:S=>m({...x,category:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:Object.entries(sm).map(([S,w])=>e.jsx("option",{value:S,children:w},S))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Dato"}),e.jsx("select",{value:x.data_type,onChange:S=>m({...x,data_type:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:Xg.map(S=>e.jsx("option",{value:S.value,children:S.label},S.value))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripcin"}),e.jsx("textarea",{value:x.description,onChange:S=>m({...x,description:S.target.value}),placeholder:"Descripcin de la variable...",rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Formato"}),e.jsx("select",{value:x.format_pattern||"",onChange:S=>m({...x,format_pattern:S.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:_4.map(S=>e.jsxs("option",{value:S.value,children:[S.label," ",S.example&&`(${S.example})`]},S.value))})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx(L,{type:"button",variant:"secondary",onClick:i,children:"Cancelar"}),e.jsxs(L,{type:"submit",loading:f.isPending||v.isPending,children:[e.jsx($s,{className:"w-4 h-4"}),h?"Guardar":"Crear"]})]})]})}):null}function C4({isOpen:s,onClose:r}){const{isAdmin:i}=Ra(),c=et(),[u,h]=b.useState(!1),[x,m]=b.useState(null),[p,g]=b.useState(""),[f,v]=b.useState(""),{data:E,isLoading:S}=ke({queryKey:["variable-mappings"],queryFn:()=>Ya.list(),enabled:s}),w=Ne({mutationFn:A=>Ya.toggleActive(A),onSuccess:()=>c.invalidateQueries(["variable-mappings"])}),C=Ne({mutationFn:A=>Ya.delete(A),onSuccess:()=>c.invalidateQueries(["variable-mappings"])}),j=Ne({mutationFn:()=>Ya.seedSystem(),onSuccess:()=>c.invalidateQueries(["variable-mappings"])}),_=A=>{m(A),h(!0)},N=A=>{confirm(`Eliminar "${A.name}"?`)&&C.mutate(A.id)},k=(E?.data?.data||[]).filter(A=>N4.includes(A.category)),U=k.filter(A=>{if(p){const T=p.toLowerCase();if(!A.name.toLowerCase().includes(T)&&!A.key.toLowerCase().includes(T))return!1}return!(f&&A.category!==f)});return s?e.jsxs(Qe,{isOpen:s,onClose:r,title:"Variables de HR",size:"full",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsxs("div",{className:"relative flex-1 max-w-xs",children:[e.jsx(ra,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar variables...",value:p,onChange:A=>g(A.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("select",{value:f,onChange:A=>v(A.target.value),className:"px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"Todas las categoras"}),Object.entries(sm).map(([A,T])=>e.jsx("option",{value:A,children:T},A))]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(L,{variant:"secondary",size:"sm",onClick:()=>j.mutate(),loading:j.isPending,children:[e.jsx(em,{className:"w-4 h-4"}),"Inicializar"]}),e.jsxs(L,{size:"sm",onClick:()=>{m(null),h(!0)},children:[e.jsx(Ke,{className:"w-4 h-4"}),"Nueva Variable"]})]})]}),e.jsx("div",{className:"border rounded-lg overflow-hidden max-h-[60vh] overflow-y-auto",children:S?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500"})}):U.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(pi,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay variables"}),e.jsx("p",{className:"text-gray-500 mb-4",children:k.length===0?"Inicializa las variables del sistema":"No se encontraron variables con los filtros aplicados"})]}):e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b sticky top-0",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Clave"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Nombre"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Categora"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tipo"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Estado"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Acciones"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:U.map(A=>e.jsxs("tr",{className:`${A.active?"":"opacity-50 bg-gray-50"}`,children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx("code",{className:"px-2 py-1 bg-gray-100 rounded text-xs font-medium",children:A.key})}),e.jsxs("td",{className:"px-4 py-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[A.is_system&&e.jsx(Xl,{className:"w-3 h-3 text-gray-400"}),e.jsx("span",{className:"font-medium text-sm",children:A.name})]}),A.description&&e.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:A.description})]}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(qe,{variant:"secondary",className:"text-xs",children:sm[A.category]||A.category})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"text-sm text-gray-600",children:Xg.find(T=>T.value===A.data_type)?.label||A.data_type})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("button",{onClick:()=>w.mutate(A.id),className:`p-1 rounded ${A.active?"text-green-600":"text-gray-400"}`,children:A.active?e.jsx(co,{className:"w-5 h-5"}):e.jsx(io,{className:"w-5 h-5"})})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>_(A),className:"p-1.5 hover:bg-gray-100 rounded text-gray-600",children:e.jsx(ns,{className:"w-4 h-4"})}),(i||!A.is_system)&&e.jsx("button",{onClick:()=>N(A),className:"p-1.5 hover:bg-red-50 rounded text-red-500",children:e.jsx(Nt,{className:"w-4 h-4"})})]})})]},A.id))})]})}),e.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[e.jsxs("span",{className:"text-sm text-gray-500",children:[U.length," de ",k.length," variables"]}),e.jsx(L,{variant:"secondary",onClick:r,children:"Cerrar"})]})]}),e.jsx(w4,{mapping:x,isOpen:u,onClose:()=>{h(!1),m(null)}})]}):null}function S4(){const{isAdmin:s,isHR:r}=Ra(),i=et(),c=Aa(),[u,h]=b.useState(1),[x,m]=b.useState(null),[p,g]=b.useState(!1),[f,v]=b.useState(!1),[E,S]=b.useState(!1),[w,C]=b.useState(null),[j,_]=b.useState(null),[N,z]=b.useState(null),[k,U]=b.useState(!1),[A,T]=b.useState(!1),[O,ee]=b.useState(null),[B,ye]=b.useState(!1),[F,te]=b.useState(null),[je,xe]=b.useState(!1),[$,pe]=b.useState(""),[G,Y]=b.useState(""),[me,M]=b.useState(""),[V,ae]=b.useState("created_at"),[W,R]=b.useState("desc"),{data:X,isLoading:ge,isError:Q}=ke({queryKey:["hr-documents",u,G,me,$],queryFn:()=>Yt.list({page:u,per_page:20,module:"hr",status:G||void 0,category:me||void 0,q:$||void 0})}),{data:ie}=ke({queryKey:["signatures"],queryFn:()=>Hn.list()}),_e=()=>(ie?.data?.data||[]).some(se=>se.active),ze=Ne({mutationFn:oe=>Yt.delete(oe),onSuccess:()=>{i.invalidateQueries(["hr-documents"]),v(!1),C(null),g(!1),m(null)},onError:oe=>{alert(oe.response?.data?.error||"Error al eliminar el documento")}}),$e=Ne({mutationFn:oe=>Yt.sign(oe),onSuccess:()=>{i.invalidateQueries(["hr-documents"]),x&&Yt.get(x.id).then(oe=>{m(oe.data.data)}),va(),alert("Documento firmado exitosamente")},onError:oe=>{alert(oe.response?.data?.error||"Error al firmar el documento")}}),ne=X?.data?.data||[],Te=X?.data?.meta||{},tt=Te.total_pages||1,lt=[...ne].sort((oe,se)=>{let Ee,Ae;switch(V){case"employee_name":Ee=(oe.employee_name||oe.requested_by||"").toLowerCase(),Ae=(se.employee_name||se.requested_by||"").toLowerCase();break;case"template_name":Ee=(oe.template_name||"").toLowerCase(),Ae=(se.template_name||"").toLowerCase();break;case"template_category":Ee=Oc[oe.template_category]||oe.template_category||"",Ae=Oc[se.template_category]||se.template_category||"";break;case"status":Ee=Un[oe.status]?.label||oe.status||"",Ae=Un[se.status]?.label||se.status||"";break;case"created_at":default:Ee=oe.created_at?new Date(oe.created_at).getTime():0,Ae=se.created_at?new Date(se.created_at).getTime():0}return Ee<Ae?W==="asc"?-1:1:Ee>Ae?W==="asc"?1:-1:0}),Et=oe=>{V===oe?R(se=>se==="asc"?"desc":"asc"):(ae(oe),R("asc"))},os=()=>{pe(""),Y(""),M(""),h(1)},ia=$||G||me,Ft=({column:oe})=>V!==oe?e.jsx(to,{className:"w-3 h-3 text-gray-400"}):W==="asc"?e.jsx(ao,{className:"w-3 h-3 text-primary-600"}):e.jsx(li,{className:"w-3 h-3 text-primary-600"}),bs=async oe=>{try{const se=await Yt.get(oe.id);m(se.data.data),g(!0)}catch(se){console.error("Error loading document details:",se),m(oe),g(!0)}},Ja=oe=>{C(oe),v(!0)},xt=()=>{w&&ze.mutate(w.id)},_t=async oe=>{if(!oe.user_has_digital_signature&&!_e()){T(!0);return}if(!oe.can_sign&&oe.has_pending_signature){const se=oe.signatures?.find(Ee=>Ee.status==="pending"&&Ee.waiting_for?.length>0);if(se?.waiting_for?.length>0){alert(`Debes esperar las firmas de: ${se.waiting_for.join(", ")}`);return}}ee(oe),ye(!0),xe(!0);try{const se=await Yt.download(oe.id),Ee=new Blob([se.data],{type:"application/pdf"}),Ae=window.URL.createObjectURL(Ee);te(Ae)}catch(se){console.error("Error loading preview:",se)}finally{xe(!1)}},ds=()=>{O&&$e.mutate(O.id)},va=()=>{F&&window.URL.revokeObjectURL(F),ye(!1),ee(null),te(null)},be=async oe=>{try{_(oe.id);const se=await Yt.download(oe.id),Ee=new Blob([se.data],{type:"application/pdf"}),Ae=window.URL.createObjectURL(Ee),ct=window.document.createElement("a");ct.href=Ae,ct.download=oe.file_name||`${oe.name}.pdf`,window.document.body.appendChild(ct),ct.click(),window.document.body.removeChild(ct),window.URL.revokeObjectURL(Ae)}catch(se){alert("Error al descargar el documento"),console.error("Download error:",se)}finally{_(null)}},ta=async oe=>{try{z(oe),U(!0);const se=await Yt.download(oe.id),Ee=new Blob([se.data],{type:"application/pdf"}),Ae=window.URL.createObjectURL(Ee);z({...oe,blobUrl:Ae})}catch(se){console.error("Preview error:",se),alert("Error al cargar la vista previa"),U(!1),z(null)}},vs=oe=>oe?new Date(oe).toLocaleDateString("es-CO",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-",Ia={total:ne.length,pending:ne.filter(oe=>oe.status==="pending_signatures").length,completed:ne.filter(oe=>oe.status==="completed").length,draft:ne.filter(oe=>oe.status==="draft").length};return ge?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Documentacion HR"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Documentos generados por Recursos Humanos"})]})}),e.jsx(we,{children:e.jsx(Ce,{className:"p-8",children:e.jsx("div",{className:"animate-pulse space-y-4",children:[1,2,3,4,5].map(oe=>e.jsx("div",{className:"h-16 bg-gray-200 rounded"},oe))})})})]}):Q?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Documentacion HR"})}),e.jsx(we,{children:e.jsxs(Ce,{className:"p-8 text-center",children:[e.jsx(st,{className:"w-12 h-12 text-red-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Error al cargar los documentos"})]})})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Documentacion HR"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Documentos generados por Recursos Humanos"})]}),(s||r)&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(L,{variant:"secondary",onClick:()=>c("/admin/templates/hr"),children:[e.jsx(Oe,{className:"w-4 h-4"}),"Templates"]}),e.jsxs(L,{variant:"secondary",onClick:()=>S(!0),children:[e.jsx(pi,{className:"w-4 h-4"}),"Variables"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(we,{children:e.jsx(Ce,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(Oe,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Te.total_count||Ia.total}),e.jsx("p",{className:"text-sm text-gray-500",children:"Total documentos"})]})]})})}),e.jsx(we,{children:e.jsx(Ce,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-amber-100 rounded-lg",children:e.jsx(yt,{className:"w-5 h-5 text-amber-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Ia.pending}),e.jsx("p",{className:"text-sm text-gray-500",children:"Pendientes de firma"})]})]})})}),e.jsx(we,{children:e.jsx(Ce,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(Be,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Ia.completed}),e.jsx("p",{className:"text-sm text-gray-500",children:"Completados"})]})]})})}),e.jsx(we,{children:e.jsx(Ce,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gray-100 rounded-lg",children:e.jsx(Xt,{className:"w-5 h-5 text-gray-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Ia.draft}),e.jsx("p",{className:"text-sm text-gray-500",children:"Borradores"})]})]})})})]}),e.jsx(we,{children:e.jsxs(Ce,{className:"py-4",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsx("div",{className:"flex-1 min-w-[200px]",children:e.jsxs("div",{className:"relative",children:[e.jsx(ra,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar por empleado, documento...",value:$,onChange:oe=>{pe(oe.target.value),h(1)},className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"})]})}),e.jsxs("select",{value:G,onChange:oe=>{Y(oe.target.value),h(1)},className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"Todos los estados"}),e.jsx("option",{value:"draft",children:"Borrador"}),e.jsx("option",{value:"pending_signatures",children:"Pendiente de firmas"}),e.jsx("option",{value:"completed",children:"Completado"}),e.jsx("option",{value:"cancelled",children:"Cancelado"})]}),e.jsxs("select",{value:me,onChange:oe=>{M(oe.target.value),h(1)},className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"Tipo de documento"}),e.jsx("option",{value:"employee_contract",children:"Contrato Laboral"}),e.jsx("option",{value:"certification",children:"Certificacion"}),e.jsx("option",{value:"vacation",children:"Vacaciones"}),e.jsx("option",{value:"employee",children:"Empleado"})]}),ia&&e.jsxs("button",{onClick:os,className:"px-3 py-2 text-sm text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg flex items-center gap-1",children:[e.jsx(vt,{className:"w-4 h-4"}),"Limpiar"]})]}),!ge&&e.jsxs("div",{className:"mt-3 text-sm text-gray-500",children:["Mostrando ",e.jsx("strong",{children:lt.length})," de ",e.jsx("strong",{children:Te.total_count||0})," documentos"]})]})}),e.jsx(we,{children:e.jsx(Ce,{className:"p-0",children:lt.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(Hc,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay documentos"}),e.jsx("p",{className:"text-gray-500",children:ia?"No se encontraron documentos con los filtros aplicados":"Los documentos generados por HR apareceran aqui"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{onClick:()=>Et("employee_name"),className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100 select-none",children:e.jsxs("div",{className:"flex items-center gap-1",children:["Empleado",e.jsx(Ft,{column:"employee_name"})]})}),e.jsx("th",{onClick:()=>Et("template_name"),className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100 select-none",children:e.jsxs("div",{className:"flex items-center gap-1",children:["Documento",e.jsx(Ft,{column:"template_name"})]})}),e.jsx("th",{onClick:()=>Et("template_category"),className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100 select-none",children:e.jsxs("div",{className:"flex items-center gap-1",children:["Tipo",e.jsx(Ft,{column:"template_category"})]})}),e.jsx("th",{onClick:()=>Et("created_at"),className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100 select-none",children:e.jsxs("div",{className:"flex items-center gap-1",children:["Fecha",e.jsx(Ft,{column:"created_at"})]})}),e.jsx("th",{onClick:()=>Et("status"),className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100 select-none",children:e.jsxs("div",{className:"flex items-center gap-1",children:["Estado",e.jsx(Ft,{column:"status"})]})}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Acciones"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:lt.map(oe=>{const se=Un[oe.status]||Un.draft,Ee=se.icon,Ae=O0[oe.template_category]||O0.other;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(ka,{className:"w-4 h-4 text-primary-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 text-sm",children:oe.employee_name||oe.requested_by||"-"}),oe.employee_number&&e.jsx("p",{className:"text-xs text-gray-500",children:oe.employee_number})]})]})}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-900",children:oe.name}),oe.template_name&&e.jsx("p",{className:"text-xs text-gray-500",children:oe.template_name})]})]})}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded text-xs font-medium ${Ae}`,children:[e.jsx(Ta,{className:"w-3 h-3"}),Oc[oe.template_category]||oe.template_category||"Otro"]})}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-600",children:vs(oe.created_at)}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium ${se.color}`,children:[e.jsx(Ee,{className:"w-3.5 h-3.5"}),se.label]})}),e.jsx("td",{className:"px-4 py-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[e.jsx(L,{variant:"ghost",size:"sm",onClick:()=>ta(oe),title:"Previsualizar",children:e.jsx(Hc,{className:"w-4 h-4"})}),e.jsx(L,{variant:"ghost",size:"sm",onClick:()=>bs(oe),title:"Ver detalles",children:e.jsx(At,{className:"w-4 h-4"})}),e.jsx(L,{variant:"ghost",size:"sm",onClick:()=>be(oe),loading:j===oe.id,title:"Descargar PDF",children:e.jsx(ba,{className:"w-4 h-4"})}),(oe.can_sign||oe.has_pending_signature)&&e.jsx(L,{variant:"ghost",size:"sm",onClick:()=>_t(oe),loading:$e.isPending,title:"Firmar documento",className:"text-primary-600 hover:text-primary-700 hover:bg-primary-50",children:e.jsx(yt,{className:"w-4 h-4"})}),(s||r)&&e.jsx(L,{variant:"ghost",size:"sm",onClick:()=>Ja(oe),title:"Eliminar documento",className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:e.jsx(Nt,{className:"w-4 h-4"})})]})})]},oe.id)})})]})})})}),tt>1&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-gray-500",children:["Pagina ",u," de ",tt," (",Te.total_count," documentos)"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(L,{variant:"secondary",size:"sm",onClick:()=>h(oe=>Math.max(1,oe-1)),disabled:u===1,children:[e.jsx(jm,{className:"w-4 h-4"}),"Anterior"]}),e.jsxs(L,{variant:"secondary",size:"sm",onClick:()=>h(oe=>Math.min(tt,oe+1)),disabled:u===tt,children:["Siguiente",e.jsx(ys,{className:"w-4 h-4"})]})]})]}),e.jsx(Qe,{isOpen:p,onClose:()=>g(!1),title:"Detalle del Documento",size:"lg",children:x&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-lg flex items-center justify-center",children:e.jsx(Oe,{className:"w-6 h-6 text-primary-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:x.name}),x.template_name&&e.jsxs("p",{className:"text-sm text-gray-500",children:["Template: ",x.template_name]})]})]}),e.jsx("span",{className:`inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm font-medium ${Un[x.status]?.color||"bg-gray-100 text-gray-700"}`,children:Un[x.status]?.label||x.status})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Empleado"}),e.jsx("p",{className:"text-sm font-medium",children:x.employee_name||"-"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Creado"}),e.jsx("p",{className:"text-sm font-medium",children:vs(x.created_at)})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Tipo"}),e.jsx("p",{className:"text-sm font-medium",children:Oc[x.template_category]||x.template_category||"Otro"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Solicitado por"}),e.jsx("p",{className:"text-sm font-medium",children:x.requested_by||"-"})]})]}),x.signatures&&x.signatures.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Firmas"}),x.sequential_signing&&e.jsxs("span",{className:"text-xs text-gray-500 flex items-center gap-1",children:[e.jsx(li,{className:"w-3 h-3"}),"Firma secuencial"]})]}),e.jsx("div",{className:"space-y-2",children:x.signatures.map((oe,se)=>e.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg ${oe.status==="signed"?"bg-green-50":oe.can_sign_now===!1?"bg-gray-100 opacity-60":"bg-amber-50"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"w-5 h-5 rounded-full bg-gray-200 text-gray-600 text-xs flex items-center justify-center font-medium",children:se+1}),e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${oe.status==="signed"?"bg-green-100":oe.can_sign_now===!1?"bg-gray-200":"bg-amber-100"}`,children:oe.status==="signed"?e.jsx(Be,{className:"w-4 h-4 text-green-600"}):oe.can_sign_now===!1?e.jsx(Xl,{className:"w-4 h-4 text-gray-400"}):e.jsx(Xt,{className:"w-4 h-4 text-amber-600"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:oe.signatory_label}),e.jsx("p",{className:"text-xs text-gray-500",children:oe.status==="signed"?`Firmado por ${oe.signed_by_name} - ${vs(oe.signed_at)}`:oe.can_sign_now===!1&&oe.waiting_for?.length>0?`Esperando: ${oe.waiting_for.join(", ")}`:oe.user_name||"Pendiente"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[oe.required&&e.jsx(qe,{variant:"secondary",size:"sm",children:"Requerida"}),oe.status!=="signed"&&oe.can_sign_now===!1&&e.jsx(qe,{variant:"secondary",size:"sm",className:"bg-gray-200 text-gray-600",children:"Bloqueada"})]})]},se))}),e.jsxs("div",{className:"mt-3 text-sm text-gray-600",children:["Progreso: ",x.completed_signatures_count||0," de ",x.total_required_signatures||0," firmas",x.next_signatory&&e.jsxs("span",{className:"ml-2 text-primary-600",children:[" Siguiente: ",x.next_signatory]})]})]}),e.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[e.jsxs("div",{className:"flex gap-2",children:[(s||r)&&e.jsxs(L,{variant:"danger",onClick:()=>Ja(x),children:[e.jsx(Nt,{className:"w-4 h-4"}),"Eliminar"]}),(x.can_sign||x.has_pending_signature)&&e.jsxs(L,{variant:"primary",onClick:()=>_t(x),loading:$e.isPending,children:[e.jsx(yt,{className:"w-4 h-4"}),"Firmar"]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(L,{variant:"secondary",onClick:()=>g(!1),children:"Cerrar"}),x.can_download&&e.jsxs(e.Fragment,{children:[e.jsxs(L,{variant:"secondary",onClick:()=>{g(!1),ta(x)},children:[e.jsx(Hc,{className:"w-4 h-4"}),"Previsualizar"]}),e.jsxs(L,{onClick:()=>be(x),loading:j===x.id,children:[e.jsx(ba,{className:"w-4 h-4"}),"Descargar PDF"]})]})]})]})]})}),e.jsx(Qe,{isOpen:f,onClose:()=>{v(!1),C(null)},title:"Confirmar eliminacion",size:"sm",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-red-50 rounded-lg",children:[e.jsx(Nt,{className:"w-8 h-8 text-red-500 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-700",children:"Esta seguro que desea eliminar el documento:"}),e.jsx("p",{className:"font-medium text-gray-900 mt-1",children:w?.name})]})]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Esta accion no se puede deshacer. El archivo PDF sera eliminado permanentemente."}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx(L,{variant:"secondary",onClick:()=>{v(!1),C(null)},children:"Cancelar"}),e.jsxs(L,{variant:"danger",onClick:xt,loading:ze.isPending,children:[e.jsx(Nt,{className:"w-4 h-4"}),"Eliminar"]})]})]})}),e.jsx(C4,{isOpen:E,onClose:()=>S(!1)}),e.jsx(Qe,{isOpen:k,onClose:()=>{N?.blobUrl&&window.URL.revokeObjectURL(N.blobUrl),U(!1),z(null)},title:N?.name||"Previsualizacin",size:"full",children:N&&e.jsxs("div",{className:"h-[calc(100vh-200px)]",children:[N.blobUrl?e.jsx("iframe",{src:N.blobUrl,className:"w-full h-full border-0 rounded-lg",title:"Vista previa del documento"}):e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500"})}),e.jsxs("div",{className:"flex justify-between items-center mt-4 pt-4 border-t",children:[e.jsx("div",{className:"text-sm text-gray-500",children:N.template_name&&e.jsxs("span",{children:["Template: ",N.template_name]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(L,{variant:"secondary",onClick:()=>{U(!1),z(null)},children:"Cerrar"}),e.jsxs(L,{onClick:()=>be(N),loading:j===N.id,children:[e.jsx(ba,{className:"w-4 h-4"}),"Descargar PDF"]})]})]})]})}),e.jsx(Qe,{isOpen:A,onClose:()=>T(!1),title:"Firma Digital Requerida",size:"sm",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-amber-50 rounded-lg",children:[e.jsx(rs,{className:"w-8 h-8 text-amber-500 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:"No tienes una firma digital configurada"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Para firmar documentos necesitas crear tu firma digital primero."})]})]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Ve a tu perfil para crear tu firma digital. Puedes dibujarla o usar una firma estilizada con tu nombre."}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx(L,{variant:"secondary",onClick:()=>T(!1),children:"Cancelar"}),e.jsxs(L,{onClick:()=>{T(!1),c("/profile")},children:[e.jsx(yt,{className:"w-4 h-4"}),"Ir a Crear Firma"]})]})]})}),e.jsx(Qe,{isOpen:B,onClose:va,title:"Confirmar Firma",size:"full",children:O&&e.jsxs("div",{className:"flex flex-col h-[calc(100vh-200px)]",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 pb-4 border-b",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:O.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[O.template_name,"  ",O.employee_name]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Be,{className:"w-5 h-5 text-green-500"}),e.jsx("span",{className:"text-sm text-green-700 font-medium",children:"Listo para firmar"})]})]}),e.jsx("div",{className:"flex-1 bg-gray-100 rounded-lg overflow-hidden",children:je?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Cargando documento..."})]})}):F?e.jsx("iframe",{src:F,className:"w-full h-full border-0",title:"Vista previa del documento a firmar"}):e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("p",{className:"text-gray-500",children:"No se pudo cargar la vista previa"})})}),e.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Al firmar, aceptas el contenido de este documento con tu firma digital."}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(L,{variant:"secondary",onClick:va,children:"Cancelar"}),e.jsxs(L,{onClick:ds,loading:$e.isPending,className:"bg-green-600 hover:bg-green-700",children:[e.jsx(yt,{className:"w-4 h-4"}),"Confirmar y Firmar"]})]})]})]})})]})}const z0={draft:{label:"Borrador",color:"bg-gray-100 text-gray-700"},active:{label:"Activo",color:"bg-green-100 text-green-700"},archived:{label:"Archivado",color:"bg-yellow-100 text-yellow-700"}},Kg=[{value:"",label:"Seleccionar tipo..."},{value:"employment",label:"Certificado de Empleo"},{value:"salary",label:"Certificado de Salario"},{value:"position",label:"Certificado de Cargo"},{value:"full",label:"Certificado Completo"},{value:"custom",label:"Certificado Personalizado"}];function E4({isOpen:s,onClose:r,onSuccess:i}){const c=et(),[u,h]=b.useState(""),[x,m]=b.useState(""),[p,g]=b.useState("hr"),[f,v]=b.useState("laboral"),[E,S]=b.useState("other"),[w,C]=b.useState(""),[j,_]=b.useState(""),{data:N}=ke({queryKey:["template-categories"],queryFn:()=>jt.getCategories()}),z=Ne({mutationFn:te=>jt.create({template:te}),onSuccess:te=>{c.invalidateQueries(["templates"]),i(te.data.data),k()},onError:te=>{_(te.response?.data?.error||"Error al crear template")}}),k=()=>{h(""),m(""),g("hr"),v("laboral"),S("other"),C(""),_(""),r()},U=te=>{if(te.preventDefault(),!u.trim()){_("El nombre es requerido");return}const je={name:u,description:x,module_type:p,main_category:f,category:E};E==="certification"&&w&&(je.certification_type=w),z.mutate(je)},A=N?.data?.modules||[],T=N?.data?.main_categories||[],O=N?.data?.category_to_module||{},ee=N?.data?.grouped||{},B=ee[f]||[],ye=te=>{g(te);const je=Object.entries(O).find(([xe,$])=>$===te);if(je){v(je[0]);const xe=ee[je[0]]||[];xe.length>0&&S(xe[0].value)}},F=te=>{v(te),O[te]&&g(O[te]);const je=ee[te]||[];je.length>0&&S(je[0].value)};return s?e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Nuevo Template"}),e.jsx("button",{onClick:k,className:"p-1 hover:bg-gray-100 rounded",children:e.jsx(vt,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:U,className:"p-4 space-y-4",children:[j&&e.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-700",children:[e.jsx(st,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:j})]}),e.jsx(ue,{label:"Nombre del Template",value:u,onChange:te=>h(te.target.value),placeholder:"Ej: Certificacion Laboral Estandar",required:!0}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mdulo"}),e.jsx("select",{value:p,onChange:te=>ye(te.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:A.map(te=>e.jsx("option",{value:te.value,children:te.label},te.value))}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Define a qu mdulo del sistema pertenece este template"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Categora"}),e.jsx("select",{value:f,onChange:te=>F(te.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:T.map(te=>e.jsx("option",{value:te.value,children:te.label},te.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subcategora"}),e.jsx("select",{value:E,onChange:te=>S(te.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:B.map(te=>e.jsx("option",{value:te.value,children:te.label},te.value))})]})]}),E==="certification"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Certificacin"}),e.jsx("select",{value:w,onChange:te=>C(te.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:Kg.map(te=>e.jsx("option",{value:te.value,children:te.label},te.value))}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Solo los tipos de certificacin con template aparecern en el selector de solicitudes"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripcion (opcional)"}),e.jsx("textarea",{value:x,onChange:te=>m(te.target.value),placeholder:"Descripcion del proposito del template...",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(L,{type:"button",variant:"secondary",onClick:k,children:"Cancelar"}),e.jsxs(L,{type:"submit",loading:z.isPending,children:[e.jsx(Ke,{className:"w-4 h-4"}),"Crear Template"]})]})]})]})}):null}function D4({isOpen:s,onClose:r,template:i}){const c=et(),[u,h]=b.useState(""),[x,m]=b.useState(""),[p,g]=b.useState("hr"),[f,v]=b.useState("laboral"),[E,S]=b.useState(""),[w,C]=b.useState(""),[j,_]=b.useState(""),{data:N}=ke({queryKey:["template-categories"],queryFn:()=>jt.getCategories()}),z=Ne({mutationFn:F=>jt.update(i?.id,{template:F}),onSuccess:()=>{c.invalidateQueries(["templates"]),r()},onError:F=>{_(F.response?.data?.error||"Error al actualizar template")}}),k=N?.data?.modules||[],U=N?.data?.grouped||{},A=N?.data?.main_categories||[],T=N?.data?.category_to_module||{},O=U[f]||[];b.useEffect(()=>{s&&i&&(h(i.name||""),m(i.description||""),g(i.module_type||"hr"),v(i.main_category||"laboral"),S(i.category||"other"),C(i.certification_type||""),_(""))},[s,i?.id]);const ee=F=>{g(F);const te=Object.entries(T).find(([je,xe])=>xe===F);if(te){v(te[0]);const je=U[te[0]]||[];je.length>0&&S(je[0].value)}},B=F=>{v(F),T[F]&&g(T[F]);const te=U[F]||[];te.length>0&&!te.find(je=>je.value===E)&&S(te[0].value)},ye=F=>{if(F.preventDefault(),!u.trim()){_("El nombre es requerido");return}const te={name:u,description:x,module_type:p,main_category:f,category:E};E==="certification"&&(te.certification_type=w||null),z.mutate(te)};return!s||!i?null:e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Editar Template"}),e.jsx("button",{onClick:r,className:"p-1 hover:bg-gray-100 rounded",children:e.jsx(vt,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:ye,className:"p-4 space-y-4",children:[j&&e.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-700",children:[e.jsx(st,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:j})]}),e.jsx(ue,{label:"Nombre del Template",value:u,onChange:F=>h(F.target.value),placeholder:"Ej: Certificacion Laboral Estandar",required:!0}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mdulo"}),e.jsx("select",{value:p,onChange:F=>ee(F.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:k.map(F=>e.jsx("option",{value:F.value,children:F.label},F.value))}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Define a qu mdulo del sistema pertenece este template"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Categora"}),e.jsx("select",{value:f,onChange:F=>B(F.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:A.map(F=>e.jsx("option",{value:F.value,children:F.label},F.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subcategora"}),e.jsx("select",{value:E,onChange:F=>S(F.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:O.map(F=>e.jsx("option",{value:F.value,children:F.label},F.value))})]})]}),E==="certification"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Certificacin"}),e.jsx("select",{value:w,onChange:F=>C(F.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:Kg.map(F=>e.jsx("option",{value:F.value,children:F.label},F.value))}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Solo los tipos de certificacin con template aparecern en el selector de solicitudes"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripcion (opcional)"}),e.jsx("textarea",{value:x,onChange:F=>m(F.target.value),placeholder:"Descripcion del proposito del template...",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(L,{type:"button",variant:"secondary",onClick:r,children:"Cancelar"}),e.jsxs(L,{type:"submit",loading:z.isPending,children:[e.jsx(Cm,{className:"w-4 h-4"}),"Guardar Cambios"]})]})]})]})})}function T4({isOpen:s,onClose:r,template:i}){const[c,u]=b.useState(null),[h,x]=b.useState(!1),[m,p]=b.useState("");b.useEffect(()=>(s&&i?.file_name&&g(),()=>{c&&URL.revokeObjectURL(c)}),[s,i?.id]);const g=async()=>{x(!0),p("");try{const E=await jt.preview(i.id),S=new Blob([E.data],{type:"application/pdf"}),w=URL.createObjectURL(S);u(w)}catch(E){p(E.response?.data?.error||"Error al cargar la previsualizacin")}finally{x(!1)}},f=()=>{c&&(URL.revokeObjectURL(c),u(null)),p(""),r()},v=async()=>{try{const E=await jt.download(i.id),S=new Blob([E.data],{type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"}),w=URL.createObjectURL(S),C=document.createElement("a");C.href=w,C.download=i.file_name||`${i.name}.docx`,document.body.appendChild(C),C.click(),document.body.removeChild(C),URL.revokeObjectURL(w)}catch{alert("Error al descargar el archivo")}};return s?e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-5xl h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Previsualizacin"}),e.jsx("p",{className:"text-sm text-gray-500",children:i?.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(L,{variant:"secondary",size:"sm",onClick:v,children:[e.jsx(ba,{className:"w-4 h-4"}),"Descargar Word"]}),e.jsx("button",{onClick:f,className:"p-1 hover:bg-gray-100 rounded",children:e.jsx(vt,{className:"w-5 h-5"})})]})]}),e.jsx("div",{className:"flex-1 overflow-hidden p-4",children:h?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Generando previsualizacin..."})]})}):m?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx(st,{className:"w-12 h-12 text-red-400 mx-auto mb-4"}),e.jsx("p",{className:"text-red-600",children:m}),e.jsx(L,{variant:"secondary",className:"mt-4",onClick:g,children:"Reintentar"})]})}):c?e.jsx("iframe",{src:c,className:"w-full h-full rounded-lg border",title:"Preview"}):e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("p",{className:"text-gray-500",children:"No hay archivo para previsualizar"})})})]})}):null}const M4={laboral:"bg-blue-100 text-blue-700",comercial:"bg-purple-100 text-purple-700",administrativo:"bg-amber-100 text-amber-700"},k4={hr:"bg-emerald-100 text-emerald-700",legal:"bg-indigo-100 text-indigo-700",admin:"bg-slate-100 text-slate-700"},Hu=[{id:"legal",label:"Gestin Legal",mainCategory:"comercial",icon:"Building2",color:"indigo",description:"Templates para contratos y documentos legales"},{id:"hr",label:"Recursos Humanos",mainCategory:"laboral",icon:"Users",color:"emerald",description:"Templates para documentos de RRHH"}];function L0({module:s="legal"}){const r=et(),i=Aa(),[c,u]=b.useState(!1),[h,x]=b.useState(!1),[m,p]=b.useState(!1),[g,f]=b.useState(null),[v,E]=b.useState(null),[S,w]=b.useState(""),[C,j]=b.useState(""),[_,N]=b.useState(""),z=s,k=Hu.find(G=>G.id===z)||Hu[0],{data:U,isLoading:A}=ke({queryKey:["templates",{q:S,status:C,main_category:k.mainCategory,category:_}],queryFn:()=>jt.list({q:S||void 0,status:C||void 0,main_category:k.mainCategory,category:_||void 0})}),{data:T}=ke({queryKey:["template-categories"],queryFn:()=>jt.getCategories()}),O=Ne({mutationFn:G=>jt.activate(G),onSuccess:()=>r.invalidateQueries(["templates"])}),ee=Ne({mutationFn:G=>jt.archive(G),onSuccess:()=>r.invalidateQueries(["templates"])}),B=Ne({mutationFn:G=>jt.duplicate(G),onSuccess:()=>r.invalidateQueries(["templates"])}),ye=Ne({mutationFn:G=>jt.delete(G),onSuccess:()=>r.invalidateQueries(["templates"])}),F=(G,Y)=>{switch(G){case"preview":E(Y),p(!0);break;case"edit":f(Y),x(!0);break;case"activate":O.mutate(Y.id);break;case"archive":ee.mutate(Y.id);break;case"duplicate":B.mutate(Y.id);break;case"delete":confirm("Esta seguro de eliminar este template?")&&ye.mutate(Y.id);break}},te=U?.data?.data||[],xe=(T?.data?.grouped||{})[k.mainCategory]||[],$=U?.data?.meta||{},pe=G=>{i(`/admin/templates/${G}`)};return b.useEffect(()=>{N(""),w(""),j("")},[s]),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["Templates - ",k.label]}),e.jsx("p",{className:"text-gray-500",children:k.description})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(kt,{to:"/admin/signatory-types",children:e.jsxs(L,{variant:"secondary",children:[e.jsx(ht,{className:"w-4 h-4"}),"Tipos de Firmantes"]})}),e.jsxs(L,{onClick:()=>u(!0),children:[e.jsx(Ke,{className:"w-4 h-4"}),"Nuevo Template"]})]})]}),e.jsx("div",{className:"flex gap-4",children:Hu.map(G=>{const Y=z===G.id,me=G.color==="indigo"?Y?"border-indigo-500 bg-indigo-50":"border-transparent hover:border-gray-300 hover:bg-gray-50":Y?"border-emerald-500 bg-emerald-50":"border-transparent hover:border-gray-300 hover:bg-gray-50",M=G.color==="indigo"?Y?"bg-indigo-100 text-indigo-600":"bg-gray-100 text-gray-500":Y?"bg-emerald-100 text-emerald-600":"bg-gray-100 text-gray-500",V=G.color==="indigo"?Y?"text-indigo-900":"text-gray-700":Y?"text-emerald-900":"text-gray-700";return e.jsx("button",{onClick:()=>pe(G.id),className:`flex-1 p-4 border-2 rounded-xl transition-all ${me}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${M}`,children:G.id==="legal"?e.jsx(Ut,{className:"w-5 h-5"}):e.jsx(ht,{className:"w-5 h-5"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:`font-semibold ${V}`,children:G.label}),e.jsx("p",{className:"text-xs text-gray-500",children:G.description})]})]})},G.id)})}),e.jsx(we,{children:e.jsx(Ce,{className:"p-4",children:e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsx("div",{className:"flex-1 min-w-[200px]",children:e.jsxs("div",{className:"relative",children:[e.jsx(ra,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar templates...",value:S,onChange:G=>w(G.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"})]})}),e.jsxs("select",{value:C,onChange:G=>j(G.target.value),className:"px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"Todos los estados"}),e.jsx("option",{value:"draft",children:"Borrador"}),e.jsx("option",{value:"active",children:"Activo"}),e.jsx("option",{value:"archived",children:"Archivado"})]}),e.jsxs("select",{value:_,onChange:G=>N(G.target.value),className:"px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"Todas las subcategoras"}),xe.map(G=>e.jsx("option",{value:G.value,children:G.label},G.value))]})]})})}),e.jsx(we,{children:e.jsx(Ce,{className:"p-0",children:A?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500"})}):te.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(Oe,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay templates"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Crea tu primer template para comenzar a generar documentos"}),e.jsxs(L,{onClick:()=>u(!0),children:[e.jsx(Ke,{className:"w-4 h-4"}),"Crear Template"]})]}):e.jsxs("table",{className:"w-full table-fixed",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"w-[30%] px-3 py-2.5 text-left text-xs font-medium text-gray-500 uppercase",children:"Template"}),e.jsx("th",{className:"w-[12%] px-3 py-2.5 text-left text-xs font-medium text-gray-500 uppercase",children:"Mdulo"}),e.jsx("th",{className:"w-[15%] px-3 py-2.5 text-left text-xs font-medium text-gray-500 uppercase",children:"Categora"}),e.jsx("th",{className:"w-[6%] px-3 py-2.5 text-center text-xs font-medium text-gray-500 uppercase",children:"Vars"}),e.jsx("th",{className:"w-[6%] px-3 py-2.5 text-center text-xs font-medium text-gray-500 uppercase",children:"Firm."}),e.jsx("th",{className:"w-[10%] px-3 py-2.5 text-left text-xs font-medium text-gray-500 uppercase",children:"Estado"}),e.jsx("th",{className:"w-[21%] px-3 py-2.5 text-right text-xs font-medium text-gray-500 uppercase",children:"Acciones"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:te.map(G=>{const Y=z0[G.status]||z0.draft;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-3 py-3",children:e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx("div",{className:"p-1.5 bg-primary-50 rounded flex-shrink-0",children:G.file_name?e.jsx(Oe,{className:"w-4 h-4 text-primary-600"}):e.jsx(Oe,{className:"w-4 h-4 text-gray-400"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900 text-sm truncate",title:G.name,children:G.name}),G.file_name&&e.jsx("p",{className:"text-xs text-gray-400 truncate",title:G.file_name,children:G.file_name})]})]})}),e.jsx("td",{className:"px-3 py-3",children:e.jsx("span",{className:`inline-flex px-1.5 py-0.5 rounded text-xs font-medium ${k4[G.module_type]||"bg-gray-100 text-gray-700"}`,children:G.module_type_label})}),e.jsx("td",{className:"px-3 py-3",children:e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsx("span",{className:`inline-flex px-1.5 py-0.5 rounded text-xs font-medium w-fit ${M4[G.main_category]||"bg-gray-100 text-gray-700"}`,children:G.main_category_label}),e.jsx("span",{className:"text-xs text-gray-500",children:G.category_label})]})}),e.jsx("td",{className:"px-3 py-3 text-center",children:e.jsx("span",{className:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-gray-100 text-xs font-medium text-gray-700",children:G.variables?.length||0})}),e.jsx("td",{className:"px-3 py-3 text-center",children:e.jsx("span",{className:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-gray-100 text-xs font-medium text-gray-700",children:G.signatories_count||0})}),e.jsx("td",{className:"px-3 py-3",children:e.jsx("span",{className:`inline-flex px-2 py-0.5 rounded-full text-xs font-medium ${Y.color}`,children:Y.label})}),e.jsx("td",{className:"px-3 py-3",children:e.jsxs("div",{className:"flex items-center justify-end gap-0.5",children:[G.file_name&&e.jsx("button",{onClick:()=>F("preview",G),title:"Previsualizar",className:"p-1.5 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded",children:e.jsx(At,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>F("edit",G),title:"Editar",className:"p-1.5 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded",children:e.jsx(Cm,{className:"w-4 h-4"})}),e.jsx(kt,{to:`/admin/templates/${G.id}`,children:e.jsx("button",{title:"Configurar",className:"p-1.5 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded",children:e.jsx(er,{className:"w-4 h-4"})})}),G.status==="draft"&&G.file_name&&e.jsx("button",{onClick:()=>F("activate",G),title:"Activar",className:"p-1.5 text-green-600 hover:text-green-700 hover:bg-green-50 rounded",children:e.jsx(Be,{className:"w-4 h-4"})}),G.status==="active"&&e.jsx("button",{onClick:()=>F("archive",G),title:"Archivar",className:"p-1.5 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded",children:e.jsx(eo,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>F("duplicate",G),title:"Duplicar",className:"p-1.5 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded",children:e.jsx(G2,{className:"w-4 h-4"})}),G.status==="draft"&&e.jsx("button",{onClick:()=>F("delete",G),title:"Eliminar",className:"p-1.5 text-red-500 hover:text-red-700 hover:bg-red-50 rounded",children:e.jsx(Nt,{className:"w-4 h-4"})})]})})]},G.id)})})]})})}),$.total>0&&e.jsxs("div",{className:"text-sm text-gray-500 text-center",children:["Mostrando ",te.length," de ",$.total," templates"]}),e.jsx(E4,{isOpen:c,onClose:()=>u(!1),onSuccess:G=>{window.location.href=`/admin/templates/${G.id}`}}),e.jsx(D4,{isOpen:h,onClose:()=>{x(!1),f(null)},template:g}),e.jsx(T4,{isOpen:m,onClose:()=>{p(!1),E(null)},template:v})]})}const Mm=612,km=792;function A4({templateId:s,hasFile:r,signatories:i,selectedId:c,onSelect:u,onUpdatePosition:h,onUpdateSize:x,scale:m=.6,numPages:p=1,customPageHeight:g,customPageWidth:f}){const v=f||Mm,E=g||km,S=E,w=b.useRef(null),C=b.useRef(null),[j,_]=b.useState(null),[N,z]=b.useState({x:0,y:0}),[k,U]=b.useState(null),[A,T]=b.useState({x:0,y:0,width:0,height:0}),[O,ee]=b.useState(null),[B,ye]=b.useState(!1),[F,te]=b.useState(1);b.useEffect(()=>{if(!s||!r){ee(null);return}let R=!0,X=null;return ye(!0),jt.preview(s).then(ge=>{if(!R)return;const Q=new Blob([ge.data],{type:"application/pdf"});X=URL.createObjectURL(Q),ee(X),ye(!1)}).catch(ge=>{R&&(console.error("Error loading PDF preview:",ge),ye(!1))}),()=>{R=!1,X&&URL.revokeObjectURL(X)}},[s,r]);const je=b.useCallback(R=>{const X=R.target.scrollTop,ge=S*m,Q=Math.floor(X/ge)+1;te(Math.min(Q,p))},[m,p,S]),xe=(R,X)=>{R.preventDefault(),R.stopPropagation();const ge=w.current.getBoundingClientRect(),Q=(R.clientX-ge.left)/m,ie=(R.clientY-ge.top)/m;z({x:Q-(X.x_position||350),y:ie-(X.y_position||700)}),_(X.id),u(X.id)},$=b.useCallback(R=>{if(!w.current)return;const X=w.current.getBoundingClientRect();if(k&&x){const ne=(R.clientX-X.left)/m,Te=(R.clientY-X.top)/m,tt=ne-A.x,lt=Te-A.y,Et=Math.max(50,Math.min(400,A.width+tt)),os=Math.max(25,Math.min(200,A.height+lt));x(k,Math.round(Et),Math.round(os));return}if(!j)return;const ge=i.find(ne=>ne.id===j);if(!ge)return;const Q=S*p,ie=(R.clientX-X.left)/m,_e=(R.clientY-X.top)/m,ze=Math.max(0,Math.min(v-(ge.width||200),ie-N.x)),$e=Math.max(0,Math.min(Q-(ge.height||80),_e-N.y));h(j,Math.round(ze),Math.round($e))},[j,N,k,A,m,i,h,x,p,S]),pe=()=>{_(null),U(null)},G=(R,X)=>{R.preventDefault(),R.stopPropagation();const ge=w.current.getBoundingClientRect(),Q=(R.clientX-ge.left)/m,ie=(R.clientY-ge.top)/m;T({x:Q,y:ie,width:X.width||200,height:X.height||80}),U(X.id),u(X.id)},Y=R=>{const X={employee:{bg:"rgba(59, 130, 246, 0.3)",border:"#3b82f6",text:"#1d4ed8"},supervisor:{bg:"rgba(147, 51, 234, 0.3)",border:"#9333ea",text:"#7c3aed"},hr:{bg:"rgba(34, 197, 94, 0.3)",border:"#22c55e",text:"#16a34a"},hr_manager:{bg:"rgba(16, 185, 129, 0.3)",border:"#10b981",text:"#059669"},legal:{bg:"rgba(249, 115, 22, 0.3)",border:"#f97316",text:"#ea580c"},general_manager:{bg:"rgba(239, 68, 68, 0.3)",border:"#ef4444",text:"#dc2626"},legal_representative:{bg:"rgba(245, 158, 11, 0.3)",border:"#f59e0b",text:"#d97706"},accountant:{bg:"rgba(6, 182, 212, 0.3)",border:"#06b6d4",text:"#0891b2"},admin:{bg:"rgba(107, 114, 128, 0.3)",border:"#6b7280",text:"#4b5563"}};return X[R]||X.admin},me=R=>Math.floor(R/S)+1,M=v*m,V=S*m,ae=V*p,W=R=>{if(C.current){const X=V*(R-1);C.current.scrollTo({top:X,behavior:"smooth"})}};return e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center justify-end mb-2 gap-3",children:[r&&O&&e.jsxs("a",{href:O,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 px-2 py-1 text-xs bg-blue-50 text-blue-600 rounded hover:bg-blue-100 transition-colors",children:[e.jsx(At,{className:"w-3 h-3"}),"Ver PDF"]}),B&&e.jsx("span",{className:"text-xs text-gray-400 animate-pulse",children:"Cargando PDF..."}),!B&&r&&!O&&e.jsx("span",{className:"text-xs text-red-400",children:"Error al cargar PDF"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-xs text-gray-500",children:["Pgina ",F," de ",p]}),p>1&&e.jsx("div",{className:"flex gap-1",children:[...Array(p)].map((R,X)=>e.jsx("button",{onClick:()=>W(X+1),className:`w-5 h-5 text-[10px] rounded ${F===X+1?"bg-primary-500 text-white":"bg-gray-200 text-gray-600 hover:bg-gray-300"}`,children:X+1},X))})]})]}),e.jsx("div",{ref:C,className:"mx-auto border-2 border-gray-300 rounded-lg shadow-lg overflow-auto bg-gray-100",style:{width:M+24,maxHeight:650,padding:10},onScroll:je,children:e.jsx("div",{style:{width:M,height:ae,margin:"0 auto"},children:e.jsxs("div",{ref:w,className:"relative origin-top-left",style:{width:v,height:S*p,transform:`scale(${m})`,transformOrigin:"top left"},onMouseMove:$,onMouseUp:pe,onMouseLeave:pe,children:[O&&r&&e.jsx("iframe",{src:`${O}#toolbar=0&navpanes=0&scrollbar=0`,className:"absolute inset-0 pointer-events-none",style:{width:v,height:S*p,border:"none"},title:"PDF Preview"}),[...Array(p)].map((R,X)=>e.jsxs("div",{className:`border border-gray-300 ${O?"bg-transparent":"bg-white"}`,style:{width:v,height:S,position:"absolute",top:X*S,left:0,boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"},children:[e.jsxs("div",{className:"absolute top-2 right-2 bg-gray-100/80 text-gray-500 text-xs px-2 py-1 rounded",children:["Pgina ",X+1]}),!O&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"absolute inset-4 border border-dashed border-gray-200 pointer-events-none opacity-50"}),e.jsx("div",{className:"absolute left-1/2 top-4 bottom-4 w-px bg-gray-100 pointer-events-none"}),e.jsx("div",{className:"absolute top-1/2 left-4 right-4 h-px bg-gray-100 pointer-events-none"})]})]},X)),!r&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white z-10",children:e.jsxs("div",{className:"text-center text-gray-400 p-4",children:[e.jsx(Oe,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"Sube un archivo Word para ver el preview"})]})}),p>1&&[...Array(p-1)].map((R,X)=>e.jsx("div",{className:"absolute left-0 right-0 border-t-2 border-dashed border-gray-400 pointer-events-none",style:{top:S*(X+1)},children:e.jsxs("span",{className:"absolute left-2 -top-4 bg-gray-200 px-2 py-0.5 text-xs text-gray-500 rounded",children:["Pgina ",X+2]})},X)),e.jsxs("div",{className:"absolute inset-0",style:{pointerEvents:"none"},children:[i.map(R=>{const X=Y(R.effective_code||R.role||R.signatory_type_code),ge=c===R.id,Q=j===R.id,ie=R.width||200,_e=R.height||80,ze=R.date_position||"right",$e=R.y_position||700,ne=Math.floor($e/S)+1;let Te={},tt={};switch(ze){case"right":Te={width:"75%",height:"100%",left:0,top:0},tt={width:"25%",height:"100%",right:0,top:0};break;case"below":Te={width:"100%",height:"80%",left:0,top:0},tt={width:"100%",height:"20%",left:0,bottom:0};break;case"above":Te={width:"100%",height:"80%",left:0,bottom:0},tt={width:"100%",height:"20%",left:0,top:0};break;case"none":default:Te={width:"100%",height:"100%",left:0,top:0},tt=null;break}return e.jsxs("div",{className:"absolute cursor-move transition-all duration-100",style:{left:R.x_position||350,top:$e,width:ie,height:_e,backgroundColor:"transparent",border:`2px dashed ${X.border}`,borderRadius:4,boxShadow:ge?`0 0 0 3px ${X.border}40, 0 4px 12px rgba(0,0,0,0.15)`:Q?"0 8px 20px rgba(0,0,0,0.2)":"0 2px 4px rgba(0,0,0,0.1)",zIndex:Q?100:ge?50:10,pointerEvents:"auto",opacity:Q?.9:1},onMouseDown:lt=>xe(lt,R),children:[e.jsxs("div",{className:"absolute flex flex-col items-center justify-center",style:{...Te,backgroundColor:X.bg,borderRadius:2},children:[e.jsx(yt,{style:{width:16,height:16,color:X.text,opacity:.6}}),e.jsx("span",{className:"font-medium text-center truncate w-full px-1",style:{fontSize:10,color:X.text},children:R.label||R.role_label}),R.required&&e.jsx("span",{style:{fontSize:8,color:"#ef4444",fontWeight:"bold"},children:"*Req"})]}),tt&&e.jsx("div",{className:"absolute flex items-center justify-center",style:{...tt,backgroundColor:"rgba(100, 100, 100, 0.15)",borderRadius:2},children:e.jsx("span",{style:{fontSize:8,color:"#666",opacity:.8},children:ze==="right"?"":"Fecha"})}),p>1&&e.jsx("div",{className:"absolute -left-2 -top-2 w-5 h-5 rounded-full flex items-center justify-center text-white text-[10px] font-bold",style:{backgroundColor:X.border},children:ne}),ge&&e.jsx("div",{className:"absolute -top-3 -right-3 rounded-full p-1",style:{backgroundColor:X.border},children:e.jsx(A_,{className:"w-4 h-4 text-white"})}),ge&&e.jsx("div",{className:"absolute -bottom-2 -right-2 w-5 h-5 rounded-full bg-white border-2 cursor-se-resize hover:scale-110 transition-transform flex items-center justify-center",style:{borderColor:X.border},onMouseDown:lt=>G(lt,R),children:e.jsx("svg",{width:"8",height:"8",viewBox:"0 0 8 8",fill:"none",children:e.jsx("path",{d:"M7 1L1 7M7 4L4 7M7 7L7 7",stroke:X.border,strokeWidth:"1.5",strokeLinecap:"round"})})})]},R.id)}),i.length===0&&r&&!B&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:e.jsxs("div",{className:"bg-white/90 backdrop-blur-sm rounded-lg p-4 text-center shadow-lg",children:[e.jsx(yt,{className:"w-8 h-8 mx-auto mb-2 text-gray-400"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Agrega firmantes para posicionarlos aqu"})]})})]})]})})}),i.length>0&&e.jsx("div",{className:"mt-3 flex flex-wrap gap-2 justify-center",children:i.map(R=>{const X=Y(R.effective_code||R.role||R.signatory_type_code),ge=me(R.y_position||700);return e.jsxs("button",{className:`flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg text-xs font-medium transition-all ${c===R.id?"ring-2 ring-offset-1":"hover:opacity-80"}`,style:{backgroundColor:X.bg,color:X.text,ringColor:X.border},onClick:()=>{if(u(R.id),C.current){const Q=(R.y_position||700)*m-100;C.current.scrollTo({top:Q,behavior:"smooth"})}},children:[e.jsx("div",{className:"w-2.5 h-2.5 rounded-full",style:{backgroundColor:X.border}}),R.label||R.role_label,p>1&&e.jsxs("span",{className:"ml-1 opacity-70",children:["(p.",ge,")"]})]},R.id)})}),e.jsxs("p",{className:"text-xs text-gray-400 text-center mt-2",children:["Coordenadas PDF: ",v," x ",E," pts por pgina | Usa scroll para documentos largos"]})]})}const Am=[{value:"right",label:"Derecha",desc:"Fecha a la derecha (firma usa 75% ancho)"},{value:"below",label:"Abajo",desc:"Fecha debajo (firma usa 100% ancho)"},{value:"above",label:"Arriba",desc:"Fecha arriba (firma usa 100% ancho)"},{value:"none",label:"Sin fecha",desc:"Sin fecha (firma usa 100% del espacio)"}];function R4({isOpen:s,onClose:r,templateId:i,signatory:c,numPages:u=1,onSuccess:h,pdfWidth:x=Mm,pdfHeight:m=km,totalSignatories:p=1}){const g=et(),[f,v]=b.useState(c?.label||""),[E,S]=b.useState(c?.required??!0),[w,C]=b.useState(c?.position??0),[j,_]=b.useState(c?.x_position||350),[N,z]=b.useState(1),[k,U]=b.useState(700),[A,T]=b.useState(c?.width||200),[O,ee]=b.useState(c?.height||80),[B,ye]=b.useState(c?.date_position||"right"),[F,te]=b.useState(c?.show_label??!0),[je,xe]=b.useState(c?.show_signer_name??!1),[$,pe]=b.useState(""),G=x,Y=m;b.useEffect(()=>{if(c&&s){v(c.label||""),S(c.required??!0),C(c.position??0),_(c.x_position||350),T(c.width||200),ee(c.height||80),ye(c.date_position||"right"),te(c.show_label??!0),xe(c.show_signer_name??!1);const W=c.y_position||700,R=Math.floor(W/m)+1,X=W%m;z(Math.min(R,u)),U(X)}},[c,s,u,m]);const me=(N-1)*m+k,M=Ne({mutationFn:W=>jt.updateSignatory(i,c?.id,W),onSuccess:()=>{g.invalidateQueries(["template",i]),h?.(),r()},onError:W=>{pe(W.response?.data?.error||"Error al actualizar firmante")}}),V=W=>{W.preventDefault(),M.mutate({label:f,required:E,position:w,x_position:j,y_position:me,width:A,height:O,date_position:B,show_label:F,show_signer_name:je})},ae=[{label:"Arriba Izq",x:50,y:100},{label:"Arriba Der",x:350,y:100},{label:"Centro",x:200,y:400},{label:"Abajo Izq",x:50,y:700},{label:"Abajo Der",x:350,y:700}];return!s||!c?null:e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-2",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b shrink-0",children:[e.jsx("h3",{className:"font-semibold",children:"Editar Firmante"}),e.jsx("button",{onClick:r,className:"p-1 hover:bg-gray-100 rounded",children:e.jsx(vt,{className:"w-4 h-4"})})]}),e.jsxs("form",{onSubmit:V,className:"flex flex-col flex-1 overflow-hidden",children:[e.jsxs("div",{className:"flex-1 overflow-y-auto px-4 py-3 space-y-3",children:[$&&e.jsxs("div",{className:"p-2 bg-red-50 border border-red-200 rounded flex items-center gap-2 text-red-700 text-sm",children:[e.jsx(st,{className:"w-4 h-4 shrink-0"}),e.jsx("span",{children:$})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-0.5",children:"Tipo"}),e.jsx("p",{className:"px-2 py-1 bg-gray-50 rounded text-sm truncate",children:c.role_label})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-0.5",children:"Etiqueta"}),e.jsx("input",{type:"text",value:f,onChange:W=>v(W.target.value),placeholder:"Ej: Firma del Empleado",className:"w-full px-2 py-1 border border-gray-300 rounded text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-0.5",children:"Orden de firma"}),e.jsx("input",{type:"number",value:w,onChange:W=>C(Math.max(0,parseInt(W.target.value,10)||0)),min:"0",max:p,className:"w-full px-2 py-1 border border-gray-300 rounded text-sm text-center"})]})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:E,onChange:W=>S(W.target.checked),className:"w-3.5 h-3.5 text-primary-600 rounded"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Firma requerida"})]}),e.jsxs("div",{className:"border-t pt-2",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 mb-2",children:"Ubicacin"}),e.jsxs("div",{className:"flex gap-2 items-center mb-2",children:[e.jsx("span",{className:"text-xs text-gray-500 shrink-0",children:"Pg:"}),e.jsx("div",{className:"flex gap-0.5",children:[...Array(Math.min(u,10))].map((W,R)=>e.jsx("button",{type:"button",onClick:()=>z(R+1),className:`w-6 h-6 text-xs rounded font-medium ${N===R+1?"bg-primary-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:R+1},R))}),e.jsx("span",{className:"text-xs text-gray-400 mx-1",children:"|"}),ae.slice(0,3).map(W=>e.jsx("button",{type:"button",onClick:()=>{_(W.x),U(W.y)},className:"px-1.5 py-0.5 text-xs bg-gray-100 text-gray-600 rounded hover:bg-gray-200",children:W.label},W.label))]}),e.jsxs("div",{className:"grid grid-cols-4 gap-1.5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-400",children:"X"}),e.jsx("input",{type:"number",value:j,onChange:W=>{const R=parseInt(W.target.value,10);isNaN(R)||_(Math.max(0,Math.min(G-A,R)))},className:"w-full px-1.5 py-1 border border-gray-300 rounded text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-400",children:"Y"}),e.jsx("input",{type:"number",value:k,onChange:W=>{const R=parseInt(W.target.value,10);isNaN(R)||U(Math.max(0,Math.min(Y-O,R)))},className:"w-full px-1.5 py-1 border border-gray-300 rounded text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-400",children:"Ancho"}),e.jsx("input",{type:"number",value:A,onChange:W=>{const R=parseInt(W.target.value,10);isNaN(R)||T(Math.max(20,Math.min(400,R)))},className:"w-full px-1.5 py-1 border border-gray-300 rounded text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-400",children:"Alto"}),e.jsx("input",{type:"number",value:O,onChange:W=>{const R=parseInt(W.target.value,10);isNaN(R)||ee(Math.max(15,Math.min(200,R)))},className:"w-full px-1.5 py-1 border border-gray-300 rounded text-sm"})]})]}),e.jsxs("div",{className:"flex gap-1 mt-2",children:[e.jsx("span",{className:"text-xs text-gray-400 shrink-0 py-0.5",children:"Tamao:"}),[{label:"S",w:120,h:45},{label:"M",w:160,h:60},{label:"L",w:200,h:80}].map(W=>e.jsx("button",{type:"button",onClick:()=>{T(W.w),ee(W.h)},className:`px-2 py-0.5 text-xs rounded ${A===W.w&&O===W.h?"bg-primary-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:W.label},W.label))]})]}),e.jsxs("div",{className:"border-t pt-2",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 mb-1.5",children:"Posicin de fecha"}),e.jsx("div",{className:"grid grid-cols-4 gap-1",children:Am.map(W=>e.jsx("button",{type:"button",onClick:()=>ye(W.value),className:`px-2 py-1 text-xs rounded border ${B===W.value?"border-primary-500 bg-primary-50 text-primary-700":"border-gray-200 hover:border-gray-300 text-gray-600"}`,children:W.label},W.value))})]}),e.jsxs("div",{className:"border-t pt-2",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 mb-1.5",children:"Mostrar"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:F,onChange:W=>te(W.target.checked),className:"w-3.5 h-3.5 text-primary-600 rounded"}),e.jsx("span",{className:"text-xs text-gray-700",children:"Etiqueta"})]}),e.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:je,onChange:W=>xe(W.target.checked),className:"w-3.5 h-3.5 text-primary-600 rounded"}),e.jsx("span",{className:"text-xs text-gray-700",children:"Nombre firmante"})]})]})]}),e.jsxs("div",{className:"p-1.5 bg-gray-50 rounded text-xs text-gray-500",children:["Pg ",N,"  (",j,", ",k,")  ",A,"",O,"  Fecha: ",B]})]}),e.jsxs("div",{className:"flex justify-end gap-2 px-4 py-2 border-t shrink-0",children:[e.jsx(L,{type:"button",variant:"secondary",onClick:r,children:"Cancelar"}),e.jsxs(L,{type:"submit",loading:M.isPending,children:[e.jsx($s,{className:"w-4 h-4"}),"Guardar"]})]})]})]})})}function O4({isOpen:s,onClose:r,templateId:i,onSuccess:c,pdfWidth:u=Mm,pdfHeight:h=km,totalPages:x=1,existingSignatories:m=0}){const p=et(),[g,f]=b.useState(""),[v,E]=b.useState(""),[S,w]=b.useState(!0),[C,j]=b.useState(m),[_,N]=b.useState(1),[z,k]=b.useState(350),[U,A]=b.useState(700),[T,O]=b.useState(200),[ee,B]=b.useState(80),[ye,F]=b.useState("right"),[te,je]=b.useState(!0),[xe,$]=b.useState(!1),[pe,G]=b.useState(""),{data:Y,isLoading:me}=ke({queryKey:["signatory-types",{active:"true"}],queryFn:()=>Hl.list({active:"true"}),enabled:s}),M=Y?.data?.data||[],V=Ne({mutationFn:R=>jt.createSignatory(i,R),onSuccess:()=>{p.invalidateQueries(["template",i]),p.invalidateQueries(["template-signatories",i]),c(),ae()},onError:R=>{G(R.response?.data?.error||"Error al agregar firmante")}}),ae=()=>{f(""),E(""),w(!0),j(m),N(1),k(350),A(700),O(200),B(80),F("right"),je(!0),$(!1),G(""),r()},W=()=>{if(!g){G("Seleccione un tipo de firmante");return}const R=M.find(ge=>ge.code===g),X={signatory_type_code:g,label:v||R?.name||"Firma",required:S,position:C,page_number:_,x_position:z,y_position:U,width:T,height:ee,date_position:ye,show_label:te,show_signer_name:xe};console.log("Creating signatory with data:",X),V.mutate(X)};return s?e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-2",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-2xl max-h-[85vh] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b flex-shrink-0",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Agregar Firmante"}),e.jsx("button",{onClick:ae,className:"p-1 hover:bg-gray-100 rounded",children:e.jsx(vt,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto px-4 py-3",children:[pe&&e.jsxs("div",{className:"p-2 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-700 mb-3",children:[e.jsx(st,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:pe})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Firmante"}),me?e.jsx("div",{className:"py-1 text-gray-500 text-sm",children:"Cargando..."}):M.length===0?e.jsx("div",{className:"py-1 text-amber-600 text-sm",children:"No hay tipos configurados"}):e.jsxs("select",{value:g,onChange:R=>{f(R.target.value);const X=M.find(ge=>ge.code===R.target.value);!v&&X&&E(X.name)},className:"w-full px-2 py-1.5 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"Seleccionar tipo..."}),M.map(R=>e.jsx("option",{value:R.code,children:R.name},R.code))]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Etiqueta"}),e.jsx("input",{type:"text",value:v,onChange:R=>E(R.target.value),placeholder:"Ej: Firma del Empleado",className:"w-full px-2 py-1.5 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Orden de firma"}),e.jsx("input",{type:"number",value:C,onChange:R=>j(Math.max(0,parseInt(R.target.value,10)||0)),min:"0",className:"w-full px-2 py-1.5 border border-gray-300 rounded-lg text-sm text-center focus:outline-none focus:ring-2 focus:ring-primary-500"}),e.jsx("p",{className:"text-xs text-gray-400 mt-0.5",children:"0 = firma primero"})]})]}),e.jsxs("div",{className:"flex items-center gap-4 flex-wrap",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:S,onChange:R=>w(R.target.checked),className:"w-4 h-4 text-primary-600 rounded focus:ring-primary-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Requerida"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:te,onChange:R=>je(R.target.checked),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Mostrar etiqueta"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:xe,onChange:R=>$(R.target.checked),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Mostrar nombre"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Posicin de fecha"}),e.jsx("div",{className:"grid grid-cols-4 gap-1",children:Am.map(R=>e.jsx("button",{type:"button",onClick:()=>F(R.value),className:`px-2 py-1.5 text-xs rounded-lg border-2 transition-all ${ye===R.value?"border-primary-500 bg-primary-50 text-primary-700 font-medium":"border-gray-200 hover:border-gray-300 text-gray-600"}`,children:R.label},R.value))})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Pgina:"}),e.jsx("input",{type:"number",value:_,onChange:R=>N(Math.max(1,Math.min(x,Number(R.target.value)))),className:"w-16 px-2 py-1 border border-gray-300 rounded-lg text-sm text-center",min:"1",max:x}),e.jsxs("span",{className:"text-xs text-gray-500",children:["de ",x]}),x>1&&e.jsxs("div",{className:"flex gap-1 ml-auto",children:[e.jsx("button",{type:"button",onClick:()=>N(1),className:`px-2 py-1 text-xs rounded ${_===1?"bg-primary-100 text-primary-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"1ra"}),e.jsx("button",{type:"button",onClick:()=>N(x),className:`px-2 py-1 text-xs rounded ${_===x?"bg-primary-100 text-primary-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"lt"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"X (horizontal)"}),e.jsx("input",{type:"number",value:z,onChange:R=>k(Number(R.target.value)),className:"w-full px-2 py-1.5 border border-gray-300 rounded-lg text-sm",min:"0",max:"600"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Y (vertical)"}),e.jsx("input",{type:"number",value:U,onChange:R=>A(Number(R.target.value)),className:"w-full px-2 py-1.5 border border-gray-300 rounded-lg text-sm",min:"0",max:h})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Ancho"}),e.jsx("input",{type:"number",value:T,onChange:R=>O(Number(R.target.value)),className:"w-full px-2 py-1.5 border border-gray-300 rounded-lg text-sm",min:"50",max:"300"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Alto"}),e.jsx("input",{type:"number",value:ee,onChange:R=>B(Number(R.target.value)),className:"w-full px-2 py-1.5 border border-gray-300 rounded-lg text-sm",min:"30",max:"150"})]})]}),e.jsxs("p",{className:"text-xs text-gray-400",children:["PDF: ",u," x ",h," pts"]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 px-4 py-3 border-t bg-gray-50 flex-shrink-0",children:[e.jsx(L,{type:"button",variant:"secondary",onClick:ae,children:"Cancelar"}),e.jsxs(L,{type:"button",onClick:W,loading:V.isPending,disabled:!g||M.length===0,children:[e.jsx(Ke,{className:"w-4 h-4"}),"Agregar"]})]})]})}):null}function z4(){const{id:s}=Y0(),r=Aa(),i=et(),c=b.useRef(null),[u,h]=b.useState(!1),[x,m]=b.useState(null),[p,g]=b.useState({}),[f,v]=b.useState(!1),[E,S]=b.useState(null),[w,C]=b.useState([]),[j,_]=b.useState(!1),[N,z]=b.useState(1),[k,U]=b.useState(.7),[A,T]=b.useState(792),[O,ee]=b.useState(612),{data:B,isLoading:ye}=ke({queryKey:["template",s],queryFn:()=>jt.get(s)}),F=B?.data?.data,te=JSON.stringify(F?.signatories||[]);b.useEffect(()=>{const ie=F?.signatories||[];C(ie),_(!1)},[te]),b.useEffect(()=>{F&&(F.preview_scale&&U(F.preview_scale),F.pdf_height?T(F.pdf_height):F.preview_page_height&&T(F.preview_page_height),F.pdf_width&&ee(F.pdf_width),F.pdf_page_count&&z(F.pdf_page_count))},[F?.id]);const je=b.useCallback((ie,_e,ze)=>{C($e=>$e.map(ne=>ne.id===ie?{...ne,x_position:_e,y_position:ze}:ne)),_(!0)},[]),xe=b.useCallback((ie,_e,ze)=>{C($e=>$e.map(ne=>ne.id===ie?{...ne,width:_e,height:ze}:ne)),_(!0)},[]),$=Ne({mutationFn:async()=>{await jt.update(s,{template:{preview_scale:k,preview_page_height:A}});const ie=w.map(_e=>({id:_e.id,x_position:_e.x_position,y_position:_e.y_position,width:_e.width,height:_e.height}));for(const _e of ie)await jt.updateSignatory(s,_e.id,_e)},onSuccess:()=>{i.invalidateQueries(["template",s]),_(!1)}}),{data:pe}=ke({queryKey:["variable-mappings-grouped"],queryFn:()=>Ya.grouped()}),G=Ne({mutationFn:ie=>jt.upload(s,ie),onSuccess:()=>{i.invalidateQueries(["template",s])}}),Y=Ne({mutationFn:ie=>jt.update(s,{template:ie}),onSuccess:()=>{i.invalidateQueries(["template",s])}}),me=Ne({mutationFn:()=>jt.activate(s),onSuccess:()=>{i.invalidateQueries(["template",s])}}),M=Ne({mutationFn:ie=>jt.deleteSignatory(s,ie),onSuccess:()=>{i.invalidateQueries(["template",s])}}),V=Ne({mutationFn:()=>jt.reassignMappings(s),onSuccess:()=>{i.invalidateQueries(["template",s]),g({})}}),ae=ie=>{const _e=ie.target.files?.[0];if(_e){if(!_e.name.endsWith(".docx")){alert("Solo se permiten archivos Word (.docx)");return}G.mutate(_e)}},W=async()=>{v(!0);try{const ie={...F.variable_mappings,...p};await Y.mutateAsync({variable_mappings:ie})}finally{v(!1)}};if(ye)return e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500"})});if(!F)return e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-gray-500",children:"Template no encontrado"}),e.jsx(L,{variant:"secondary",onClick:()=>r("/admin/templates"),className:"mt-4",children:"Volver a Templates"})]});const R={...F.variable_mappings,...p},X=F.available_mappings||{},ge=pe?.data?.data||{},Q={employee:"Empleado",organization:"Organizacion",system:"Sistema",request:"Solicitud",custom:"Personalizado"};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(L,{variant:"ghost",onClick:()=>r("/admin/templates"),children:e.jsx(p2,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:F.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(qe,{variant:"secondary",children:F.category_label}),e.jsx(qe,{status:F.status==="active"?"approved":F.status==="draft"?"pending":"rejected",children:F.status==="active"?"Activo":F.status==="draft"?"Borrador":"Archivado"})]})]}),F.status==="draft"&&F.file_name&&e.jsxs(L,{onClick:()=>me.mutate(),loading:me.isPending,children:[e.jsx(Be,{className:"w-4 h-4"}),"Activar Template"]})]}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"xl:col-span-3 space-y-6",children:[e.jsxs(we,{children:[e.jsx(Vt,{children:e.jsxs(Qt,{className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"w-5 h-5"}),"Archivo del Template"]})}),e.jsxs(Ce,{children:[F.file_name?e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Oe,{className:"w-8 h-8 text-primary-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:F.file_name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[(F.file_size/1024).toFixed(1)," KB"]})]})]}),e.jsxs(L,{variant:"secondary",onClick:()=>c.current?.click(),loading:G.isPending,children:[e.jsx(S0,{className:"w-4 h-4"}),"Reemplazar"]})]}):e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center cursor-pointer hover:border-primary-500 transition-colors",onClick:()=>c.current?.click(),children:[e.jsx(S0,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 mb-2",children:"Haz clic para subir un archivo Word (.docx)"}),e.jsxs("p",{className:"text-sm text-gray-400",children:["El archivo debe contener variables en formato ","{{Variable}}"]})]}),e.jsx("input",{ref:c,type:"file",accept:".docx",onChange:ae,className:"hidden"})]})]}),F.variables?.length>0&&e.jsxs(we,{children:[e.jsx(Vt,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Qt,{className:"flex items-center gap-2",children:[e.jsx(pi,{className:"w-5 h-5"}),"Variables Detectadas (",F.variables.length,")"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(L,{size:"sm",variant:"secondary",onClick:()=>V.mutate(),loading:V.isPending,title:"Reasignar automaticamente desde variables del sistema",children:[e.jsx(ci,{className:"w-4 h-4"}),"Auto-asignar"]}),e.jsxs(L,{size:"sm",onClick:W,loading:f,disabled:Object.keys(p).length===0,children:[e.jsx($s,{className:"w-4 h-4"}),"Guardar Mapeo"]})]})]})}),e.jsx(Ce,{children:e.jsx("div",{className:"space-y-3",children:F.variables.map(ie=>e.jsxs("div",{className:"flex items-center gap-4 p-3 bg-gray-50 rounded-lg",children:[e.jsx("code",{className:"px-2 py-1 bg-white border rounded text-sm flex-shrink-0",children:`{{${ie}}}`}),e.jsx("span",{className:"text-gray-400",children:"="}),e.jsxs("select",{value:R[ie]||"",onChange:_e=>g({...p,[ie]:_e.target.value}),className:"flex-1 px-3 py-1.5 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"-- Seleccionar mapeo --"}),Object.keys(ge).length>0?Object.entries(ge).map(([_e,ze])=>e.jsx("optgroup",{label:Q[_e]||_e,children:ze.map(($e,ne)=>e.jsx("option",{value:$e.key,children:$e.name},$e.id||`${_e}-${ne}`))},_e)):e.jsxs(e.Fragment,{children:[e.jsx("optgroup",{label:"Empleado",children:Object.entries(X).filter(([,_e])=>_e.startsWith("employee.")).map(([_e,ze],$e)=>e.jsx("option",{value:ze,children:_e},`employee-${$e}-${ze}`))}),e.jsx("optgroup",{label:"Organizacion",children:Object.entries(X).filter(([,_e])=>_e.startsWith("organization.")).map(([_e,ze],$e)=>e.jsx("option",{value:ze,children:_e},`organization-${$e}-${ze}`))}),e.jsx("optgroup",{label:"Sistema",children:Object.entries(X).filter(([,_e])=>_e.startsWith("system.")).map(([_e,ze],$e)=>e.jsx("option",{value:ze,children:_e},`system-${$e}-${ze}`))}),e.jsx("optgroup",{label:"Solicitud",children:Object.entries(X).filter(([,_e])=>_e.startsWith("request.")).map(([_e,ze],$e)=>e.jsx("option",{value:ze,children:_e},`request-${$e}-${ze}`))})]})]})]},ie))})})]}),e.jsxs(we,{children:[e.jsx(Vt,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Qt,{className:"flex items-center gap-2",children:[e.jsx(At,{className:"w-5 h-5"}),"Vista Previa de Firmas"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[(j||k!==(F?.preview_scale||.7)||A!==(F?.preview_page_height||842))&&e.jsxs(L,{size:"sm",onClick:()=>$.mutate(),loading:$.isPending,children:[e.jsx($s,{className:"w-4 h-4"}),"Guardar Cambios"]}),e.jsxs(L,{size:"sm",variant:"secondary",onClick:()=>h(!0),children:[e.jsx(Ke,{className:"w-4 h-4"}),"Agregar Firmante"]})]})]})}),e.jsxs(Ce,{children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 mb-4",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Arrastra los campos de firma para posicionarlos."}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Escala:"}),e.jsx("input",{type:"number",min:"0.3",max:"2",step:"0.05",value:k,onChange:ie=>U(parseFloat(ie.target.value)||.7),className:"w-16 px-2 py-1 text-xs border rounded text-center"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-xs text-gray-500",children:"Alto pgina:"}),e.jsx("input",{type:"number",min:"500",max:"1500",step:"10",value:A,onChange:ie=>T(parseInt(ie.target.value)||842),className:"w-20 px-2 py-1 text-xs border rounded text-center"}),e.jsx("span",{className:"text-xs text-gray-400",children:"pts"})]})]})]}),e.jsx(A4,{templateId:s,hasFile:!!F.file_name,signatories:w,selectedId:E,onSelect:ie=>S(ie),onUpdatePosition:je,onUpdateSize:xe,scale:k,numPages:N,customPageHeight:A,customPageWidth:O}),E&&e.jsx("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg border",children:(()=>{const ie=w.find(_e=>_e.id===E);return ie?e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:ie.label||ie.role_label}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Posicin: X=",ie.x_position||350,", Y=",ie.y_position||700]}),e.jsxs("p",{className:"text-xs text-gray-400",children:["Tamao: ",ie.width||200," x ",ie.height||80," px | Fecha: ",Am.find(_e=>_e.value===(ie.date_position||"right"))?.label||"Derecha"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(L,{size:"sm",variant:"secondary",onClick:()=>m(ie),children:[e.jsx(ns,{className:"w-4 h-4"}),"Editar"]}),e.jsx(L,{size:"sm",variant:"danger",onClick:()=>{confirm("Eliminar este firmante?")&&(M.mutate(ie.id),S(null))},children:e.jsx(Nt,{className:"w-4 h-4"})})]})]}):null})()})]})]})]}),e.jsxs("div",{className:"xl:col-span-1 space-y-6",children:[e.jsxs(we,{children:[e.jsx(Vt,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Qt,{className:"flex items-center gap-2",children:[e.jsx(ht,{className:"w-5 h-5"}),"Firmantes (",w.length,")"]}),e.jsx(L,{size:"sm",onClick:()=>h(!0),children:e.jsx(Ke,{className:"w-4 h-4"})})]})}),e.jsxs(Ce,{children:[w.length>0&&e.jsx("div",{className:"mb-3 p-2 bg-blue-50 rounded-lg border border-blue-100",children:e.jsxs("p",{className:"text-xs text-blue-700",children:[e.jsx("strong",{children:"Orden de firma:"})," El nmero indica en qu secuencia deben firmar. Haz clic en ",e.jsx(ns,{className:"w-3 h-3 inline"})," para cambiar el orden."]})}),w.length>0?e.jsx("div",{className:"space-y-2",children:[...w].sort((ie,_e)=>(ie.position||0)-(_e.position||0)).map(ie=>e.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg cursor-pointer transition-colors ${E===ie.id?"bg-primary-50 ring-2 ring-primary-500":"bg-gray-50 hover:bg-gray-100"}`,onClick:()=>S(ie.id),children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("span",{className:"w-6 h-6 bg-primary-100 text-primary-700 rounded-full flex items-center justify-center text-xs font-bold",children:(ie.position??0)===0?1:ie.position}),e.jsx("span",{className:"text-[10px] text-gray-400",children:"orden"})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-sm truncate",children:ie.label}),e.jsx("p",{className:"text-xs text-gray-500",children:ie.role_label}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["(",ie.x_position||350,", ",ie.y_position||700,")"]})]}),ie.required&&e.jsx(qe,{variant:"secondary",className:"text-xs",children:"Req"}),e.jsx("button",{onClick:_e=>{_e.stopPropagation(),m(ie)},className:"p-1 hover:bg-blue-100 rounded text-blue-500",title:"Editar",children:e.jsx(ns,{className:"w-4 h-4"})}),e.jsx("button",{onClick:_e=>{_e.stopPropagation(),confirm("Eliminar este firmante?")&&(M.mutate(ie.id),E===ie.id&&S(null))},className:"p-1 hover:bg-red-100 rounded text-red-500",children:e.jsx(Nt,{className:"w-4 h-4"})})]},ie.id))}):e.jsxs("div",{className:"text-center py-4",children:[e.jsx(ht,{className:"w-8 h-8 text-gray-300 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-500",children:"No hay firmantes configurados"}),e.jsxs(L,{size:"sm",variant:"secondary",className:"mt-2",onClick:()=>h(!0),children:[e.jsx(Ke,{className:"w-4 h-4"}),"Agregar Firmante"]})]})]})]}),e.jsxs(we,{children:[e.jsx(Vt,{children:e.jsxs(Qt,{className:"flex items-center gap-2",children:[e.jsx(er,{className:"w-5 h-5"}),"Informacion"]})}),e.jsxs(Ce,{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Version"}),e.jsx("span",{className:"font-medium",children:F.version})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Creado"}),e.jsx("span",{className:"font-medium",children:new Date(F.created_at).toLocaleDateString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"Actualizado"}),e.jsx("span",{className:"font-medium",children:new Date(F.updated_at).toLocaleDateString()})]})]})]})]})]}),e.jsx(O4,{isOpen:u,onClose:()=>h(!1),templateId:s,pdfWidth:O,pdfHeight:A,totalPages:N,existingSignatories:w.length,onSuccess:()=>{}}),e.jsx(R4,{isOpen:!!x,onClose:()=>m(null),templateId:s,signatory:x,numPages:N,pdfWidth:O,pdfHeight:A,totalSignatories:w.length,onSuccess:()=>{}})]})}function L4({type:s,isOpen:r,onClose:i,onSuccess:c}){const u=et(),h=!!s,[x,m]=b.useState({name:s?.name||"",code:s?.code||"",description:s?.description||""}),[p,g]=b.useState(""),f=Ne({mutationFn:S=>Hl.create(S),onSuccess:()=>{u.invalidateQueries(["signatory-types"]),c?.(),i()},onError:S=>{g(S.response?.data?.error||S.response?.data?.errors?.join(", ")||"Error al crear tipo de firmante")}}),v=Ne({mutationFn:S=>Hl.update(s.id,S),onSuccess:()=>{u.invalidateQueries(["signatory-types"]),c?.(),i()},onError:S=>{g(S.response?.data?.error||S.response?.data?.errors?.join(", ")||"Error al actualizar tipo de firmante")}}),E=S=>{if(S.preventDefault(),g(""),!x.name.trim()){g("El nombre es requerido");return}h?v.mutate(x):f.mutate(x)};return r?e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsx("h3",{className:"text-lg font-semibold",children:h?"Editar Tipo de Firmante":"Nuevo Tipo de Firmante"}),e.jsx("button",{onClick:i,className:"p-1 hover:bg-gray-100 rounded",children:e.jsx(vt,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:E,className:"p-4 space-y-4",children:[p&&e.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-700",children:[e.jsx(st,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:p})]}),e.jsx(ue,{label:"Nombre",value:x.name,onChange:S=>m({...x,name:S.target.value}),placeholder:"Ej: Gerente de Operaciones",required:!0}),!h&&e.jsx(ue,{label:"Codigo (se genera automaticamente)",value:x.code,onChange:S=>m({...x,code:S.target.value}),placeholder:"Ej: operations_manager",hint:"Solo letras minusculas, numeros y guiones bajos"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripcion"}),e.jsx("textarea",{value:x.description,onChange:S=>m({...x,description:S.target.value}),placeholder:"Descripcion del tipo de firmante...",rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx(L,{type:"button",variant:"secondary",onClick:i,children:"Cancelar"}),e.jsxs(L,{type:"submit",loading:f.isPending||v.isPending,children:[e.jsx($s,{className:"w-4 h-4"}),h?"Guardar Cambios":"Crear Tipo"]})]})]})]})}):null}function q4({type:s,onEdit:r,onToggle:i,onDelete:c}){const u=s.is_system;return e.jsxs("tr",{className:`${s.active?"":"opacity-50 bg-gray-50"}`,children:[e.jsxs("td",{className:"px-4 py-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[u&&e.jsx(Xl,{className:"w-3 h-3 text-gray-400"}),e.jsx(Em,{className:"w-4 h-4 text-primary-500"}),e.jsx("span",{className:"font-medium",children:s.name})]}),s.description&&e.jsx("p",{className:"text-xs text-gray-500 mt-0.5 ml-6",children:s.description})]}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("code",{className:"px-2 py-1 bg-gray-100 rounded text-xs",children:s.code})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(qe,{variant:u?"secondary":"default",className:"text-xs",children:u?"Sistema":"Personalizado"})}),e.jsx("td",{className:"px-4 py-3",children:s.in_use?e.jsxs("span",{className:"text-sm text-gray-600",children:[s.usage_count," plantilla(s)"]}):e.jsx("span",{className:"text-sm text-gray-400",children:"Sin usar"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("button",{onClick:()=>i(s),className:`p-1 rounded ${s.active?"text-green-600":"text-gray-400"}`,title:s.active?"Desactivar":"Activar",children:s.active?e.jsx(co,{className:"w-5 h-5"}):e.jsx(io,{className:"w-5 h-5"})})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"flex items-center gap-1",children:!u&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>r(s),className:"p-1.5 hover:bg-gray-100 rounded text-gray-600",title:"Editar",children:e.jsx(ns,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>c(s),className:`p-1.5 rounded ${s.in_use?"text-gray-300 cursor-not-allowed":"hover:bg-red-50 text-red-500"}`,title:s.in_use?"No se puede eliminar (en uso)":"Eliminar",disabled:s.in_use,children:e.jsx(Nt,{className:"w-4 h-4"})})]})})})]})}function U4(){const s=et(),[r,i]=b.useState(!1),[c,u]=b.useState(null),[h,x]=b.useState(""),[m,p]=b.useState(""),{data:g,isLoading:f}=ke({queryKey:["signatory-types",{type:m}],queryFn:()=>Hl.list({type:m||void 0})}),v=Ne({mutationFn:U=>Hl.toggleActive(U),onSuccess:()=>s.invalidateQueries(["signatory-types"])}),E=Ne({mutationFn:U=>Hl.delete(U),onSuccess:()=>s.invalidateQueries(["signatory-types"]),onError:U=>{alert(U.response?.data?.error||"Error al eliminar")}}),S=Ne({mutationFn:()=>Hl.seedSystem(),onSuccess:()=>{s.invalidateQueries(["signatory-types"])}}),w=U=>{u(U),i(!0)},C=U=>{v.mutate(U.id)},j=U=>{if(U.in_use){alert(`No se puede eliminar este tipo porque esta siendo usado en ${U.usage_count} plantilla(s)`);return}confirm(`Esta seguro de eliminar el tipo de firmante "${U.name}"?`)&&E.mutate(U.id)},_=()=>{i(!1),u(null)},N=g?.data?.data||[],z=g?.data?.meta||{},k=h?N.filter(U=>U.name.toLowerCase().includes(h.toLowerCase())||U.code.toLowerCase().includes(h.toLowerCase())):N;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Tipos de Firmante"}),e.jsx("p",{className:"text-gray-500",children:"Gestiona los tipos de firmante disponibles para plantillas"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(L,{variant:"secondary",onClick:()=>S.mutate(),loading:S.isPending,children:[e.jsx(em,{className:"w-4 h-4"}),"Inicializar Sistema"]}),e.jsxs(L,{onClick:()=>i(!0),children:[e.jsx(Ke,{className:"w-4 h-4"}),"Nuevo Tipo"]})]})]}),e.jsx(we,{children:e.jsx(Ce,{className:"p-4",children:e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsx("div",{className:"flex-1 min-w-[200px]",children:e.jsxs("div",{className:"relative",children:[e.jsx(ra,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar tipos de firmante...",value:h,onChange:U=>x(U.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"})]})}),e.jsxs("select",{value:m,onChange:U=>p(U.target.value),className:"px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"Todos los tipos"}),e.jsx("option",{value:"system",children:"Sistema"}),e.jsx("option",{value:"custom",children:"Personalizados"})]})]})})}),e.jsx(we,{children:e.jsx(Ce,{className:"p-0",children:f?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500"})}):k.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ht,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay tipos de firmante"}),e.jsx("p",{className:"text-gray-500 mb-4",children:N.length===0?"Inicializa los tipos del sistema o crea uno personalizado":"No se encontraron tipos con los filtros aplicados"}),N.length===0&&e.jsxs(L,{onClick:()=>S.mutate(),loading:S.isPending,children:[e.jsx(em,{className:"w-4 h-4"}),"Inicializar Tipos del Sistema"]})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Nombre"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Codigo"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Tipo"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Uso"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Estado"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Acciones"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:k.map(U=>e.jsx(q4,{type:U,onEdit:w,onToggle:C,onDelete:j},U.id))})]})})})}),z.total>0&&e.jsxs("div",{className:"text-sm text-gray-500 text-center",children:["Mostrando ",k.length," de ",z.total," tipos de firmante"]}),e.jsx(L4,{type:c,isOpen:r,onClose:_})]})}const F4=[{value:"monthly",label:"Acumulacin Mensual"},{value:"yearly",label:"Acumulacin Anual"}],H4=[{value:"pdf",label:"PDF"},{value:"docx",label:"Word (DOCX)"},{value:"xlsx",label:"Excel (XLSX)"},{value:"pptx",label:"PowerPoint (PPTX)"},{value:"jpg",label:"Imagen JPG"},{value:"png",label:"Imagen PNG"},{value:"gif",label:"Imagen GIF"},{value:"txt",label:"Texto (TXT)"},{value:"csv",label:"CSV"}];function B4(){const s=et(),[r,i]=b.useState("organization"),[c,u]=b.useState(null),[h,x]=b.useState(!1),{data:m,isLoading:p,error:g}=ke({queryKey:["settings"],queryFn:()=>y0.get(),onSuccess:j=>{const _=j.data.data;u({name:_.organization?.name||"",legal_name:_.organization?.legal_name||"",tax_id:_.organization?.tax_id||"",address:_.organization?.address||"",city:_.organization?.city||"",country:_.organization?.country||"Colombia",phone:_.organization?.phone||"",email:_.organization?.email||"",website:_.organization?.website||"",vacation_days_per_year:_.hr?.vacation_days_per_year||15,vacation_accrual_policy:_.hr?.vacation_accrual_policy||"monthly",max_vacation_carryover:_.hr?.max_vacation_carryover||15,probation_period_months:_.hr?.probation_period_months||2,allowed_file_types:_.documents?.allowed_file_types||["pdf","docx","xlsx"],max_file_size_mb:_.documents?.max_file_size_mb||25,document_retention_years:_.documents?.document_retention_years||10,session_timeout_minutes:_.security?.session_timeout_minutes||480,password_min_length:_.security?.password_min_length||8,password_require_uppercase:_.security?.password_require_uppercase??!0,password_require_number:_.security?.password_require_number??!0,password_require_special:_.security?.password_require_special??!1,max_login_attempts:_.security?.max_login_attempts||5})}}),f=Ne({mutationFn:j=>y0.update(j),onSuccess:()=>{s.invalidateQueries(["settings"]),x(!0),setTimeout(()=>x(!1),3e3)}}),v=(j,_)=>{u(N=>({...N,[j]:_}))},E=j=>{u(_=>({..._,allowed_file_types:_.allowed_file_types.includes(j)?_.allowed_file_types.filter(N=>N!==j):[..._.allowed_file_types,j]}))},S=()=>{f.mutate(c)},w=[{id:"organization",label:"Organizacin",icon:Ut},{id:"hr",label:"Recursos Humanos",icon:ht},{id:"documents",label:"Documentos",icon:Oe},{id:"security",label:"Seguridad",icon:as}];if(p)return e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(ci,{className:"w-8 h-8 animate-spin text-primary-600"})});if(g)return e.jsxs("div",{className:"bg-danger-50 border border-danger-200 rounded-lg p-4 flex items-center gap-3",children:[e.jsx(st,{className:"w-5 h-5 text-danger-600"}),e.jsxs("span",{className:"text-danger-700",children:["Error al cargar configuracin: ",g.message]})]});if(!c)return null;const C=m?.data?.data;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Configuracin"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Administra la configuracin del sistema"})]}),e.jsxs("button",{onClick:S,disabled:f.isLoading,className:"btn-primary flex items-center gap-2",children:[f.isLoading?e.jsx(ci,{className:"w-4 h-4 animate-spin"}):e.jsx($s,{className:"w-4 h-4"}),"Guardar Cambios"]})]}),h&&e.jsxs("div",{className:"bg-success-50 border border-success-200 rounded-lg p-4 flex items-center gap-3",children:[e.jsx(Be,{className:"w-5 h-5 text-success-600"}),e.jsx("span",{className:"text-success-700",children:"Configuracin guardada correctamente"})]}),e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 flex items-center gap-4",children:[e.jsx(j_,{className:"w-5 h-5 text-gray-500"}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:C?.system?.app_name})," ",""," ",e.jsxs("span",{children:["v",C?.system?.version]})," ",""," ",e.jsx("span",{className:"capitalize",children:C?.system?.environment})]})]}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex gap-4",children:w.map(j=>e.jsxs("button",{onClick:()=>i(j.id),className:`flex items-center gap-2 px-4 py-3 border-b-2 font-medium text-sm transition-colors ${r===j.id?"border-primary-600 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(j.icon,{className:"w-4 h-4"}),j.label]},j.id))})}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[r==="organization"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(Ut,{className:"w-5 h-5"}),"Informacin de la Organizacin"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre de la Empresa"}),e.jsx("input",{type:"text",value:c.name,onChange:j=>v("name",j.target.value),className:"input",placeholder:"Mi Empresa S.A.S."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Razn Social"}),e.jsx("input",{type:"text",value:c.legal_name,onChange:j=>v("legal_name",j.target.value),className:"input",placeholder:"Mi Empresa S.A.S."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"NIT"}),e.jsx("input",{type:"text",value:c.tax_id,onChange:j=>v("tax_id",j.target.value),className:"input",placeholder:"900.123.456-7"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Telfono"}),e.jsx("input",{type:"text",value:c.phone,onChange:j=>v("phone",j.target.value),className:"input",placeholder:"+57 601 234 5678"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Corporativo"}),e.jsx("input",{type:"email",value:c.email,onChange:j=>v("email",j.target.value),className:"input",placeholder:"contacto@empresa.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sitio Web"}),e.jsx("input",{type:"url",value:c.website,onChange:j=>v("website",j.target.value),className:"input",placeholder:"https://www.empresa.com"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Direccin"}),e.jsx("input",{type:"text",value:c.address,onChange:j=>v("address",j.target.value),className:"input",placeholder:"Calle 100 # 10-20, Oficina 501"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ciudad"}),e.jsx("input",{type:"text",value:c.city,onChange:j=>v("city",j.target.value),className:"input",placeholder:"Bogot D.C."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pas"}),e.jsx("input",{type:"text",value:c.country,onChange:j=>v("country",j.target.value),className:"input",placeholder:"Colombia"})]})]})]}),r==="hr"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(ht,{className:"w-5 h-5"}),"Configuracin de Recursos Humanos"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Das de Vacaciones por Ao"}),e.jsx("input",{type:"number",value:c.vacation_days_per_year,onChange:j=>v("vacation_days_per_year",parseInt(j.target.value)),className:"input",min:"1",max:"30"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Segn el CST Art. 186, mnimo 15 das hbiles"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Poltica de Acumulacin"}),e.jsx("select",{value:c.vacation_accrual_policy,onChange:j=>v("vacation_accrual_policy",j.target.value),className:"input",children:F4.map(j=>e.jsx("option",{value:j.value,children:j.label},j.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mximo Das Acumulables"}),e.jsx("input",{type:"number",value:c.max_vacation_carryover,onChange:j=>v("max_vacation_carryover",parseInt(j.target.value)),className:"input",min:"0",max:"60"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Das que se pueden trasladar al siguiente ao"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Perodo de Prueba (meses)"}),e.jsx("input",{type:"number",value:c.probation_period_months,onChange:j=>v("probation_period_months",parseInt(j.target.value)),className:"input",min:"0",max:"6"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Segn el CST, mximo 2 meses"})]})]})]}),r==="documents"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(Oe,{className:"w-5 h-5"}),"Configuracin de Documentos"]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Tipos de Archivo Permitidos"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:H4.map(j=>e.jsxs("button",{onClick:()=>E(j.value),className:`px-3 py-1.5 rounded-full text-sm font-medium transition-colors ${c.allowed_file_types.includes(j.value)?"bg-primary-100 text-primary-700 border border-primary-300":"bg-gray-100 text-gray-600 border border-gray-200 hover:bg-gray-200"}`,children:[".",j.value]},j.value))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tamao Mximo de Archivo (MB)"}),e.jsx("input",{type:"number",value:c.max_file_size_mb,onChange:j=>v("max_file_size_mb",parseInt(j.target.value)),className:"input",min:"1",max:"100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Retencin de Documentos (aos)"}),e.jsx("input",{type:"number",value:c.document_retention_years,onChange:j=>v("document_retention_years",parseInt(j.target.value)),className:"input",min:"1",max:"50"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Tiempo mnimo de conservacin de documentos"})]})]})]})]}),r==="security"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(as,{className:"w-5 h-5"}),"Configuracin de Seguridad"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tiempo de Sesin (minutos)"}),e.jsx("input",{type:"number",value:c.session_timeout_minutes,onChange:j=>v("session_timeout_minutes",parseInt(j.target.value)),className:"input",min:"15",max:"1440"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Tiempo de inactividad antes de cerrar sesin"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Intentos Mximos de Login"}),e.jsx("input",{type:"number",value:c.max_login_attempts,onChange:j=>v("max_login_attempts",parseInt(j.target.value)),className:"input",min:"3",max:"10"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Bloqueo temporal despus de estos intentos fallidos"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Longitud Mnima de Contrasea"}),e.jsx("input",{type:"number",value:c.password_min_length,onChange:j=>v("password_min_length",parseInt(j.target.value)),className:"input",min:"6",max:"20"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Requisitos de Contrasea"}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:c.password_require_uppercase,onChange:j=>v("password_require_uppercase",j.target.checked),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Requiere maysculas"})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:c.password_require_number,onChange:j=>v("password_require_number",j.target.checked),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Requiere nmeros"})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:c.password_require_special,onChange:j=>v("password_require_special",j.target.checked),className:"w-4 h-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Requiere caracteres especiales"})]})]})]})]})]})]})}function $4(){const[s,r]=b.useState(""),[i,c]=b.useState(!1),[u,h]=b.useState(null),[x,m]=b.useState(""),[p,g]=b.useState(""),f=et(),{data:v,isLoading:E}=ke({queryKey:["departments"],queryFn:()=>Zr.list()}),S=Ne({mutationFn:A=>Zr.create({name:A}),onSuccess:()=>{f.invalidateQueries(["departments"]),c(!1),m(""),g("")},onError:A=>{g(A.response?.data?.error||"Error al crear departamento")}}),w=Ne({mutationFn:({id:A,name:T})=>Zr.update(A,{name:T}),onSuccess:()=>{f.invalidateQueries(["departments"]),h(null)},onError:A=>{alert(A.response?.data?.error||"Error al actualizar departamento")}}),C=Ne({mutationFn:A=>Zr.delete(A),onSuccess:()=>{f.invalidateQueries(["departments"])},onError:A=>{alert(A.response?.data?.error||"Error al eliminar departamento")}}),j=v?.data?.data||[],_=v?.data?.meta||{},N=j.filter(A=>A.name.toLowerCase().includes(s.toLowerCase())||A.code.toLowerCase().includes(s.toLowerCase())),z=A=>{A.preventDefault(),x.trim()&&S.mutate(x.trim())},k=A=>{A.preventDefault(),u&&u.newName?.trim()&&w.mutate({id:u.id,name:u.newName.trim()})},U=A=>{if(A.employee_count>0){alert(`No se puede eliminar "${A.name}" porque tiene ${A.employee_count} empleados asignados.`);return}confirm(`Ests seguro de eliminar el departamento "${A.name}"?`)&&C.mutate(A.id)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-slate-100 rounded-lg",children:e.jsx(Ut,{className:"w-6 h-6 text-slate-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Departamentos"}),e.jsx("p",{className:"text-gray-500",children:"Gestin de departamentos y reas"})]})]}),e.jsxs(L,{onClick:()=>c(!0),children:[e.jsx(Ke,{className:"h-4 w-4 mr-2"}),"Nuevo Departamento"]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:e.jsx(Ut,{className:"h-5 w-5 text-indigo-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:_.total||0}),e.jsx("p",{className:"text-sm text-gray-500",children:"Departamentos"})]})]})}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(ht,{className:"h-5 w-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:_.total_employees||0}),e.jsx("p",{className:"text-sm text-gray-500",children:"Empleados Total"})]})]})}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-amber-100 rounded-lg",children:e.jsx(Be,{className:"h-5 w-5 text-amber-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:j.filter(A=>A.is_configured).length}),e.jsx("p",{className:"text-sm text-gray-500",children:"Configurados"})]})]})})]}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:e.jsxs("div",{className:"relative max-w-md",children:[e.jsx(ra,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar departamentos...",value:s,onChange:A=>r(A.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:E?e.jsx("div",{className:"p-8 text-center text-gray-500",children:"Cargando..."}):N.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(Ut,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:s?"No se encontraron departamentos":"No hay departamentos"}),e.jsx("p",{className:"text-gray-500 mb-4",children:s?"Intenta con otra bsqueda":"Crea el primer departamento para comenzar"}),!s&&e.jsxs(L,{onClick:()=>c(!0),children:[e.jsx(Ke,{className:"h-4 w-4 mr-2"}),"Crear Departamento"]})]}):e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Departamento"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cdigo"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Empleados"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:N.map(A=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-indigo-50 rounded-lg",children:e.jsx(Ut,{className:"h-4 w-4 text-indigo-600"})}),e.jsx("span",{className:"font-medium text-gray-900",children:A.name})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("code",{className:"text-sm text-gray-600 bg-gray-100 px-2 py-1 rounded",children:A.code})}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(ht,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-gray-900",children:A.employee_count})]})}),e.jsx("td",{className:"px-4 py-3 text-center",children:A.is_configured?e.jsx(qe,{variant:"success",children:"Configurado"}):e.jsx(qe,{variant:"warning",children:"Sin configurar"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>h({...A,newName:A.name}),className:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded",title:"Editar",children:e.jsx(ns,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>U(A),className:`p-1.5 rounded ${A.employee_count>0?"text-gray-300 cursor-not-allowed":"text-gray-400 hover:text-red-600 hover:bg-red-50"}`,title:A.employee_count>0?"No se puede eliminar (tiene empleados)":"Eliminar",disabled:A.employee_count>0,children:e.jsx(Nt,{className:"h-4 w-4"})})]})})]},A.id))})]})}),e.jsx(Qe,{isOpen:i,onClose:()=>{c(!1),m(""),g("")},title:"Nuevo Departamento",children:e.jsxs("form",{onSubmit:z,className:"space-y-4",children:[e.jsx(ue,{label:"Nombre del Departamento",value:x,onChange:A=>{m(A.target.value),g("")},placeholder:"Ej: Recursos Humanos",autoFocus:!0,required:!0}),p&&e.jsxs("div",{className:"flex items-center gap-2 text-red-600 text-sm",children:[e.jsx(st,{className:"h-4 w-4"}),p]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx(L,{type:"button",variant:"secondary",onClick:()=>{c(!1),m(""),g("")},children:"Cancelar"}),e.jsxs(L,{type:"submit",loading:S.isPending,children:[e.jsx(Ke,{className:"h-4 w-4 mr-2"}),"Crear"]})]})]})}),e.jsx(Qe,{isOpen:!!u,onClose:()=>h(null),title:"Editar Departamento",children:u&&e.jsxs("form",{onSubmit:k,className:"space-y-4",children:[e.jsx(ue,{label:"Nombre del Departamento",value:u.newName,onChange:A=>h({...u,newName:A.target.value}),placeholder:"Nombre del departamento",autoFocus:!0,required:!0}),u.employee_count>0&&e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3",children:e.jsxs("p",{className:"text-sm text-amber-700",children:["Este departamento tiene ",e.jsx("strong",{children:u.employee_count})," empleados. Al cambiar el nombre, se actualizar en todos los registros."]})}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx(L,{type:"button",variant:"secondary",onClick:()=>h(null),children:"Cancelar"}),e.jsxs(L,{type:"submit",loading:w.isPending,children:[e.jsx(Be,{className:"h-4 w-4 mr-2"}),"Guardar"]})]})]})})]})}const pl={5:"bg-purple-100 text-purple-800 border-purple-200",4:"bg-blue-100 text-blue-800 border-blue-200",3:"bg-green-100 text-green-800 border-green-200",2:"bg-gray-100 text-gray-800 border-gray-200",1:"bg-slate-100 text-slate-600 border-slate-200"},Jr=[{id:"general",name:"General",icon:so,description:"Mdulos generales del sistema",submodules:[{id:"dashboard",name:"Inicio / Dashboard",functions:[{id:"view",name:"Ver dashboard",defaultLevels:[1,2,3,4,5]},{id:"view_stats",name:"Ver estadsticas",defaultLevels:[2,3,4,5]}]},{id:"documents",name:"Documentos",functions:[{id:"view",name:"Ver documentos",defaultLevels:[1,2,3,4,5]},{id:"create",name:"Crear documentos",defaultLevels:[2,3,4,5]},{id:"edit",name:"Editar documentos",defaultLevels:[3,4,5]},{id:"delete",name:"Eliminar documentos",defaultLevels:[4,5]},{id:"download",name:"Descargar documentos",defaultLevels:[1,2,3,4,5]}]},{id:"folders",name:"Carpetas",functions:[{id:"view",name:"Ver carpetas",defaultLevels:[1,2,3,4,5]},{id:"create",name:"Crear carpetas",defaultLevels:[2,3,4,5]},{id:"edit",name:"Editar carpetas",defaultLevels:[3,4,5]},{id:"delete",name:"Eliminar carpetas",defaultLevels:[4,5]}]},{id:"profile",name:"Mi Perfil",functions:[{id:"view",name:"Ver perfil",defaultLevels:[1,2,3,4,5]},{id:"edit",name:"Editar perfil",defaultLevels:[1,2,3,4,5]},{id:"change_password",name:"Cambiar contrasea",defaultLevels:[1,2,3,4,5]},{id:"manage_signatures",name:"Gestionar firmas",defaultLevels:[2,3,4,5]}]}]},{id:"hr",name:"Recursos Humanos",icon:ht,description:"Gestin de recursos humanos",submodules:[{id:"my_requests",name:"Mis Solicitudes",functions:[{id:"view",name:"Ver mis solicitudes",defaultLevels:[1,2,3,4,5]},{id:"create_vacation",name:"Solicitar vacaciones",defaultLevels:[2,3,4,5]},{id:"create_certification",name:"Solicitar certificaciones",defaultLevels:[2,3,4,5]},{id:"cancel",name:"Cancelar solicitudes",defaultLevels:[2,3,4,5]}]},{id:"organigrama",name:"Organigrama",functions:[{id:"view",name:"Ver organigrama",defaultLevels:[1,2,3,4,5]}]},{id:"approvals",name:"Aprobaciones",functions:[{id:"view",name:"Ver aprobaciones pendientes",defaultLevels:[3,4,5]},{id:"approve",name:"Aprobar solicitudes",defaultLevels:[3,4,5]},{id:"reject",name:"Rechazar solicitudes",defaultLevels:[3,4,5]}]},{id:"employees",name:"Empleados",functions:[{id:"view",name:"Ver empleados",defaultLevels:[3,4,5]},{id:"create",name:"Crear empleados",defaultLevels:[3,5]},{id:"edit",name:"Editar empleados",defaultLevels:[3,5]},{id:"view_balance",name:"Ver saldo vacaciones",defaultLevels:[3,4,5]},{id:"generate_docs",name:"Generar documentos",defaultLevels:[3,5]},{id:"create_account",name:"Crear cuenta de usuario",defaultLevels:[3,5]}]},{id:"hr_documents",name:"Documentacin HR",functions:[{id:"view",name:"Ver documentacin",defaultLevels:[3,5]},{id:"manage_variables",name:"Gestionar variables",defaultLevels:[3,5]}]},{id:"hr_dashboard",name:"Dashboard HR",functions:[{id:"view",name:"Ver dashboard HR",defaultLevels:[3,5]},{id:"export",name:"Exportar reportes",defaultLevels:[3,5]}]}]},{id:"legal",name:"Gestin Legal",icon:Bg,description:"Contratos y terceros",submodules:[{id:"contracts",name:"Contratos",functions:[{id:"view",name:"Ver contratos",defaultLevels:[4,5]},{id:"create",name:"Crear contratos",defaultLevels:[4,5]},{id:"edit",name:"Editar contratos",defaultLevels:[4,5]},{id:"delete",name:"Eliminar contratos",defaultLevels:[5]},{id:"submit",name:"Enviar a aprobacin",defaultLevels:[4,5]},{id:"generate_doc",name:"Generar documento",defaultLevels:[4,5]},{id:"sign",name:"Firmar contratos",defaultLevels:[4,5]}]},{id:"legal_approvals",name:"Aprobaciones Legales",functions:[{id:"view",name:"Ver aprobaciones",defaultLevels:[4,5]},{id:"approve",name:"Aprobar contratos",defaultLevels:[4,5]},{id:"reject",name:"Rechazar contratos",defaultLevels:[4,5]}]},{id:"third_parties",name:"Terceros",functions:[{id:"view",name:"Ver terceros",defaultLevels:[4,5]},{id:"create",name:"Crear terceros",defaultLevels:[4,5]},{id:"edit",name:"Editar terceros",defaultLevels:[4,5]},{id:"delete",name:"Eliminar terceros",defaultLevels:[5]},{id:"manage_types",name:"Gestionar tipos",defaultLevels:[5]}]}]},{id:"system",name:"Sistema",icon:er,description:"Configuracin del sistema",submodules:[{id:"settings",name:"Configuracin",functions:[{id:"view",name:"Ver configuracin",defaultLevels:[5]},{id:"edit",name:"Editar configuracin",defaultLevels:[5]}]},{id:"users",name:"Usuarios",functions:[{id:"view",name:"Ver usuarios",defaultLevels:[5]},{id:"create",name:"Crear usuarios",defaultLevels:[5]},{id:"edit",name:"Editar usuarios",defaultLevels:[5]},{id:"delete",name:"Eliminar usuarios",defaultLevels:[5]},{id:"toggle_active",name:"Activar/Desactivar",defaultLevels:[5]},{id:"assign_roles",name:"Asignar roles",defaultLevels:[5]},{id:"manage_permissions",name:"Gestionar permisos",defaultLevels:[5]}]},{id:"departments",name:"reas / Departamentos",functions:[{id:"view",name:"Ver reas",defaultLevels:[5]},{id:"create",name:"Crear reas",defaultLevels:[5]},{id:"edit",name:"Editar reas",defaultLevels:[5]},{id:"delete",name:"Eliminar reas",defaultLevels:[5]}]},{id:"templates",name:"Templates",functions:[{id:"view",name:"Ver templates",defaultLevels:[5]},{id:"create",name:"Crear templates",defaultLevels:[5]},{id:"edit",name:"Editar templates",defaultLevels:[5]},{id:"delete",name:"Eliminar templates",defaultLevels:[5]},{id:"upload",name:"Subir archivos",defaultLevels:[5]},{id:"manage_signatories",name:"Gestionar firmantes",defaultLevels:[5]},{id:"manage_variables",name:"Gestionar variables",defaultLevels:[5]}]}]}];function V4({checked:s,onChange:r,disabled:i,level:c}){const u={5:"checked:bg-purple-500 checked:border-purple-500",4:"checked:bg-blue-500 checked:border-blue-500",3:"checked:bg-green-500 checked:border-green-500",2:"checked:bg-gray-500 checked:border-gray-500",1:"checked:bg-slate-400 checked:border-slate-400"};return e.jsx("input",{type:"checkbox",checked:s,onChange:r,disabled:i,className:`w-5 h-5 rounded border-2 border-gray-300 cursor-pointer transition-colors
        ${u[c]||""}
        ${i?"opacity-50 cursor-not-allowed":"hover:border-gray-400"}
      `})}function Q4({permissions:s,onChange:r}){const[i,c]=b.useState(["general","hr","legal","system"]),[u,h]=b.useState([]),x=S=>{c(w=>w.includes(S)?w.filter(C=>C!==S):[...w,S])},m=S=>{h(w=>w.includes(S)?w.filter(C=>C!==S):[...w,S])},p=(S,w,C,j)=>{const _=`${S}.${w}.${C}`;return s[_]?.includes(j)??!1},g=(S,w,C,j)=>{const _=`${S}.${w}.${C}`,N=s[_]||[],z=N.includes(j)?N.filter(k=>k!==j):[...N,j].sort((k,U)=>k-U);r({...s,[_]:z})},f=S=>{const w={...s};Jr.forEach(C=>{C.submodules.forEach(j=>{j.functions.forEach(_=>{const N=`${C.id}.${j.id}.${_.id}`,z=w[N]||[];z.includes(S)?w[N]=z.filter(k=>k!==S):w[N]=[...z,S].sort((k,U)=>k-U)})})}),r(w)},v=(S,w)=>{const C=Jr.find(_=>_.id===S);if(!C)return;const j={...s};C.submodules.forEach(_=>{_.functions.forEach(N=>{const z=`${S}.${_.id}.${N.id}`,k=j[z]||[];k.includes(w)?j[z]=k.filter(U=>U!==w):j[z]=[...k,w].sort((U,A)=>U-A)})}),r(j)},E=()=>{const S={};Jr.forEach(w=>{w.submodules.forEach(C=>{C.functions.forEach(j=>{const _=`${w.id}.${C.id}.${j.id}`;S[_]=[...j.defaultLevels]})})}),r(S)};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"sticky top-0 bg-white z-10 pb-2 border-b",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700",children:"Configuracin de Permisos por Nivel"}),e.jsx(L,{variant:"secondary",size:"sm",onClick:E,children:"Restaurar Predeterminados"})]}),e.jsxs("div",{className:"grid grid-cols-[1fr_repeat(5,60px)] gap-2 items-center text-center",children:[e.jsx("div",{className:"text-left text-xs font-medium text-gray-500 uppercase",children:"Mdulo / Funcin"}),[5,4,3,2,1].map(S=>e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("button",{onClick:()=>f(S),className:`px-2 py-1 text-xs font-bold rounded-full border transition-colors hover:opacity-80 ${pl[S]}`,title:`Toggle todos nivel ${S}`,children:["N",S]}),e.jsx("span",{className:"text-[10px] text-gray-500 mt-0.5",children:Ir[S]})]},S))]})]}),e.jsx("div",{className:"space-y-2 max-h-[500px] overflow-y-auto",children:Jr.map(S=>{const w=S.icon,C=i.includes(S.id);return e.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 cursor-pointer hover:bg-gray-100 transition-colors",onClick:()=>x(S.id),children:[C?e.jsx(Gn,{className:"w-4 h-4 text-gray-400"}):e.jsx(ys,{className:"w-4 h-4 text-gray-400"}),e.jsx(w,{className:"w-5 h-5 text-gray-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"font-semibold text-gray-900",children:S.name}),e.jsx("span",{className:"text-xs text-gray-500 ml-2",children:S.description})]}),e.jsx("div",{className:"flex gap-1",onClick:j=>j.stopPropagation(),children:[5,4,3,2,1].map(j=>e.jsx("button",{onClick:()=>v(S.id,j),className:`w-6 h-6 rounded text-[10px] font-bold border transition-colors hover:opacity-80 ${pl[j]}`,title:`Toggle ${S.name} para nivel ${j}`,children:j},j))})]}),C&&e.jsx("div",{className:"border-t border-gray-200",children:S.submodules.map(j=>{const _=u.includes(`${S.id}.${j.id}`);return e.jsxs("div",{className:"border-b border-gray-100 last:border-b-0",children:[e.jsxs("div",{className:"flex items-center gap-3 p-2 pl-10 cursor-pointer hover:bg-gray-50 transition-colors",onClick:()=>m(`${S.id}.${j.id}`),children:[_?e.jsx(Gn,{className:"w-3 h-3 text-gray-400"}):e.jsx(ys,{className:"w-3 h-3 text-gray-400"}),e.jsx("span",{className:"flex-1 font-medium text-gray-700 text-sm",children:j.name})]}),_&&e.jsx("div",{className:"bg-white",children:j.functions.map(N=>e.jsxs("div",{className:"grid grid-cols-[1fr_repeat(5,60px)] gap-2 items-center p-2 pl-16 hover:bg-gray-50 text-center",children:[e.jsx("div",{className:"text-left text-sm text-gray-600",children:N.name}),[5,4,3,2,1].map(z=>e.jsx("div",{className:"flex justify-center",children:e.jsx(V4,{checked:p(S.id,j.id,N.id,z),onChange:()=>g(S.id,j.id,N.id,z),level:z})},z))]},N.id))})]},j.id)})})]},S.id)})})]})}function G4(){const[s,r]=b.useState(""),[i,c]=b.useState(""),[u,h]=b.useState(""),[x,m]=b.useState(!1),[p,g]=b.useState(null),[f,v]=b.useState(null),[E,S]=b.useState(!1),[w,C]=b.useState(()=>{const Q={};return Jr.forEach(ie=>{ie.submodules.forEach(_e=>{_e.functions.forEach(ze=>{const $e=`${ie.id}.${_e.id}.${ze.id}`;Q[$e]=[...ze.defaultLevels]})})}),Q}),[j,_]=b.useState({email:"",first_name:"",last_name:"",department:"",title:"",role_names:["employee"]}),[N,z]=b.useState(""),k=et(),{data:U,isLoading:A}=ke({queryKey:["admin-users",s,i,u],queryFn:()=>xl.list({search:s||void 0,level:i||void 0,status:u||void 0,per_page:100})}),{data:T}=ke({queryKey:["admin-roles"],queryFn:()=>xl.getRoles()}),{data:O}=ke({queryKey:["admin-users-stats"],queryFn:()=>xl.getStats()}),{data:ee}=ke({queryKey:["admin-departments"],queryFn:()=>Zr.list({status:"active",per_page:100})}),B=Ne({mutationFn:Q=>xl.create(Q),onSuccess:()=>{k.invalidateQueries(["admin-users"]),k.invalidateQueries(["admin-users-stats"]),m(!1),Y()},onError:Q=>{z(Q.response?.data?.error||"Error al crear usuario")}}),ye=Ne({mutationFn:({id:Q,data:ie})=>xl.update(Q,ie),onSuccess:()=>{k.invalidateQueries(["admin-users"]),g(null),Y()},onError:Q=>{z(Q.response?.data?.error||"Error al actualizar usuario")}}),F=Ne({mutationFn:Q=>xl.toggleActive(Q),onSuccess:()=>{k.invalidateQueries(["admin-users"]),k.invalidateQueries(["admin-users-stats"])},onError:Q=>{alert(Q.response?.data?.error||"Error al cambiar estado")}}),te=Ne({mutationFn:({id:Q,roleNames:ie})=>xl.assignRoles(Q,ie),onSuccess:()=>{k.invalidateQueries(["admin-users"]),v(null)},onError:Q=>{alert(Q.response?.data?.error||"Error al asignar roles")}}),je=Ne({mutationFn:Q=>xl.delete(Q),onSuccess:()=>{k.invalidateQueries(["admin-users"]),k.invalidateQueries(["admin-users-stats"])},onError:Q=>{alert(Q.response?.data?.error||"Error al eliminar usuario")}}),xe=U?.data?.data||[],$=T?.data?.data||[],pe=O?.data?.data||{},G=ee?.data?.data||[],Y=()=>{_({email:"",first_name:"",last_name:"",department:"",title:"",role_names:["employee"]}),z("")},me=Q=>{Q.preventDefault(),B.mutate(j)},M=Q=>{Q.preventDefault(),ye.mutate({id:p.id,data:j})},V=Q=>{_({email:Q.email,first_name:Q.first_name,last_name:Q.last_name,department:Q.department||"",title:Q.title||"",role_names:Q.roles||["employee"]}),g(Q)},ae=Q=>{confirm(`Ests seguro de eliminar al usuario "${Q.full_name}"? Esta accin no se puede deshacer.`)&&je.mutate(Q.id)},W=Q=>{const ie=Q.active?"desactivar":"activar";confirm(`Ests seguro de ${ie} al usuario "${Q.full_name}"?`)&&F.mutate(Q.id)},R=Q=>{_(ie=>{const _e=ie.role_names||[];return _e.includes(Q)?{...ie,role_names:_e.filter(ze=>ze!==Q)}:{...ie,role_names:[..._e,Q]}})},X=(Q,ie)=>{te.mutate({id:Q.id,roleNames:ie})},ge=()=>{console.log("Saving permissions:",w),S(!1),alert("Permisos guardados correctamente")};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(as,{className:"w-6 h-6 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Usuarios"}),e.jsx("p",{className:"text-gray-500",children:"Gestin de usuarios y niveles de permisos"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(L,{variant:"secondary",onClick:()=>S(!0),children:[e.jsx(Xl,{className:"h-4 w-4 mr-2"}),"Gestionar Permisos"]}),e.jsxs(L,{onClick:()=>m(!0),children:[e.jsx(Ke,{className:"h-4 w-4 mr-2"}),"Nuevo Usuario"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4",children:[e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gray-100 rounded-lg",children:e.jsx(ht,{className:"h-5 w-5 text-gray-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:pe.total||0}),e.jsx("p",{className:"text-sm text-gray-500",children:"Total"})]})]})}),[5,4,3,2,1].map(Q=>e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${pl[Q]}`,children:e.jsx(as,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:pe.by_level?.[Q]||0}),e.jsx("p",{className:"text-xs text-gray-500",children:Ir[Q]})]})]})},Q))]}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[e.jsx(ra,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar por nombre o email...",value:s,onChange:Q=>r(Q.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500"})]}),e.jsxs("select",{value:i,onChange:Q=>c(Q.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",children:[e.jsx("option",{value:"",children:"Todos los niveles"}),[5,4,3,2,1].map(Q=>e.jsxs("option",{value:Q,children:["Nivel ",Q," - ",Ir[Q]]},Q))]}),e.jsxs("select",{value:u,onChange:Q=>h(Q.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",children:[e.jsx("option",{value:"",children:"Todos los estados"}),e.jsx("option",{value:"active",children:"Activos"}),e.jsx("option",{value:"inactive",children:"Inactivos"})]})]})}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 rounded-lg border border-purple-200 p-4",children:[e.jsxs("h3",{className:"text-sm font-semibold text-purple-900 mb-3 flex items-center gap-2",children:[e.jsx(as,{className:"h-4 w-4"}),"Niveles de Permisos"]}),e.jsx("div",{className:"flex flex-wrap gap-3",children:[5,4,3,2,1].map(Q=>e.jsxs("div",{className:`px-3 py-1.5 rounded-full text-sm font-medium border ${pl[Q]}`,children:[e.jsxs("span",{className:"font-bold",children:["Nivel ",Q]})," - ",Ir[Q]]},Q))})]}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:A?e.jsx("div",{className:"p-8 text-center text-gray-500",children:"Cargando..."}):xe.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(ht,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:s?"No se encontraron usuarios":"No hay usuarios"}),e.jsx("p",{className:"text-gray-500 mb-4",children:s?"Intenta con otra bsqueda":"Crea el primer usuario para comenzar"}),!s&&e.jsxs(L,{onClick:()=>m(!0),children:[e.jsx(Ke,{className:"h-4 w-4 mr-2"}),"Crear Usuario"]})]}):e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Usuario"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Departamento"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nivel"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Roles"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:xe.map(Q=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-white font-medium ${Q.permission_level===5?"bg-purple-500":Q.permission_level===4?"bg-blue-500":Q.permission_level===3?"bg-green-500":Q.permission_level===2?"bg-gray-500":"bg-slate-400"}`,children:[Q.first_name?.[0],Q.last_name?.[0]]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:Q.full_name}),e.jsxs("p",{className:"text-sm text-gray-500 flex items-center gap-1",children:[e.jsx(lo,{className:"h-3 w-3"}),Q.email]})]})]})}),e.jsx("td",{className:"px-4 py-3",children:Q.department?e.jsxs("div",{className:"flex items-center gap-1 text-gray-600",children:[e.jsx(Ut,{className:"h-4 w-4 text-gray-400"}),Q.department]}):e.jsx("span",{className:"text-gray-400",children:"-"})}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-bold border ${pl[Q.permission_level]||pl[1]}`,children:Q.permission_level})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"flex flex-wrap justify-center gap-1",children:Q.roles?.map(ie=>e.jsx(qe,{variant:ie==="admin"?"danger":"default",size:"sm",children:ie},ie))})}),e.jsx("td",{className:"px-4 py-3 text-center",children:Q.active?e.jsx(qe,{variant:"success",children:"Activo"}):e.jsx(qe,{variant:"secondary",children:"Inactivo"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[e.jsx("button",{onClick:()=>v(Q),className:"p-1.5 text-purple-500 hover:text-purple-700 hover:bg-purple-50 rounded",title:"Asignar roles",children:e.jsx(as,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>V(Q),className:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded",title:"Editar",children:e.jsx(ns,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>W(Q),className:`p-1.5 rounded ${Q.active?"text-amber-500 hover:text-amber-700 hover:bg-amber-50":"text-green-500 hover:text-green-700 hover:bg-green-50"}`,title:Q.active?"Desactivar":"Activar",children:Q.active?e.jsx($g,{className:"h-4 w-4"}):e.jsx(Em,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>ae(Q),className:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded",title:"Eliminar",children:e.jsx(Nt,{className:"h-4 w-4"})})]})})]},Q.id))})]})}),e.jsx(Qe,{isOpen:x||!!p,onClose:()=>{m(!1),g(null),Y()},title:p?"Editar Usuario":"Nuevo Usuario",size:"lg",children:e.jsxs("form",{onSubmit:p?M:me,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(ue,{label:"Nombre",value:j.first_name,onChange:Q=>_({...j,first_name:Q.target.value}),placeholder:"Juan",required:!0}),e.jsx(ue,{label:"Apellido",value:j.last_name,onChange:Q=>_({...j,last_name:Q.target.value}),placeholder:"Prez",required:!0})]}),e.jsx(ue,{label:"Email",type:"email",value:j.email,onChange:Q=>_({...j,email:Q.target.value}),placeholder:"juan.perez@empresa.com",required:!0,disabled:!!p}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Departamento"}),e.jsxs("select",{value:j.department,onChange:Q=>_({...j,department:Q.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",children:[e.jsx("option",{value:"",children:"Seleccionar departamento"}),G.map(Q=>e.jsx("option",{value:Q.name,children:Q.name},Q.id))]})]}),e.jsx(ue,{label:"Cargo",value:j.title,onChange:Q=>_({...j,title:Q.target.value}),placeholder:"Analista"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Roles (determinan el nivel de permisos)"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:$.map(Q=>e.jsxs("label",{className:`flex items-center gap-3 p-3 rounded-lg border cursor-pointer transition-colors ${j.role_names?.includes(Q.name)?"bg-purple-50 border-purple-300":"bg-white border-gray-200 hover:bg-gray-50"}`,children:[e.jsx("input",{type:"checkbox",checked:j.role_names?.includes(Q.name),onChange:()=>R(Q.name),className:"w-4 h-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-2 py-0.5 text-xs font-bold rounded ${pl[Q.level]}`,children:Q.level}),e.jsx("span",{className:"font-medium text-gray-900",children:Q.display_name})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:Q.description})]})]},Q.name))})]}),N&&e.jsxs("div",{className:"flex items-center gap-2 text-red-600 text-sm bg-red-50 p-3 rounded-lg",children:[e.jsx(st,{className:"h-4 w-4"}),N]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx(L,{type:"button",variant:"secondary",onClick:()=>{m(!1),g(null),Y()},children:"Cancelar"}),e.jsx(L,{type:"submit",loading:B.isPending||ye.isPending,children:p?e.jsxs(e.Fragment,{children:[e.jsx(Be,{className:"h-4 w-4 mr-2"}),"Guardar"]}):e.jsxs(e.Fragment,{children:[e.jsx(Ke,{className:"h-4 w-4 mr-2"}),"Crear"]})})]})]})}),e.jsx(Qe,{isOpen:!!f,onClose:()=>v(null),title:`Asignar Roles - ${f?.full_name}`,children:f&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Selecciona los roles para este usuario. El nivel de permisos ser determinado por el rol de mayor nivel."}),e.jsx("div",{className:"space-y-2",children:$.map(Q=>{const ie=f.roles?.includes(Q.name);return e.jsxs("label",{className:`flex items-center gap-3 p-3 rounded-lg border cursor-pointer transition-colors ${ie?"bg-purple-50 border-purple-300":"bg-white border-gray-200 hover:bg-gray-50"}`,children:[e.jsx("input",{type:"checkbox",checked:ie,onChange:()=>{const _e=ie?f.roles.filter(ze=>ze!==Q.name):[...f.roles||[],Q.name];v({...f,roles:_e})},className:"w-4 h-4 text-purple-600 border-gray-300 rounded focus:ring-purple-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:`px-2 py-0.5 text-xs font-bold rounded ${pl[Q.level]}`,children:["Nivel ",Q.level]}),e.jsx("span",{className:"font-medium text-gray-900",children:Q.display_name})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:Q.description})]})]},Q.name)})}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx(L,{variant:"secondary",onClick:()=>v(null),children:"Cancelar"}),e.jsxs(L,{onClick:()=>X(f,f.roles),loading:te.isPending,children:[e.jsx(as,{className:"h-4 w-4 mr-2"}),"Guardar Roles"]})]})]})}),e.jsx(Qe,{isOpen:E,onClose:()=>S(!1),title:"Gestin de Permisos del Sistema",size:"xl",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-semibold text-purple-900 flex items-center gap-2",children:[e.jsx(as,{className:"h-5 w-5"}),"Configuracin de Permisos por Nivel"]}),e.jsx("p",{className:"text-sm text-purple-700 mt-1",children:"Define qu funcionalidades puede acceder cada nivel de usuario. Los cambios afectarn a todos los usuarios segn su nivel de permisos."})]}),e.jsx(Q4,{permissions:w,onChange:C}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx(L,{variant:"secondary",onClick:()=>S(!1),children:"Cancelar"}),e.jsxs(L,{onClick:ge,children:[e.jsx(Be,{className:"h-4 w-4 mr-2"}),"Guardar Permisos"]})]})]})})]})}const Fn={draft:{label:"Borrador",color:"bg-gray-100 text-gray-700",icon:Oe},pending_signatures:{label:"Pendiente de firmas",color:"bg-amber-100 text-amber-700",icon:yt},completed:{label:"Completado",color:"bg-green-100 text-green-700",icon:Be},cancelled:{label:"Cancelado",color:"bg-red-100 text-red-700",icon:Ma}},Bu={contract:"Contrato",certification:"Certificacin",vacation:"Vacaciones",other:"Otro"};function P4(){const{isAdmin:s}=Ra(),r=et(),[i,c]=b.useState(1),[u,h]=b.useState(null),[x,m]=b.useState(!1),[p,g]=b.useState(!1),[f,v]=b.useState(null),[E,S]=b.useState(null),[w,C]=b.useState(""),[j,_]=b.useState(""),[N,z]=b.useState(""),[k,U]=b.useState("created_at"),[A,T]=b.useState("desc"),{data:O,isLoading:ee,isError:B}=ke({queryKey:["generated-documents",i],queryFn:()=>Yt.list({page:i,per_page:20})}),ye=Ne({mutationFn:R=>Yt.delete(R),onSuccess:()=>{r.invalidateQueries(["generated-documents"]),g(!1),v(null),m(!1),h(null)},onError:R=>{alert(R.response?.data?.error||"Error al eliminar el documento")}}),F=O?.data?.data||[],te=O?.data?.meta||{},je=te.total_pages||1,xe=F.filter(R=>{if(w){const X=w.toLowerCase(),ge=(R.name||"").toLowerCase().includes(X),Q=(R.employee_name||R.requested_by||"").toLowerCase().includes(X),ie=(R.template_name||"").toLowerCase().includes(X);if(!ge&&!Q&&!ie)return!1}return!(j&&R.status!==j||N&&R.template_category!==N)}).sort((R,X)=>{let ge,Q;switch(k){case"employee_name":ge=(R.employee_name||R.requested_by||"").toLowerCase(),Q=(X.employee_name||X.requested_by||"").toLowerCase();break;case"template_name":ge=(R.template_name||"").toLowerCase(),Q=(X.template_name||"").toLowerCase();break;case"template_category":ge=Bu[R.template_category]||R.template_category||"",Q=Bu[X.template_category]||X.template_category||"";break;case"status":ge=Fn[R.status]?.label||R.status||"",Q=Fn[X.status]?.label||X.status||"";break;case"created_at":ge=R.created_at?new Date(R.created_at).getTime():0,Q=X.created_at?new Date(X.created_at).getTime():0;break;default:ge=R.created_at?new Date(R.created_at).getTime():0,Q=X.created_at?new Date(X.created_at).getTime():0}return ge<Q?A==="asc"?-1:1:ge>Q?A==="asc"?1:-1:0}),$=R=>{k===R?T(X=>X==="asc"?"desc":"asc"):(U(R),T("asc"))},pe=()=>{C(""),_(""),z("")},G=w||j||N,Y=({column:R})=>k!==R?e.jsx(to,{className:"w-3 h-3 text-gray-400"}):A==="asc"?e.jsx(ao,{className:"w-3 h-3 text-primary-600"}):e.jsx(li,{className:"w-3 h-3 text-primary-600"}),me=R=>{h(R),m(!0)},M=R=>{v(R),g(!0)},V=()=>{f&&ye.mutate(f.id)},ae=async R=>{try{S(R.id);const X=await Yt.download(R.id),ge=new Blob([X.data],{type:"application/pdf"}),Q=window.URL.createObjectURL(ge),ie=window.document.createElement("a");ie.href=Q,ie.download=R.file_name||`${R.name}.pdf`,window.document.body.appendChild(ie),ie.click(),window.document.body.removeChild(ie),window.URL.revokeObjectURL(Q)}catch(X){alert("Error al descargar el documento"),console.error("Download error:",X)}finally{S(null)}},W=R=>R?new Date(R).toLocaleDateString("es-CO",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"-";return ee?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Mis Documentos"})}),e.jsx(we,{children:e.jsx(Ce,{className:"p-8",children:e.jsx("div",{className:"animate-pulse space-y-4",children:[1,2,3,4,5].map(R=>e.jsx("div",{className:"h-16 bg-gray-200 rounded"},R))})})})]}):B?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Mis Documentos"})}),e.jsx(we,{children:e.jsxs(Ce,{className:"p-8 text-center",children:[e.jsx(st,{className:"w-12 h-12 text-red-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Error al cargar los documentos"})]})})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Mis Documentos"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Documentos generados desde templates"})]})}),e.jsx(we,{children:e.jsxs(Ce,{className:"py-4",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsx("div",{className:"flex-1 min-w-[200px]",children:e.jsxs("div",{className:"relative",children:[e.jsx(ra,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar por empleado, documento...",value:w,onChange:R=>C(R.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"})]})}),e.jsxs("select",{value:j,onChange:R=>_(R.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"Todos los estados"}),e.jsx("option",{value:"draft",children:"Borrador"}),e.jsx("option",{value:"pending_signatures",children:"Pendiente de firmas"}),e.jsx("option",{value:"completed",children:"Completado"}),e.jsx("option",{value:"cancelled",children:"Cancelado"})]}),e.jsxs("select",{value:N,onChange:R=>z(R.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"Tipo de documento"}),e.jsx("option",{value:"contract",children:"Contrato"}),e.jsx("option",{value:"certification",children:"Certificacin"}),e.jsx("option",{value:"vacation",children:"Vacaciones"}),e.jsx("option",{value:"other",children:"Otro"})]}),G&&e.jsxs("button",{onClick:pe,className:"px-3 py-2 text-sm text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg flex items-center gap-1",children:[e.jsx(vt,{className:"w-4 h-4"}),"Limpiar"]})]}),!ee&&F.length>0&&e.jsxs("div",{className:"mt-3 text-sm text-gray-500",children:["Mostrando ",e.jsx("strong",{children:xe.length})," de ",e.jsx("strong",{children:F.length})," documentos"]})]})}),e.jsx(we,{children:e.jsx(Ce,{className:"p-0",children:xe.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(Hc,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay documentos"}),e.jsx("p",{className:"text-gray-500",children:G?"No se encontraron documentos con los filtros aplicados":"Los documentos generados desde templates apareceran aqui"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{onClick:()=>$("employee_name"),className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100 select-none",children:e.jsxs("div",{className:"flex items-center gap-1",children:["Empleado",e.jsx(Y,{column:"employee_name"})]})}),e.jsx("th",{onClick:()=>$("template_name"),className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100 select-none",children:e.jsxs("div",{className:"flex items-center gap-1",children:["Documento",e.jsx(Y,{column:"template_name"})]})}),e.jsx("th",{onClick:()=>$("template_category"),className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100 select-none",children:e.jsxs("div",{className:"flex items-center gap-1",children:["Tipo",e.jsx(Y,{column:"template_category"})]})}),e.jsx("th",{onClick:()=>$("created_at"),className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100 select-none",children:e.jsxs("div",{className:"flex items-center gap-1",children:["Fecha Creacin",e.jsx(Y,{column:"created_at"})]})}),e.jsx("th",{onClick:()=>$("status"),className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase cursor-pointer hover:bg-gray-100 select-none",children:e.jsxs("div",{className:"flex items-center gap-1",children:["Estado",e.jsx(Y,{column:"status"})]})}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Acciones"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:xe.map(R=>{const X=Fn[R.status]||Fn.draft,ge=X.icon;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(ka,{className:"w-4 h-4 text-primary-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 text-sm",children:R.employee_name||R.requested_by||"-"}),R.employee_number&&e.jsx("p",{className:"text-xs text-gray-500",children:R.employee_number})]})]})}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"w-4 h-4 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-900",children:R.name}),R.template_name&&e.jsx("p",{className:"text-xs text-gray-500",children:R.template_name})]})]})}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gray-100 rounded text-xs text-gray-700",children:[e.jsx(Ta,{className:"w-3 h-3"}),Bu[R.template_category]||R.template_category||"Otro"]})}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-600",children:W(R.created_at)}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium ${X.color}`,children:[e.jsx(ge,{className:"w-3.5 h-3.5"}),X.label]})}),e.jsx("td",{className:"px-4 py-4 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-1",children:[e.jsx(L,{variant:"ghost",size:"sm",onClick:()=>me(R),title:"Ver detalles",children:e.jsx(At,{className:"w-4 h-4"})}),e.jsx(L,{variant:"ghost",size:"sm",onClick:()=>ae(R),loading:E===R.id,title:"Descargar PDF",children:e.jsx(ba,{className:"w-4 h-4"})}),s&&e.jsx(L,{variant:"ghost",size:"sm",onClick:()=>M(R),title:"Eliminar documento",className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:e.jsx(Nt,{className:"w-4 h-4"})})]})})]},R.id)})})]})})})}),je>1&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-gray-500",children:["Pagina ",i," de ",je," (",te.total_count," documentos)"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(L,{variant:"secondary",size:"sm",onClick:()=>c(R=>Math.max(1,R-1)),disabled:i===1,children:[e.jsx(jm,{className:"w-4 h-4"}),"Anterior"]}),e.jsxs(L,{variant:"secondary",size:"sm",onClick:()=>c(R=>Math.min(je,R+1)),disabled:i===je,children:["Siguiente",e.jsx(ys,{className:"w-4 h-4"})]})]})]}),e.jsx(Qe,{isOpen:x,onClose:()=>m(!1),title:"Detalle del Documento",size:"lg",children:u&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-lg flex items-center justify-center",children:e.jsx(Oe,{className:"w-6 h-6 text-primary-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:u.name}),u.template_name&&e.jsxs("p",{className:"text-sm text-gray-500",children:["Template: ",u.template_name]})]})]}),e.jsx("span",{className:`inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm font-medium ${Fn[u.status]?.color||"bg-gray-100 text-gray-700"}`,children:Fn[u.status]?.label||u.status})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Creado"}),e.jsx("p",{className:"text-sm font-medium",children:W(u.created_at)})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Solicitado por"}),e.jsx("p",{className:"text-sm font-medium",children:u.requested_by||"-"})]}),u.file_name&&e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg col-span-2",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Archivo"}),e.jsx("p",{className:"text-sm font-medium",children:u.file_name})]})]}),e.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[e.jsx("div",{children:s&&e.jsxs(L,{variant:"danger",onClick:()=>M(u),children:[e.jsx(Nt,{className:"w-4 h-4"}),"Eliminar"]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(L,{variant:"secondary",onClick:()=>m(!1),children:"Cerrar"}),e.jsxs(L,{onClick:()=>ae(u),loading:E===u.id,children:[e.jsx(ba,{className:"w-4 h-4"}),"Descargar PDF"]})]})]})]})}),e.jsx(Qe,{isOpen:p,onClose:()=>{g(!1),v(null)},title:"Confirmar eliminacion",size:"sm",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 p-4 bg-red-50 rounded-lg",children:[e.jsx(Nt,{className:"w-8 h-8 text-red-500 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-700",children:"Esta seguro que desea eliminar el documento:"}),e.jsx("p",{className:"font-medium text-gray-900 mt-1",children:f?.name})]})]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Esta accion no se puede deshacer. El archivo PDF sera eliminado permanentemente."}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx(L,{variant:"secondary",onClick:()=>{g(!1),v(null)},children:"Cancelar"}),e.jsxs(L,{variant:"danger",onClick:V,loading:ye.isPending,children:[e.jsx(Nt,{className:"w-4 h-4"}),"Eliminar"]})]})]})})]})}const Y4=[{value:"#6366f1",label:"Indigo"},{value:"#8b5cf6",label:"Violeta"},{value:"#ec4899",label:"Rosa"},{value:"#f43f5e",label:"Rojo"},{value:"#f97316",label:"Naranja"},{value:"#eab308",label:"Amarillo"},{value:"#22c55e",label:"Verde"},{value:"#14b8a6",label:"Teal"},{value:"#0ea5e9",label:"Azul"},{value:"#6b7280",label:"Gris"}];function X4({isOpen:s,onClose:r,folder:i=null,parentId:c=null}){const u=et(),[h,x]=b.useState(""),[m,p]=b.useState(""),[g,f]=b.useState("#6366f1"),[v,E]=b.useState(""),S=!!i;b.useEffect(()=>{s&&(i?(x(i.name||""),p(i.description||""),f(i.color||"#6366f1")):(x(""),p(""),f("#6366f1")),E(""))},[i,s]);const w=Ne({mutationFn:N=>Fl.create(N),onSuccess:()=>{u.invalidateQueries(["folders"]),j()},onError:N=>E(N.response?.data?.error||"Error al crear carpeta")}),C=Ne({mutationFn:N=>Fl.update(i.id,N),onSuccess:()=>{u.invalidateQueries(["folders"]),j()},onError:N=>E(N.response?.data?.error||"Error al actualizar carpeta")}),j=()=>{x(""),p(""),f("#6366f1"),E(""),r()},_=N=>{if(N.preventDefault(),!h.trim()){E("El nombre es requerido");return}const z={name:h,description:m,color:g,parent_id:c};S?C.mutate(z):w.mutate(z)};return s?e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsx("h3",{className:"text-lg font-semibold",children:S?"Editar Carpeta":"Nueva Carpeta"}),e.jsx("button",{onClick:j,className:"p-1 hover:bg-gray-100 rounded",children:e.jsx(vt,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:_,className:"p-4 space-y-4",children:[v&&e.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-700",children:[e.jsx(st,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:v})]}),e.jsx(ue,{label:"Nombre",value:h,onChange:N=>x(N.target.value),placeholder:"Ej: Contratos 2024",required:!0}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripcin (opcional)"}),e.jsx("textarea",{value:m,onChange:N=>p(N.target.value),placeholder:"Descripcin de la carpeta...",rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Y4.map(N=>e.jsx("button",{type:"button",onClick:()=>f(N.value),className:`w-8 h-8 rounded-full border-2 transition-transform ${g===N.value?"border-gray-900 scale-110":"border-transparent"}`,style:{backgroundColor:N.value},title:N.label},N.value))})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(L,{type:"button",variant:"secondary",onClick:j,children:"Cancelar"}),e.jsx(L,{type:"submit",loading:w.isPending||C.isPending,children:S?"Guardar":"Crear Carpeta"})]})]})]})}):null}function K4({isOpen:s,onClose:r,folder:i}){const c=et(),[u,h]=b.useState(""),[x,m]=b.useState(""),{data:p,isLoading:g}=ke({queryKey:["available-documents"],queryFn:()=>Yt.list({per_page:100}),enabled:s}),f=Ne({mutationFn:w=>Fl.addDocument(i.id,w),onSuccess:()=>{c.invalidateQueries(["folders"]),c.invalidateQueries(["folder",i.id])},onError:w=>m(w.response?.data?.error||"Error al agregar documento")}),v=p?.data?.data||[],E=i?.documents?.map(w=>w.id)||[],S=v.filter(w=>E.includes(w.id)?!1:u?w.name.toLowerCase().includes(u.toLowerCase()):!0);return!s||!i?null:e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-lg max-h-[80vh] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:['Agregar Documento a "',i.name,'"']}),e.jsx("button",{onClick:r,className:"p-1 hover:bg-gray-100 rounded",children:e.jsx(vt,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-4 border-b",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ra,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar documentos...",value:u,onChange:w=>h(w.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),x&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:x})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:g?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500"})}):S.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:u?"No se encontraron documentos":"No hay documentos disponibles"}):e.jsx("div",{className:"space-y-2",children:S.map(w=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[e.jsx(Oe,{className:"w-5 h-5 text-gray-400 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"font-medium text-gray-900 truncate",children:w.name}),e.jsx("p",{className:"text-xs text-gray-500",children:w.template_name})]})]}),e.jsx(L,{size:"sm",variant:"secondary",onClick:()=>f.mutate(w.id),loading:f.isPending,children:e.jsx(Ke,{className:"w-4 h-4"})})]},w.id))})}),e.jsx("div",{className:"p-4 border-t",children:e.jsx(L,{variant:"secondary",onClick:r,className:"w-full",children:"Cerrar"})})]})})}function Z4(){const s=et(),[r,i]=b.useState(null),[c,u]=b.useState(!1),[h,x]=b.useState(!1),[m,p]=b.useState(null),[g,f]=b.useState(null),{data:v}=ke({queryKey:["folder",r],queryFn:()=>Fl.get(r),enabled:!!r}),{data:E,isLoading:S}=ke({queryKey:["folders",r||"root"],queryFn:()=>Fl.list({parent_id:r||"root"})}),w=Ne({mutationFn:O=>Fl.delete(O),onSuccess:()=>{s.invalidateQueries(["folders"]),f(null)}}),C=Ne({mutationFn:({folderId:O,documentId:ee})=>Fl.removeDocument(O,ee),onSuccess:()=>{s.invalidateQueries(["folders"]),s.invalidateQueries(["folder",r])}}),j=E?.data?.data||[],_=v?.data?.data,N=_?.ancestors||[],z=O=>{i(O.id)},k=(O=null)=>{i(O)},U=O=>{p(O),u(!0),f(null)},A=O=>{if(O.documents_count>0||O.subfolders_count>0){alert("No se puede eliminar una carpeta que contiene documentos o subcarpetas");return}confirm(`Eliminar la carpeta "${O.name}"?`)&&w.mutate(O.id)},T=()=>{p(null),u(!0)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Carpetas"}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Organiza tus documentos en carpetas"})]}),e.jsxs(L,{onClick:T,children:[e.jsx(j0,{className:"w-4 h-4"}),"Nueva Carpeta"]})]}),e.jsx(we,{children:e.jsx(Ce,{className:"py-3",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsxs("button",{onClick:()=>k(null),className:`flex items-center gap-1 hover:text-primary-600 ${r?"text-gray-600":"text-primary-600 font-medium"}`,children:[e.jsx(so,{className:"w-4 h-4"}),"Inicio"]}),N.map(O=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ys,{className:"w-4 h-4 text-gray-400"}),e.jsx("button",{onClick:()=>k(O.id),className:"text-gray-600 hover:text-primary-600",children:O.name})]},O.id)),_&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ys,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-primary-600 font-medium",children:_.name})]})]})})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx(we,{children:e.jsx(Ce,{className:"p-0",children:S?e.jsx("div",{className:"flex justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500"})}):j.length===0&&!_?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(Hg,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay carpetas"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Crea tu primera carpeta para organizar documentos"}),e.jsxs(L,{onClick:T,children:[e.jsx(j0,{className:"w-4 h-4"}),"Nueva Carpeta"]})]}):e.jsxs("div",{className:"divide-y",children:[j.map(O=>e.jsxs("div",{className:"flex items-center justify-between p-4 hover:bg-gray-50 group",children:[e.jsxs("button",{onClick:()=>z(O),className:"flex items-center gap-3 flex-1 text-left",children:[e.jsx("div",{className:"p-2 rounded-lg",style:{backgroundColor:`${O.color}20`},children:e.jsx(d_,{className:"w-5 h-5",style:{color:O.color}})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:O.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[O.documents_count," documentos",O.subfolders_count>0&&`  ${O.subfolders_count} subcarpetas`]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>f(g===O.id?null:O.id),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(Nm,{className:"w-4 h-4"})}),g===O.id&&e.jsxs("div",{className:"absolute right-0 top-full mt-1 bg-white border rounded-lg shadow-lg py-1 z-10 w-36",children:[e.jsxs("button",{onClick:()=>U(O),className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-50 flex items-center gap-2",children:[e.jsx(Cm,{className:"w-4 h-4"}),"Editar"]}),e.jsxs("button",{onClick:()=>A(O),className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-50 flex items-center gap-2 text-red-600",children:[e.jsx(Nt,{className:"w-4 h-4"}),"Eliminar"]})]})]})]},O.id)),j.length===0&&_&&e.jsx("div",{className:"p-8 text-center text-gray-500",children:"No hay subcarpetas"})]})})})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsx(we,{children:e.jsxs(Ce,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:_?"Documentos":"Selecciona una carpeta"}),_&&e.jsx(L,{size:"sm",variant:"secondary",onClick:()=>x(!0),children:e.jsx(ii,{className:"w-4 h-4"})})]}),_?_.documents?.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500 text-sm",children:[e.jsx(Oe,{className:"w-10 h-10 text-gray-300 mx-auto mb-2"}),"No hay documentos en esta carpeta",e.jsxs(L,{size:"sm",variant:"secondary",className:"mt-3",onClick:()=>x(!0),children:[e.jsx(Ke,{className:"w-4 h-4"}),"Agregar"]})]}):e.jsx("div",{className:"space-y-2",children:_.documents.map(O=>e.jsxs("div",{className:"flex items-center justify-between p-2 border rounded-lg hover:bg-gray-50 group",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx(Oe,{className:"w-4 h-4 text-gray-400 flex-shrink-0"}),e.jsx("span",{className:"text-sm truncate",children:O.name})]}),e.jsx("button",{onClick:()=>C.mutate({folderId:_.id,documentId:O.id}),className:"p-1 text-gray-400 hover:text-red-600 opacity-0 group-hover:opacity-100",title:"Quitar de carpeta",children:e.jsx(vt,{className:"w-4 h-4"})})]},O.id))}):e.jsxs("div",{className:"text-center py-8 text-gray-500 text-sm",children:[e.jsx(Oe,{className:"w-10 h-10 text-gray-300 mx-auto mb-2"}),"Abre una carpeta para ver sus documentos"]})]})})})]}),e.jsx(X4,{isOpen:c,onClose:()=>{u(!1),p(null)},folder:m,parentId:r}),e.jsx(K4,{isOpen:h,onClose:()=>x(!1),folder:_})]})}const J4=[{value:"juridical",label:"Persona Jurdica"},{value:"natural",label:"Persona Natural"}],I4=[{value:"NIT",label:"NIT"},{value:"CC",label:"Cdula de Ciudadana"},{value:"CE",label:"Cdula de Extranjera"},{value:"PA",label:"Pasaporte"},{value:"TI",label:"Tarjeta de Identidad"}],W4={active:"green",inactive:"gray",blocked:"red"},e5=[{value:"gray",label:"Gris"},{value:"blue",label:"Azul"},{value:"green",label:"Verde"},{value:"purple",label:"Morado"},{value:"orange",label:"Naranja"},{value:"red",label:"Rojo"},{value:"yellow",label:"Amarillo"},{value:"indigo",label:"Indigo"}],Zg=[{value:"building",label:"Edificio",Icon:Ut},{value:"truck",label:"Camion",Icon:dw},{value:"users",label:"Usuarios",Icon:ht},{value:"briefcase",label:"Maletin",Icon:Ta},{value:"handshake",label:"Alianza",Icon:g_}],Jg=s=>Zg.find(i=>i.value===s)?.Icon||Ut;function t5({type:s,onSubmit:r,onCancel:i,isLoading:c}){const[u,h]=b.useState(s||{code:"",name:"",description:"",color:"gray",icon:"building",active:!0}),[x,m]=b.useState({}),p=(E,S)=>{h(w=>({...w,[E]:S})),x[E]&&m(w=>({...w,[E]:null}))},g=()=>{const E={};return u.code?.trim()||(E.code="Codigo requerido"),u.name?.trim()||(E.name="Nombre requerido"),m(E),Object.keys(E).length===0},f=E=>{E.preventDefault(),g()&&r(u)},v=Jg(u.icon);return e.jsxs("form",{onSubmit:f,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(ue,{label:"Codigo",value:u.code,onChange:E=>p("code",E.target.value.toLowerCase().replace(/\s+/g,"_")),placeholder:"ej: provider",error:x.code,disabled:!!s?.is_system,required:!0}),e.jsx(ue,{label:"Nombre",value:u.name,onChange:E=>p("name",E.target.value),placeholder:"ej: Proveedor",error:x.name,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripcion"}),e.jsx("textarea",{value:u.description||"",onChange:E=>p("description",E.target.value),rows:2,placeholder:"Descripcion del tipo de tercero...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(Le,{label:"Color",value:u.color,onChange:E=>p("color",E.target.value),options:e5}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Icono"}),e.jsx("div",{className:"flex gap-2",children:Zg.map(({value:E,label:S,Icon:w})=>e.jsx("button",{type:"button",onClick:()=>p("icon",E),className:`p-2 rounded-lg border-2 transition-all ${u.icon===E?"border-indigo-500 bg-indigo-50":"border-gray-200 hover:border-gray-300"}`,title:S,children:e.jsx(w,{className:`h-5 w-5 ${u.icon===E?"text-indigo-600":"text-gray-500"}`})},E))})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide mb-2",children:"Vista previa"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg bg-${u.color}-100`,children:e.jsx(v,{className:`h-5 w-5 text-${u.color}-600`})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:u.name||"Nombre del tipo"}),e.jsx("p",{className:"text-sm text-gray-500",children:u.code||"codigo"})]}),e.jsx(qe,{status:u.color,children:u.name||"Tipo"})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx(L,{type:"button",variant:"secondary",onClick:i,children:"Cancelar"}),e.jsxs(L,{type:"submit",loading:c,children:[s?"Actualizar":"Crear"," Tipo"]})]})]})}function a5({isOpen:s,onClose:r}){const[i,c]=b.useState(""),[u,h]=b.useState(!1),[x,m]=b.useState(null),p=et(),{data:g,isLoading:f}=ke({queryKey:["third-party-types"],queryFn:()=>zl.list(),enabled:s}),v=Ne({mutationFn:k=>zl.create(k),onSuccess:()=>{p.invalidateQueries(["third-party-types"]),h(!1)}}),E=Ne({mutationFn:({id:k,data:U})=>zl.update(k,U),onSuccess:()=>{p.invalidateQueries(["third-party-types"]),h(!1),m(null)}}),S=Ne({mutationFn:k=>zl.delete(k),onSuccess:()=>{p.invalidateQueries(["third-party-types"])}}),w=Ne({mutationFn:k=>zl.toggleActive(k),onSuccess:()=>{p.invalidateQueries(["third-party-types"])}}),j=(g?.data?.data||[]).filter(k=>!i||k.name.toLowerCase().includes(i.toLowerCase())||k.code.toLowerCase().includes(i.toLowerCase())),_=k=>{m(k),h(!0)},N=k=>{x?E.mutate({id:x.id,data:k}):v.mutate(k)},z=k=>{confirm("Estas seguro de eliminar este tipo de tercero?")&&S.mutate(k)};return s?e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b bg-gray-50",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Tipos de Terceros"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Gestiona las categorias de terceros"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(L,{size:"sm",onClick:()=>{m(null),h(!0)},children:[e.jsx(Ke,{className:"h-4 w-4 mr-1"}),"Nuevo Tipo"]}),e.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-200 rounded-lg transition-colors",children:e.jsx(vt,{className:"h-5 w-5 text-gray-500"})})]})]}),e.jsx("div",{className:"p-4 border-b",children:e.jsxs("div",{className:"relative",children:[e.jsx(ra,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar por nombre o codigo...",value:i,onChange:k=>c(k.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})}),e.jsx("div",{className:"flex-1 overflow-auto p-4",children:f?e.jsx("div",{className:"space-y-3",children:[1,2,3].map(k=>e.jsx("div",{className:"animate-pulse h-16 bg-gray-100 rounded-lg"},k))}):j.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ut,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:i?"No se encontraron tipos":"No hay tipos de terceros"}),e.jsx("p",{className:"text-gray-500 mb-4",children:i?"Intenta con otros terminos":"Crea tu primer tipo de tercero"}),!i&&e.jsxs(L,{onClick:()=>h(!0),children:[e.jsx(Ke,{className:"h-4 w-4 mr-2"}),"Nuevo Tipo"]})]}):e.jsx("div",{className:"space-y-2",children:j.map(k=>{const U=Jg(k.icon);return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg bg-${k.color}-100`,children:e.jsx(U,{className:`h-5 w-5 text-${k.color}-600`})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-medium text-gray-900",children:k.name}),k.is_system&&e.jsx(Xl,{className:"h-3 w-3 text-gray-400",title:"Tipo del sistema"})]}),e.jsx("p",{className:"text-xs text-gray-500 font-mono",children:k.code})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-sm text-gray-500",children:[k.third_parties_count||0," terceros"]}),e.jsx("button",{onClick:()=>w.mutate(k.id),className:`p-1 rounded transition-colors ${k.active?"text-green-600 hover:bg-green-50":"text-gray-400 hover:bg-gray-200"}`,title:k.active?"Activo":"Inactivo",children:k.active?e.jsx(co,{className:"h-5 w-5"}):e.jsx(io,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>_(k),className:"p-1.5 text-gray-500 hover:bg-gray-200 rounded-lg transition-colors",title:"Editar",children:e.jsx(ns,{className:"h-4 w-4"})}),k.deletable&&e.jsx("button",{onClick:()=>z(k.id),className:"p-1.5 text-red-500 hover:bg-red-50 rounded-lg transition-colors",title:"Eliminar",children:e.jsx(Nt,{className:"h-4 w-4"})})]})]},k.id)})})}),e.jsx(Qe,{isOpen:u,onClose:()=>{h(!1),m(null)},title:x?"Editar Tipo de Tercero":"Nuevo Tipo de Tercero",children:e.jsx(t5,{type:x,onSubmit:N,onCancel:()=>{h(!1),m(null)},isLoading:v.isPending||E.isPending})})]})}):null}function s5({thirdParty:s,thirdPartyTypes:r,onSubmit:i,onCancel:c,isLoading:u}){const[h,x]=b.useState(s||{third_party_type:"provider",person_type:"juridical",identification_type:"NIT",identification_number:"",business_name:"",trade_name:"",first_name:"",last_name:"",email:"",phone:"",address:"",city:"",country:"Colombia",legal_rep_name:"",legal_rep_id_number:"",legal_rep_email:"",bank_name:"",bank_account_type:"",bank_account_number:"",notes:""}),m=(f,v)=>{x(E=>({...E,[f]:v}))},p=f=>{f.preventDefault(),i(h)},g=h.person_type==="juridical";return e.jsxs("form",{onSubmit:p,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(Le,{label:"Tipo de Tercero",value:h.third_party_type,onChange:f=>m("third_party_type",f.target.value),options:r.map(f=>({value:f.code,label:f.name})),required:!0}),e.jsx(Le,{label:"Tipo de Persona",value:h.person_type,onChange:f=>m("person_type",f.target.value),options:J4,required:!0})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx(Le,{label:"Tipo Documento",value:h.identification_type,onChange:f=>m("identification_type",f.target.value),options:I4,required:!0}),e.jsx(ue,{label:"Nmero Documento",value:h.identification_number,onChange:f=>m("identification_number",f.target.value),required:!0}),h.identification_type==="NIT"&&e.jsx(ue,{label:"Dgito Verificacin",value:h.verification_digit||"",onChange:f=>m("verification_digit",f.target.value),maxLength:1})]}),g?e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(ue,{label:"Razn Social",value:h.business_name,onChange:f=>m("business_name",f.target.value),required:!0}),e.jsx(ue,{label:"Nombre Comercial",value:h.trade_name||"",onChange:f=>m("trade_name",f.target.value)})]}):e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(ue,{label:"Nombres",value:h.first_name,onChange:f=>m("first_name",f.target.value),required:!0}),e.jsx(ue,{label:"Apellidos",value:h.last_name,onChange:f=>m("last_name",f.target.value),required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(ue,{label:"Email",type:"email",value:h.email,onChange:f=>m("email",f.target.value),required:!0}),e.jsx(ue,{label:"Telfono",value:h.phone||"",onChange:f=>m("phone",f.target.value)})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx(ue,{label:"Direccin",value:h.address||"",onChange:f=>m("address",f.target.value),className:"col-span-2"}),e.jsx(ue,{label:"Ciudad",value:h.city||"",onChange:f=>m("city",f.target.value)})]}),g&&e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"font-medium text-gray-700 mb-3",children:"Representante Legal"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx(ue,{label:"Nombre Completo",value:h.legal_rep_name||"",onChange:f=>m("legal_rep_name",f.target.value)}),e.jsx(ue,{label:"Documento",value:h.legal_rep_id_number||"",onChange:f=>m("legal_rep_id_number",f.target.value)}),e.jsx(ue,{label:"Email",type:"email",value:h.legal_rep_email||"",onChange:f=>m("legal_rep_email",f.target.value)})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"font-medium text-gray-700 mb-3",children:"Informacin Bancaria"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx(ue,{label:"Banco",value:h.bank_name||"",onChange:f=>m("bank_name",f.target.value)}),e.jsx(Le,{label:"Tipo de Cuenta",value:h.bank_account_type||"",onChange:f=>m("bank_account_type",f.target.value),options:[{value:"",label:"Seleccionar..."},{value:"savings",label:"Ahorros"},{value:"checking",label:"Corriente"}]}),e.jsx(ue,{label:"Nmero de Cuenta",value:h.bank_account_number||"",onChange:f=>m("bank_account_number",f.target.value)})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notas"}),e.jsx("textarea",{value:h.notes||"",onChange:f=>m("notes",f.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx(L,{type:"button",variant:"secondary",onClick:c,children:"Cancelar"}),e.jsxs(L,{type:"submit",loading:u,children:[s?"Actualizar":"Crear"," Tercero"]})]})]})}function l5({thirdParty:s,onEdit:r,onDelete:i,onStatusChange:c}){const[u,h]=b.useState(!1);return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[s.person_type==="juridical"?e.jsx(Ut,{className:"h-4 w-4 text-blue-600"}):e.jsx(ka,{className:"h-4 w-4 text-purple-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-600",children:s.code})]})}),e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("div",{className:"font-medium text-gray-900",children:s.display_name}),s.trade_name&&s.trade_name!==s.business_name&&e.jsx("div",{className:"text-xs text-gray-500",children:s.trade_name})]}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsx("span",{className:"text-sm text-gray-600",children:s.type_label})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsx("span",{className:"text-sm text-gray-600",children:s.full_identification})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsx("span",{className:"text-sm text-gray-600",children:s.email})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsx(qe,{status:W4[s.status],children:s.status_label})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-center",children:e.jsx("span",{className:"text-sm font-medium text-gray-900",children:s.contracts_count})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-right",children:e.jsxs("div",{className:"relative inline-block",children:[e.jsx("button",{onClick:()=>h(!u),className:"p-1 hover:bg-gray-100 rounded",children:e.jsx(Nm,{className:"h-4 w-4 text-gray-500"})}),u&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>h(!1)}),e.jsxs("div",{className:"absolute right-0 mt-1 w-48 bg-white rounded-lg shadow-lg border z-20",children:[e.jsxs("button",{onClick:()=>{r(s),h(!1)},className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-50 flex items-center gap-2",children:[e.jsx(ro,{className:"h-4 w-4"})," Editar"]}),s.status==="active"&&e.jsxs("button",{onClick:()=>{c(s.id,"deactivate"),h(!1)},className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-50 flex items-center gap-2 text-yellow-600",children:[e.jsx(Ma,{className:"h-4 w-4"})," Desactivar"]}),s.status==="inactive"&&e.jsxs("button",{onClick:()=>{c(s.id,"activate"),h(!1)},className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-50 flex items-center gap-2 text-green-600",children:[e.jsx(Be,{className:"h-4 w-4"})," Activar"]}),s.status!=="blocked"&&e.jsxs("button",{onClick:()=>{c(s.id,"block"),h(!1)},className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-50 flex items-center gap-2 text-red-600",children:[e.jsx(j2,{className:"h-4 w-4"})," Bloquear"]}),s.contracts_count===0&&e.jsxs("button",{onClick:()=>{i(s.id),h(!1)},className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-50 flex items-center gap-2 text-red-600",children:[e.jsx(Nt,{className:"h-4 w-4"})," Eliminar"]})]})]})]})})]})}function n5(){const[s,r]=b.useState(""),[i,c]=b.useState(""),[u,h]=b.useState(""),[x,m]=b.useState(!1),[p,g]=b.useState(null),[f,v]=b.useState(!1),E=et(),{data:S,isLoading:w}=ke({queryKey:["third-parties",s,i,u],queryFn:()=>gs.list({search:s||void 0,type:i||void 0,status:u||void 0})}),{data:C}=ke({queryKey:["third-party-types"],queryFn:()=>zl.list()}),j=Ne({mutationFn:O=>gs.create(O),onSuccess:()=>{E.invalidateQueries(["third-parties"]),m(!1)}}),_=Ne({mutationFn:({id:O,data:ee})=>gs.update(O,ee),onSuccess:()=>{E.invalidateQueries(["third-parties"]),m(!1),g(null)}}),N=Ne({mutationFn:O=>gs.delete(O),onSuccess:()=>{E.invalidateQueries(["third-parties"])}}),z=Ne({mutationFn:({id:O,action:ee})=>{if(ee==="activate")return gs.activate(O);if(ee==="deactivate")return gs.deactivate(O);if(ee==="block")return gs.block(O,"Bloqueado por usuario")},onSuccess:()=>{E.invalidateQueries(["third-parties"])}}),k=S?.data?.data||[],U=C?.data?.data||[],A=O=>{g(O),m(!0)},T=O=>{p?_.mutate({id:p.id,data:O}):j.mutate(O)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Terceros"}),e.jsx("p",{className:"text-gray-500",children:"Proveedores, clientes, contratistas y aliados"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(L,{variant:"secondary",onClick:()=>v(!0),children:[e.jsx(er,{className:"h-4 w-4 mr-2"}),"Tipos"]}),e.jsxs(L,{onClick:()=>{g(null),m(!0)},children:[e.jsx(Ke,{className:"h-4 w-4 mr-2"}),"Nuevo Tercero"]})]})]}),e.jsx(we,{children:e.jsx(Ce,{className:"p-4",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(ra,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar por nombre, documento, email...",value:s,onChange:O=>r(O.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsx(Le,{value:i,onChange:O=>c(O.target.value),options:[{value:"",label:"Todos los tipos"},...U.map(O=>({value:O.code,label:O.name}))],className:"w-48"}),e.jsx(Le,{value:u,onChange:O=>h(O.target.value),options:[{value:"",label:"Todos los estados"},{value:"active",label:"Activo"},{value:"inactive",label:"Inactivo"},{value:"blocked",label:"Bloqueado"}],className:"w-48"})]})})}),e.jsx(we,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cdigo"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nombre"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tipo"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Identificacin"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Estado"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contratos"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:w?[1,2,3].map(O=>e.jsx("tr",{className:"animate-pulse",children:e.jsx("td",{className:"px-4 py-3",colSpan:8,children:e.jsx("div",{className:"h-6 bg-gray-200 rounded"})})},O)):k.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:8,className:"px-4 py-12 text-center",children:[e.jsx(Ut,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay terceros"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Comienza agregando tu primer tercero"}),e.jsxs(L,{onClick:()=>m(!0),children:[e.jsx(Ke,{className:"h-4 w-4 mr-2"}),"Nuevo Tercero"]})]})}):k.map(O=>e.jsx(l5,{thirdParty:O,onEdit:A,onDelete:ee=>N.mutate(ee),onStatusChange:(ee,B)=>z.mutate({id:ee,action:B})},O.id))})]})})}),e.jsx(Qe,{isOpen:x,onClose:()=>{m(!1),g(null)},title:p?"Editar Tercero":"Nuevo Tercero",size:"xl",children:e.jsx(s5,{thirdParty:p,thirdPartyTypes:U,onSubmit:T,onCancel:()=>{m(!1),g(null)},isLoading:j.isPending||_.isPending})}),e.jsx(a5,{isOpen:f,onClose:()=>v(!1)})]})}const r5=[{value:"NIT",label:"NIT"},{value:"CC",label:"Cdula de Ciudadana"},{value:"CE",label:"Cdula de Extranjera"},{value:"PA",label:"Pasaporte"}],$c={third_party:"Tercero",contract:"Contrato",organization:"Organizacin",system:"Sistema",custom:"Personalizado"},Ig=[{value:"string",label:"Texto"},{value:"date",label:"Fecha"},{value:"number",label:"Nmero"},{value:"boolean",label:"Si/No"},{value:"email",label:"Email"}],i5={third_party:"indigo",contract:"blue",organization:"purple",system:"gray",custom:"orange"};function c5({mapping:s,isOpen:r,onClose:i,onSuccess:c}){const u=et(),h=!!s,[x,m]=b.useState({name:s?.name||"",key:s?.key||"",category:s?.category||"custom",description:s?.description||"",data_type:s?.data_type||"string"}),[p,g]=b.useState("");b.useEffect(()=>{s&&r?m({name:s.name||"",key:s.key||"",category:s.category||"custom",description:s.description||"",data_type:s.data_type||"string"}):!s&&r&&m({name:"",key:"",category:"custom",description:"",data_type:"string"})},[s,r]);const f=Ne({mutationFn:E=>h?Ya.update(s.id,E):Ya.create(E),onSuccess:()=>{u.invalidateQueries(["variable-mappings-legal"]),c?.(),i()},onError:E=>{g(E.response?.data?.error||"Error al guardar")}}),v=E=>{E.preventDefault(),g(""),f.mutate(x)};return r?e.jsx(Qe,{isOpen:r,onClose:i,title:h?"Editar Variable":"Nueva Variable",children:e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[p&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:p}),e.jsx(ue,{label:"Nombre de la Variable",value:x.name,onChange:E=>m({...x,name:E.target.value}),placeholder:"Ej: Nombre del Tercero",required:!0}),e.jsx(ue,{label:"Clave (key)",value:x.key,onChange:E=>m({...x,key:E.target.value}),placeholder:"Ej: third_party.display_name",required:!0,disabled:h}),e.jsx(Le,{label:"Categora",value:x.category,onChange:E=>m({...x,category:E.target.value}),options:Object.entries($c).map(([E,S])=>({value:E,label:S}))}),e.jsx(Le,{label:"Tipo de Dato",value:x.data_type,onChange:E=>m({...x,data_type:E.target.value}),options:Ig}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripcin"}),e.jsx("textarea",{value:x.description,onChange:E=>m({...x,description:E.target.value}),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",placeholder:"Descripcin de la variable..."})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx(L,{type:"button",variant:"secondary",onClick:i,children:"Cancelar"}),e.jsx(L,{type:"submit",loading:f.isPending,children:h?"Guardar":"Crear"})]})]})}):null}function o5({isOpen:s,onClose:r}){const[i,c]=b.useState(""),[u,h]=b.useState(""),[x,m]=b.useState(!1),[p,g]=b.useState(null),[f,v]=b.useState("name"),[E,S]=b.useState("asc"),w=et(),{data:C,isLoading:j}=ke({queryKey:["variable-mappings-legal"],queryFn:()=>Ya.list(),enabled:s}),_=Ne({mutationFn:B=>Ya.toggle(B),onSuccess:()=>{w.invalidateQueries(["variable-mappings-legal"])}}),N=Ne({mutationFn:()=>Ya.seedSystem(),onSuccess:()=>{w.invalidateQueries(["variable-mappings-legal"])}}),z=Object.keys($c),U=(C?.data?.data||[]).filter(B=>z.includes(B.category));let A=U.filter(B=>{const ye=!i||B.name.toLowerCase().includes(i.toLowerCase())||B.key.toLowerCase().includes(i.toLowerCase()),F=!u||B.category===u;return ye&&F});A=[...A].sort((B,ye)=>{const F=B[f]||"",te=ye[f]||"",je=F.localeCompare(te);return E==="asc"?je:-je});const T=B=>{f===B?S(E==="asc"?"desc":"asc"):(v(B),S("asc"))},O=({field:B})=>f!==B?e.jsx(to,{className:"h-3 w-3 text-gray-400"}):E==="asc"?e.jsx(ao,{className:"h-3 w-3 text-indigo-600"}):e.jsx(li,{className:"h-3 w-3 text-indigo-600"}),ee=B=>{g(B),m(!0)};return s?e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-5xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b bg-gray-50",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Variables de Contratos"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Gestiona las variables para documentos comerciales"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(L,{size:"sm",variant:"secondary",onClick:()=>N.mutate(),loading:N.isPending,children:[e.jsx(ci,{className:"h-4 w-4 mr-1"}),"Sincronizar"]}),e.jsxs(L,{size:"sm",onClick:()=>{g(null),m(!0)},children:[e.jsx(Ke,{className:"h-4 w-4 mr-1"}),"Nueva Variable"]}),e.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-200 rounded-lg transition-colors",children:e.jsx(vt,{className:"h-5 w-5 text-gray-500"})})]})]}),e.jsx("div",{className:"p-4 border-b",children:e.jsxs("div",{className:"flex gap-3 items-center",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(ra,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar por nombre o clave...",value:i,onChange:B=>c(B.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500"})]}),e.jsxs("select",{value:u,onChange:B=>h(B.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"",children:"Todas las categoras"}),Object.entries($c).map(([B,ye])=>e.jsx("option",{value:B,children:ye},B))]}),(i||u)&&e.jsxs("button",{onClick:()=>{c(""),h("")},className:"flex items-center gap-1 text-gray-500 hover:text-gray-700",children:[e.jsx(vt,{className:"h-4 w-4"}),"Limpiar"]})]})}),e.jsx("div",{className:"flex-1 overflow-auto",children:j?e.jsx("div",{className:"p-4 space-y-3",children:[1,2,3,4,5].map(B=>e.jsx("div",{className:"animate-pulse h-12 bg-gray-100 rounded-lg"},B))}):A.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(pi,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay variables"}),e.jsx("p",{className:"text-gray-500 mb-4",children:i||u?"No se encontraron variables con los filtros aplicados":'Haz clic en "Sincronizar" para cargar las variables del sistema'}),!i&&!u&&e.jsxs(L,{onClick:()=>N.mutate(),children:[e.jsx(ci,{className:"h-4 w-4 mr-2"}),"Sincronizar Sistema"]})]}):e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 sticky top-0",children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase cursor-pointer hover:bg-gray-100",onClick:()=>T("name"),children:e.jsxs("div",{className:"flex items-center gap-1",children:["Variable ",e.jsx(O,{field:"name"})]})}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase cursor-pointer hover:bg-gray-100",onClick:()=>T("category"),children:e.jsxs("div",{className:"flex items-center gap-1",children:["Categora ",e.jsx(O,{field:"category"})]})}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase",children:"Tipo"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase",children:"Estado"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-600 uppercase",children:"Acciones"})]})}),e.jsx("tbody",{children:A.map(B=>{const ye=i5[B.category]||"gray";return e.jsxs("tr",{className:"hover:bg-gray-50 border-b border-gray-100",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[B.is_system&&e.jsx(Xl,{className:"h-3 w-3 text-gray-400",title:"Variable del sistema"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:B.name}),e.jsx("p",{className:"text-xs text-gray-500 font-mono",children:B.key})]})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(qe,{status:ye,children:$c[B.category]||B.category})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"text-sm text-gray-600",children:Ig.find(F=>F.value===B.data_type)?.label||B.data_type})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("button",{onClick:()=>_.mutate(B.id),className:`p-1 rounded transition-colors ${B.active?"text-green-600 hover:bg-green-50":"text-gray-400 hover:bg-gray-100"}`,title:B.active?"Activa":"Inactiva",children:B.active?e.jsx(co,{className:"h-5 w-5"}):e.jsx(io,{className:"h-5 w-5"})})}),e.jsx("td",{className:"px-4 py-3 text-right",children:!B.is_system&&e.jsx("button",{onClick:()=>ee(B),className:"p-1.5 text-gray-500 hover:bg-gray-100 rounded-lg transition-colors",title:"Editar",children:e.jsx(ns,{className:"h-4 w-4"})})})]},B.id)})})]})}),A.length>0&&e.jsxs("div",{className:"px-4 py-3 border-t border-gray-200 bg-gray-50 text-sm text-gray-600",children:["Mostrando ",A.length," de ",U.length," variables"]}),e.jsx(c5,{mapping:p,isOpen:x,onClose:()=>{m(!1),g(null)}})]})}):null}function d5({template:s,onSubmit:r,onCancel:i,isLoading:c,thirdPartyTypes:u}){const[h,x]=b.useState("juridical"),[m,p]=b.useState({third_party_type:"provider",person_type:"juridical",identification_type:"NIT",identification_number:"",verification_digit:"",business_name:"",trade_name:"",first_name:"",last_name:"",email:"",phone:"",mobile:"",address:"",city:"",state:"",country:"Colombia",legal_rep_name:"",legal_rep_id_type:"CC",legal_rep_id_number:"",legal_rep_id_city:"",legal_rep_email:"",legal_rep_phone:"",bank_name:"",bank_account_type:"",bank_account_number:"",tax_regime:"",industry:"",website:""}),[g,f]=b.useState({}),{data:v,isLoading:E}=ke({queryKey:["template-requirements",s?.id],queryFn:()=>si.getThirdPartyRequirements(s.id),enabled:!!s?.id}),S=v?.data?.data||{},w=S.required_fields||[],C=w.map(T=>T.field);b.useEffect(()=>{S.suggested_person_type&&(x(S.suggested_person_type),p(T=>({...T,person_type:S.suggested_person_type,identification_type:S.suggested_person_type==="juridical"?"NIT":"CC",third_party_type:S.default_third_party_type||T.third_party_type})))},[S]);const j=T=>["identification_number","email"].includes(T)||h==="juridical"&&T==="business_name"||h==="natural"&&["first_name","last_name"].includes(T)?!0:C.includes(T),_=T=>{if(["identification_type","identification_number","email","phone"].includes(T))return!0;if(h==="juridical"){if(["business_name","trade_name","verification_digit"].includes(T))return!0}else if(["first_name","last_name"].includes(T))return!0;return C.includes(T)},N=(T,O)=>{p(ee=>({...ee,[T]:O})),g[T]&&f(ee=>({...ee,[T]:null}))},z=T=>{x(T),p(O=>({...O,person_type:T,identification_type:T==="juridical"?"NIT":"CC"}))},k=()=>{const T={};return m.identification_number.trim()||(T.identification_number="Nmero de identificacin requerido"),m.email.trim()||(T.email="Correo electrnico requerido"),h==="juridical"&&!m.business_name.trim()&&(T.business_name="Razn social requerida"),h==="natural"&&(m.first_name.trim()||(T.first_name="Nombre requerido"),m.last_name.trim()||(T.last_name="Apellido requerido")),w.forEach(O=>{O.person_type&&O.person_type!==h||m[O.field]?.toString().trim()||(T[O.field]=`${O.label} es requerido por el template`)}),f(T),Object.keys(T).length===0},U=T=>{T.preventDefault(),k()&&r(m)};if(E)return e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"}),e.jsx("span",{className:"ml-3 text-gray-600",children:"Cargando requisitos del template..."})]});const A=S.variables_count??S.variables?.length??0;return e.jsxs("form",{onSubmit:U,className:"space-y-6",children:[s&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(st,{className:"h-5 w-5 text-blue-600 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"font-medium text-blue-900",children:["Crear tercero para: ",s.name," (",E?"...":A," variables)"]}),w.length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsxs("p",{className:"text-sm text-blue-700 font-medium flex items-center gap-1",children:[e.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full"}),"Datos del Tercero (",w.length," campos a completar):"]}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:w.map((T,O)=>e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 bg-blue-100 text-blue-800 text-xs rounded",children:T.variable},O))})]}),e.jsxs("div",{className:"mt-2",children:[e.jsxs("p",{className:"text-sm text-green-700 font-medium flex items-center gap-1",children:[e.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),"Datos del Contrato (se toman del formulario):"]}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:(S.variables||[]).filter(T=>["Valor","Periodicidad de Pago","Monto","Condiciones de Pago"].some(O=>T.toLowerCase().includes(O.toLowerCase()))).map((T,O)=>e.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 bg-green-100 text-green-800 text-xs rounded",children:[T," "]},O))})]}),e.jsxs("div",{className:"mt-2",children:[e.jsxs("p",{className:"text-sm text-gray-600 font-medium flex items-center gap-1",children:[e.jsx("span",{className:"w-2 h-2 bg-gray-400 rounded-full"}),"Automtico (fecha del sistema):"]}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:(S.variables||[]).filter(T=>T.toLowerCase().includes("fecha")||T.toLowerCase().includes("dia")||T.toLowerCase().includes("ao")||T.toLowerCase().includes("ano")).map((T,O)=>e.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 bg-gray-100 text-gray-600 text-xs rounded",children:[T," "]},O))})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("button",{type:"button",onClick:()=>z("juridical"),className:`p-4 border-2 rounded-lg text-left transition-all ${h==="juridical"?"border-indigo-500 bg-indigo-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx(ni,{className:`h-6 w-6 mb-2 ${h==="juridical"?"text-indigo-600":"text-gray-400"}`}),e.jsx("p",{className:`font-medium ${h==="juridical"?"text-indigo-900":"text-gray-700"}`,children:"Persona Jurdica"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Empresa, sociedad"})]}),e.jsxs("button",{type:"button",onClick:()=>z("natural"),className:`p-4 border-2 rounded-lg text-left transition-all ${h==="natural"?"border-indigo-500 bg-indigo-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx(ka,{className:`h-6 w-6 mb-2 ${h==="natural"?"text-indigo-600":"text-gray-400"}`}),e.jsx("p",{className:`font-medium ${h==="natural"?"text-indigo-900":"text-gray-700"}`,children:"Persona Natural"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Individuo, freelancer"})]})]}),e.jsx(Le,{label:"Tipo de Tercero",value:m.third_party_type,onChange:T=>N("third_party_type",T.target.value),options:u.map(T=>({value:T.code,label:T.name}))}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx(Le,{label:"Tipo ID",value:m.identification_type,onChange:T=>N("identification_type",T.target.value),options:r5}),e.jsx(ue,{label:"Nmero de Identificacin *",value:m.identification_number,onChange:T=>N("identification_number",T.target.value),placeholder:h==="juridical"?"900123456":"12345678",error:g.identification_number}),h==="juridical"&&e.jsx(ue,{label:"Dgito Verificacin",value:m.verification_digit,onChange:T=>N("verification_digit",T.target.value),placeholder:"7",maxLength:1})]}),h==="juridical"?e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(ue,{label:"Razn Social *",value:m.business_name,onChange:T=>N("business_name",T.target.value),placeholder:"EMPRESA S.A.S.",error:g.business_name}),e.jsx(ue,{label:"Nombre Comercial",value:m.trade_name,onChange:T=>N("trade_name",T.target.value),placeholder:"Mi Empresa"})]}):e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(ue,{label:"Nombre *",value:m.first_name,onChange:T=>N("first_name",T.target.value),placeholder:"Juan",error:g.first_name}),e.jsx(ue,{label:"Apellido *",value:m.last_name,onChange:T=>N("last_name",T.target.value),placeholder:"Prez",error:g.last_name})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(ue,{label:"Correo Electrnico *",type:"email",value:m.email,onChange:T=>N("email",T.target.value),placeholder:"contacto@empresa.com",error:g.email}),e.jsx(ue,{label:"Telfono",value:m.phone,onChange:T=>N("phone",T.target.value),placeholder:"(601) 234-5678"})]}),(_("address")||_("city"))&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[_("address")&&e.jsx(ue,{label:`Direccin${j("address")?" *":""}`,value:m.address,onChange:T=>N("address",T.target.value),placeholder:"Calle 123 # 45-67",error:g.address}),_("city")&&e.jsx(ue,{label:`Ciudad${j("city")?" *":""}`,value:m.city,onChange:T=>N("city",T.target.value),placeholder:"Bogot",error:g.city})]}),h==="juridical"&&(_("legal_rep_name")||_("legal_rep_id_number")||_("legal_rep_id_city"))&&e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Representante Legal"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[_("legal_rep_name")&&e.jsx(ue,{label:`Nombre${j("legal_rep_name")?" *":""}`,value:m.legal_rep_name,onChange:T=>N("legal_rep_name",T.target.value),placeholder:"Carlos Garca",error:g.legal_rep_name}),_("legal_rep_id_number")&&e.jsx(ue,{label:`Cdula${j("legal_rep_id_number")?" *":""}`,value:m.legal_rep_id_number,onChange:T=>N("legal_rep_id_number",T.target.value),placeholder:"12345678",error:g.legal_rep_id_number}),_("legal_rep_id_city")&&e.jsx(ue,{label:`Ciudad Expedicin Cdula${j("legal_rep_id_city")?" *":""}`,value:m.legal_rep_id_city,onChange:T=>N("legal_rep_id_city",T.target.value),placeholder:"Bogot",error:g.legal_rep_id_city}),_("legal_rep_email")&&e.jsx(ue,{label:`Email${j("legal_rep_email")?" *":""}`,type:"email",value:m.legal_rep_email,onChange:T=>N("legal_rep_email",T.target.value),placeholder:"representante@empresa.com",error:g.legal_rep_email})]})]}),(_("bank_name")||_("bank_account_number"))&&e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Informacin Bancaria"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[_("bank_name")&&e.jsx(ue,{label:`Banco${j("bank_name")?" *":""}`,value:m.bank_name,onChange:T=>N("bank_name",T.target.value),placeholder:"Bancolombia",error:g.bank_name}),_("bank_account_type")&&e.jsx(Le,{label:`Tipo Cuenta${j("bank_account_type")?" *":""}`,value:m.bank_account_type,onChange:T=>N("bank_account_type",T.target.value),options:[{value:"",label:"Seleccionar..."},{value:"savings",label:"Ahorros"},{value:"checking",label:"Corriente"}],error:g.bank_account_type}),_("bank_account_number")&&e.jsx(ue,{label:`Nmero Cuenta${j("bank_account_number")?" *":""}`,value:m.bank_account_number,onChange:T=>N("bank_account_number",T.target.value),placeholder:"1234567890",error:g.bank_account_number})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx(L,{type:"button",variant:"secondary",onClick:i,children:"Cancelar"}),e.jsxs(L,{type:"submit",loading:c,children:[e.jsx(oo,{className:"h-4 w-4 mr-2"}),"Crear Tercero"]})]})]})}const lm=[{value:"services",label:"Prestacin de Servicios"},{value:"purchase",label:"Compraventa"},{value:"nda",label:"Confidencialidad (NDA)"},{value:"lease",label:"Arrendamiento"},{value:"partnership",label:"Alianza/Asociacin"},{value:"consulting",label:"Consultora"},{value:"maintenance",label:"Mantenimiento"},{value:"license",label:"Licencia"},{value:"other",label:"Otro"}],q0={draft:{color:"gray",bg:"bg-gray-100",text:"text-gray-700",icon:Oe,label:"Borrador"},pending_approval:{color:"yellow",bg:"bg-yellow-100",text:"text-yellow-700",icon:Xt,label:"En Aprobacin"},pending_signatures:{color:"purple",bg:"bg-purple-100",text:"text-purple-700",icon:Wn,label:"Pendiente Firmas"},approved:{color:"blue",bg:"bg-blue-100",text:"text-blue-700",icon:Be,label:"Aprobado"},rejected:{color:"red",bg:"bg-red-100",text:"text-red-700",icon:Ma,label:"Rechazado"},active:{color:"green",bg:"bg-green-100",text:"text-green-700",icon:Be,label:"Activo"},expired:{color:"orange",bg:"bg-orange-100",text:"text-orange-700",icon:rs,label:"Vencido"},terminated:{color:"gray",bg:"bg-gray-100",text:"text-gray-600",icon:Ma,label:"Terminado"},cancelled:{color:"gray",bg:"bg-gray-100",text:"text-gray-600",icon:Ma,label:"Cancelado"},archived:{color:"slate",bg:"bg-slate-100",text:"text-slate-600",icon:eo,label:"Archivado"}};function u5({template:s,thirdParties:r,thirdPartyTypes:i,onSubmit:c,onCancel:u,onBack:h,isLoading:x,onEditThirdParty:m,onCreateThirdParty:p,creatingThirdParty:g}){const[f,v]=b.useState({title:"",description:"",contract_type:"services",third_party_id:"",start_date:"",end_date:"",amount:"",currency:"COP",payment_terms:"",payment_frequency:"",template_id:s?.id||""}),[E,S]=b.useState(!0),[w,C]=b.useState(null),[j,_]=b.useState(!1),[N,z]=b.useState(!1);b.useEffect(()=>{const O=setTimeout(async()=>{if(!s?.id||!f.third_party_id){C(null);return}_(!0);try{const ee=await fa.validateTemplate({template_id:s.id,third_party_id:f.third_party_id,amount:f.amount||0,start_date:f.start_date,end_date:f.end_date,description:f.description,contract_type:f.contract_type,payment_terms:f.payment_terms,payment_frequency:f.payment_frequency});C(ee.data)}catch(ee){console.error("Validation error:",ee),C(null)}finally{_(!1)}},500);return()=>clearTimeout(O)},[s?.id,f.third_party_id,f.amount,f.start_date,f.end_date,f.payment_terms||"",f.payment_frequency||""]);const k=()=>{const T=lm.find(B=>B.value===f.contract_type)?.label||"",O=r.find(B=>B.id===f.third_party_id),ee=O?.trade_name||O?.business_name||O?.display_name||"";return T&&ee?`${T} - ${ee}`:""};b.useEffect(()=>{if(E){const T=k();T&&v(O=>({...O,title:T}))}},[f.contract_type,f.third_party_id,E]);const U=(T,O)=>{T==="title"&&S(!1),v(ee=>({...ee,[T]:O}))},A=T=>{T.preventDefault(),c(f)};return e.jsxs(e.Fragment,{children:[N&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Crear Nuevo Tercero"}),e.jsx("p",{className:"text-sm text-gray-500",children:"El tercero se crear con los campos requeridos por el template"})]}),e.jsx("div",{className:"p-6",children:e.jsx(d5,{template:s,thirdPartyTypes:i,onSubmit:T=>{p(T,O=>{v(ee=>({...ee,third_party_id:O.id})),z(!1)})},onCancel:()=>z(!1),isLoading:g})})]})}),e.jsxs("form",{onSubmit:A,className:"space-y-6",children:[e.jsx("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:e.jsx(Wn,{className:"h-5 w-5 text-indigo-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-indigo-600 font-medium",children:"Template seleccionado"}),e.jsx("p",{className:"font-semibold text-indigo-900",children:s?.name}),e.jsxs("p",{className:"text-xs text-indigo-500",children:[s?.variables_count??s?.variables?.length??0," variables configuradas"]})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(Le,{label:"Tipo de Contrato",value:f.contract_type,onChange:T=>U("contract_type",T.target.value),options:lm,required:!0}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tercero *"}),e.jsxs("button",{type:"button",onClick:()=>z(!0),className:"text-xs text-indigo-600 hover:text-indigo-800 flex items-center gap-1",children:[e.jsx(oo,{className:"h-3 w-3"}),"Crear nuevo"]})]}),e.jsxs("select",{value:f.third_party_id,onChange:T=>U("third_party_id",T.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[e.jsx("option",{value:"",children:"Seleccionar tercero..."}),r.map(T=>e.jsxs("option",{value:T.id,children:[T.display_name," (",T.code,")"]},T.id))]}),r.length===0&&e.jsx("p",{className:"mt-1 text-xs text-amber-600",children:"No hay terceros activos. Crea uno nuevo para continuar."})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Ttulo del Contrato"}),e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:E,onChange:T=>{if(S(T.target.checked),T.target.checked){const O=k();O&&v(ee=>({...ee,title:O}))}},className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"text-gray-600",children:"Sugerir nombre"})]})]}),e.jsx("input",{type:"text",value:f.title,onChange:T=>U("title",T.target.value),placeholder:E?"Selecciona tipo y tercero...":"Ej: Contrato de Servicios TI 2025",required:!0,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500 ${E?"border-primary-300 bg-primary-50":"border-gray-300"}`}),E&&k()&&e.jsx("p",{className:"mt-1 text-xs text-primary-600",children:"Nombre generado automticamente desde Tipo + Tercero"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripcin"}),e.jsx("textarea",{value:f.description||"",onChange:T=>U("description",T.target.value),rows:3,placeholder:"Describe el objeto del contrato...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(ue,{label:"Fecha Inicio",type:"date",value:f.start_date,onChange:T=>U("start_date",T.target.value),required:!0}),e.jsx(ue,{label:"Fecha Fin",type:"date",value:f.end_date,onChange:T=>U("end_date",T.target.value),required:!0})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx(ue,{label:"Monto",type:"number",value:f.amount,onChange:T=>U("amount",T.target.value),placeholder:"0",required:!0}),e.jsx(Le,{label:"Moneda",value:f.currency,onChange:T=>U("currency",T.target.value),options:[{value:"COP",label:"COP (Pesos)"},{value:"USD",label:"USD (Dlares)"},{value:"EUR",label:"EUR (Euros)"}]}),e.jsx(Le,{label:"Periodicidad de Pago",value:f.payment_frequency,onChange:T=>U("payment_frequency",T.target.value),options:[{value:"",label:"Seleccionar..."},{value:"monthly",label:"Mensual"},{value:"bimonthly",label:"Bimestral"},{value:"quarterly",label:"Trimestral"},{value:"semiannual",label:"Semestral"},{value:"annual",label:"Anual"},{value:"one_time",label:"Pago nico"}]}),e.jsx(ue,{label:"Condiciones de Pago",value:f.payment_terms||"",onChange:T=>U("payment_terms",T.target.value),placeholder:"Ej: 30 das"})]}),f.amount&&e.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Nivel de aprobacin estimado:"})," ",Number(f.amount)<=1e7&&"Nivel 1 (Jefe de rea)",Number(f.amount)>1e7&&Number(f.amount)<=5e7&&"Nivel 2 (Jefe de rea  Legal)",Number(f.amount)>5e7&&Number(f.amount)<=2e8&&"Nivel 3 (Jefe de rea  Legal  Gerente)",Number(f.amount)>2e8&&"Nivel 4 (Jefe de rea  Legal  Gerente  CEO)"]})}),j&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}),e.jsx("span",{className:"text-sm text-blue-700",children:"Validando datos del template..."})]})}),w&&!j&&(w.valid?e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Be,{className:"h-5 w-5 text-green-600"}),e.jsxs("span",{className:"text-sm font-medium text-green-700",children:["Todos los datos estn completos (",w.validation.resolved_count,"/",w.template.total_variables," variables)"]})]})}):e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(rs,{className:"h-5 w-5 text-red-600 mt-0.5"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-red-700 mb-2",children:["Faltan datos para generar el documento (",w.validation.missing_count," de ",w.template.total_variables,")"]}),e.jsxs("div",{className:"space-y-1",children:[w.validation.missing_by_source?.third_party?.length>0&&e.jsxs("div",{className:"text-xs",children:[e.jsx("span",{className:"font-medium text-red-600",children:"Datos del Tercero:"}),e.jsx("ul",{className:"ml-4 list-disc text-red-600",children:w.validation.missing_by_source.third_party.map((T,O)=>e.jsx("li",{children:T.label},O))})]}),w.validation.missing_by_source?.contract?.length>0&&e.jsxs("div",{className:"text-xs",children:[e.jsx("span",{className:"font-medium text-red-600",children:"Datos del Contrato:"}),e.jsx("ul",{className:"ml-4 list-disc text-red-600",children:w.validation.missing_by_source.contract.map((T,O)=>e.jsx("li",{children:T.label},O))})]}),w.validation.missing_by_source?.unmapped?.length>0&&e.jsxs("div",{className:"text-xs",children:[e.jsx("span",{className:"font-medium text-amber-600",children:"Variables sin mapear:"}),e.jsx("ul",{className:"ml-4 list-disc text-amber-600",children:w.validation.missing_by_source.unmapped.map((T,O)=>e.jsx("li",{children:T.variable},O))})]})]}),e.jsx("p",{className:"text-xs text-red-500 mt-2",children:"Complete los datos faltantes del tercero o contacte a un administrador para mapear las variables."}),w.validation.missing_by_source?.third_party?.length>0&&f.third_party_id&&m&&e.jsxs(L,{type:"button",variant:"secondary",size:"sm",className:"mt-3",onClick:()=>{const T=r.find(O=>O.id===f.third_party_id);T&&m(T,w.validation.missing_by_source.third_party)},children:[e.jsx(ns,{className:"h-4 w-4 mr-2"}),"Completar datos del tercero"]})]})]})})),e.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[e.jsx(L,{type:"button",variant:"ghost",onClick:h,children:" Cambiar Template"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(L,{type:"button",variant:"secondary",onClick:u,children:"Cancelar"}),e.jsxs(L,{type:"submit",loading:x,disabled:j||w&&!w.valid,children:[e.jsx(Ke,{className:"h-4 w-4 mr-2"}),"Crear Contrato"]})]})]})]})]})}function m5({templates:s,onSelect:r,onCancel:i,isLoading:c}){const[u,h]=b.useState(""),x=s.find(f=>f.id===u),m=s.filter(f=>f.module_type==="legal"||f.main_category==="comercial"),p=s.filter(f=>f.module_type==="hr"||f.main_category==="laboral"),g=f=>e.jsx("div",{onClick:()=>h(f.id),className:`
        p-4 border-2 rounded-lg cursor-pointer transition-all
        ${u===f.id?"border-indigo-500 bg-indigo-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}
      `,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${u===f.id?"bg-indigo-100":"bg-gray-100"}`,children:e.jsx(Oe,{className:`h-5 w-5 ${u===f.id?"text-indigo-600":"text-gray-500"}`})}),e.jsxs("div",{children:[e.jsx("p",{className:`font-medium ${u===f.id?"text-indigo-900":"text-gray-900"}`,children:f.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[f.category_label,"  ",f.variables_count??f.variables?.length??0," variables"]})]})]}),u===f.id&&e.jsx(Be,{className:"h-5 w-5 text-indigo-600"})]})},f.id);return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(st,{className:"h-5 w-5 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-blue-900",children:"Selecciona un template"}),e.jsx("p",{className:"text-sm text-blue-700",children:"Los contratos se generan a partir de templates predefinidos. Selecciona el template que mejor se ajuste al tipo de contrato."})]})]})}),s.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ri,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay templates disponibles"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Para crear contratos, primero debes crear templates en las categoras Legal o Recursos Humanos."}),e.jsx(L,{variant:"secondary",onClick:i,children:"Cerrar"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-6",children:[m.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"p-1.5 bg-purple-100 rounded-lg",children:e.jsx(Ut,{className:"h-4 w-4 text-purple-600"})}),e.jsx("h3",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide",children:"Gestin Legal"}),e.jsxs("span",{className:"text-xs text-gray-400",children:["(",m.length,")"]})]}),e.jsx("div",{className:"grid gap-3",children:m.map(g)})]}),p.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"p-1.5 bg-green-100 rounded-lg",children:e.jsx(ht,{className:"h-4 w-4 text-green-600"})}),e.jsx("h3",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide",children:"Recursos Humanos"}),e.jsxs("span",{className:"text-xs text-gray-400",children:["(",p.length,")"]})]}),e.jsx("div",{className:"grid gap-3",children:p.map(g)})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx(L,{variant:"secondary",onClick:i,children:"Cancelar"}),e.jsxs(L,{onClick:()=>r(x),disabled:!u,children:["Continuar",e.jsx(ys,{className:"h-4 w-4 ml-2"})]})]})]})]})}function h5({contract:s,onView:r,onEdit:i,onSubmit:c,onDownload:u,onViewDocument:h,onGenerate:x,onDelete:m,onArchive:p,onUnarchive:g,isAdmin:f,showArchived:v}){const[E,S]=b.useState(!1),w=q0[s.status]||q0.draft,C=w.icon,j=(U,A)=>new Intl.NumberFormat("es-CO",{style:"currency",currency:A||"COP",minimumFractionDigits:0,maximumFractionDigits:0}).format(U),_=U=>U?new Date(U).toLocaleDateString("es-CO",{day:"2-digit",month:"short",year:"numeric"}):"-",N=["approved","active"].includes(s.status)&&!s.has_document,z=s.status==="draft",k=s.status==="draft";return e.jsxs("tr",{className:"hover:bg-gray-50 border-b border-gray-100",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${w.bg}`,children:e.jsx(C,{className:`h-4 w-4 ${w.text}`})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 truncate max-w-[200px]",title:s.title,children:s.title}),e.jsx("p",{className:"text-xs text-gray-500",children:s.contract_number})]})]})}),e.jsx("td",{className:"px-4 py-3",children:s.third_party?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ut,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-900 truncate max-w-[150px]",title:s.third_party.display_name,children:s.third_party.display_name})]}):e.jsx("span",{className:"text-sm text-gray-400",children:"-"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"text-sm text-gray-700",children:s.type_label})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Bl,{className:"h-3 w-3 text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:j(s.amount,s.currency)})]})}),e.jsxs("td",{className:"px-4 py-3",children:[e.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-600",children:[e.jsx(St,{className:"h-3 w-3 text-gray-400"}),e.jsx("span",{children:_(s.start_date)}),e.jsx("span",{className:"text-gray-400",children:""}),e.jsx("span",{children:_(s.end_date)})]}),s.expiring_soon&&e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(rs,{className:"h-3 w-3 text-orange-500"}),e.jsxs("span",{className:"text-xs text-orange-600",children:["Vence en ",s.days_until_expiry," das"]})]})]}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(qe,{status:w.color,children:w.label})}),e.jsx("td",{className:"px-4 py-3",children:s.status==="pending_approval"?e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-1.5 w-20",children:e.jsx("div",{className:"bg-yellow-500 h-1.5 rounded-full transition-all",style:{width:`${s.approval_progress}%`}})}),e.jsxs("span",{className:"text-xs text-gray-500",children:[s.approval_progress,"%"]})]}),e.jsxs("p",{className:"text-xs text-gray-500 truncate",title:s.current_approver_label,children:[" ",s.current_approver_label]})]}):s.status==="approved"||s.status==="active"?e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Be,{className:"h-4 w-4 text-green-500"}),e.jsx("span",{className:"text-xs text-green-600",children:"Completa"})]}):s.status==="rejected"?e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ma,{className:"h-4 w-4 text-red-500"}),e.jsx("span",{className:"text-xs text-red-600",children:"Rechazado"})]}):e.jsx("span",{className:"text-xs text-gray-400",children:"-"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"relative flex items-center justify-end gap-1",children:[z&&e.jsx("button",{onClick:()=>c(s.id),className:"p-1.5 text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",title:"Enviar a Aprobacin",children:e.jsx(no,{className:"h-4 w-4"})}),N&&e.jsx("button",{onClick:()=>x(s),className:"p-1.5 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Generar Documento",children:e.jsx(ii,{className:"h-4 w-4"})}),s.has_document&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>h(s),className:"p-1.5 text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",title:"Ver Documento",children:e.jsx(At,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>u(s.id),className:"p-1.5 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Descargar PDF",children:e.jsx(ba,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>S(!E),className:"p-1.5 text-gray-500 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Nm,{className:"h-4 w-4"})}),E&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>S(!1)}),e.jsxs("div",{className:"absolute right-0 bottom-full mb-1 bg-white border border-gray-200 rounded-lg shadow-lg py-1 z-20 min-w-[160px]",children:[e.jsxs("button",{onClick:()=>{r(s.id),S(!1)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center gap-2",children:[e.jsx(At,{className:"h-4 w-4"}),"Ver Detalle"]}),k&&e.jsxs("button",{onClick:()=>{i(s),S(!1)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center gap-2",children:[e.jsx(ns,{className:"h-4 w-4"}),"Editar"]}),s.can_delete&&e.jsxs("button",{onClick:()=>{confirm("Ests seguro de eliminar este contrato? Esta accin no se puede deshacer.")&&m(s.id),S(!1)},className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 flex items-center gap-2",children:[e.jsx(Nt,{className:"h-4 w-4"}),"Eliminar"]}),f&&!v&&["active","expired","terminated","cancelled"].includes(s.status)&&e.jsxs("button",{onClick:()=>{p(s.id),S(!1)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center gap-2 border-t border-gray-100",children:[e.jsx(eo,{className:"h-4 w-4"}),"Archivar"]}),f&&v&&s.status==="archived"&&e.jsxs("button",{onClick:()=>{g(s.id),S(!1)},className:"w-full px-4 py-2 text-left text-sm text-green-600 hover:bg-green-50 flex items-center gap-2",children:[e.jsx(u2,{className:"h-4 w-4"}),"Restaurar"]})]})]})]})]})})]})}function x5(){return e.jsx("tbody",{children:[1,2,3,4,5].map(s=>e.jsxs("tr",{className:"border-b border-gray-100 animate-pulse",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"h-10 bg-gray-200 rounded w-48"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"h-5 bg-gray-200 rounded w-32"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"h-5 bg-gray-200 rounded w-24"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"h-5 bg-gray-200 rounded w-28"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"h-5 bg-gray-200 rounded w-36"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"h-6 bg-gray-200 rounded w-20"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"h-5 bg-gray-200 rounded w-20"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"h-8 bg-gray-200 rounded w-24"})})]},s))})}function p5(){const[s,r]=b.useState(""),[i,c]=b.useState(""),[u,h]=b.useState(""),[x,m]=b.useState(!1),[p,g]=b.useState(1),[f,v]=b.useState(null),[E,S]=b.useState(!1),[w,C]=b.useState(null),[j,_]=b.useState(""),[N,z]=b.useState(!1),[k,U]=b.useState(null),[A,T]=b.useState(null),[O,ee]=b.useState([]),[B,ye]=b.useState(null),[F,te]=b.useState(null),[je,xe]=b.useState(!1),[$,pe]=b.useState(!1),[G,Y]=b.useState(!1);Aa();const me=et(),{isAdmin:M}=Ra(),{data:V,isLoading:ae}=ke({queryKey:["contracts",s,i,u,G],queryFn:()=>fa.list({search:s||void 0,type:i||void 0,status:u||void 0,archived:G?"true":void 0})}),{data:W}=ke({queryKey:["third-parties-active"],queryFn:()=>gs.list({status:"active",per_page:100})}),{data:R}=ke({queryKey:["templates-comercial"],queryFn:()=>si.list({main_category:"comercial"})}),{data:X}=ke({queryKey:["templates-laboral"],queryFn:()=>si.list({main_category:"laboral"})}),{data:ge}=ke({queryKey:["third-party-types-active"],queryFn:()=>zl.list({active:"true"})}),Q=Ne({mutationFn:async se=>{const Ee=await fa.create(se),Ae=Ee.data?.data;if(Ae?.id&&se.template_id)try{await fa.generateDocument(Ae.id,se.template_id)}catch(ct){console.warn("Auto-generate failed:",ct)}return Ee},onSuccess:()=>{me.invalidateQueries(["contracts"]),Ja()},onError:se=>{const Ee=se.response?.data?.error||se.response?.data?.errors?.join(", ")||"Error al crear contrato";alert(Ee)}}),ie=Ne({mutationFn:se=>fa.submit(se),onSuccess:()=>{me.invalidateQueries(["contracts"])}}),_e=Ne({mutationFn:se=>fa.delete(se),onSuccess:()=>{me.invalidateQueries(["contracts"]),alert("Contrato eliminado correctamente")},onError:se=>{alert(se.response?.data?.error||se.response?.data?.errors?.join(", ")||"Error al eliminar contrato")}}),ze=Ne({mutationFn:se=>fa.archive(se),onSuccess:()=>{me.invalidateQueries(["contracts"])},onError:se=>{alert(se.response?.data?.error||"Error al archivar contrato")}}),$e=Ne({mutationFn:se=>fa.unarchive(se),onSuccess:()=>{me.invalidateQueries(["contracts"])},onError:se=>{alert(se.response?.data?.error||"Error al restaurar contrato")}}),ne=Ne({mutationFn:({contractId:se,templateId:Ee})=>fa.generateDocument(se,Ee),onSuccess:()=>{me.invalidateQueries(["contracts"]),S(!1),C(null),_("")},onError:se=>{alert(se.response?.data?.error||se.response?.data?.missing_variables||"Error al generar documento")}}),Te=Ne({mutationFn:({id:se,data:Ee})=>gs.update(se,Ee),onSuccess:()=>{me.invalidateQueries(["third-parties-active"]),T(null),ee([])}}),tt=Ne({mutationFn:se=>gs.create(se),onSuccess:se=>(me.invalidateQueries(["third-parties-active"]),se.data?.data),onError:se=>{const Ee=se.response?.data?.errors||[],Ae=Ee.length>0?Ee.join(", "):se.response?.data?.error||"Error al crear tercero";alert(Ae)}}),lt=V?.data?.data||[],Et=W?.data?.data||[],os=R?.data?.data||[],ia=X?.data?.data||[],Ft=[...os,...ia],bs=ge?.data?.data||[],Ja=()=>{m(!1),g(1),v(null)},xt=se=>{v(se),g(2)},_t=async se=>{try{const Ee=await fa.downloadDocument(se),Ae=new Blob([Ee.data],{type:"application/pdf"}),ct=window.URL.createObjectURL(Ae),Ht=document.createElement("a");Ht.href=ct,Ht.download=`contrato-${se}.pdf`,Ht.click(),window.URL.revokeObjectURL(ct)}catch(Ee){console.error("Error downloading document:",Ee);const Ae=Ee.response?.data?.error||"Error al descargar el documento";alert(Ae)}},ds=async se=>{ye(se),xe(!0);try{const Ee=await fa.downloadDocument(se.id),Ae=new Blob([Ee.data],{type:"application/pdf"}),ct=URL.createObjectURL(Ae);te(ct)}catch(Ee){console.error("Error loading document:",Ee);const Ae=Ee.response?.data?.error||"Error al cargar el documento";alert(Ae),ye(null)}finally{xe(!1)}},va=()=>{F&&URL.revokeObjectURL(F),ye(null),te(null)},be=se=>{se.template_id?ne.mutate({contractId:se.id,templateId:se.template_id}):(C(se),_(""),S(!0))},ta=se=>{confirm("Ests seguro de eliminar este contrato?")&&_e.mutate(se)},vs=se=>{confirm("Ests seguro de archivar este contrato? Los contratos archivados no aparecen en la lista principal.")&&ze.mutate(se)},Ia=se=>{confirm("Restaurar este contrato del archivo?")&&$e.mutate(se)},oe={total:lt.length,pending:lt.filter(se=>se.status==="pending_approval").length,pendingSignatures:lt.filter(se=>se.status==="pending_signatures").length,active:lt.filter(se=>se.status==="active").length,expiring:lt.filter(se=>se.expiring_soon).length};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:G?"Contratos Archivados":"Contratos"}),e.jsx("p",{className:"text-gray-500",children:G?"Contratos que han sido archivados":"Gestin de contratos con aprobacin multinivel"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[M&&e.jsx(L,{variant:G?"primary":"secondary",onClick:()=>Y(!G),children:G?e.jsxs(e.Fragment,{children:[e.jsx(Oe,{className:"h-4 w-4 mr-2"}),"Ver Activos"]}):e.jsxs(e.Fragment,{children:[e.jsx(eo,{className:"h-4 w-4 mr-2"}),"Ver Archivados"]})}),e.jsxs(L,{variant:"secondary",onClick:()=>pe(!0),children:[e.jsx(pi,{className:"h-4 w-4 mr-2"}),"Variables"]}),e.jsx(kt,{to:"/legal/third-parties",children:e.jsxs(L,{variant:"secondary",children:[e.jsx(ht,{className:"h-4 w-4 mr-2"}),"Terceros"]})}),!G&&e.jsxs(L,{onClick:()=>m(!0),disabled:Ft.length===0,children:[e.jsx(Ke,{className:"h-4 w-4 mr-2"}),"Nuevo Contrato"]})]})]}),e.jsxs("div",{className:"grid grid-cols-5 gap-4",children:[e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gray-100 rounded-lg",children:e.jsx(Oe,{className:"h-5 w-5 text-gray-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:oe.total}),e.jsx("p",{className:"text-sm text-gray-500",children:"Total"})]})]})}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:e.jsx(Xt,{className:"h-5 w-5 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:oe.pending}),e.jsx("p",{className:"text-sm text-gray-500",children:"En Aprobacin"})]})]})}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(Wn,{className:"h-5 w-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:oe.pendingSignatures}),e.jsx("p",{className:"text-sm text-gray-500",children:"Pend. Firmas"})]})]})}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(Be,{className:"h-5 w-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:oe.active}),e.jsx("p",{className:"text-sm text-gray-500",children:"Activos"})]})]})}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:e.jsx(rs,{className:"h-5 w-5 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:oe.expiring}),e.jsx("p",{className:"text-sm text-gray-500",children:"Por Vencer"})]})]})})]}),Ft.length===0&&e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(rs,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-yellow-900",children:"No hay templates de contratos"}),e.jsx("p",{className:"text-sm text-yellow-700",children:'Para crear contratos, primero debes crear templates en la categora "Comercial" desde Administracin  Templates.'})]})]})}),e.jsx(we,{children:e.jsx(Ce,{className:"p-4",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(ra,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar por ttulo, nmero, tercero...",value:s,onChange:se=>r(se.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),e.jsx(Le,{value:i,onChange:se=>c(se.target.value),options:[{value:"",label:"Todos los tipos"},...lm],className:"w-48"}),e.jsx(Le,{value:u,onChange:se=>h(se.target.value),options:[{value:"",label:"Todos los estados"},{value:"draft",label:"Borrador"},{value:"pending_approval",label:"En Aprobacin"},{value:"pending_signatures",label:"Pendiente Firmas"},{value:"approved",label:"Aprobado"},{value:"active",label:"Activo"},{value:"rejected",label:"Rechazado"},{value:"expired",label:"Vencido"}],className:"w-48"})]})})}),e.jsx(we,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50 border-b border-gray-200",children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Contrato"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Tercero"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Tipo"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Monto"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Vigencia"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Estado"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Aprobacin"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Acciones"})]})}),ae?e.jsx(x5,{}):lt.length===0?e.jsx("tbody",{children:e.jsx("tr",{children:e.jsxs("td",{colSpan:8,className:"px-4 py-12 text-center",children:[e.jsx(Oe,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay contratos"}),e.jsx("p",{className:"text-gray-500 mb-4",children:Ft.length===0?"Primero crea un template de contrato comercial":"Comienza creando tu primer contrato"}),Ft.length>0&&e.jsxs(L,{onClick:()=>m(!0),children:[e.jsx(Ke,{className:"h-4 w-4 mr-2"}),"Nuevo Contrato"]})]})})}):e.jsx("tbody",{children:lt.map(se=>e.jsx(h5,{contract:se,onView:Ee=>{const Ae=lt.find(ct=>ct.id===Ee);Ae&&(U(Ae),z(!0))},onEdit:Ee=>{U(Ee),z(!0)},onSubmit:Ee=>ie.mutate(Ee),onDownload:_t,onViewDocument:ds,onGenerate:be,onDelete:ta,onArchive:vs,onUnarchive:Ia,isAdmin:M,showArchived:G},se.id))})]})})}),e.jsx(Qe,{isOpen:x,onClose:Ja,title:p===1?"Nuevo Contrato - Seleccionar Template":"Nuevo Contrato - Informacin",size:"lg",children:p===1?e.jsx(m5,{templates:Ft,onSelect:xt,onCancel:Ja}):e.jsx(u5,{template:f,thirdParties:Et,thirdPartyTypes:bs,onSubmit:se=>Q.mutate(se),onCancel:Ja,onBack:()=>g(1),isLoading:Q.isPending,onEditThirdParty:(se,Ee)=>{T(se),ee(Ee)},onCreateThirdParty:(se,Ee)=>{tt.mutate(se,{onSuccess:Ae=>{const ct=Ae.data?.data;ct&&Ee&&Ee(ct)}})},creatingThirdParty:tt.isPending})}),e.jsx(Qe,{isOpen:E,onClose:()=>{S(!1),C(null),_("")},title:"Generar Documento",children:e.jsxs("div",{className:"space-y-4",children:[w&&e.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Oe,{className:"h-5 w-5 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:w.title}),e.jsx("p",{className:"text-sm text-gray-500",children:w.contract_number}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Tercero: ",w.third_party?.display_name]})]})]})}),e.jsx(Le,{label:"Template para Generar",value:j,onChange:se=>_(se.target.value),options:[{value:"",label:"Seleccionar template..."},...Ft.map(se=>({value:se.id,label:`${se.name} (${se.variables_count??se.variables?.length??0} variables)`}))]}),Ft.length===0&&e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsx("p",{className:"text-sm text-yellow-800",children:"No hay templates de contratos comerciales activos."})}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx(L,{variant:"secondary",onClick:()=>{S(!1),C(null),_("")},children:"Cancelar"}),e.jsxs(L,{onClick:()=>ne.mutate({contractId:w.id,templateId:j}),loading:ne.isPending,disabled:!j,children:[e.jsx(ii,{className:"h-4 w-4 mr-2"}),"Generar"]})]})]})}),e.jsx(Qe,{isOpen:N,onClose:()=>{z(!1),U(null)},title:"Detalle del Contrato",size:"lg",children:k&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:k.title}),e.jsx("p",{className:"text-sm text-gray-500",children:k.contract_number})]}),e.jsx(qe,{variant:k.status,children:k.status_label||k.status})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Tercero"}),e.jsx("p",{className:"font-medium",children:k.third_party?.display_name||"N/A"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Tipo"}),e.jsx("p",{className:"font-medium",children:k.type_label||k.contract_type})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Monto"}),e.jsx("p",{className:"font-medium text-green-600",children:new Intl.NumberFormat("es-CO",{style:"currency",currency:k.currency||"COP"}).format(k.amount||0)})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Nivel de Aprobacin"}),e.jsx("p",{className:"font-medium",children:k.approval_level_label||k.approval_level})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Fecha Inicio"}),e.jsx("p",{className:"font-medium",children:k.start_date?new Date(k.start_date).toLocaleDateString("es-CO"):"N/A"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Fecha Fin"}),e.jsx("p",{className:"font-medium",children:k.end_date?new Date(k.end_date).toLocaleDateString("es-CO"):"N/A"})]})]}),k.description&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Descripcin"}),e.jsx("p",{className:"text-gray-700",children:k.description})]}),k.payment_terms&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Trminos de Pago"}),e.jsx("p",{className:"text-gray-700",children:k.payment_terms})]}),e.jsx("div",{className:"p-4 bg-blue-50 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{className:"font-medium text-blue-900",children:"Documento del Contrato"})]}),k.has_document?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(L,{size:"sm",variant:"secondary",onClick:()=>{z(!1),ds(k)},children:[e.jsx(At,{className:"h-4 w-4 mr-1"}),"Ver Documento"]}),e.jsxs(L,{size:"sm",variant:"secondary",onClick:()=>_t(k.id),children:[e.jsx(ba,{className:"h-4 w-4 mr-1"}),"Descargar"]})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ri,{className:"h-4 w-4 text-amber-500"}),e.jsx("span",{className:"text-sm text-amber-600",children:"Sin documento"}),e.jsxs(L,{size:"sm",variant:"secondary",onClick:()=>{z(!1),be(k)},children:[e.jsx(ii,{className:"h-4 w-4 mr-1"}),"Generar"]})]})]})}),k.approvals&&k.approvals.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Aprobaciones"}),e.jsx("div",{className:"space-y-2",children:k.approvals.map((se,Ee)=>e.jsxs("div",{className:"flex items-center justify-between bg-gray-50 rounded-lg p-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:se.role_label||se.role}),se.approver_name&&e.jsx("p",{className:"text-xs text-gray-500",children:se.approver_name})]}),e.jsx(qe,{variant:se.status==="approved"?"success":se.status==="rejected"?"error":"warning",children:se.status==="approved"?"Aprobado":se.status==="rejected"?"Rechazado":"Pendiente"})]},Ee))})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx(L,{variant:"secondary",onClick:()=>{z(!1),U(null)},children:"Cerrar"}),k.status==="draft"&&e.jsxs(L,{onClick:()=>{ie.mutate(k.id),z(!1),U(null)},loading:ie.isPending,children:[e.jsx(no,{className:"h-4 w-4 mr-2"}),"Enviar a Aprobacin"]})]})]})}),e.jsx(Qe,{isOpen:!!A,onClose:()=>{T(null),ee([])},title:"Completar datos del tercero",size:"lg",children:A&&e.jsx(f5,{thirdParty:A,missingFields:O,onSubmit:se=>Te.mutate({id:A.id,data:se}),onCancel:()=>{T(null),ee([])},isLoading:Te.isPending})}),e.jsx(Qe,{isOpen:!!B,onClose:va,title:`Documento: ${B?.contract_number||""}`,size:"xl",children:e.jsxs("div",{className:"space-y-4",children:[B&&e.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Contrato:"}),e.jsx("p",{className:"font-medium",children:B.title})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Tercero:"}),e.jsx("p",{className:"font-medium",children:B.third_party?.display_name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Monto:"}),e.jsx("p",{className:"font-medium text-green-600",children:new Intl.NumberFormat("es-CO",{style:"currency",currency:B.currency||"COP"}).format(B.amount)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Estado:"}),e.jsx(qe,{variant:B.status,children:B.status_label||B.status})]})]})}),je?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-3 text-gray-500",children:"Cargando documento..."})]}):F?e.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",style:{height:"60vh"},children:e.jsx("iframe",{src:F,className:"w-full h-full",title:"Contract Document"})}):e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(ri,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"No se pudo cargar el documento"})]}),e.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[e.jsxs(L,{variant:"secondary",onClick:()=>{if(F){const se=document.createElement("a");se.href=F,se.download=`${B?.contract_number||"contrato"}.pdf`,se.click()}},disabled:!F,children:[e.jsx(ba,{className:"h-4 w-4 mr-2"}),"Descargar PDF"]}),e.jsx(L,{variant:"secondary",onClick:va,children:"Cerrar"})]})]})}),e.jsx(o5,{isOpen:$,onClose:()=>pe(!1)})]})}function f5({thirdParty:s,missingFields:r,onSubmit:i,onCancel:c,isLoading:u}){const[h,x]=b.useState({...s}),m=(v,E)=>{x(S=>({...S,[v]:E}))},p=v=>{v.preventDefault(),i(h)},g=v=>({legal_rep_name:{label:"Nombre del Representante Legal",type:"text",field:"legal_rep_name"},legal_rep_id:{label:"Cdula del Representante Legal",type:"text",field:"legal_rep_id_number"},legal_rep_email:{label:"Email del Representante Legal",type:"email",field:"legal_rep_email"},display_name:{label:"Nombre",type:"text",field:"business_name"},business_name:{label:"Razn Social",type:"text",field:"business_name"},trade_name:{label:"Nombre Comercial",type:"text",field:"trade_name"},identification_number:{label:"Nmero de Identificacin",type:"text",field:"identification_number"},address:{label:"Direccin",type:"text",field:"address"},city:{label:"Ciudad",type:"text",field:"city"},phone:{label:"Telfono",type:"text",field:"phone"},email:{label:"Email",type:"email",field:"email"},bank_name:{label:"Banco",type:"text",field:"bank_name"},bank_account_number:{label:"Nmero de Cuenta",type:"text",field:"bank_account_number"},bank_account_type:{label:"Tipo de Cuenta",type:"select",field:"bank_account_type",options:[{value:"",label:"Seleccionar..."},{value:"savings",label:"Ahorros"},{value:"checking",label:"Corriente"}]}})[v]||null,f=[...new Set(r.map(v=>v.field))].map(v=>g(v)).filter(Boolean);return e.jsxs("form",{onSubmit:p,className:"space-y-6",children:[e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(rs,{className:"h-5 w-5 text-amber-600 mt-0.5"}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-amber-900",children:["Datos faltantes para ",s.display_name]}),e.jsx("p",{className:"text-sm text-amber-700",children:"Complete los siguientes campos para poder generar el documento del contrato."})]})]})}),e.jsx("div",{className:"space-y-4",children:f.map((v,E)=>e.jsx("div",{children:v.type==="select"?e.jsx(Le,{label:v.label,value:h[v.field]||"",onChange:S=>m(v.field,S.target.value),options:v.options,required:!0}):e.jsx(ue,{label:v.label,type:v.type,value:h[v.field]||"",onChange:S=>m(v.field,S.target.value),required:!0})},E))}),f.length===0&&e.jsxs("div",{className:"text-center py-4 text-gray-500",children:[e.jsx("p",{children:"No se pudieron determinar los campos faltantes."}),e.jsx("p",{className:"text-sm",children:"Por favor, edite el tercero desde la seccin de Terceros."})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx(L,{type:"button",variant:"secondary",onClick:c,children:"Cancelar"}),e.jsxs(L,{type:"submit",loading:u,disabled:f.length===0,children:[e.jsx(Be,{className:"h-4 w-4 mr-2"}),"Guardar y Continuar"]})]})]})}const g5={pending:"yellow",approved:"green",rejected:"red",signed:"green"},U0={pending_approval:{color:"yellow",icon:Xt,label:"En Aprobacin"},pending_signatures:{color:"purple",icon:Wn,label:"Pendiente Firmas"}},y5={area_manager:"blue",legal:"purple",general_manager:"orange",ceo:"red"};function b5({approvals:s}){return e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-4 top-0 bottom-0 w-0.5 bg-gray-200"}),e.jsx("div",{className:"space-y-4",children:s.map((r,i)=>e.jsxs("div",{className:"relative flex items-start gap-4 pl-10",children:[e.jsxs("div",{className:`absolute left-2 w-4 h-4 rounded-full ${r.status==="approved"?"bg-green-500":r.status==="rejected"?"bg-red-500":"bg-gray-300"}`,children:[r.status==="approved"&&e.jsx(Be,{className:"w-4 h-4 text-white"}),r.status==="rejected"&&e.jsx(Ma,{className:"w-4 h-4 text-white"})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(qe,{status:y5[r.role]||"gray",children:r.role_label}),e.jsx(qe,{status:g5[r.status],children:r.status==="pending"?"Pendiente":r.status==="approved"?"Aprobado":"Rechazado"})]}),r.approver_name&&e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Por: ",r.approver_name,r.decided_at&&e.jsx("span",{className:"ml-2 text-gray-400",children:new Date(r.decided_at).toLocaleString()})]}),r.notes&&e.jsxs("p",{className:"text-sm text-gray-500 mt-1 italic",children:['"',r.notes,'"']}),r.reason&&e.jsxs("p",{className:"text-sm text-red-600 mt-1",children:["Motivo: ",r.reason]})]})]},i))})]})}function v5({signatures:s}){return!s||s.length===0?null:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-4 top-0 bottom-0 w-0.5 bg-gray-200"}),e.jsx("div",{className:"space-y-3",children:s.map((r,i)=>e.jsxs("div",{className:"relative flex items-start gap-4 pl-10",children:[e.jsx("div",{className:`absolute left-2 w-4 h-4 rounded-full flex items-center justify-center ${r.status==="signed"?"bg-green-500":"bg-gray-300"}`,children:r.status==="signed"&&e.jsx(Be,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-sm",children:r.signatory_label}),e.jsx(qe,{status:r.status==="signed"?"green":"gray",children:r.status==="signed"?"Firmado":"Pendiente"})]}),r.user_name&&e.jsx("p",{className:"text-sm text-gray-600",children:r.user_name}),r.signed_at&&e.jsx("p",{className:"text-xs text-gray-400",children:new Date(r.signed_at).toLocaleString()})]})]},i))})]})}function j5({contract:s,onApprove:r,onReject:i,onSign:c,onViewDetail:u,onViewDocument:h}){const x=(f,v)=>new Intl.NumberFormat("es-CO",{style:"currency",currency:v||"COP",minimumFractionDigits:0}).format(f),m=s.status==="pending_signatures",p=U0[s.status]||U0.pending_approval,g=p.icon;return e.jsx(we,{className:"hover:shadow-md transition-shadow",children:e.jsxs(Ce,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${m?"bg-purple-100":"bg-yellow-100"}`,children:e.jsx(g,{className:`h-5 w-5 ${m?"text-purple-600":"text-yellow-600"}`})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900",children:s.title}),e.jsx("p",{className:"text-sm text-gray-500",children:s.contract_number})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(qe,{status:p.color,children:p.label}),e.jsx(qe,{status:"blue",children:s.type_label})]})]}),e.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Tercero"}),e.jsx("p",{className:"font-medium",children:s.third_party?.display_name||"-"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Monto"}),e.jsx("p",{className:"font-medium",children:x(s.amount,s.currency)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Solicitado por"}),e.jsx("p",{className:"font-medium",children:s.requested_by?.name||"-"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Nivel de Aprobacin"}),e.jsx("p",{className:"font-medium",children:s.approval_level_label})]})]}),!m&&e.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Progreso de Aprobacin"}),e.jsxs("span",{className:"text-sm text-gray-500",children:[s.approval_progress,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all",style:{width:`${s.approval_progress}%`}})}),e.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:["Pendiente: ",e.jsx("strong",{children:s.current_approver_label})]})]}),s.approvals&&s.approvals.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide mb-2",children:"Aprobaciones"}),e.jsx(b5,{approvals:s.approvals})]}),m&&s.document_signatures&&s.document_signatures.length>0&&e.jsxs("div",{className:"mt-4 p-3 bg-purple-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-purple-700",children:"Progreso de Firmas"}),s.document_signatures_status&&e.jsxs("span",{className:"text-sm text-purple-600",children:[s.document_signatures_status.signed,"/",s.document_signatures_status.total]})]}),s.document_signatures_status&&e.jsx("div",{className:"w-full bg-purple-200 rounded-full h-2 mb-3",children:e.jsx("div",{className:"bg-purple-600 h-2 rounded-full transition-all",style:{width:`${s.document_signatures_status.signed/s.document_signatures_status.total*100}%`}})}),e.jsx(v5,{signatures:s.document_signatures})]}),e.jsxs("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-blue-900",children:"Documento del Contrato"})]}),s.has_document?e.jsxs(L,{size:"sm",variant:"secondary",onClick:()=>h(s),children:[e.jsx(At,{className:"h-4 w-4 mr-1"}),"Ver Documento"]}):e.jsxs("div",{className:"flex items-center gap-2 text-amber-600",children:[e.jsx(ri,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:"Sin documento generado"})]})]}),!s.has_document&&!m&&e.jsx("p",{className:"text-xs text-amber-700 mt-2",children:"Este contrato no tiene un documento generado. Se recomienda generar el documento antes de aprobar."})]}),s.can_approve&&e.jsxs("div",{className:"mt-4 pt-4 border-t flex justify-end gap-2",children:[e.jsxs(L,{variant:"danger",size:"sm",onClick:()=>i(s),children:[e.jsx(Ma,{className:"h-4 w-4 mr-1"}),"Rechazar"]}),e.jsxs(L,{variant:"primary",size:"sm",onClick:()=>r(s),children:[e.jsx(Be,{className:"h-4 w-4 mr-1"}),"Aprobar"]})]}),s.can_sign&&e.jsx("div",{className:"mt-4 pt-4 border-t flex justify-end gap-2",children:e.jsxs(L,{variant:"primary",size:"sm",onClick:()=>c(s),className:"bg-purple-600 hover:bg-purple-700",children:[e.jsx(yt,{className:"h-4 w-4 mr-1"}),"Firmar Documento"]})})]})})}function N5({contract:s,onConfirm:r,onCancel:i,isLoading:c}){const[u,h]=b.useState("");return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-4 bg-green-50 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Be,{className:"h-6 w-6 text-green-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-green-900",children:"Aprobar Contrato"}),e.jsxs("p",{className:"text-sm text-green-700 mt-1",children:["Ests a punto de aprobar el contrato ",e.jsx("strong",{children:s.contract_number})]})]})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notas (opcional)"}),e.jsx("textarea",{value:u,onChange:x=>h(x.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"Agregar comentarios sobre la aprobacin..."})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx(L,{variant:"secondary",onClick:i,children:"Cancelar"}),e.jsx(L,{variant:"primary",onClick:()=>r(u),loading:c,children:"Confirmar Aprobacin"})]})]})}function _5({contract:s,onConfirm:r,onCancel:i,isLoading:c}){const[u,h]=b.useState("");return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-4 bg-red-50 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ma,{className:"h-6 w-6 text-red-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-red-900",children:"Rechazar Contrato"}),e.jsxs("p",{className:"text-sm text-red-700 mt-1",children:["Ests a punto de rechazar el contrato ",e.jsx("strong",{children:s.contract_number}),". Esta accin detendr el flujo de aprobacin."]})]})]})}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Motivo del Rechazo ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{value:u,onChange:x=>h(x.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500",placeholder:"Explica el motivo del rechazo...",required:!0})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx(L,{variant:"secondary",onClick:i,children:"Cancelar"}),e.jsx(L,{variant:"danger",onClick:()=>r(u),loading:c,disabled:!u.trim(),children:"Confirmar Rechazo"})]})]})}function w5({contract:s,onConfirm:r,onCancel:i,isLoading:c}){const[u,h]=b.useState(null),[x,m]=b.useState(!0),[p,g]=b.useState(350),[f,v]=b.useState(700),[E,S]=b.useState({width:200,height:80}),[w,C]=b.useState(!1),[j,_]=b.useState({x:0,y:0}),[N,z]=b.useState(1),k=b.useRef(null),U=b.useRef(null),A=s.pdf_width||612,T=s.pdf_height||792,O=s.document_page_count||1,ee=.65,B=A*ee,ye=T*ee,F=ye*O,te=s.document_signatures?.find(V=>V.status==="pending"&&V.is_mine),je=Math.floor(f/T)+1;b.useEffect(()=>((async()=>{m(!0);try{const ae=await fa.downloadDocument(s.id),W=new Blob([ae.data],{type:"application/pdf"}),R=URL.createObjectURL(W);if(h(R),te){const X=te.page_number||O,ge=te.y_position||700,Q=ge<T?(X-1)*T+ge:ge;g(te.x_position||350),v(Q),S({width:te.width||200,height:te.height||80}),z(X),setTimeout(()=>{if(U.current){const ie=(X-1)*ye;U.current.scrollTo({top:ie,behavior:"smooth"})}},300)}else{const X=(O-1)*T+600;v(X),z(O)}}catch(ae){console.error("Error loading PDF:",ae)}finally{m(!1)}})(),()=>{u&&URL.revokeObjectURL(u)}),[s.id]);const xe=V=>{const ae=V.target.scrollTop,W=Math.floor(ae/ye)+1;z(Math.min(Math.max(1,W),O))},$=V=>{V.preventDefault(),V.stopPropagation();const ae=k.current.getBoundingClientRect(),W=(V.clientX-ae.left)/ee,R=(V.clientY-ae.top)/ee;_({x:W-p,y:R-f}),C(!0)},pe=V=>{if(!w||!k.current)return;const ae=k.current.getBoundingClientRect(),W=(V.clientX-ae.left)/ee,R=(V.clientY-ae.top)/ee,X=W-j.x,ge=R-j.y,Q=T*O,ie=Math.max(0,Math.min(A-E.width,X)),_e=Math.max(0,Math.min(Q-E.height,ge));g(Math.round(ie)),v(Math.round(_e))},G=()=>{C(!1)},Y=V=>{if(U.current){const ae=(V-1)*ye;U.current.scrollTo({top:ae,behavior:"smooth"})}},me=()=>{const V=Math.floor(f/T)+1,ae=f-(V-1)*T;r({x_position:Math.round(p),y_position:Math.round(ae),width:E.width,height:E.height,page_number:V})},M=f-(je-1)*T;return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-3 bg-purple-50 rounded-lg",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(yt,{className:"h-5 w-5 text-purple-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-purple-900",children:"Firmar Documento"}),e.jsxs("p",{className:"text-sm text-purple-700",children:["Contrato ",e.jsx("strong",{children:s.contract_number})]})]})]}),te&&e.jsx("span",{className:"text-xs bg-purple-200 text-purple-800 px-2 py-1 rounded",children:te.signatory_label})]})}),e.jsxs("div",{className:"flex items-center justify-between bg-gray-100 px-3 py-2 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-xs text-gray-600",children:["Pgina ",N," de ",O]}),O>1&&e.jsx("div",{className:"flex gap-1",children:[...Array(Math.min(O,10))].map((V,ae)=>e.jsx("button",{onClick:()=>Y(ae+1),className:`w-5 h-5 text-[10px] rounded ${N===ae+1?"bg-purple-500 text-white":"bg-white text-gray-600 hover:bg-gray-200"}`,children:ae+1},ae))})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[e.jsxs("span",{children:["X=",p,", Y=",M," en Pg ",je]}),e.jsx("span",{className:"text-gray-300",children:"|"}),e.jsxs("span",{children:[A>600?"Carta":"A4"," (",Math.round(A),"x",Math.round(T),")"]})]})]}),e.jsx("div",{className:"border-2 border-gray-300 rounded-lg overflow-hidden bg-gray-100",children:x?e.jsxs("div",{className:"flex items-center justify-center py-20",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-500",children:"Cargando documento..."})]}):u?e.jsx("div",{ref:U,className:"mx-auto overflow-auto",style:{width:B+24,maxHeight:450,padding:10},onScroll:xe,children:e.jsx("div",{style:{width:B,height:F,margin:"0 auto"},children:e.jsxs("div",{ref:k,className:"relative origin-top-left",style:{width:A,height:T*O,transform:`scale(${ee})`,transformOrigin:"top left"},onMouseMove:pe,onMouseUp:G,onMouseLeave:G,children:[e.jsx("iframe",{src:`${u}#toolbar=0&navpanes=0&scrollbar=0`,className:"absolute inset-0 pointer-events-none",style:{width:A,height:T*O,border:"none"},title:"PDF Preview"}),[...Array(O)].map((V,ae)=>e.jsx("div",{className:"absolute border border-gray-200",style:{width:A,height:T,top:ae*T,left:0,boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:e.jsxs("div",{className:"absolute top-2 right-2 bg-gray-100/80 text-gray-500 text-xs px-2 py-1 rounded",children:["Pgina ",ae+1]})},ae)),O>1&&[...Array(O-1)].map((V,ae)=>e.jsx("div",{className:"absolute left-0 right-0 border-t-2 border-dashed border-purple-300 pointer-events-none",style:{top:T*(ae+1)},children:e.jsxs("span",{className:"absolute left-2 -top-4 bg-purple-100 px-2 py-0.5 text-xs text-purple-600 rounded",children:["Pgina ",ae+2]})},ae)),e.jsx("div",{className:`absolute cursor-move transition-all duration-100 ${w?"z-50":"z-10"}`,style:{left:p,top:f,width:E.width,height:E.height,backgroundColor:"rgba(147, 51, 234, 0.3)",border:"2px dashed #9333ea",borderRadius:4,boxShadow:w?"0 8px 20px rgba(0,0,0,0.2)":"0 0 0 3px rgba(147, 51, 234, 0.2), 0 4px 12px rgba(0,0,0,0.15)",pointerEvents:"auto"},onMouseDown:$,children:e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-purple-700",children:[e.jsx(yt,{style:{width:20,height:20,opacity:.8}}),e.jsx("span",{className:"font-medium text-center px-1",style:{fontSize:11},children:te?.signatory_label||"Tu firma"}),e.jsxs("span",{style:{fontSize:9,color:"#7c3aed"},children:["Pg. ",je]})]})})]})})}):e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(st,{className:"h-8 w-8 mx-auto mb-2 text-gray-300"}),e.jsx("p",{className:"text-sm",children:"No se pudo cargar el documento"})]})}),e.jsx("div",{className:"p-3 bg-amber-50 rounded-lg text-sm border border-amber-200",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(st,{className:"h-4 w-4 text-amber-500 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-amber-800",children:[e.jsx("p",{className:"font-medium",children:"Arrastra el cuadro morado para posicionar tu firma."}),e.jsx("p",{className:"text-amber-600 mt-1",children:"Usa el scroll para navegar entre pginas. La firma se mover con el arrastre."})]})]})}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx(L,{variant:"secondary",onClick:i,children:"Cancelar"}),e.jsxs(L,{onClick:me,loading:c,disabled:x,className:"bg-purple-600 hover:bg-purple-700",children:[e.jsx(yt,{className:"h-4 w-4 mr-1"}),"Confirmar Firma"]})]})]})}function C5(){const[s,r]=b.useState("pending"),[i,c]=b.useState(null),[u,h]=b.useState(null),[x,m]=b.useState(null),[p,g]=b.useState(null),[f,v]=b.useState(null),[E,S]=b.useState(!1),w=et(),C=async B=>{g(B),S(!0);try{const ye=await fa.downloadDocument(B.id),F=new Blob([ye.data],{type:"application/pdf"}),te=URL.createObjectURL(F);v(te)}catch(ye){console.error("Error loading document:",ye),alert("Error al cargar el documento")}finally{S(!1)}},j=()=>{f&&URL.revokeObjectURL(f),g(null),v(null)},{data:_,isLoading:N}=ke({queryKey:["contract-approvals",s],queryFn:()=>Kr.list({status:s})}),z=Ne({mutationFn:({id:B,notes:ye})=>Kr.approve(B,ye),onSuccess:()=>{w.invalidateQueries(["contract-approvals"]),c(null)}}),k=Ne({mutationFn:({id:B,reason:ye})=>Kr.reject(B,ye),onSuccess:()=>{w.invalidateQueries(["contract-approvals"]),h(null)}}),U=Ne({mutationFn:({id:B,position:ye})=>Kr.sign(B,ye),onSuccess:B=>{w.invalidateQueries(["contract-approvals"]),m(null),B.data?.all_signed&&alert("Todas las firmas han sido completadas. El contrato ha sido aprobado.")},onError:B=>{alert(B.response?.data?.error||"Error al firmar el documento")}}),A=_?.data?.data||[],T=_?.data?.meta?.total_pending||0,O=_?.data?.meta?.total_pending_approvals||0,ee=_?.data?.meta?.total_pending_signatures||0;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Aprobaciones de Contratos"}),e.jsx("p",{className:"text-gray-500",children:"Aprobacin multinivel de contratos segn monto"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx(we,{children:e.jsx(Ce,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-gray-100",children:e.jsx(Oe,{className:"h-5 w-5 text-gray-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:T}),e.jsx("p",{className:"text-sm text-gray-500",children:"Total Pendientes"})]})]})})}),e.jsx(we,{children:e.jsx(Ce,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-yellow-100",children:e.jsx(Xt,{className:"h-5 w-5 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:O}),e.jsx("p",{className:"text-sm text-gray-500",children:"Por Aprobar"})]})]})})}),e.jsx(we,{children:e.jsx(Ce,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-purple-100",children:e.jsx(yt,{className:"h-5 w-5 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:ee}),e.jsx("p",{className:"text-sm text-gray-500",children:"Por Firmar"})]})]})})})]}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"flex gap-4",children:[e.jsxs("button",{onClick:()=>r("pending"),className:`px-4 py-2 font-medium text-sm border-b-2 -mb-px ${s==="pending"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:["Pendientes",T>0&&e.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs bg-yellow-100 text-yellow-800 rounded-full",children:T})]}),e.jsx("button",{onClick:()=>r("history"),className:`px-4 py-2 font-medium text-sm border-b-2 -mb-px ${s==="history"?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"Historial"})]})}),N?e.jsx("div",{className:"grid gap-4",children:[1,2].map(B=>e.jsx(we,{className:"animate-pulse",children:e.jsx(Ce,{className:"p-4 h-48"})},B))}):A.length===0?e.jsx(we,{children:e.jsx(Ce,{className:"p-8 text-center",children:s==="pending"?e.jsxs(e.Fragment,{children:[e.jsx(Be,{className:"h-12 w-12 text-green-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay aprobaciones pendientes"}),e.jsx("p",{className:"text-gray-500",children:"Todos los contratos estn al da"})]}):e.jsxs(e.Fragment,{children:[e.jsx(Oe,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Sin historial"}),e.jsx("p",{className:"text-gray-500",children:"No has procesado ningn contrato an"})]})})}):e.jsx("div",{className:"grid gap-4",children:A.map(B=>e.jsx(j5,{contract:B,onApprove:c,onReject:h,onSign:m,onViewDocument:C},B.id))}),e.jsx(Qe,{isOpen:!!i,onClose:()=>c(null),title:"Aprobar Contrato",size:"md",children:i&&e.jsx(N5,{contract:i,onConfirm:B=>z.mutate({id:i.id,notes:B}),onCancel:()=>c(null),isLoading:z.isPending})}),e.jsx(Qe,{isOpen:!!u,onClose:()=>h(null),title:"Rechazar Contrato",size:"md",children:u&&e.jsx(_5,{contract:u,onConfirm:B=>k.mutate({id:u.id,reason:B}),onCancel:()=>h(null),isLoading:k.isPending})}),e.jsx(Qe,{isOpen:!!x,onClose:()=>m(null),title:"Firmar Documento",size:"lg",children:x&&e.jsx(w5,{contract:x,onConfirm:B=>U.mutate({id:x.id,position:B}),onCancel:()=>m(null),isLoading:U.isPending})}),e.jsx(Qe,{isOpen:!!p,onClose:j,title:`Documento: ${p?.contract_number||""}`,size:"xl",children:e.jsxs("div",{className:"space-y-4",children:[p&&e.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Contrato:"}),e.jsx("p",{className:"font-medium",children:p.title})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Tercero:"}),e.jsx("p",{className:"font-medium",children:p.third_party?.display_name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Monto:"}),e.jsx("p",{className:"font-medium text-green-600",children:new Intl.NumberFormat("es-CO",{style:"currency",currency:p.currency||"COP"}).format(p.amount)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Estado:"}),e.jsx(qe,{variant:p.status,children:p.status_label})]})]})}),E?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-3 text-gray-500",children:"Cargando documento..."})]}):f?e.jsx("div",{className:"border border-gray-200 rounded-lg overflow-hidden",style:{height:"60vh"},children:e.jsx("iframe",{src:f,className:"w-full h-full",title:"Contract Document"})}):e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(ri,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"No se pudo cargar el documento"})]}),e.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[e.jsxs(L,{variant:"secondary",onClick:()=>{if(f){const B=document.createElement("a");B.href=f,B.download=`${p?.contract_number||"contrato"}.pdf`,B.click()}},disabled:!f,children:[e.jsx(ba,{className:"h-4 w-4 mr-2"}),"Descargar PDF"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(L,{variant:"secondary",onClick:j,children:"Cerrar"}),p?.can_approve&&e.jsxs(e.Fragment,{children:[e.jsxs(L,{variant:"danger",onClick:()=>{j(),h(p)},children:[e.jsx(Ma,{className:"h-4 w-4 mr-1"}),"Rechazar"]}),e.jsxs(L,{onClick:()=>{j(),c(p)},children:[e.jsx(Be,{className:"h-4 w-4 mr-1"}),"Aprobar"]})]}),p?.can_sign&&e.jsxs(L,{onClick:()=>{j(),m(p)},className:"bg-purple-600 hover:bg-purple-700",children:[e.jsx(yt,{className:"h-4 w-4 mr-1"}),"Firmar"]})]})]})]})})]})}function Mt({children:s,requireHR:r=!1,requireApprover:i=!1,requireAdmin:c=!1}){const{isAuthenticated:u,loading:h,isHR:x,isSupervisor:m,isAdmin:p}=Ra();return h?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):u?c&&!p&&!x?e.jsx(Da,{to:"/",replace:!0}):r&&!x?e.jsx(Da,{to:"/",replace:!0}):i&&!x&&!m?e.jsx(Da,{to:"/",replace:!0}):e.jsx(Tw,{children:s}):e.jsx(Da,{to:"/login",replace:!0})}function S5(){const{isAuthenticated:s,loading:r}=Ra();return r?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Cargando..."})]})}):e.jsxs(xj,{children:[e.jsx(it,{path:"/login",element:s?e.jsx(Da,{to:"/",replace:!0}):e.jsx(Rw,{})}),e.jsx(it,{path:"/change-password",element:s?e.jsx(Ow,{}):e.jsx(Da,{to:"/login",replace:!0})}),e.jsx(it,{path:"/",element:e.jsx(Mt,{children:e.jsx(Fw,{})})}),e.jsx(it,{path:"/hr/my-requests",element:e.jsx(Mt,{children:e.jsx(R0,{})})}),e.jsx(it,{path:"/hr/my-requests/:tab",element:e.jsx(Mt,{children:e.jsx(R0,{})})}),e.jsx(it,{path:"/hr/vacations",element:e.jsx(Da,{to:"/hr/my-requests/vacations",replace:!0})}),e.jsx(it,{path:"/hr/vacations/new",element:e.jsx(Da,{to:"/hr/my-requests/vacations",replace:!0})}),e.jsx(it,{path:"/hr/certifications",element:e.jsx(Da,{to:"/hr/my-requests/certifications",replace:!0})}),e.jsx(it,{path:"/hr/approvals",element:e.jsx(Mt,{requireApprover:!0,children:e.jsx(e4,{})})}),e.jsx(it,{path:"/hr/employees",element:e.jsx(Mt,{requireApprover:!0,children:e.jsx(o4,{})})}),e.jsx(it,{path:"/hr/dashboard",element:e.jsx(Mt,{requireHR:!0,children:e.jsx(v4,{})})}),e.jsx(it,{path:"/hr/organigrama",element:e.jsx(Mt,{children:e.jsx(j4,{})})}),e.jsx(it,{path:"/hr/documents",element:e.jsx(Mt,{requireApprover:!0,children:e.jsx(S4,{})})}),e.jsx(it,{path:"/documents",element:e.jsx(Mt,{children:e.jsx(P4,{})})}),e.jsx(it,{path:"/folders",element:e.jsx(Mt,{children:e.jsx(Z4,{})})}),e.jsx(it,{path:"/profile",element:e.jsx(Mt,{children:e.jsx(Kw,{})})}),e.jsx(it,{path:"/admin/settings",element:e.jsx(Mt,{requireAdmin:!0,children:e.jsx(B4,{})})}),e.jsx(it,{path:"/admin/departments",element:e.jsx(Mt,{requireAdmin:!0,children:e.jsx($4,{})})}),e.jsx(it,{path:"/admin/users",element:e.jsx(Mt,{requireAdmin:!0,children:e.jsx(G4,{})})}),e.jsx(it,{path:"/admin/templates",element:e.jsx(Da,{to:"/admin/templates/legal",replace:!0})}),e.jsx(it,{path:"/admin/templates/legal",element:e.jsx(Mt,{requireAdmin:!0,children:e.jsx(L0,{module:"legal"})})}),e.jsx(it,{path:"/admin/templates/hr",element:e.jsx(Mt,{requireAdmin:!0,children:e.jsx(L0,{module:"hr"})})}),e.jsx(it,{path:"/admin/templates/:id",element:e.jsx(Mt,{requireAdmin:!0,children:e.jsx(z4,{})})}),e.jsx(it,{path:"/admin/signatory-types",element:e.jsx(Mt,{requireAdmin:!0,children:e.jsx(U4,{})})}),e.jsx(it,{path:"/legal/third-parties",element:e.jsx(Mt,{requireHR:!0,children:e.jsx(n5,{})})}),e.jsx(it,{path:"/legal/contracts",element:e.jsx(Mt,{requireApprover:!0,children:e.jsx(p5,{})})}),e.jsx(it,{path:"/legal/approvals",element:e.jsx(Mt,{requireApprover:!0,children:e.jsx(C5,{})})}),e.jsx(it,{path:"*",element:e.jsx(Da,{to:"/",replace:!0})})]})}const E5=new pN({defaultOptions:{queries:{staleTime:1e3*60*5,retry:1}}});Nv.createRoot(document.getElementById("root")).render(e.jsx(xv.StrictMode,{children:e.jsx(fN,{client:E5,children:e.jsx(qj,{children:e.jsx(l2,{children:e.jsx(S5,{})})})})}));
