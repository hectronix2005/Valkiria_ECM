import{j as e}from"./vendor-query-BtlmzfbD.js";import{r as o,a as O,u as I}from"./vendor-router-CyR0tpch.js";import{u as _}from"./index-5OztEUYJ.js";import{B as T}from"./Button-Dg2kNfoC.js";import{I as N}from"./Input-DPOK3q6H.js";import{l as D,E as V,m as P,U as q,n as v,o as S,T as Y}from"./vendor-icons-BXQn8V43.js";import"./vendor-react-Cgg2GOmP.js";import"./vendor-axios-B9ygI19o.js";const G=[{email:"admin@valkyria.com",password:"Admin123",role:"Admin",color:"bg-red-100 text-red-700",description:"Acceso total al sistema"},{email:"hr.manager@valkyria.com",password:"HrManager123",role:"Gerente RRHH",color:"bg-purple-100 text-purple-700",description:"Gestiona empleados y aprueba"},{email:"hr.staff@valkyria.com",password:"HrStaff123",role:"Staff RRHH",color:"bg-indigo-100 text-indigo-700",description:"Operaciones de RRHH"},{email:"supervisor@valkyria.com",password:"Supervisor123",role:"Supervisor",color:"bg-blue-100 text-blue-700",description:"Aprueba solicitudes de su equipo"},{email:"employee1@valkyria.com",password:"Employee123",role:"Empleado",color:"bg-green-100 text-green-700",description:"Carlos - Empleado regular"},{email:"employee2@valkyria.com",password:"Employee123",role:"Empleado",color:"bg-green-100 text-green-700",description:"Maria - Empleado regular"},{email:"legal@valkyria.com",password:"Legal123",role:"Legal",color:"bg-amber-100 text-amber-700",description:"Revisa y aprueba contratos"},{email:"viewer@valkyria.com",password:"Viewer123",role:"Viewer",color:"bg-gray-100 text-gray-700",description:"Solo lectura"}],E="valkyria_login_history",g=()=>{try{const t=localStorage.getItem(E);return t?JSON.parse(t):{}}catch{return{}}},K=t=>{try{localStorage.setItem(E,JSON.stringify(t))}catch{}},B=t=>{const a=g(),i=Date.now();a[t]||(a[t]={count:0,lastUsed:0}),a[t].count+=1,a[t].lastUsed=i,K(a)};function J({user:t,usageData:a,onSelect:i,isRecent:m,isMostUsed:n}){return e.jsxs("button",{onClick:()=>i(t),className:`
        relative flex flex-col p-3 rounded-lg transition-all text-left w-full
        ${m?"bg-white/25 hover:bg-white/35 ring-2 ring-white/30":"bg-white/10 hover:bg-white/20"}
      `,children:[e.jsxs("div",{className:"absolute -top-1 -right-1 flex gap-1",children:[n&&e.jsx("span",{className:"flex items-center gap-0.5 px-1.5 py-0.5 bg-yellow-400 text-yellow-900 rounded text-[10px] font-bold",children:e.jsx(v,{className:"w-2.5 h-2.5"})}),m&&!n&&e.jsx("span",{className:"flex items-center gap-0.5 px-1.5 py-0.5 bg-blue-400 text-blue-900 rounded text-[10px] font-bold",children:e.jsx(S,{className:"w-2.5 h-2.5"})})]}),e.jsx("span",{className:`inline-flex self-start px-2 py-0.5 rounded text-xs font-semibold ${t.color}`,children:t.role}),e.jsx("span",{className:"text-sm text-white font-medium mt-1.5 truncate",children:t.email.split("@")[0]}),e.jsx("span",{className:"text-[11px] text-primary-200 mt-0.5 line-clamp-1",children:t.description}),a&&a.count>0&&e.jsxs("div",{className:"flex items-center gap-1 mt-2 text-[10px] text-primary-300",children:[e.jsx(Y,{className:"w-3 h-3"}),e.jsxs("span",{children:[a.count," usos"]})]})]})}function te(){const[t,a]=o.useState(""),[i,m]=o.useState(""),[n,U]=o.useState(!1),[f,p]=o.useState(""),[k,y]=o.useState(!1),[w,b]=o.useState({}),{login:R}=_(),j=O(),C=I().state?.from?.pathname||"/";o.useEffect(()=>{b(g())},[]);const c=o.useMemo(()=>{const s=Date.now(),r=3600*1e3,d=24*r;return[...G].map(x=>{const l=w[x.email]||{count:0,lastUsed:0},u=s-l.lastUsed;let h=l.count*10;return l.lastUsed>0&&(u<r?h+=1e3:u<d&&(h+=500)),{...x,usage:l,score:h,isRecent:l.lastUsed>0&&u<d,isMostUsed:!1}}).sort((x,l)=>l.score-x.score)},[w]),H=o.useMemo(()=>{if(c.length===0)return c;const s=Math.max(...c.map(r=>r.usage.count));return s===0?c:c.map((r,d)=>({...r,isMostUsed:r.usage.count===s&&s>0&&d===0}))},[c]),A=s=>{a(s.email),m(s.password),p("")},M=async s=>{s.preventDefault(),p(""),y(!0);try{B(t),b(g()),(await R(t,i)).must_change_password?j("/change-password",{replace:!0}):j(C,{replace:!0})}catch(r){p(r.response?.data?.error||"Error al iniciar sesión")}finally{y(!1)}},L=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1";return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary-600 to-primary-800 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-36 h-36 mx-auto mb-4 rounded-full overflow-hidden shadow-2xl",children:e.jsx("img",{src:"/Valkiria.png",alt:"Valkyria",className:"w-full h-full object-cover scale-[1.15]"})}),e.jsx("h1",{className:"text-3xl font-bold text-white",children:"VALKYRIA ECM"}),e.jsx("p",{className:"text-primary-200 mt-2",children:"Protegemos lo que importa"})]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 text-center mb-6",children:"Iniciar Sesión"}),f&&e.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-700",children:[e.jsx(D,{className:"w-5 h-5 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:f})]}),e.jsxs("form",{onSubmit:M,className:"space-y-4",children:[e.jsx(N,{label:"Correo Electrónico",type:"email",value:t,onChange:s=>a(s.target.value),placeholder:"tu@email.com",required:!0,autoFocus:!0}),e.jsxs("div",{className:"relative",children:[e.jsx(N,{label:"Contraseña",type:n?"text":"password",value:i,onChange:s=>m(s.target.value),placeholder:"••••••••",required:!0}),e.jsx("button",{type:"button",onClick:()=>U(!n),className:"absolute right-3 top-[34px] text-gray-400 hover:text-gray-600 transition-colors",children:n?e.jsx(V,{className:"w-5 h-5"}):e.jsx(P,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",className:"rounded border-gray-300"}),e.jsx("span",{className:"text-gray-600",children:"Recordarme"})]}),e.jsx("a",{href:"#",className:"text-primary-600 hover:text-primary-700",children:"¿Olvidaste tu contraseña?"})]}),e.jsx(T,{type:"submit",loading:k,className:"w-full",children:"Iniciar Sesión"})]})]}),L&&e.jsxs("div",{className:"mt-6 bg-white/10 backdrop-blur rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q,{className:"w-4 h-4 text-primary-200"}),e.jsx("span",{className:"text-sm font-medium text-primary-100",children:"Usuarios de Prueba"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-primary-300",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(v,{className:"w-3 h-3 text-yellow-400"})," Más usado"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(S,{className:"w-3 h-3 text-blue-400"})," Reciente"]})]})]}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:H.map(s=>e.jsx(J,{user:s,usageData:s.usage,onSelect:A,isRecent:s.isRecent,isMostUsed:s.isMostUsed},s.email))}),e.jsx("p",{className:"text-xs text-primary-300 mt-3 text-center",children:"Click para autocompletar • Ordenados por frecuencia de uso"})]}),e.jsx("p",{className:"text-center text-primary-200 text-sm mt-6",children:"© 2025 VALKYRIA ECM. Todos los derechos reservados."})]})})}export{te as default};
