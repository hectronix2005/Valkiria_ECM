import{u as _a,a as $,b as le,j as e}from"./vendor-query-2ZprUnmA.js";import{r as p}from"./vendor-router-CyR0tpch.js";import{u as ya,e as z,g as je,p as ba,f as va}from"./index-2EkhUpJ2.js";import{C as B,c as W}from"./Card-DbNYCSnq.js";import{B as v}from"./Button-C7qsOZ-2.js";import{I as o}from"./Input-WTtiBIO6.js";import{S as u}from"./Select-vfGwgvIr.js";import{M as Z}from"./Modal-5XVQlMCF.js";import{B as _e}from"./Badge-Cu_cxnAa.js";import{P as fa,e as Na,a0 as Ca,X as wa,U as Oe,a8 as Sa,j as Da,n as be,a1 as ie,x as Fa,Q as Ie,K as Ea,a9 as Re,I as Ue,q as ce,aa as Ve,B as Qe,h as oe,u as A,F as R,ab as U,ac as $e,ad as X,ae as ze,m as ye,_ as Ta,af as ka,ag as qa,ah as La}from"./vendor-icons-7sl6YsZj.js";import"./vendor-react-Cgg2GOmP.js";import"./vendor-axios-B9ygI19o.js";const Ma=[{value:"",label:"Todos los estados"},{value:"active",label:"Activo"},{value:"inactive",label:"Inactivo"},{value:"on_leave",label:"En licencia"},{value:"terminated",label:"Terminado"}],Be=[{value:"",label:"Todos los departamentos"},{value:"engineering",label:"Ingeniería"},{value:"hr",label:"Recursos Humanos"},{value:"finance",label:"Finanzas"},{value:"sales",label:"Ventas"},{value:"marketing",label:"Marketing"},{value:"operations",label:"Operaciones"},{value:"legal",label:"Legal"}],Ge=[{value:"active",label:"Activo"},{value:"inactive",label:"Inactivo"},{value:"on_leave",label:"En licencia"},{value:"terminated",label:"Terminado"},{value:"suspended",label:"Suspendido"}],ve=[{value:"full_time",label:"Tiempo Completo"},{value:"part_time",label:"Medio Tiempo"},{value:"contractor",label:"Contratista"},{value:"intern",label:"Pasante"}],fe=[{value:"indefinite",label:"Termino Indefinido"},{value:"fixed_term",label:"Termino Fijo"},{value:"work_or_labor",label:"Obra o Labor"},{value:"apprentice",label:"Aprendizaje"}],Ke=[{value:"CC",label:"Cedula de Ciudadania"},{value:"CE",label:"Cedula de Extranjeria"},{value:"PA",label:"Pasaporte"},{value:"TI",label:"Tarjeta de Identidad"},{value:"NIT",label:"NIT"}],T=i=>{if(!i||i===0)return"cero pesos";const j=["","uno","dos","tres","cuatro","cinco","seis","siete","ocho","nueve"],_=["diez","once","doce","trece","catorce","quince","dieciseis","diecisiete","dieciocho","diecinueve"],f=["","","veinte","treinta","cuarenta","cincuenta","sesenta","setenta","ochenta","noventa"],C=["","ciento","doscientos","trescientos","cuatrocientos","quinientos","seiscientos","setecientos","ochocientos","novecientos"],g=Math.floor(parseFloat(i));if(g===0)return"cero pesos";const y=a=>a===0?"":a<10?j[a]:a<20?_[a-10]:a<30?a===20?"veinte":"veinti"+j[a-20]:a<100?f[Math.floor(a/10)]+(a%10>0?" y "+j[a%10]:""):a===100?"cien":a<1e3?C[Math.floor(a/100)]+(a%100>0?" "+y(a%100):""):a.toString(),m=[];let t=g;if(t>=1e6){const a=Math.floor(t/1e6);m.push(a===1?"un millon":y(a)+" millones"),t%=1e6}if(t>=1e3){const a=Math.floor(t/1e3);m.push(a===1?"mil":y(a)+" mil"),t%=1e3}return t>0&&m.push(y(t)),m.join(" ").trim()+" pesos"},He=(i,j)=>{if(!i||!j)return null;const _=new Date(i),f=new Date(j);if(f<=_)return null;const C=(f.getFullYear()-_.getFullYear())*12+(f.getMonth()-_.getMonth()),g=Math.ceil((f-_)/(1e3*60*60*24));return C>=12&&C%12===0?{value:C/12,unit:"years"}:C>=1?{value:C,unit:"months"}:g>=7&&g%7===0?{value:g/7,unit:"weeks"}:{value:g,unit:"days"}},Pa={indefinite:"Termino Indefinido",fixed_term:"Termino Fijo",work_or_labor:"Obra o Labor",apprentice:"Aprendizaje"},Je=[{value:"days",label:"Dias"},{value:"weeks",label:"Semanas"},{value:"months",label:"Meses"},{value:"years",label:"Anos"}],Aa={days:"dias",weeks:"semanas",months:"meses",years:"anos"},ee={active:"Activo",inactive:"Inactivo",on_leave:"En licencia",terminated:"Terminado",suspended:"Suspendido"},V={active:"bg-green-100 text-green-700",inactive:"bg-gray-100 text-gray-700",on_leave:"bg-yellow-100 text-yellow-700",terminated:"bg-red-100 text-red-700",suspended:"bg-orange-100 text-orange-700"},Oa={full_time:"Tiempo Completo",part_time:"Medio Tiempo",contractor:"Contratista",intern:"Pasante"};function Ia({employee:i,employees:j,contractTemplates:_=[],departmentOptions:f=[],companies:C=[],onSubmit:g,onCancel:y,loading:m,error:t}){const[a,c]=p.useState({first_name:"",last_name:"",employee_number:"",job_title:"",department:"",employment_status:"active",employment_type:"full_time",hire_date:"",termination_date:"",cost_center:"",date_of_birth:"",emergency_contact_name:"",emergency_contact_phone:"",supervisor_id:"",company_id:"",contract_type:"indefinite",contract_template_id:"",contract_start_date:"",contract_end_date:"",contract_duration_value:"",contract_duration_unit:"months",trial_period_days:"60",salary:"",food_allowance:"",transport_allowance:"",payment_frequency:"monthly",work_city:"",identification_type:"CC",identification_number:"",place_of_birth:"",nationality:"Colombiana",address:"",phone:"",personal_email:""}),[w,d]=p.useState("basico");p.useEffect(()=>{i&&c({first_name:i.first_name||"",last_name:i.last_name||"",employee_number:i.employee_number||"",job_title:i.job_title||"",department:i.department||"",employment_status:i.employment_status||"active",employment_type:i.employment_type||"full_time",hire_date:i.hire_date?i.hire_date.split("T")[0]:"",termination_date:i.termination_date?i.termination_date.split("T")[0]:"",cost_center:i.cost_center||"",date_of_birth:i.date_of_birth?i.date_of_birth.split("T")[0]:"",emergency_contact_name:i.emergency_contact_name||"",emergency_contact_phone:i.emergency_contact_phone||"",supervisor_id:i.supervisor_id||"",company_id:i.company_id||"",contract_type:i.contract_type||"indefinite",contract_template_id:i.contract_template_id||"",contract_start_date:i.contract_start_date?i.contract_start_date.split("T")[0]:"",contract_end_date:i.contract_end_date?i.contract_end_date.split("T")[0]:"",contract_duration_value:i.contract_duration_value||"",contract_duration_unit:i.contract_duration_unit||"months",trial_period_days:i.trial_period_days||"60",salary:i.salary||"",food_allowance:i.food_allowance||"",transport_allowance:i.transport_allowance||"",payment_frequency:i.payment_frequency||"monthly",work_city:i.work_city||"",identification_type:i.identification_type||"CC",identification_number:i.identification_number||"",place_of_birth:i.place_of_birth||"",nationality:i.nationality||"Colombiana",address:i.address||"",phone:i.phone||"",personal_email:i.personal_email||""})},[i]),p.useEffect(()=>{const l=He(a.contract_start_date,a.contract_end_date);l&&c(N=>({...N,contract_duration_value:l.value.toString(),contract_duration_unit:l.unit}))},[a.contract_start_date,a.contract_end_date]);const L=l=>{l.preventDefault();const N={...a};Object.keys(N).forEach(b=>{N[b]===""&&(N[b]=null)}),g(N)},Q=[{value:"",label:"Junta Directiva"},...j.filter(l=>l.id!==i?.id).map(l=>({value:l.id,label:`${l.full_name} - ${l.job_title||"Sin cargo"}`}))],M=[{id:"basico",label:"Datos Básicos",icon:oe},{id:"laboral",label:"Laboral",icon:ce},{id:"contrato",label:"Contrato",icon:R},{id:"compensacion",label:"Compensación",icon:U},{id:"personal",label:"Personal",icon:X}];return e.jsxs("form",{onSubmit:L,className:"space-y-6",children:[t&&e.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-700",children:[e.jsx(ye,{className:"w-5 h-5 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:t})]}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-4",children:M.map(l=>e.jsxs("button",{type:"button",onClick:()=>d(l.id),className:`py-2 px-1 border-b-2 font-medium text-sm flex items-center gap-2 ${w===l.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(l.icon,{className:"w-4 h-4"}),l.label]},l.id))})}),w==="basico"&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(o,{label:"Nombre *",value:a.first_name,onChange:l=>c({...a,first_name:l.target.value}),placeholder:"Nombre del empleado",required:!0}),e.jsx(o,{label:"Apellido *",value:a.last_name,onChange:l=>c({...a,last_name:l.target.value}),placeholder:"Apellido del empleado",required:!0})]})}),w==="laboral"&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(o,{label:"Numero de Empleado",value:a.employee_number,onChange:l=>c({...a,employee_number:l.target.value}),placeholder:"EMP-001"}),e.jsx(o,{label:"Cargo",value:a.job_title,onChange:l=>c({...a,job_title:l.target.value}),placeholder:"Ej: Desarrollador Senior"}),e.jsx(u,{label:"Departamento",options:f,value:a.department,onChange:l=>c({...a,department:l.target.value})}),e.jsx(o,{label:"Centro de Costo",value:a.cost_center,onChange:l=>c({...a,cost_center:l.target.value}),placeholder:"Ej: CC-100"}),e.jsx(u,{label:"Estado Laboral",options:Ge,value:a.employment_status,onChange:l=>c({...a,employment_status:l.target.value})}),e.jsx(u,{label:"Tipo de Empleo",options:ve,value:a.employment_type,onChange:l=>c({...a,employment_type:l.target.value})}),e.jsx("div",{children:e.jsx(u,{label:"Jefe Inmediato",options:Q,value:a.supervisor_id,onChange:l=>c({...a,supervisor_id:l.target.value})})}),e.jsx(u,{label:"Empresa",options:[{value:"",label:"Seleccionar empresa"},...C.map(l=>({value:l.id,label:l.name}))],value:a.company_id,onChange:l=>c({...a,company_id:l.target.value})}),e.jsx(o,{label:"Fecha de Contratacion",type:"date",value:a.hire_date,onChange:l=>c({...a,hire_date:l.target.value})})]})}),w==="contrato"&&e.jsxs("div",{className:"space-y-4",children:[a.contract_type==="indefinite"&&e.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg text-sm text-blue-700",children:[e.jsx("strong",{children:"Contrato a Término Indefinido:"})," No requiere fecha de finalización ni duración específica."]}),a.contract_type==="fixed_term"&&e.jsxs("div",{className:"p-3 bg-amber-50 border border-amber-200 rounded-lg text-sm text-amber-700",children:[e.jsx("strong",{children:"Contrato a Término Fijo:"})," Requiere fecha de finalización y duración del contrato."]}),a.contract_type==="work_or_labor"&&e.jsxs("div",{className:"p-3 bg-purple-50 border border-purple-200 rounded-lg text-sm text-purple-700",children:[e.jsx("strong",{children:"Contrato por Obra o Labor:"})," Vinculado a la duración de una obra o labor específica."]}),a.contract_type==="apprentice"&&e.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg text-sm text-green-700",children:[e.jsx("strong",{children:"Contrato de Aprendizaje:"})," Para practicantes y aprendices en formación."]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(u,{label:"Tipo de Contrato",options:_.length>0?_:fe,value:_.length>0?a.contract_template_id:a.contract_type,onChange:l=>{if(_.length>0)c({...a,contract_template_id:l.target.value});else{const N=l.target.value,b={contract_type:N};N==="indefinite"&&(b.contract_end_date="",b.contract_duration_value="",b.contract_duration_unit="months"),c({...a,...b})}}}),e.jsx(o,{label:"Dias de Periodo de Prueba",type:"number",value:a.trial_period_days,onChange:l=>c({...a,trial_period_days:l.target.value}),placeholder:a.contract_type==="apprentice"?"0":"60"}),e.jsx(o,{label:"Fecha de Inicio del Contrato",type:"date",value:a.contract_start_date,onChange:l=>c({...a,contract_start_date:l.target.value}),required:!0}),a.contract_type!=="indefinite"&&e.jsx(o,{label:"Fecha de Fin del Contrato",type:"date",value:a.contract_end_date,onChange:l=>c({...a,contract_end_date:l.target.value}),min:a.contract_start_date,required:a.contract_type==="fixed_term"}),a.contract_type!=="indefinite"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Duración del Contrato"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(o,{type:"number",value:a.contract_duration_value,onChange:l=>c({...a,contract_duration_value:l.target.value}),placeholder:"12",className:"flex-1"}),e.jsx(u,{options:Je,value:a.contract_duration_unit,onChange:l=>c({...a,contract_duration_unit:l.target.value}),className:"w-32"})]})]}),a.employment_status==="terminated"&&e.jsx(o,{label:"Fecha de Terminacion",type:"date",value:a.termination_date,onChange:l=>c({...a,termination_date:l.target.value})})]})]}),w==="compensacion"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(o,{label:"Salario Mensual",type:"number",value:a.salary,onChange:l=>c({...a,salary:l.target.value}),placeholder:"2500000"}),a.salary&&e.jsx("p",{className:"text-xs text-gray-500 mt-1 italic",children:T(a.salary)})]}),e.jsxs("div",{children:[e.jsx(o,{label:"Auxilio de Alimentacion",type:"number",value:a.food_allowance,onChange:l=>c({...a,food_allowance:l.target.value}),placeholder:"0"}),a.food_allowance>0&&e.jsx("p",{className:"text-xs text-gray-500 mt-1 italic",children:T(a.food_allowance)})]}),e.jsxs("div",{children:[e.jsx(o,{label:"Auxilio de Transporte",type:"number",value:a.transport_allowance,onChange:l=>c({...a,transport_allowance:l.target.value}),placeholder:"140606"}),a.transport_allowance>0&&e.jsx("p",{className:"text-xs text-gray-500 mt-1 italic",children:T(a.transport_allowance)})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(u,{label:"Periodicidad de Pago",options:[{value:"weekly",label:"Semanal"},{value:"biweekly",label:"Quincenal"},{value:"monthly",label:"Mensual"}],value:a.payment_frequency,onChange:l=>c({...a,payment_frequency:l.target.value})}),e.jsx(o,{label:"Ciudad de Labores",value:a.work_city,onChange:l=>c({...a,work_city:l.target.value}),placeholder:"Ej: Bogotá D.C."})]}),(a.salary||a.food_allowance||a.transport_allowance)&&e.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[e.jsxs("p",{className:"text-sm text-green-700",children:[e.jsx("span",{className:"font-medium",children:"Compensacion Total: "}),"$",((parseFloat(a.salary)||0)+(parseFloat(a.food_allowance)||0)+(parseFloat(a.transport_allowance)||0)).toLocaleString("es-CO")]}),e.jsx("p",{className:"text-xs text-green-600 mt-1 italic",children:T((parseFloat(a.salary)||0)+(parseFloat(a.food_allowance)||0)+(parseFloat(a.transport_allowance)||0))})]})]}),w==="personal"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Identificacion"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(u,{label:"Tipo de Documento",options:Ke,value:a.identification_type,onChange:l=>c({...a,identification_type:l.target.value})}),e.jsx(o,{label:"Numero de Documento",value:a.identification_number,onChange:l=>c({...a,identification_number:l.target.value}),placeholder:"1234567890"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Datos Personales"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(o,{label:"Fecha de Nacimiento",type:"date",value:a.date_of_birth,onChange:l=>c({...a,date_of_birth:l.target.value})}),e.jsx(o,{label:"Lugar de Nacimiento",value:a.place_of_birth,onChange:l=>c({...a,place_of_birth:l.target.value}),placeholder:"Bogota, Colombia"}),e.jsx(o,{label:"Nacionalidad",value:a.nationality,onChange:l=>c({...a,nationality:l.target.value}),placeholder:"Colombiana"}),e.jsx(o,{label:"Telefono",value:a.phone,onChange:l=>c({...a,phone:l.target.value}),placeholder:"+57 300 123 4567"}),e.jsx(o,{label:"Correo Personal",type:"email",value:a.personal_email,onChange:l=>c({...a,personal_email:l.target.value}),placeholder:"correo@personal.com"}),e.jsx("div",{className:"md:col-span-2",children:e.jsx(o,{label:"Direccion",value:a.address,onChange:l=>c({...a,address:l.target.value}),placeholder:"Calle 123 # 45-67, Bogota"})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Contacto de Emergencia"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(o,{label:"Nombre del Contacto",value:a.emergency_contact_name,onChange:l=>c({...a,emergency_contact_name:l.target.value}),placeholder:"Nombre completo"}),e.jsx(o,{label:"Telefono del Contacto",value:a.emergency_contact_phone,onChange:l=>c({...a,emergency_contact_phone:l.target.value}),placeholder:"+57 300 123 4567"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200",children:[e.jsx(v,{type:"button",variant:"secondary",onClick:y,children:"Cancelar"}),e.jsxs(v,{type:"submit",loading:m,children:[e.jsx(Ta,{className:"w-4 h-4"}),"Guardar Cambios"]})]})]})}function $a({employees:i=[],contractTemplates:j=[],departmentOptions:_=[],companies:f=[],onSubmit:C,onCancel:g,loading:y,error:m}){const[t,a]=p.useState({first_name:"",last_name:"",personal_email:"",identification_type:"CC",identification_number:"",employee_number:"",job_title:"",department:"",employment_status:"active",employment_type:"full_time",hire_date:new Date().toISOString().split("T")[0],supervisor_id:"",company_id:"",cost_center:"",contract_type:"indefinite",contract_template_id:"",contract_start_date:new Date().toISOString().split("T")[0],contract_end_date:"",contract_duration_value:"",contract_duration_unit:"months",trial_period_days:"60",salary:"",food_allowance:"",transport_allowance:"",payment_frequency:"monthly",work_city:"",date_of_birth:"",place_of_birth:"",nationality:"Colombiana",address:"",phone:"",emergency_contact_name:"",emergency_contact_phone:""}),[c,w]=p.useState("basico"),[d,L]=p.useState({});p.useEffect(()=>{const s=He(t.contract_start_date,t.contract_end_date);s&&a(S=>({...S,contract_duration_value:s.value.toString(),contract_duration_unit:s.unit}))},[t.contract_start_date,t.contract_end_date]);const Q=()=>{const s={};return t.first_name.trim()||(s.first_name="Nombre es requerido"),t.last_name.trim()||(s.last_name="Apellido es requerido"),t.personal_email.trim()||(s.personal_email="Correo es requerido"),t.identification_number.trim()||(s.identification_number="Número de documento es requerido"),t.job_title.trim()||(s.job_title="Cargo es requerido"),t.department||(s.department="Departamento es requerido"),t.company_id||(s.company_id="Empresa es requerida"),t.hire_date||(s.hire_date="Fecha de contratación es requerida"),L(s),Object.keys(s).length===0},M=s=>{if(s.preventDefault(),!Q()){d.first_name||d.last_name||d.personal_email||d.identification_number?w("basico"):(d.job_title||d.department||d.company_id||d.supervisor_id||d.hire_date)&&w("laboral");return}const S={...t};Object.keys(S).forEach(k=>{S[k]===""&&(S[k]=null)}),C(S)},l=[{value:"",label:"Junta Directiva"},...i.map(s=>({value:s.id,label:`${s.full_name} - ${s.job_title||"Sin cargo"}`}))],N=[{id:"basico",label:"Datos Básicos",icon:oe,required:!0},{id:"laboral",label:"Laboral",icon:ce,required:!0},{id:"contrato",label:"Contrato",icon:R},{id:"compensacion",label:"Compensación",icon:U},{id:"personal",label:"Personal",icon:X}],b=s=>s==="basico"?d.first_name||d.last_name||d.personal_email||d.identification_number:s==="laboral"?d.job_title||d.department||d.company_id||d.hire_date:!1;return e.jsxs("form",{onSubmit:M,className:"space-y-6",children:[m&&e.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-700",children:[e.jsx(ye,{className:"w-5 h-5 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:m})]}),e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"-mb-px flex space-x-2 overflow-x-auto",children:N.map(s=>e.jsxs("button",{type:"button",onClick:()=>w(s.id),className:`py-2 px-3 border-b-2 font-medium text-sm flex items-center gap-2 whitespace-nowrap ${c===s.id?"border-primary-500 text-primary-600":b(s.id)?"border-red-300 text-red-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(s.icon,{className:"w-4 h-4"}),s.label,s.required&&e.jsx("span",{className:"text-red-500",children:"*"}),b(s.id)&&e.jsx(ye,{className:"w-3 h-3 text-red-500"})]},s.id))})}),c==="basico"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-700",children:[e.jsx("strong",{children:"Información requerida:"})," Estos datos son necesarios para crear la cuenta del empleado."]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(o,{label:"Nombre *",value:t.first_name,onChange:s=>a({...t,first_name:s.target.value}),placeholder:"Nombre",error:d.first_name}),d.first_name&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:d.first_name})]}),e.jsxs("div",{children:[e.jsx(o,{label:"Apellido *",value:t.last_name,onChange:s=>a({...t,last_name:s.target.value}),placeholder:"Apellido",error:d.last_name}),d.last_name&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:d.last_name})]}),e.jsxs("div",{children:[e.jsx(o,{label:"Correo Personal *",type:"email",value:t.personal_email,onChange:s=>a({...t,personal_email:s.target.value}),placeholder:"correo@personal.com",error:d.personal_email}),d.personal_email&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:d.personal_email}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Se usará para crear la cuenta de usuario"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx(u,{label:"Tipo Doc *",options:Ke,value:t.identification_type,onChange:s=>a({...t,identification_type:s.target.value})}),e.jsxs("div",{className:"col-span-2",children:[e.jsx(o,{label:"Número de Documento *",value:t.identification_number,onChange:s=>a({...t,identification_number:s.target.value}),placeholder:"1234567890",error:d.identification_number}),d.identification_number&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:d.identification_number}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Será la contraseña inicial"})]})]})]})]}),c==="laboral"&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(o,{label:"Número de Empleado",value:t.employee_number,onChange:s=>a({...t,employee_number:s.target.value}),placeholder:"EMP-001 (auto si vacío)"}),e.jsxs("div",{children:[e.jsx(o,{label:"Cargo *",value:t.job_title,onChange:s=>a({...t,job_title:s.target.value}),placeholder:"Ej: Desarrollador Senior",error:d.job_title}),d.job_title&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:d.job_title})]}),e.jsxs("div",{children:[e.jsx(u,{label:"Departamento *",options:[{value:"",label:"Seleccionar departamento *"},..._.slice(1)],value:t.department,onChange:s=>a({...t,department:s.target.value})}),d.department&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:d.department})]}),e.jsxs("div",{children:[e.jsx(u,{label:"Empresa *",options:[{value:"",label:"Seleccionar empresa *"},...f.map(s=>({value:s.id,label:s.name}))],value:t.company_id,onChange:s=>a({...t,company_id:s.target.value})}),d.company_id&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:d.company_id})]}),e.jsx(o,{label:"Centro de Costo",value:t.cost_center,onChange:s=>a({...t,cost_center:s.target.value}),placeholder:"Ej: CC-100"}),e.jsx(u,{label:"Estado Laboral",options:Ge,value:t.employment_status,onChange:s=>a({...t,employment_status:s.target.value})}),e.jsx(u,{label:"Tipo de Empleo",options:ve,value:t.employment_type,onChange:s=>a({...t,employment_type:s.target.value})}),e.jsx("div",{children:e.jsx(u,{label:"Jefe Inmediato",options:l,value:t.supervisor_id,onChange:s=>a({...t,supervisor_id:s.target.value})})}),e.jsxs("div",{children:[e.jsx(o,{label:"Fecha de Contratación *",type:"date",value:t.hire_date,onChange:s=>a({...t,hire_date:s.target.value}),error:d.hire_date}),d.hire_date&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:d.hire_date})]})]})}),c==="contrato"&&e.jsxs("div",{className:"space-y-4",children:[t.contract_type==="indefinite"&&e.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg text-sm text-blue-700",children:[e.jsx("strong",{children:"Contrato a Término Indefinido:"})," No requiere fecha de finalización ni duración específica."]}),t.contract_type==="fixed_term"&&e.jsxs("div",{className:"p-3 bg-amber-50 border border-amber-200 rounded-lg text-sm text-amber-700",children:[e.jsx("strong",{children:"Contrato a Término Fijo:"})," Requiere fecha de finalización y duración del contrato."]}),t.contract_type==="work_or_labor"&&e.jsxs("div",{className:"p-3 bg-purple-50 border border-purple-200 rounded-lg text-sm text-purple-700",children:[e.jsx("strong",{children:"Contrato por Obra o Labor:"})," Vinculado a la duración de una obra o labor específica."]}),t.contract_type==="apprentice"&&e.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg text-sm text-green-700",children:[e.jsx("strong",{children:"Contrato de Aprendizaje:"})," Para practicantes y aprendices en formación."]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(u,{label:"Tipo de Contrato",options:j.length>0?[{value:"",label:"Seleccionar template"},...j]:fe,value:j.length>0?t.contract_template_id:t.contract_type,onChange:s=>{if(j.length>0)a({...t,contract_template_id:s.target.value});else{const S=s.target.value,k={contract_type:S};S==="indefinite"&&(k.contract_end_date="",k.contract_duration_value="",k.contract_duration_unit="months"),a({...t,...k})}}}),e.jsx(o,{label:"Días de Periodo de Prueba",type:"number",value:t.trial_period_days,onChange:s=>a({...t,trial_period_days:s.target.value}),placeholder:t.contract_type==="apprentice"?"0":"60"}),e.jsx(o,{label:"Fecha de Inicio del Contrato",type:"date",value:t.contract_start_date,onChange:s=>a({...t,contract_start_date:s.target.value}),required:!0}),t.contract_type!=="indefinite"&&e.jsx(o,{label:"Fecha de Fin del Contrato",type:"date",value:t.contract_end_date,onChange:s=>a({...t,contract_end_date:s.target.value}),min:t.contract_start_date,required:t.contract_type==="fixed_term"}),t.contract_type!=="indefinite"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Duración del Contrato"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(o,{type:"number",value:t.contract_duration_value,onChange:s=>a({...t,contract_duration_value:s.target.value}),placeholder:"12",className:"flex-1"}),e.jsx(u,{options:Je,value:t.contract_duration_unit,onChange:s=>a({...t,contract_duration_unit:s.target.value}),className:"w-32"})]})]})]})]}),c==="compensacion"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(o,{label:"Salario Mensual",type:"number",value:t.salary,onChange:s=>a({...t,salary:s.target.value}),placeholder:"2500000"}),t.salary&&e.jsx("p",{className:"text-xs text-gray-500 mt-1 italic",children:T(t.salary)})]}),e.jsxs("div",{children:[e.jsx(o,{label:"Auxilio de Alimentación",type:"number",value:t.food_allowance,onChange:s=>a({...t,food_allowance:s.target.value}),placeholder:"0"}),t.food_allowance>0&&e.jsx("p",{className:"text-xs text-gray-500 mt-1 italic",children:T(t.food_allowance)})]}),e.jsxs("div",{children:[e.jsx(o,{label:"Auxilio de Transporte",type:"number",value:t.transport_allowance,onChange:s=>a({...t,transport_allowance:s.target.value}),placeholder:"140606"}),t.transport_allowance>0&&e.jsx("p",{className:"text-xs text-gray-500 mt-1 italic",children:T(t.transport_allowance)})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(u,{label:"Periodicidad de Pago",options:[{value:"weekly",label:"Semanal"},{value:"biweekly",label:"Quincenal"},{value:"monthly",label:"Mensual"}],value:t.payment_frequency,onChange:s=>a({...t,payment_frequency:s.target.value})}),e.jsx(o,{label:"Ciudad de Labores",value:t.work_city,onChange:s=>a({...t,work_city:s.target.value}),placeholder:"Ej: Bogotá D.C."})]}),(t.salary||t.food_allowance||t.transport_allowance)&&e.jsx("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("p",{className:"text-sm text-green-700",children:[e.jsx("span",{className:"font-medium",children:"Compensación Total: "}),"$",((parseFloat(t.salary)||0)+(parseFloat(t.food_allowance)||0)+(parseFloat(t.transport_allowance)||0)).toLocaleString("es-CO")]})})]}),c==="personal"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Datos Personales"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(o,{label:"Fecha de Nacimiento",type:"date",value:t.date_of_birth,onChange:s=>a({...t,date_of_birth:s.target.value})}),e.jsx(o,{label:"Lugar de Nacimiento",value:t.place_of_birth,onChange:s=>a({...t,place_of_birth:s.target.value}),placeholder:"Bogotá, Colombia"}),e.jsx(o,{label:"Nacionalidad",value:t.nationality,onChange:s=>a({...t,nationality:s.target.value}),placeholder:"Colombiana"}),e.jsx(o,{label:"Teléfono",value:t.phone,onChange:s=>a({...t,phone:s.target.value}),placeholder:"+57 300 123 4567"}),e.jsx("div",{className:"md:col-span-2",children:e.jsx(o,{label:"Dirección",value:t.address,onChange:s=>a({...t,address:s.target.value}),placeholder:"Calle 123 # 45-67, Bogotá"})})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Contacto de Emergencia"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(o,{label:"Nombre del Contacto",value:t.emergency_contact_name,onChange:s=>a({...t,emergency_contact_name:s.target.value}),placeholder:"Nombre completo"}),e.jsx(o,{label:"Teléfono del Contacto",value:t.emergency_contact_phone,onChange:s=>a({...t,emergency_contact_phone:s.target.value}),placeholder:"+57 300 123 4567"})]})]})]}),e.jsxs("div",{className:"flex justify-between items-center gap-3 pt-4 border-t border-gray-200",children:[e.jsxs("p",{className:"text-xs text-gray-500",children:["Los campos marcados con ",e.jsx("span",{className:"text-red-500",children:"*"})," son obligatorios"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(v,{type:"button",variant:"secondary",onClick:g,children:"Cancelar"}),e.jsxs(v,{type:"submit",loading:y,children:[e.jsx(Re,{className:"w-4 h-4"}),"Crear Empleado"]})]})]})]})}function za({employee:i,onView:j}){return e.jsx(B,{className:"hover:shadow-md transition-shadow",children:e.jsxs(W,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-primary-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsxs("span",{className:"text-primary-700 font-semibold text-lg",children:[i.first_name?.[0],i.last_name?.[0]]})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 truncate",children:i.full_name}),e.jsx("p",{className:"text-sm text-gray-500",children:i.employee_number})]}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${V[i.employment_status]||V.active}`,children:ee[i.employment_status]||i.employment_status})]}),e.jsxs("div",{className:"mt-3 space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(ce,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"truncate",children:i.job_title||"Sin cargo"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(Ve,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"truncate",children:i.department||"Sin departamento"})]}),i.company_name&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(Qe,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"truncate",children:i.company_name})]}),i.email&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(Ue,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"truncate",children:i.email})]})]})]})]}),e.jsx("div",{className:"flex justify-end mt-4 pt-3 border-t border-gray-100",children:e.jsxs(v,{variant:"ghost",size:"sm",onClick:()=>j(i),children:[e.jsx(be,{className:"w-4 h-4"}),"Ver Detalle"]})})]})})}function Ba({employees:i,onView:j,sortColumn:_,sortDirection:f,onSort:C}){const g=({column:m})=>_!==m?e.jsx(ka,{className:"w-3 h-3 text-gray-400"}):f==="asc"?e.jsx(qa,{className:"w-3 h-3 text-primary-600"}):e.jsx(La,{className:"w-3 h-3 text-primary-600"}),y=({column:m,children:t,align:a="left"})=>e.jsx("th",{onClick:()=>C(m),className:`px-4 py-3 text-${a} text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100 select-none`,children:e.jsxs("div",{className:`flex items-center gap-1 ${a==="right"?"justify-end":a==="center"?"justify-center":""}`,children:[t,e.jsx(g,{column:m})]})});return e.jsx(B,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200 bg-gray-50",children:[e.jsx(y,{column:"full_name",children:"Empleado"}),e.jsx(y,{column:"job_title",children:"Cargo"}),e.jsx(y,{column:"department",children:"Departamento"}),e.jsx(y,{column:"company_name",children:"Empresa"}),e.jsx(y,{column:"employment_status",children:"Estado"}),e.jsx(y,{column:"hire_date",children:"Fecha Ingreso"}),e.jsx(y,{column:"available_vacation_days",align:"center",children:"Vacaciones"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:i.map(m=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-primary-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsxs("span",{className:"text-primary-700 font-medium",children:[m.first_name?.[0],m.last_name?.[0]]})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:m.full_name}),e.jsx("p",{className:"text-sm text-gray-500",children:m.email})]})]})}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-600",children:m.job_title||"-"}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-600",children:m.department||"-"}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-600",children:m.company_name||"-"}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${V[m.employment_status]||V.active}`,children:ee[m.employment_status]||m.employment_status})}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-600",children:m.hire_date?new Date(m.hire_date).toLocaleDateString("es-CO"):"-"}),e.jsx("td",{className:"px-4 py-4 text-center",children:e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[m.available_vacation_days??0," días"]})}),e.jsx("td",{className:"px-4 py-4 text-right",children:e.jsx(v,{variant:"ghost",size:"sm",onClick:()=>j(m),children:e.jsx(be,{className:"w-4 h-4"})})})]},m.id))})]})})})}function et(){const{isHR:i,isAdmin:j}=ya(),_=i||j,[f,C]=p.useState(""),[g,y]=p.useState(""),[m,t]=p.useState(""),[a,c]=p.useState(""),[w,d]=p.useState(""),[L,Q]=p.useState(!1),[M,l]=p.useState("table"),[N,b]=p.useState(1),[s,S]=p.useState(!1),[k,ae]=p.useState(!1),[Ye,te]=p.useState(!1),[Ze,G]=p.useState(!1),[Ne,de]=p.useState(!1),[P,se]=p.useState(null),[D,re]=p.useState(null),[We,K]=p.useState(""),[Xe,me]=p.useState(""),[q,ea]=p.useState("full_name"),[O,Ce]=p.useState("asc"),H=_a(),we=Be,{data:Se,isLoading:De,isError:aa}=$({queryKey:["employees",{q:f,status:g,department:m,page:N,sortColumn:q,sortDirection:O}],queryFn:()=>z.list({q:f||void 0,status:g||void 0,department:m||void 0,sort_by:q,sort_direction:O,page:N,per_page:20})}),{data:ta,isLoading:Fe}=$({queryKey:["employee",D?.id],queryFn:()=>z.get(D.id),enabled:!!D?.id&&(s||k)}),Ee=le({mutationFn:({id:r,data:x})=>z.update(r,x),onSuccess:()=>{H.invalidateQueries(["employees"]),H.invalidateQueries(["employee",D?.id]),ae(!1),K("")},onError:r=>{K(r.response?.data?.error||"Error al actualizar el empleado")}}),Te=le({mutationFn:r=>z.create(r),onSuccess:r=>{H.invalidateQueries(["employees"]),te(!1),me("");const x=r.data?.data;x&&(re(x),S(!0))},onError:r=>{me(r.response?.data?.error||r.response?.data?.errors?.join(", ")||"Error al crear el empleado")}}),ke=le({mutationFn:r=>z.createAccount(r),onSuccess:r=>{H.invalidateQueries(["employees"]),H.invalidateQueries(["employee",D?.id]),alert(r.data.message||"Cuenta creada exitosamente. La contraseña inicial es el número de cédula.")},onError:r=>{alert(r.response?.data?.error||"Error al crear la cuenta")}}),xe=le({mutationFn:({employeeId:r,templateId:x})=>z.generateDocument(r,x),onSuccess:r=>{G(!1),alert(r.data.message||"Documento generado exitosamente. Puede descargarlo desde la sección de documentos.")},onError:r=>{const x=r.response?.data;x?.missing_variables?(G(!1),K(`Faltan datos requeridos para generar el documento:
${x.missing_variables}`),ae(!0)):alert(x?.error||"Error al generar el documento")}}),{data:sa}=$({queryKey:["templates",{category:"contract"}],queryFn:()=>ba.list({category:"contract"})}),pe=sa?.data?.data||[],{data:ra}=$({queryKey:["companies-active"],queryFn:()=>va.list({active:!0})}),qe=ra?.data?.data||[],{data:na}=$({queryKey:["employee-documents",D?.id],queryFn:()=>je.list({employee_id:D.id,category:"contract,employee_contract,employee"}),enabled:!!D?.id&&s}),J=na?.data?.data||[],la=J.length>0,ia=J[0],{data:oa}=$({queryKey:["contract-detail",P?.id],queryFn:()=>je.get(P.id),enabled:!!P?.id&&Ne}),h=oa?.data?.data||P,Le=pe.map(r=>({value:r.id,label:r.name})),ue=Se?.data?.data||[],ge=Se?.data?.meta||{},n=ta?.data?.data||D,I=ue.filter(r=>!(a&&r.contract_type!==a||w&&r.employment_type!==w)).sort((r,x)=>{let E,F;switch(q){case"full_name":E=(r.full_name||"").toLowerCase(),F=(x.full_name||"").toLowerCase();break;case"job_title":E=(r.job_title||"").toLowerCase(),F=(x.job_title||"").toLowerCase();break;case"department":E=(r.department||"").toLowerCase(),F=(x.department||"").toLowerCase();break;case"company_name":E=(r.company_name||"").toLowerCase(),F=(x.company_name||"").toLowerCase();break;case"employment_status":E=ee[r.employment_status]||r.employment_status||"",F=ee[x.employment_status]||x.employment_status||"";break;case"hire_date":E=r.hire_date?new Date(r.hire_date).getTime():0,F=x.hire_date?new Date(x.hire_date).getTime():0;break;case"available_vacation_days":E=r.available_vacation_days??0,F=x.available_vacation_days??0;break;default:E=(r.full_name||"").toLowerCase(),F=(x.full_name||"").toLowerCase()}return E<F?O==="asc"?-1:1:E>F?O==="asc"?1:-1:0}),ca=r=>{q===r?Ce(x=>x==="asc"?"desc":"asc"):(ea(r),Ce("asc"))},da=()=>{C(""),y(""),t(""),c(""),d(""),b(1)},he=f||g||m||a||w,Me=r=>{re(r),S(!0)},ma=()=>{S(!1),ae(!0),K("")},Pe=()=>{ae(!1),re(null),K("")},xa=r=>{Ee.mutate({id:D.id,data:r})},pa=r=>{confirm(`¿Crear cuenta de usuario para este empleado?

La contraseña inicial será el número de cédula y deberá cambiarla en el primer inicio de sesión.`)&&ke.mutate(r)},Ae=()=>{G(!0)},ua=r=>{se(r),de(!0)},ga=async r=>{try{const x=await je.download(r),E=new Blob([x.data],{type:"application/pdf"}),F=window.URL.createObjectURL(E),Y=document.createElement("a");Y.href=F,Y.download=`contrato-${D?.full_name||"documento"}.pdf`,document.body.appendChild(Y),Y.click(),document.body.removeChild(Y),window.URL.revokeObjectURL(F)}catch(x){console.error("Error downloading contract:",x)}},ha=r=>{D&&xe.mutate({employeeId:D.id,templateId:r})},ja=r=>{r.preventDefault(),b(1)},ne=Math.ceil((ge.total||0)/(ge.per_page||20));return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Empleados"}),e.jsx("p",{className:"text-gray-500",children:"Directorio de empleados de la organización"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[_&&e.jsxs(v,{onClick:()=>{me(""),te(!0)},children:[e.jsx(fa,{className:"w-4 h-4"}),"Agregar Empleado"]}),e.jsxs("div",{className:"flex items-center gap-1 border-l pl-3 ml-2",children:[e.jsx(v,{variant:M==="table"?"primary":"secondary",size:"sm",onClick:()=>l("table"),children:"Tabla"}),e.jsx(v,{variant:M==="grid"?"primary":"secondary",size:"sm",onClick:()=>l("grid"),children:"Tarjetas"})]})]})]}),e.jsx(B,{children:e.jsx(W,{className:"py-4",children:e.jsxs("form",{onSubmit:ja,className:"space-y-3",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsx("div",{className:"flex-1 min-w-[200px]",children:e.jsxs("div",{className:"relative",children:[e.jsx(Na,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar por nombre o número...",value:f,onChange:r=>C(r.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]})}),e.jsxs("button",{type:"button",onClick:()=>Q(!L),className:`px-3 py-2 text-sm rounded-lg flex items-center gap-2 transition-colors ${L||he?"bg-primary-100 text-primary-700 hover:bg-primary-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[e.jsx(Ca,{className:"w-4 h-4"}),"Filtros",he&&e.jsx("span",{className:"bg-primary-600 text-white text-xs px-1.5 py-0.5 rounded-full",children:[g,m,a,w].filter(Boolean).length})]}),he&&e.jsxs("button",{type:"button",onClick:da,className:"px-3 py-2 text-sm text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg flex items-center gap-1",children:[e.jsx(wa,{className:"w-4 h-4"}),"Limpiar"]})]}),L&&e.jsxs("div",{className:"flex flex-wrap items-center gap-3 pt-3 border-t border-gray-100",children:[e.jsx(u,{options:Ma,value:g,onChange:r=>{y(r.target.value),b(1)},className:"w-44"}),e.jsx(u,{options:Be,value:m,onChange:r=>{t(r.target.value),b(1)},className:"w-48"}),e.jsx(u,{options:[{value:"",label:"Tipo de contrato"},...fe],value:a,onChange:r=>{c(r.target.value),b(1)},className:"w-44"}),e.jsx(u,{options:[{value:"",label:"Tipo de empleo"},...ve],value:w,onChange:r=>{d(r.target.value),b(1)},className:"w-44"})]}),!De&&ue.length>0&&e.jsx("div",{className:"text-sm text-gray-500 flex items-center justify-between",children:e.jsxs("span",{children:["Mostrando ",e.jsx("strong",{children:I.length})," de ",e.jsx("strong",{children:ge.total||ue.length})," empleados",q&&e.jsxs("span",{className:"ml-2 text-gray-400",children:["· Ordenado por ",q==="full_name"?"nombre":q==="job_title"?"cargo":q==="department"?"departamento":q==="employment_status"?"estado":"fecha ingreso"," (",O==="asc"?"A-Z":"Z-A",")"]})]})})]})})}),De?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[1,2,3,4,5,6].map(r=>e.jsx(B,{className:"animate-pulse",children:e.jsx(W,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-full"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/3"})]})]})})},r))}):aa?e.jsx(B,{children:e.jsxs(W,{className:"py-12 text-center",children:[e.jsx(Oe,{className:"w-16 h-16 mx-auto text-red-300 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Error al cargar empleados"}),e.jsx("p",{className:"text-gray-500",children:"No se pudo obtener la lista de empleados. Intenta de nuevo."})]})}):I.length>0?e.jsxs(e.Fragment,{children:[M==="grid"?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:I.map(r=>e.jsx(za,{employee:r,onView:Me},r.id))}):e.jsx(Ba,{employees:I,onView:Me,sortColumn:q,sortDirection:O,onSort:ca}),ne>1&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-gray-500",children:["Página ",N," de ",ne]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(v,{variant:"secondary",size:"sm",onClick:()=>b(r=>Math.max(1,r-1)),disabled:N===1,children:[e.jsx(Sa,{className:"w-4 h-4"}),"Anterior"]}),e.jsxs(v,{variant:"secondary",size:"sm",onClick:()=>b(r=>Math.min(ne,r+1)),disabled:N===ne,children:["Siguiente",e.jsx(Da,{className:"w-4 h-4"})]})]})]})]}):e.jsx(B,{children:e.jsxs(W,{className:"py-12 text-center",children:[e.jsx(Oe,{className:"w-16 h-16 mx-auto text-gray-300 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No se encontraron empleados"}),e.jsx("p",{className:"text-gray-500",children:f||g||m?"Intenta ajustar los filtros de búsqueda":"No hay empleados registrados en el sistema"})]})}),e.jsx(Z,{isOpen:s,onClose:()=>{S(!1),re(null)},title:"Detalle del Empleado",size:"lg",children:Fe?e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-full"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-5 bg-gray-200 rounded w-48"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-32"})]})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:[1,2,3,4].map(r=>e.jsx("div",{className:"h-12 bg-gray-100 rounded"},r))})]}):n&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center",children:e.jsxs("span",{className:"text-primary-700 font-semibold text-2xl",children:[n.first_name?.[0],n.last_name?.[0]]})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:n.full_name}),e.jsx("p",{className:"text-gray-500",children:n.employee_number}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${V[n.employment_status]||V.active}`,children:ee[n.employment_status]||n.employment_status}),n.employment_type&&e.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-600",children:Oa[n.employment_type]||n.employment_type})]})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:_&&e.jsxs(e.Fragment,{children:[la?e.jsxs(v,{variant:"secondary",size:"sm",onClick:()=>ua(ia),children:[e.jsx(be,{className:"w-4 h-4"}),"Ver Contrato"]}):e.jsxs(v,{variant:"secondary",size:"sm",onClick:Ae,children:[e.jsx(ie,{className:"w-4 h-4"}),"Generar Contrato"]}),e.jsxs(v,{variant:"secondary",size:"sm",onClick:ma,children:[e.jsx(Fa,{className:"w-4 h-4"}),"Editar"]})]})})]}),_&&e.jsx("div",{className:`p-4 rounded-lg ${n.has_account?"bg-green-50 border border-green-200":"bg-amber-50 border border-amber-200"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-3",children:n.has_account?e.jsxs(e.Fragment,{children:[e.jsx(Ie,{className:"w-5 h-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-800",children:"Cuenta de usuario activa"}),e.jsx("p",{className:"text-xs text-green-600",children:n.user_email})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(Ea,{className:"w-5 h-5 text-amber-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-amber-800",children:"Sin cuenta de usuario"}),e.jsx("p",{className:"text-xs text-amber-600",children:n.personal_email?`Se creara con: ${n.personal_email}`:"Agregue correo personal para crear cuenta"})]})]})}),!n.has_account&&n.personal_email&&n.identification_number&&e.jsxs(v,{size:"sm",onClick:()=>pa(n.id),loading:ke.isPending,children:[e.jsx(Re,{className:"w-4 h-4"}),"Crear Cuenta"]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(Ue,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Correo electronico"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:n.email||"-"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(ce,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Cargo"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:n.job_title||"-"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(Ve,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Departamento"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:n.department||"-"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(Qe,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Empresa"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:n.company_name||"-"}),n.company_nit&&e.jsxs("p",{className:"text-xs text-gray-500",children:["NIT: ",n.company_nit]})]})]}),n.supervisor&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(oe,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Supervisor"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:n.supervisor.name}),e.jsx("p",{className:"text-xs text-gray-500",children:n.supervisor.job_title})]})]}),n.vacation_balance_days!==null&&n.vacation_balance_days!==void 0&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-blue-50 rounded-lg",children:[e.jsx(A,{className:"w-5 h-5 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-blue-600",children:"Dias de vacaciones disponibles"}),e.jsxs("p",{className:"text-sm font-medium text-blue-900",children:[n.vacation_balance_days," dias"]})]})]})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center gap-2",children:[e.jsx(R,{className:"w-4 h-4"}),"Informacion de Contrato"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(R,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Tipo de Contrato"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:n.contract_template_name||Pa[n.contract_type]||n.contract_type||"-"})]})]}),n.hire_date&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(A,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Fecha de Contratacion"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:new Date(n.hire_date).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"})})]})]}),n.contract_start_date&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(A,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Inicio del Contrato"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:new Date(n.contract_start_date).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"})})]})]}),n.contract_end_date&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(A,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Fin del Contrato"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:new Date(n.contract_end_date).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"})})]})]}),n.contract_duration_value&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(A,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Duracion del Contrato"}),e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[n.contract_duration_value," ",Aa[n.contract_duration_unit]||n.contract_duration_unit]})]})]}),n.trial_period_days&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(A,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Periodo de Prueba"}),e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[n.trial_period_days," dias"]})]})]})]})]}),(n.salary||n.food_allowance||n.transport_allowance)&&e.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center gap-2",children:[e.jsx(U,{className:"w-4 h-4"}),"Compensacion"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.salary&&e.jsxs("div",{className:"p-3 bg-green-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(U,{className:"w-5 h-5 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-green-600",children:"Salario Mensual"}),e.jsxs("p",{className:"text-sm font-medium text-green-900",children:["$",parseFloat(n.salary).toLocaleString("es-CO")]})]})]}),e.jsx("p",{className:"text-xs text-green-600 mt-1 italic ml-8",children:T(n.salary)})]}),n.food_allowance>0&&e.jsxs("div",{className:"p-3 bg-green-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(U,{className:"w-5 h-5 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-green-600",children:"Auxilio Alimentacion"}),e.jsxs("p",{className:"text-sm font-medium text-green-900",children:["$",parseFloat(n.food_allowance).toLocaleString("es-CO")]})]})]}),e.jsx("p",{className:"text-xs text-green-600 mt-1 italic ml-8",children:T(n.food_allowance)})]}),n.transport_allowance>0&&e.jsxs("div",{className:"p-3 bg-green-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(U,{className:"w-5 h-5 text-green-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-green-600",children:"Auxilio Transporte"}),e.jsxs("p",{className:"text-sm font-medium text-green-900",children:["$",parseFloat(n.transport_allowance).toLocaleString("es-CO")]})]})]}),e.jsx("p",{className:"text-xs text-green-600 mt-1 italic ml-8",children:T(n.transport_allowance)})]})]}),e.jsxs("div",{className:"mt-3 p-3 bg-green-100 rounded-lg",children:[e.jsxs("p",{className:"text-sm text-green-800",children:[e.jsx("span",{className:"font-medium",children:"Compensacion Total: "}),"$",((parseFloat(n.salary)||0)+(parseFloat(n.food_allowance)||0)+(parseFloat(n.transport_allowance)||0)).toLocaleString("es-CO")]}),e.jsx("p",{className:"text-xs text-green-700 mt-1 italic",children:T((parseFloat(n.salary)||0)+(parseFloat(n.food_allowance)||0)+(parseFloat(n.transport_allowance)||0))})]})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-700 mb-3 flex items-center gap-2",children:[e.jsx($e,{className:"w-4 h-4"}),"Informacion Personal"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.identification_number&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx($e,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Documento de Identidad"}),e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[n.identification_type||"CC",": ",n.identification_number]})]})]}),n.date_of_birth&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(A,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Fecha de Nacimiento"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:new Date(n.date_of_birth).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"})})]})]}),n.place_of_birth&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(X,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Lugar de Nacimiento"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:n.place_of_birth})]})]}),n.nationality&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(X,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Nacionalidad"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:n.nationality})]})]}),n.phone&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(ze,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Telefono"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:n.phone})]})]}),n.address&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg md:col-span-2",children:[e.jsx(X,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Direccion"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:n.address})]})]})]})]}),(n.emergency_contact_name||n.emergency_contact_phone)&&e.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Contacto de Emergencia"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.emergency_contact_name&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-orange-50 rounded-lg",children:[e.jsx(oe,{className:"w-5 h-5 text-orange-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-orange-600",children:"Nombre"}),e.jsx("p",{className:"text-sm font-medium text-orange-900",children:n.emergency_contact_name})]})]}),n.emergency_contact_phone&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-orange-50 rounded-lg",children:[e.jsx(ze,{className:"w-5 h-5 text-orange-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-orange-600",children:"Telefono"}),e.jsx("p",{className:"text-sm font-medium text-orange-900",children:n.emergency_contact_phone})]})]})]})]}),(n.is_supervisor||n.is_hr_staff||n.is_hr_manager)&&e.jsxs("div",{className:"flex flex-wrap gap-2 pt-2 border-t border-gray-200",children:[n.is_supervisor&&e.jsx(_e,{variant:"info",children:"Supervisor"}),n.is_hr_staff&&e.jsx(_e,{variant:"info",children:"Staff HR"}),n.is_hr_manager&&e.jsx(_e,{variant:"success",children:"Gerente HR"})]})]})}),e.jsx(Z,{isOpen:k,onClose:Pe,title:`Editar Empleado: ${D?.full_name||""}`,size:"lg",children:Fe?e.jsx("div",{className:"animate-pulse space-y-4",children:[1,2,3,4].map(r=>e.jsx("div",{className:"h-12 bg-gray-200 rounded"},r))}):n&&e.jsx(Ia,{employee:n,employees:I,contractTemplates:Le,departmentOptions:we,companies:qe,onSubmit:xa,onCancel:Pe,loading:Ee.isPending,error:We})}),e.jsx(Z,{isOpen:Ze,onClose:()=>G(!1),title:"Seleccionar Template de Contrato",size:"md",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Seleccione el template que desea usar para generar el contrato de ",e.jsx("strong",{children:n?.full_name})]}),pe.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(R,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"No hay templates de contrato disponibles"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:'Cree un template con categoría "contract" desde Admin → Templates'})]}):e.jsx("div",{className:"space-y-2",children:pe.map(r=>e.jsx("button",{onClick:()=>ha(r.id),disabled:xe.isPending,className:"w-full p-4 text-left border border-gray-200 rounded-lg hover:bg-gray-50 hover:border-primary-300 transition-colors disabled:opacity-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:r.name}),r.description&&e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:r.description})]}),e.jsx(ie,{className:"w-5 h-5 text-gray-400"})]})},r.id))}),xe.isPending&&e.jsxs("div",{className:"flex items-center justify-center gap-2 p-4 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-primary-600 border-t-transparent"}),e.jsx("span",{className:"text-sm text-primary-700",children:"Generando documento..."})]}),e.jsx("div",{className:"flex justify-end pt-4 border-t",children:e.jsx(v,{variant:"secondary",onClick:()=>G(!1),children:"Cancelar"})})]})}),e.jsx(Z,{isOpen:Ne,onClose:()=>{de(!1),se(null)},title:"Detalle del Contrato",size:"lg",children:P&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:h.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Generado el ",new Date(h.created_at).toLocaleDateString("es-CO",{day:"numeric",month:"long",year:"numeric"})]})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${h.status==="completed"?"bg-green-100 text-green-700":h.status==="pending_signatures"?"bg-yellow-100 text-yellow-700":h.status==="draft"?"bg-gray-100 text-gray-700":"bg-red-100 text-red-700"}`,children:h.status==="completed"?"Completado":h.status==="pending_signatures"?"Pendiente de Firmas":h.status==="draft"?"Borrador":h.status})]}),h.pending_signatures_count!==void 0&&e.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-blue-800",children:"Progreso de Firmas"}),e.jsxs("span",{className:"text-sm text-blue-600",children:[h.completed_signatures_count||0," de ",h.total_required_signatures||0," firmas"]})]}),e.jsx("div",{className:"w-full bg-blue-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all",style:{width:`${h.total_required_signatures?(h.completed_signatures_count||0)/h.total_required_signatures*100:0}%`}})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Empleado"}),e.jsx("p",{className:"font-medium text-gray-900",children:h.employee_name||n?.full_name})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Template"}),e.jsx("p",{className:"font-medium text-gray-900",children:h.template_name||"N/A"})]})]}),h.signatures&&h.signatures.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Firmas Requeridas"}),e.jsx("div",{className:"space-y-2",children:h.signatures.map((r,x)=>e.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border ${r.status==="signed"?"border-green-200 bg-green-50":"border-yellow-200 bg-yellow-50"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[r.status==="signed"?e.jsx(Ie,{className:"w-5 h-5 text-green-500"}):e.jsx("div",{className:"w-5 h-5 border-2 border-yellow-400 rounded-full flex items-center justify-center",children:e.jsx("div",{className:"w-2 h-2 bg-yellow-400 rounded-full"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:r.signatory_label}),e.jsx("p",{className:"text-sm text-gray-600",children:r.status==="signed"?e.jsxs(e.Fragment,{children:["Firmado por ",e.jsx("strong",{children:r.signed_by_name})," el ",new Date(r.signed_at).toLocaleDateString("es-CO")]}):e.jsxs(e.Fragment,{children:["Pendiente de firma por: ",e.jsx("strong",{children:r.user_name||"Sin asignar"})]})})]})]}),e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${r.status==="signed"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:r.status==="signed"?"Firmado":"Pendiente"})]},x))})]}),J.length>1&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:["Historial de Documentos (",J.length,")"]}),e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:J.map(r=>e.jsxs("button",{onClick:()=>se(r),className:`w-full flex items-center justify-between p-2 rounded-lg text-left transition-colors ${r.id===P.id?"bg-primary-50 border border-primary-200":"hover:bg-gray-50 border border-transparent"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-900",children:r.name})]}),e.jsx("span",{className:"text-xs text-gray-500",children:new Date(r.created_at).toLocaleDateString("es-CO")})]},r.id))})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[e.jsxs(v,{variant:"secondary",onClick:()=>Ae(),children:[e.jsx(ie,{className:"w-4 h-4"}),"Generar Nuevo Contrato"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(v,{variant:"secondary",onClick:()=>{de(!1),se(null)},children:"Cerrar"}),e.jsxs(v,{onClick:()=>ga(P.id),children:[e.jsx(ie,{className:"w-4 h-4"}),"Descargar PDF"]})]})]})]})}),e.jsx(Z,{isOpen:Ye,onClose:()=>te(!1),title:"Agregar Nuevo Empleado",size:"lg",children:e.jsx($a,{employees:I,contractTemplates:Le,departmentOptions:we,companies:qe,onSubmit:r=>Te.mutate(r),onCancel:()=>te(!1),loading:Te.isPending,error:Xe})})]})}export{et as default};
