import{u as G,a as z,b as P,j as e}from"./vendor-query-2ZprUnmA.js";import{a as ne,r,L as Q}from"./vendor-router-CyR0tpch.js";import{t as v,f as ie}from"./index-CpSXd72b.js";import{C as V,c as W}from"./Card-DbNYCSnq.js";import{B as w}from"./Button-C7qsOZ-2.js";import{I as ee}from"./Input-WTtiBIO6.js";import{q as oe,B as X,U as Z,P as K,e as ce,F as $,n as de,as as ae,d as ue,Q as me,at as xe,au as ge,Z as pe,X as H,m as Y,D as he}from"./vendor-icons-7sl6YsZj.js";import"./vendor-react-Cgg2GOmP.js";import"./vendor-axios-B9ygI19o.js";const J={draft:{label:"Borrador",color:"bg-gray-100 text-gray-700"},active:{label:"Activo",color:"bg-green-100 text-green-700"},archived:{label:"Archivado",color:"bg-yellow-100 text-yellow-700"}},se=[{value:"",label:"Seleccionar tipo..."},{value:"employment",label:"Certificado de Empleo"},{value:"salary",label:"Certificado de Salario"},{value:"position",label:"Certificado de Cargo"},{value:"full",label:"Certificado Completo"},{value:"custom",label:"Certificado Personalizado"}];function ye({isOpen:x,onClose:g,onSuccess:l}){const p=G(),[d,M]=r.useState(""),[N,S]=r.useState(""),[h,y]=r.useState("hr"),[f,C]=r.useState("laboral"),[n,o]=r.useState("other"),[u,c]=r.useState(""),[q,k]=r.useState(""),{data:T}=z({queryKey:["template-categories"],queryFn:()=>v.getCategories()}),_=P({mutationFn:t=>v.create({template:t}),onSuccess:t=>{p.invalidateQueries(["templates"]),l(t.data.data),m()},onError:t=>{k(t.response?.data?.error||"Error al crear template")}}),m=()=>{M(""),S(""),y("hr"),C("laboral"),o("other"),c(""),k(""),g()},U=t=>{if(t.preventDefault(),!d.trim()){k("El nombre es requerido");return}const b={name:d,description:N,module_type:h,main_category:f,category:n};n==="certification"&&u&&(b.certification_type=u),_.mutate(b)},A=T?.data?.modules||[],B=T?.data?.main_categories||[],L=T?.data?.category_to_module||{},D=T?.data?.grouped||{},F=D[f]||[],O=t=>{y(t);const b=Object.entries(L).find(([R,s])=>s===t);if(b){C(b[0]);const R=D[b[0]]||[];R.length>0&&o(R[0].value)}},E=t=>{C(t),L[t]&&y(L[t]);const b=D[t]||[];b.length>0&&o(b[0].value)};return x?e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Nuevo Template"}),e.jsx("button",{onClick:m,className:"p-1 hover:bg-gray-100 rounded",children:e.jsx(H,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:U,className:"p-4 space-y-4",children:[q&&e.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-700",children:[e.jsx(Y,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:q})]}),e.jsx(ee,{label:"Nombre del Template",value:d,onChange:t=>M(t.target.value),placeholder:"Ej: Certificacion Laboral Estandar",required:!0}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Módulo"}),e.jsx("select",{value:h,onChange:t=>O(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:A.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Define a qué módulo del sistema pertenece este template"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Categoría"}),e.jsx("select",{value:f,onChange:t=>E(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:B.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subcategoría"}),e.jsx("select",{value:n,onChange:t=>o(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:F.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))})]})]}),n==="certification"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Certificación"}),e.jsx("select",{value:u,onChange:t=>c(t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:se.map(t=>e.jsx("option",{value:t.value,children:t.label},t.value))}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Solo los tipos de certificación con template aparecerán en el selector de solicitudes"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripcion (opcional)"}),e.jsx("textarea",{value:N,onChange:t=>S(t.target.value),placeholder:"Descripcion del proposito del template...",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(w,{type:"button",variant:"secondary",onClick:m,children:"Cancelar"}),e.jsxs(w,{type:"submit",loading:_.isPending,children:[e.jsx(K,{className:"w-4 h-4"}),"Crear Template"]})]})]})]})}):null}function fe({isOpen:x,onClose:g,template:l}){const p=G(),[d,M]=r.useState(""),[N,S]=r.useState(""),[h,y]=r.useState("hr"),[f,C]=r.useState("laboral"),[n,o]=r.useState(""),[u,c]=r.useState(""),[q,k]=r.useState(""),[T,_]=r.useState(""),{data:m}=z({queryKey:["template-categories"],queryFn:()=>v.getCategories()}),{data:U}=z({queryKey:["companies"],queryFn:()=>ie.list({active:"true"})}),A=P({mutationFn:s=>v.update(l?.id,{template:s}),onSuccess:()=>{p.invalidateQueries(["templates"]),g()},onError:s=>{_(s.response?.data?.error||"Error al actualizar template")}}),B=m?.data?.modules||[],L=m?.data?.grouped||{},D=m?.data?.main_categories||[],F=m?.data?.category_to_module||{},O=L[f]||[],E=U?.data?.data||[];r.useEffect(()=>{x&&l&&(M(l.name||""),S(l.description||""),y(l.module_type||"hr"),C(l.main_category||"laboral"),o(l.category||"other"),c(l.certification_type||""),k(l.company_id||""),_(""))},[x,l?.id]);const t=s=>{y(s);const j=Object.entries(F).find(([a,i])=>i===s);if(j){C(j[0]);const a=L[j[0]]||[];a.length>0&&o(a[0].value)}},b=s=>{C(s),F[s]&&y(F[s]);const j=L[s]||[];j.length>0&&!j.find(a=>a.value===n)&&o(j[0].value)},R=s=>{if(s.preventDefault(),!d.trim()){_("El nombre es requerido");return}const j={name:d,description:N,module_type:h,main_category:f,category:n,company_id:q||null};n==="certification"&&(j.certification_type=u||null),A.mutate(j)};return!x||!l?null:e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Editar Template"}),e.jsx("button",{onClick:g,className:"p-1 hover:bg-gray-100 rounded",children:e.jsx(H,{className:"w-5 h-5"})})]}),e.jsxs("form",{onSubmit:R,className:"p-4 space-y-4",children:[T&&e.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-700",children:[e.jsx(Y,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:T})]}),e.jsx(ee,{label:"Nombre del Template",value:d,onChange:s=>M(s.target.value),placeholder:"Ej: Certificacion Laboral Estandar",required:!0}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Módulo"}),e.jsx("select",{value:h,onChange:s=>t(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:B.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Define a qué módulo del sistema pertenece este template"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Categoría"}),e.jsx("select",{value:f,onChange:s=>b(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:D.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subcategoría"}),e.jsx("select",{value:n,onChange:s=>o(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:O.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))})]})]}),n==="certification"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Certificación"}),e.jsx("select",{value:u,onChange:s=>c(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:se.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Solo los tipos de certificación con template aparecerán en el selector de solicitudes"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descripcion (opcional)"}),e.jsx("textarea",{value:N,onChange:s=>S(s.target.value),placeholder:"Descripcion del proposito del template...",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Compañía"}),e.jsxs("select",{value:q,onChange:s=>k(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"Sin compañía"}),E.map(s=>e.jsxs("option",{value:s.id,children:[s.name,s.nit?` (${s.nit})`:""]},s.id))]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx(w,{type:"button",variant:"secondary",onClick:g,children:"Cancelar"}),e.jsxs(w,{type:"submit",loading:A.isPending,children:[e.jsx(ae,{className:"w-4 h-4"}),"Guardar Cambios"]})]})]})]})})}function be({isOpen:x,onClose:g,template:l}){const[p,d]=r.useState(null),[M,N]=r.useState(!1),[S,h]=r.useState("");r.useEffect(()=>(x&&l?.file_name&&y(),()=>{p&&URL.revokeObjectURL(p)}),[x,l?.id]);const y=async()=>{N(!0),h("");try{const n=await v.preview(l.id),o=new Blob([n.data],{type:"application/pdf"}),u=URL.createObjectURL(o);d(u)}catch(n){h(n.response?.data?.error||"Error al cargar la previsualización")}finally{N(!1)}},f=()=>{p&&(URL.revokeObjectURL(p),d(null)),h(""),g()},C=async()=>{try{const n=await v.download(l.id),o=new Blob([n.data],{type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"}),u=URL.createObjectURL(o),c=document.createElement("a");c.href=u,c.download=l.file_name||`${l.name}.docx`,document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(u)}catch{alert("Error al descargar el archivo")}};return x?e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-5xl h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Previsualización"}),e.jsx("p",{className:"text-sm text-gray-500",children:l?.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(w,{variant:"secondary",size:"sm",onClick:C,children:[e.jsx(he,{className:"w-4 h-4"}),"Descargar Word"]}),e.jsx("button",{onClick:f,className:"p-1 hover:bg-gray-100 rounded",children:e.jsx(H,{className:"w-5 h-5"})})]})]}),e.jsx("div",{className:"flex-1 overflow-hidden p-4",children:M?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Generando previsualización..."})]})}):S?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Y,{className:"w-12 h-12 text-red-400 mx-auto mb-4"}),e.jsx("p",{className:"text-red-600",children:S}),e.jsx(w,{variant:"secondary",className:"mt-4",onClick:y,children:"Reintentar"})]})}):p?e.jsx("iframe",{src:p,className:"w-full h-full rounded-lg border",title:"Preview"}):e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("p",{className:"text-gray-500",children:"No hay archivo para previsualizar"})})})]})}):null}const je={laboral:"bg-blue-100 text-blue-700",comercial:"bg-purple-100 text-purple-700",administrativo:"bg-amber-100 text-amber-700"},ve={hr:"bg-emerald-100 text-emerald-700",legal:"bg-indigo-100 text-indigo-700",admin:"bg-slate-100 text-slate-700"},I=[{id:"legal",label:"Gestión Legal",mainCategory:"comercial",icon:"Building2",color:"indigo",description:"Templates para contratos y documentos legales"},{id:"hr",label:"Recursos Humanos",mainCategory:"laboral",icon:"Users",color:"emerald",description:"Templates para documentos de RRHH"}];function Le({module:x="legal"}){const g=G(),l=ne(),[p,d]=r.useState(!1),[M,N]=r.useState(!1),[S,h]=r.useState(!1),[y,f]=r.useState(null),[C,n]=r.useState(null),[o,u]=r.useState(""),[c,q]=r.useState(""),[k,T]=r.useState(""),_=x,m=I.find(a=>a.id===_)||I[0],{data:U,isLoading:A}=z({queryKey:["templates",{q:o,status:c,main_category:m.mainCategory,category:k}],queryFn:()=>v.list({q:o||void 0,status:c||void 0,main_category:m.mainCategory,category:k||void 0})}),{data:B}=z({queryKey:["template-categories"],queryFn:()=>v.getCategories()}),L=P({mutationFn:a=>v.activate(a),onSuccess:()=>g.invalidateQueries(["templates"])}),D=P({mutationFn:a=>v.archive(a),onSuccess:()=>g.invalidateQueries(["templates"])}),F=P({mutationFn:a=>v.duplicate(a),onSuccess:()=>g.invalidateQueries(["templates"])}),O=P({mutationFn:a=>v.delete(a),onSuccess:()=>g.invalidateQueries(["templates"]),onError:a=>{alert(a.response?.data?.error||"Error al eliminar template")}}),E=(a,i)=>{switch(a){case"preview":n(i),h(!0);break;case"edit":f(i),N(!0);break;case"activate":L.mutate(i.id);break;case"archive":D.mutate(i.id);break;case"duplicate":F.mutate(i.id);break;case"delete":confirm("¿Esta seguro de eliminar este template?")&&O.mutate(i.id);break}},t=U?.data?.data||[],R=(B?.data?.grouped||{})[m.mainCategory]||[],s=U?.data?.meta||{},j=a=>{l(`/admin/templates/${a}`)};return r.useEffect(()=>{T(""),u(""),q("")},[x]),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["Templates - ",m.label]}),e.jsx("p",{className:"text-gray-500",children:m.description})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[_==="legal"&&e.jsx(Q,{to:"/legal/contracts",children:e.jsxs(w,{variant:"secondary",children:[e.jsx(oe,{className:"w-4 h-4"}),"Contratos"]})}),e.jsx(Q,{to:"/admin/companies",children:e.jsxs(w,{variant:"secondary",children:[e.jsx(X,{className:"w-4 h-4"}),"Compañías"]})}),e.jsx(Q,{to:"/admin/signatory-types",children:e.jsxs(w,{variant:"secondary",children:[e.jsx(Z,{className:"w-4 h-4"}),"Tipos de Firmantes"]})}),e.jsxs(w,{onClick:()=>d(!0),children:[e.jsx(K,{className:"w-4 h-4"}),"Nuevo Template"]})]})]}),e.jsx("div",{className:"flex gap-4",children:I.map(a=>{const i=_===a.id,te=a.color==="indigo"?i?"border-indigo-500 bg-indigo-50":"border-transparent hover:border-gray-300 hover:bg-gray-50":i?"border-emerald-500 bg-emerald-50":"border-transparent hover:border-gray-300 hover:bg-gray-50",re=a.color==="indigo"?i?"bg-indigo-100 text-indigo-600":"bg-gray-100 text-gray-500":i?"bg-emerald-100 text-emerald-600":"bg-gray-100 text-gray-500",le=a.color==="indigo"?i?"text-indigo-900":"text-gray-700":i?"text-emerald-900":"text-gray-700";return e.jsx("button",{onClick:()=>j(a.id),className:`flex-1 p-4 border-2 rounded-xl transition-all ${te}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${re}`,children:a.id==="legal"?e.jsx(X,{className:"w-5 h-5"}):e.jsx(Z,{className:"w-5 h-5"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:`font-semibold ${le}`,children:a.label}),e.jsx("p",{className:"text-xs text-gray-500",children:a.description})]})]})},a.id)})}),e.jsx(V,{children:e.jsx(W,{className:"p-4",children:e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsx("div",{className:"flex-1 min-w-[200px]",children:e.jsxs("div",{className:"relative",children:[e.jsx(ce,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Buscar templates...",value:o,onChange:a=>u(a.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"})]})}),e.jsxs("select",{value:c,onChange:a=>q(a.target.value),className:"px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"Todos los estados"}),e.jsx("option",{value:"draft",children:"Borrador"}),e.jsx("option",{value:"active",children:"Activo"}),e.jsx("option",{value:"archived",children:"Archivado"})]}),e.jsxs("select",{value:k,onChange:a=>T(a.target.value),className:"px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"",children:"Todas las subcategorías"}),R.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))]})]})})}),e.jsx(V,{children:e.jsx(W,{className:"p-0",children:A?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500"})}):t.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx($,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay templates"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Crea tu primer template para comenzar a generar documentos"}),e.jsxs(w,{onClick:()=>d(!0),children:[e.jsx(K,{className:"w-4 h-4"}),"Crear Template"]})]}):e.jsxs("table",{className:"w-full table-fixed",children:[e.jsx("thead",{className:"bg-gray-50 border-b",children:e.jsxs("tr",{children:[e.jsx("th",{className:"w-[25%] px-3 py-2.5 text-left text-xs font-medium text-gray-500 uppercase",children:"Template"}),e.jsx("th",{className:"w-[12%] px-3 py-2.5 text-left text-xs font-medium text-gray-500 uppercase",children:"Compañía"}),e.jsx("th",{className:"w-[10%] px-3 py-2.5 text-left text-xs font-medium text-gray-500 uppercase",children:"Módulo"}),e.jsx("th",{className:"w-[13%] px-3 py-2.5 text-left text-xs font-medium text-gray-500 uppercase",children:"Categoría"}),e.jsx("th",{className:"w-[5%] px-3 py-2.5 text-center text-xs font-medium text-gray-500 uppercase",children:"Vars"}),e.jsx("th",{className:"w-[5%] px-3 py-2.5 text-center text-xs font-medium text-gray-500 uppercase",children:"Firm."}),e.jsx("th",{className:"w-[10%] px-3 py-2.5 text-left text-xs font-medium text-gray-500 uppercase",children:"Estado"}),e.jsx("th",{className:"w-[20%] px-3 py-2.5 text-right text-xs font-medium text-gray-500 uppercase",children:"Acciones"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:t.map(a=>{const i=J[a.status]||J.draft;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-3 py-3",children:e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx("div",{className:"p-1.5 bg-primary-50 rounded flex-shrink-0",children:a.file_name?e.jsx($,{className:"w-4 h-4 text-primary-600"}):e.jsx($,{className:"w-4 h-4 text-gray-400"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900 text-sm truncate",title:a.name,children:a.name}),a.file_name&&e.jsx("p",{className:"text-xs text-gray-400 truncate",title:a.file_name,children:a.file_name})]})]})}),e.jsx("td",{className:"px-3 py-3",children:a.company_name?e.jsx("span",{className:"text-sm text-gray-700 truncate block",title:a.company_name,children:a.company_name}):e.jsx("span",{className:"text-xs text-gray-400",children:"-"})}),e.jsx("td",{className:"px-3 py-3",children:e.jsx("span",{className:`inline-flex px-1.5 py-0.5 rounded text-xs font-medium ${ve[a.module_type]||"bg-gray-100 text-gray-700"}`,children:a.module_type_label})}),e.jsx("td",{className:"px-3 py-3",children:e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsx("span",{className:`inline-flex px-1.5 py-0.5 rounded text-xs font-medium w-fit ${je[a.main_category]||"bg-gray-100 text-gray-700"}`,children:a.main_category_label}),e.jsx("span",{className:"text-xs text-gray-500",children:a.category_label})]})}),e.jsx("td",{className:"px-3 py-3 text-center",children:e.jsx("span",{className:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-gray-100 text-xs font-medium text-gray-700",children:a.variables?.length||0})}),e.jsx("td",{className:"px-3 py-3 text-center",children:e.jsx("span",{className:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-gray-100 text-xs font-medium text-gray-700",children:a.signatories_count||0})}),e.jsx("td",{className:"px-3 py-3",children:e.jsx("span",{className:`inline-flex px-2 py-0.5 rounded-full text-xs font-medium ${i.color}`,children:i.label})}),e.jsx("td",{className:"px-3 py-3",children:e.jsxs("div",{className:"flex items-center justify-end gap-0.5",children:[a.file_name&&e.jsx("button",{onClick:()=>E("preview",a),title:"Previsualizar",className:"p-1.5 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded",children:e.jsx(de,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>E("edit",a),title:"Editar",className:"p-1.5 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded",children:e.jsx(ae,{className:"w-4 h-4"})}),e.jsx(Q,{to:`/admin/templates/${a.id}`,children:e.jsx("button",{title:"Configurar",className:"p-1.5 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded",children:e.jsx(ue,{className:"w-4 h-4"})})}),a.status==="draft"&&a.file_name&&e.jsx("button",{onClick:()=>E("activate",a),title:"Activar",className:"p-1.5 text-green-600 hover:text-green-700 hover:bg-green-50 rounded",children:e.jsx(me,{className:"w-4 h-4"})}),a.status==="active"&&e.jsx("button",{onClick:()=>E("archive",a),title:"Archivar",className:"p-1.5 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded",children:e.jsx(xe,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>E("duplicate",a),title:"Duplicar",className:"p-1.5 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded",children:e.jsx(ge,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>E("delete",a),title:"Eliminar",className:"p-1.5 text-red-500 hover:text-red-700 hover:bg-red-50 rounded",children:e.jsx(pe,{className:"w-4 h-4"})})]})})]},a.id)})})]})})}),s.total>0&&e.jsxs("div",{className:"text-sm text-gray-500 text-center",children:["Mostrando ",t.length," de ",s.total," templates"]}),e.jsx(ye,{isOpen:p,onClose:()=>d(!1),onSuccess:a=>{window.location.href=`/admin/templates/${a.id}`}}),e.jsx(fe,{isOpen:M,onClose:()=>{N(!1),f(null)},template:y}),e.jsx(be,{isOpen:S,onClose:()=>{h(!1),n(null)},template:C})]})}export{Le as default};
